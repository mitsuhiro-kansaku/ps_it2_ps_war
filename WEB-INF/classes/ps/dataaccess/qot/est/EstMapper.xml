<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ps.dataaccess.qot.est.EstMapper">

    <!--ヘッダー部データマップ-->
    <resultMap type="fw.domain.slip.quot.quotreq.QuotReq" id="QuotReq_Map">
        <id column="QUOT_REQ_SEQ" property="quotReqIdentify.quotReqSeqNo.seqNumber"/>
        <id column="QUOT_REQ_NO" property="quotReqIdentify.quotReqNo.quotReqNo"/>
        <id column="QUOT_ACQ_APL_SEQ" property="quotReqIdentify.quotAcqAplSeq"/>
        <id column="QUOT_ACQ_APL_NO" property="quotAcqAplNo.quotAcqAplNo"/>
        <id column="PUR_APL_NO" property="purAplNo.purAplNo"/>
        <id column="QUOT_REQ_VERSION" property="quotReqIdentify.historyNo.historyNo"/>
        <id column="QUOT_TYPE_IND" property="quotInd.quotInd"/>
        <id column="CORRECT_CD" property="correctInd.correctInd"/>
        <id column="QUOT_REQ_STATUS" property="quotReqStatus.status"/>      
        <id column="TITLE_NAME" property="titleName.titleName"/>
        <id column="QUOT_RESP_LIMIT_DATE" property="respLimitDate.respLimitDate.dateOfymd"/>
        <id column="QUOT_REQ_RESP_LIMIT_DATE" property="respLimitDate.respLimitDate.dateOfymd"/>
        <id column="DELIV_PLACE_ZIP_CD" property="delivPlace.contact.zipCd.zipCd"/>
        <id column="DELIV_PLACE_COMPANY_CD" property="delivPlace.delivPlaceCompanyCd"/>
        <id column="DELIV_PLACE_CD" property="delivPlace.delivPlaceCd"/>
        <id column="DELIV_PLACE_NAME" property="delivPlace.delivPlaceName"/>
        <id column="FOR_SUPPRIER_COMMENT" property="forSupplierComment.forSupplierComment.comment"/>
        <id column="ATTACH_FILE_SEQ1" property="rangeByAttachFile1.attachFile.seqNo"/>
        <id column="ATTACH_FILE_SEQ2" property="rangeByAttachFile2.attachFile.seqNo"/>
        <id column="ATTACH_FILE_NAME1" property="rangeByAttachFile1.attachFile.fileName"/>
        <id column="ATTACH_SCOPE1" property="rangeByAttachFile1.attachRange.attachRange"/>
        <id column="ATTACH_FILE_NAME2" property="rangeByAttachFile2.attachFile.fileName"/>
        <id column="ATTACH_SCOPE2" property="rangeByAttachFile2.attachRange.attachRange"/>
        <id column="ITEM_CLASS_L" property="itemKind.itemClassL"/>
        <id column="ITEM_CLASS_L_NAME" property="itemKind.itemClassLName"/>
        <id column="ITEM_CLASS_M" property="itemKind.itemClassM"/>
        <id column="ITEM_CLASS_M_NAME" property="itemKind.itemClassMName"/>
        <id column="ITEM_CLASS_S" property="itemKind.itemClassS"/>
        <id column="ITEM_CLASS_S_NAME" property="itemKind.itemClassSName"/>
        <id column="REQ_COMPANY_CD" property="reqUser.reqUser.section.company.companyCd"/>
        <id column="REQ_COMPANY_NAME" property="reqUser.reqUser.section.company.companyName"/>
        <id column="REQ_SECTION_PLACE_CD" property="reqUser.reqUser.section.sectionPlace.sectionPlaceCd"/>
        <id column="REQ_SECTION_PLACE_NAME" property="reqUser.reqUser.section.sectionPlace.sectionPlaceName"/>
        <id column="REQ_SECTION_CD" property="reqUser.reqUser.section.sectionCd"/>
        <id column="REQ_SECTION_NAME" property="reqUser.reqUser.section.sectionName"/>
        <id column="REQ_USER_EXTENSION_NO" property="reqUser.reqUser.extNo.extensionNo"/>        
        <id column="REQ_USER_TEL_NO" property="reqUser.reqUser.externalNo.externalNo"/>
        <id column="REQ_USER_ID" property="reqUser.reqUser.userID"/>        
        <id column="INPUT_USER_ID" property="receipt.remand.remandUser.remandUser.userID"/>
        <id column="INPUT_USER_NAME" property="receipt.remand.remandUser.remandUser.userName"/>
        <id column="REQ_USER_NAME" property="reqUser.reqUser.userName"/>
        <id column="MAIL_ADDR" property="reqUser.reqUser.mailAddr"/>
        <id column="FOR_BUYER_COMMENT" property="forBuyerComment.forBuyerComment.comment"/>
        <id column="CURRENCY_CD" property="currency.currencyCd"/>
        <id column="CURRENCY_MARK" property="currency.currencyMark"/>
        <id column="APP_ROUTE_NO" property="approute.appRouteNo"/>
        <id column="APP_ROUTE_NAME" property="approute.appRouteName"/>
        <id column="LAST_UPD_DATE" property="quotReqIdentify.lastUpdDate"/>
        <id column="QUOT_REQ_SEQ" property="preSeq"/>
        <id column="QUOT_REQ_SEQ_FOR_EXCLUSIVE"  property="quotReqExclusiveIdentify.quotReqSeqNo.seqNumber"/>
        <id column="QUOT_REQ_LAST_UPD_DATE"  property="quotReqExclusiveIdentify.lastUpdDate"/>
        <id column="SLIP_NO" property="slipMngIdentify.slipNo"/>
        <id column="SLIP_MNG_LAST_UPD_DATE" property="slipMngIdentify.lastUpdDate"/>
        <id column="EXT_TXT_1" property="editExtItem.editTextExtItem.textExtItem1.value"/>
        <id column="EXT_TXT_2" property="editExtItem.editTextExtItem.textExtItem2.value"/>
        <id column="EXT_TXT_3" property="editExtItem.editTextExtItem.textExtItem3.value"/>
        <id column="EXT_TXT_4" property="editExtItem.editTextExtItem.textExtItem4.value"/>
        <id column="EXT_TXT_5" property="editExtItem.editTextExtItem.textExtItem5.value"/>
        <id column="EXT_TXT_6" property="editExtItem.editTextExtItem.textExtItem6.value"/>
        <id column="EXT_TXT_7" property="editExtItem.editTextExtItem.textExtItem7.value"/>
        <id column="EXT_TXT_8" property="editExtItem.editTextExtItem.textExtItem8.value"/>
        <id column="EXT_TXT_9" property="editExtItem.editTextExtItem.textExtItem9.value"/>
        <id column="EXT_TXT_10" property="editExtItem.editTextExtItem.textExtItem10.value"/>
        <id column="EXT_AREA_1" property="editExtItem.editAreaExtItem.arrayExtItem1.value"/>
        <id column="EXT_AREA_2" property="editExtItem.editAreaExtItem.arrayExtItem2.value"/>
        <id column="EXT_AREA_3" property="editExtItem.editAreaExtItem.arrayExtItem3.value"/>
        <id column="EXT_AREA_4" property="editExtItem.editAreaExtItem.arrayExtItem4.value"/>
        <id column="EXT_AREA_5" property="editExtItem.editAreaExtItem.arrayExtItem5.value"/>
        <id column="EXT_DATE_1" property="editExtItem.editDateExtItem.dateExtItem1.dateType.dateOfymd"/>
        <id column="EXT_DATE_2" property="editExtItem.editDateExtItem.dateExtItem2.dateType.dateOfymd"/>
        <id column="EXT_DATE_3" property="editExtItem.editDateExtItem.dateExtItem3.dateType.dateOfymd"/>
        <id column="EXT_DATE_4" property="editExtItem.editDateExtItem.dateExtItem4.dateType.dateOfymd"/>
        <id column="EXT_DATE_5" property="editExtItem.editDateExtItem.dateExtItem5.dateType.dateOfymd"/>
        <id column="EXT_INT_1" property="editExtItem.editIntExtItem.intExtItem1.value"/>
        <id column="EXT_INT_2" property="editExtItem.editIntExtItem.intExtItem2.value"/>
        <id column="EXT_INT_3" property="editExtItem.editIntExtItem.intExtItem3.value"/>
        <id column="EXT_INT_4" property="editExtItem.editIntExtItem.intExtItem4.value"/>
        <id column="EXT_INT_5" property="editExtItem.editIntExtItem.intExtItem5.value"/>
        <id column="EXT_INT_6" property="editExtItem.editIntExtItem.intExtItem6.value"/>
        <id column="EXT_INT_7" property="editExtItem.editIntExtItem.intExtItem7.value"/>
        <id column="EXT_INT_8" property="editExtItem.editIntExtItem.intExtItem8.value"/>
        <id column="EXT_INT_9" property="editExtItem.editIntExtItem.intExtItem9.value"/>
        <id column="EXT_INT_10" property="editExtItem.editIntExtItem.intExtItem10.value"/>
        <id column="EXT_DEC_1" property="editExtItem.editDecExtItem.decExtItem1.value"/>
        <id column="EXT_DEC_2" property="editExtItem.editDecExtItem.decExtItem2.value"/>
        <id column="EXT_DEC_3" property="editExtItem.editDecExtItem.decExtItem3.value"/>
        <id column="EXT_DEC_4" property="editExtItem.editDecExtItem.decExtItem4.value"/>
        <id column="EXT_DEC_5" property="editExtItem.editDecExtItem.decExtItem5.value"/>
        <id column="EXT_SEL_1" property="editExtItem.editSelExtItem.selExtItem1.value"/>
        <id column="EXT_SEL_2" property="editExtItem.editSelExtItem.selExtItem2.value"/>
        <id column="EXT_SEL_3" property="editExtItem.editSelExtItem.selExtItem3.value"/>
        <id column="EXT_SEL_4" property="editExtItem.editSelExtItem.selExtItem4.value"/>
        <id column="EXT_SEL_5" property="editExtItem.editSelExtItem.selExtItem5.value"/>
        <id column="EXT_SEL_6" property="editExtItem.editSelExtItem.selExtItem6.value"/>
        <id column="EXT_SEL_7" property="editExtItem.editSelExtItem.selExtItem7.value"/>
        <id column="EXT_SEL_8" property="editExtItem.editSelExtItem.selExtItem8.value"/>
        <id column="EXT_SEL_9" property="editExtItem.editSelExtItem.selExtItem9.value"/>
        <id column="EXT_SEL_10" property="editExtItem.editSelExtItem.selExtItem10.value"/>
        <id column="EXT_CHK_1" property="editExtItem.editChkExtItem.chkExtItem1.value"/>
        <id column="EXT_CHK_2" property="editExtItem.editChkExtItem.chkExtItem2.value"/>
        <id column="EXT_CHK_3" property="editExtItem.editChkExtItem.chkExtItem3.value"/>
        <id column="EXT_CHK_4" property="editExtItem.editChkExtItem.chkExtItem4.value"/>
        <id column="EXT_CHK_5" property="editExtItem.editChkExtItem.chkExtItem5.value"/>
        <id column="EXT_FILE_1" property="editExtItem.editFileExtItem.fileExtItem1.fileName"/>
        <id column="EXT_FILE_2" property="editExtItem.editFileExtItem.fileExtItem2.fileName"/>
        <id column="EXT_FILE_3" property="editExtItem.editFileExtItem.fileExtItem3.fileName"/>
        <id column="EXT_FILE_BINARY_1" property="editExtItem.editFileExtItem.fileExtItem1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="editExtItem.editFileExtItem.fileExtItem2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="editExtItem.editFileExtItem.fileExtItem3.binary"/>
        <id column="EXT_MST_1" property="editExtItem.editMstExtItem.mstExtItem1.mstKey"/>
        <id column="EXT_MST_2" property="editExtItem.editMstExtItem.mstExtItem2.mstKey"/>
        <id column="EXT_MST_3" property="editExtItem.editMstExtItem.mstExtItem3.mstKey"/>
        <id column="EXT_MST_4" property="editExtItem.editMstExtItem.mstExtItem4.mstKey"/>
        <id column="EXT_MST_5" property="editExtItem.editMstExtItem.mstExtItem5.mstKey"/>
        <id column="EXT_MST_6" property="editExtItem.editMstExtItem.mstExtItem6.mstKey"/>
        <id column="EXT_MST_7" property="editExtItem.editMstExtItem.mstExtItem7.mstKey"/>
        <id column="EXT_MST_8" property="editExtItem.editMstExtItem.mstExtItem8.mstKey"/>
        <id column="EXT_MST_NAME_1" property="editExtItem.editMstExtItem.mstExtItem1.mstName"/>
        <id column="EXT_MST_NAME_2" property="editExtItem.editMstExtItem.mstExtItem2.mstName"/>
        <id column="EXT_MST_NAME_3" property="editExtItem.editMstExtItem.mstExtItem3.mstName"/>
        <id column="EXT_MST_NAME_4" property="editExtItem.editMstExtItem.mstExtItem4.mstName"/>
        <id column="EXT_MST_NAME_5" property="editExtItem.editMstExtItem.mstExtItem5.mstName"/>
        <id column="EXT_MST_NAME_6" property="editExtItem.editMstExtItem.mstExtItem6.mstName"/>
        <id column="EXT_MST_NAME_7" property="editExtItem.editMstExtItem.mstExtItem7.mstName"/>
        <id column="EXT_MST_NAME_8" property="editExtItem.editMstExtItem.mstExtItem8.mstName"/>        
    </resultMap> 
    
    <!--品名明細部データマップ-->
    <resultMap type="fw.domain.slip.quot.quotreq.QuotReqItem" id="QuotReqItem_Map">
        <id column="QUOT_REQ_DTL_NO" property="quotReqItemIdentify.detailedNumber"/>
        <id column="ITEM_CD" property="itemName.itemCd"/>
        <id column="ITEM_NAME" property="itemName.itemName"/>  
        <id column="KATASHIKI" property="itemName.katashiki"/>
        <id column="MANUFACT_CD" property="itemName.manufact.manufactCd"/>
        <id column="MANUFACT_NAME" property="itemName.manufact.manufactName"/>  
        <id column="REQ_VOL" property="quotHopeCondition.hopeVol.vol"/>
        <id column="UNIT_PRICE" property="quotHopeCondition.hopePrice.amount"/>
        <id column="REQ_AMOUNT" property="quotHopeCondition.hopeAmount.amount"/>
        <id column="CURRENCY_CD" property="currency.currencyCd"/>  
        <id column="CURRENCY_MARK" property="currency.currencyMark"/>  
        <id column="UNIT_CD" property="quotHopeCondition.hopeUnit.unitCd"/>    
        <id column="UNIT_NAME" property="quotHopeCondition.hopeUnit.unitName"/>    
        <id column="REQ_DELIV_DATE" property="quotHopeCondition.hopeDlvEst.dateOfymd"/>
        <id column="ATTACH_FILE_SEQ" property="rangeByAttachFile.attachFile.seqNo"/>    
        <id column="ATTACH_FILE_NAME" property="rangeByAttachFile.attachFile.fileName"/>    
        <id column="ATTACH_SCOPE" property="rangeByAttachFile.attachRange.attachRange"/>
        <id column="EXCLUSIVE_SLIP_NO" property="exclusiveSlipId.slipNo"/>
        <id column="EXCLUSIVE_LAST_UPD_DATE" property="exclusiveSlipId.lastUpdDate"/>
        <id column="EXT_TXT_1" property="editExtItem.editTextExtItem.textExtItem1.value"/>
        <id column="EXT_TXT_2" property="editExtItem.editTextExtItem.textExtItem2.value"/>
        <id column="EXT_TXT_3" property="editExtItem.editTextExtItem.textExtItem3.value"/>
        <id column="EXT_TXT_4" property="editExtItem.editTextExtItem.textExtItem4.value"/>
        <id column="EXT_TXT_5" property="editExtItem.editTextExtItem.textExtItem5.value"/>
        <id column="EXT_TXT_6" property="editExtItem.editTextExtItem.textExtItem6.value"/>
        <id column="EXT_TXT_7" property="editExtItem.editTextExtItem.textExtItem7.value"/>
        <id column="EXT_TXT_8" property="editExtItem.editTextExtItem.textExtItem8.value"/>
        <id column="EXT_TXT_9" property="editExtItem.editTextExtItem.textExtItem9.value"/>
        <id column="EXT_TXT_10" property="editExtItem.editTextExtItem.textExtItem10.value"/>
        <id column="EXT_AREA_1" property="editExtItem.editAreaExtItem.arrayExtItem1.value"/>
        <id column="EXT_AREA_2" property="editExtItem.editAreaExtItem.arrayExtItem2.value"/>
        <id column="EXT_AREA_3" property="editExtItem.editAreaExtItem.arrayExtItem3.value"/>
        <id column="EXT_AREA_4" property="editExtItem.editAreaExtItem.arrayExtItem4.value"/>
        <id column="EXT_AREA_5" property="editExtItem.editAreaExtItem.arrayExtItem5.value"/>
        <id column="EXT_DATE_1" property="editExtItem.editDateExtItem.dateExtItem1.dateType.dateOfymd"/>
        <id column="EXT_DATE_2" property="editExtItem.editDateExtItem.dateExtItem2.dateType.dateOfymd"/>
        <id column="EXT_DATE_3" property="editExtItem.editDateExtItem.dateExtItem3.dateType.dateOfymd"/>
        <id column="EXT_DATE_4" property="editExtItem.editDateExtItem.dateExtItem4.dateType.dateOfymd"/>
        <id column="EXT_DATE_5" property="editExtItem.editDateExtItem.dateExtItem5.dateType.dateOfymd"/>
        <id column="EXT_INT_1" property="editExtItem.editIntExtItem.intExtItem1.value"/>
        <id column="EXT_INT_2" property="editExtItem.editIntExtItem.intExtItem2.value"/>
        <id column="EXT_INT_3" property="editExtItem.editIntExtItem.intExtItem3.value"/>
        <id column="EXT_INT_4" property="editExtItem.editIntExtItem.intExtItem4.value"/>
        <id column="EXT_INT_5" property="editExtItem.editIntExtItem.intExtItem5.value"/>
        <id column="EXT_INT_6" property="editExtItem.editIntExtItem.intExtItem6.value"/>
        <id column="EXT_INT_7" property="editExtItem.editIntExtItem.intExtItem7.value"/>
        <id column="EXT_INT_8" property="editExtItem.editIntExtItem.intExtItem8.value"/>
        <id column="EXT_INT_9" property="editExtItem.editIntExtItem.intExtItem9.value"/>
        <id column="EXT_INT_10" property="editExtItem.editIntExtItem.intExtItem10.value"/>
        <id column="EXT_DEC_1" property="editExtItem.editDecExtItem.decExtItem1.value"/>
        <id column="EXT_DEC_2" property="editExtItem.editDecExtItem.decExtItem2.value"/>
        <id column="EXT_DEC_3" property="editExtItem.editDecExtItem.decExtItem3.value"/>
        <id column="EXT_DEC_4" property="editExtItem.editDecExtItem.decExtItem4.value"/>
        <id column="EXT_DEC_5" property="editExtItem.editDecExtItem.decExtItem5.value"/>
        <id column="EXT_SEL_1" property="editExtItem.editSelExtItem.selExtItem1.value"/>
        <id column="EXT_SEL_2" property="editExtItem.editSelExtItem.selExtItem2.value"/>
        <id column="EXT_SEL_3" property="editExtItem.editSelExtItem.selExtItem3.value"/>
        <id column="EXT_SEL_4" property="editExtItem.editSelExtItem.selExtItem4.value"/>
        <id column="EXT_SEL_5" property="editExtItem.editSelExtItem.selExtItem5.value"/>
        <id column="EXT_SEL_6" property="editExtItem.editSelExtItem.selExtItem6.value"/>
        <id column="EXT_SEL_7" property="editExtItem.editSelExtItem.selExtItem7.value"/>
        <id column="EXT_SEL_8" property="editExtItem.editSelExtItem.selExtItem8.value"/>
        <id column="EXT_SEL_9" property="editExtItem.editSelExtItem.selExtItem9.value"/>
        <id column="EXT_SEL_10" property="editExtItem.editSelExtItem.selExtItem10.value"/>
        <id column="EXT_CHK_1" property="editExtItem.editChkExtItem.chkExtItem1.value"/>
        <id column="EXT_CHK_2" property="editExtItem.editChkExtItem.chkExtItem2.value"/>
        <id column="EXT_CHK_3" property="editExtItem.editChkExtItem.chkExtItem3.value"/>
        <id column="EXT_CHK_4" property="editExtItem.editChkExtItem.chkExtItem4.value"/>
        <id column="EXT_CHK_5" property="editExtItem.editChkExtItem.chkExtItem5.value"/>
        <id column="EXT_FILE_1" property="editExtItem.editFileExtItem.fileExtItem1.fileName"/>
        <id column="EXT_FILE_2" property="editExtItem.editFileExtItem.fileExtItem2.fileName"/>
        <id column="EXT_FILE_3" property="editExtItem.editFileExtItem.fileExtItem3.fileName"/>
        <id column="EXT_FILE_BINARY_1" property="editExtItem.editFileExtItem.fileExtItem1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="editExtItem.editFileExtItem.fileExtItem2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="editExtItem.editFileExtItem.fileExtItem3.binary"/>
        <id column="EXT_MST_1" property="editExtItem.editMstExtItem.mstExtItem1.mstKey"/>
        <id column="EXT_MST_2" property="editExtItem.editMstExtItem.mstExtItem2.mstKey"/>
        <id column="EXT_MST_3" property="editExtItem.editMstExtItem.mstExtItem3.mstKey"/>
        <id column="EXT_MST_4" property="editExtItem.editMstExtItem.mstExtItem4.mstKey"/>
        <id column="EXT_MST_5" property="editExtItem.editMstExtItem.mstExtItem5.mstKey"/>
        <id column="EXT_MST_6" property="editExtItem.editMstExtItem.mstExtItem6.mstKey"/>
        <id column="EXT_MST_7" property="editExtItem.editMstExtItem.mstExtItem7.mstKey"/>
        <id column="EXT_MST_8" property="editExtItem.editMstExtItem.mstExtItem8.mstKey"/>
        <id column="EXT_MST_NAME_1" property="editExtItem.editMstExtItem.mstExtItem1.mstName"/>
        <id column="EXT_MST_NAME_2" property="editExtItem.editMstExtItem.mstExtItem2.mstName"/>
        <id column="EXT_MST_NAME_3" property="editExtItem.editMstExtItem.mstExtItem3.mstName"/>
        <id column="EXT_MST_NAME_4" property="editExtItem.editMstExtItem.mstExtItem4.mstName"/>
        <id column="EXT_MST_NAME_5" property="editExtItem.editMstExtItem.mstExtItem5.mstName"/>
        <id column="EXT_MST_NAME_6" property="editExtItem.editMstExtItem.mstExtItem6.mstName"/>
        <id column="EXT_MST_NAME_7" property="editExtItem.editMstExtItem.mstExtItem7.mstName"/>
        <id column="EXT_MST_NAME_8" property="editExtItem.editMstExtItem.mstExtItem8.mstName"/>
    </resultMap>
    
    <!--取引先明細部データマップ見積取得申請-->
    <resultMap type="fw.domain.slip.quot.quotreq.QuotReqSupplier" id="SupplierItem_Map">
        <id column="QUOT_SUP_LINE_NO" property="quotReqSupplierIdentify.quotSupplierLineNo" />
        <id column="CORRECT_CD" property="correctInd.correctInd"/>
        <id column="APPROVAL_IND" property="approvalIndValue" />
        <id column="SUP_COMPANY_CD" property="supplierFrom.supCompanyCd"/>
        <id column="SUP_CD" property="supplierFrom.supCd"/>
        <id column="SUP_NAME" property="supplierFrom.supplierName.supplierName"/>
        <id column="SUP_ABBR_NAME" property="supplierFrom.supplierName.supplierAbbrName"/>
        <id column="SUP_ADDRESS1" property="supplierFrom.supplierContact.ctc.address1.address"/>
        <id column="SUP_ADDRESS2" property="supplierFrom.supplierContact.ctc.address2.address"/>
        <id column="SUP_SECTION_NAME" property="supplierFrom.supplierContact.supPersonName.supSectionName"/> 
        <id column="SUP_PERSON_NAME" property="supplierFrom.supplierContact.supPersonName.supPersonName"/>
        <id column="ZIP_CD" property="supplierFrom.supplierContact.ctc.zipCd.zipCd"/> 
        <id column="SUP_TEL_NO" property="supplierFrom.supplierContact.ctc.telNo.telNo"/>
        <id column="SUP_FAX_NO" property="supplierFrom.supplierContact.ctc.faxNo.faxNo"/>
        <id column="EDI_IND" property="supplierFrom.ediInd.ediInd"/>
        <id column="SUBCON_IND" property="supplierFrom.subcon.subconInd"/>
        <id column="SUP_REG_FLG" property="supplierRegistrationFlg.supplierRegistrationFlg"/>
        <id column="QUOT_ADO_IND" property="supplierAdoStatus"/>
    </resultMap>
    
    <!--取引先マスタから取得のデータマップ-->
    <resultMap type="fw.domain.mst.supplier.supplier.SupplierFrom" id="Supplier_Map">
        <id column="SUP_COMPANY_CD" property="supCompanyCd"/>
        <id column="SUP_CD" property="supCd"/>
        <id column="SUP_NAME" property="supplierName.supplierName"/>
        <id column="SUP_ABBR_NAME" property="supplierName.supplierAbbrName"/>
        <id column="ADDRESS1" property="supplierContact.ctc.address1.address"/>
        <id column="ADDRESS2" property="supplierContact.ctc.address2.address"/>
        <id column="SUP_SECTION_NAME" property="supplierContact.supPersonName.supSectionName"/> 
        <id column="SUP_PERSON_NAME" property="supplierContact.supPersonName.supPersonName"/>
        <id column="ZIP_CD" property="supplierContact.ctc.zipCd.zipCd"/> 
        <id column="TEL_NO" property="supplierContact.ctc.telNo.telNo"/>
        <id column="FAX_NO" property="supplierContact.ctc.faxNo.faxNo"/>
        <id column="SUBCON_IND" property="subcon.subconInd"/>
        <id column="EDI_IND" property="ediInd.ediInd"/>
        <id column="QUOT_FAX_IND" property="fax.quotFaxInd.faxInd"/>
    </resultMap>
    
    <!--見積取得依頼から遷移した場合用SQL-->
    <!--画面初期表示時用SQL-->
    <select id="searchQuotAcqReq" resultMap="QuotReq_Map">
        SELECT 
            T_QUOT_REQUEST.QUOT_REQ_SEQ,
            T_QUOT_REQUEST.QUOT_REQ_VERSION,
            T_QUOT_REQUEST.QUOT_REQ_STATUS,
            T_QUOT_REQUEST.QUOT_REQ_NO,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO,
            T_QUOT_ACQ_APL.TITLE_NAME, 
            T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE, 
            T_QUOT_ACQ_APL.DELIV_PLACE_COMPANY_CD,
            T_QUOT_ACQ_APL.DELIV_PLACE_CD,
            T_QUOT_ACQ_APL.DELIV_PLACE_NAME, 
            T_QUOT_ACQ_APL.FOR_SUPPRIER_COMMENT, 
            T_QUOT_ACQ_APL.ATTACH_FILE_SEQ1,
            T_QUOT_ACQ_APL.ATTACH_FILE_SEQ2,
            T_ATTACH_MNG_A.ATTACH_FILE_NAME AS ATTACH_FILE_NAME1,
            T_ATTACH_MNG_A.ATTACH_SCOPE AS ATTACH_SCOPE1,
            T_ATTACH_MNG_B.ATTACH_FILE_NAME AS ATTACH_FILE_NAME2,
            T_ATTACH_MNG_B.ATTACH_SCOPE AS ATTACH_SCOPE2,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ,
            T_QUOT_ACQ_APL.FOR_BUYER_COMMENT,
            T_QUOT_ACQ_APL.ITEM_CLASS_L,
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME, 
            T_QUOT_ACQ_APL.ITEM_CLASS_M,
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME, 
            T_QUOT_ACQ_APL.ITEM_CLASS_S,
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME,
            T_QUOT_ACQ_APL.REQ_COMPANY_CD, 
            T_QUOT_ACQ_APL.REQ_COMPANY_NAME, 
            T_QUOT_ACQ_APL.REQ_SECTION_PLACE_CD,
            T_QUOT_ACQ_APL.REQ_SECTION_PLACE_NAME, 
            T_QUOT_ACQ_APL.REQ_SECTION_CD, 
            T_QUOT_ACQ_APL.REQ_SECTION_NAME,
            T_QUOT_ACQ_APL.REQ_USER_EXTENSION_NO, 
            T_QUOT_ACQ_APL.REQ_USER_TEL_NO, 
            T_QUOT_ACQ_APL.REQ_USER_ID, 
            T_QUOT_ACQ_APL.REQ_USER_NAME,
            T_QUOT_ACQ_APL.REQ_USER_ID AS "INPUT_USER_ID", 
            T_QUOT_ACQ_APL.REQ_USER_NAME AS "INPUT_USER_NAME",
            T_QUOT_ACQ_APL.LAST_UPD_DATE,
            T_QUOT_REQUEST.QUOT_REQ_SEQ AS "QUOT_REQ_SEQ_FOR_EXCLUSIVE",
            T_QUOT_REQUEST.LAST_UPD_DATE AS "QUOT_REQ_LAST_UPD_DATE"
        FROM
            T_QUOT_ACQ_APL
            LEFT JOIN T_QUOT_REQUEST ON
              T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = T_QUOT_REQUEST.QUOT_ACQ_APL_NO
              AND T_QUOT_REQUEST.NEW_FLG = '1'
              AND T_QUOT_REQUEST.DELETE_FLG = '0'
            LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_A ON
              T_QUOT_ACQ_APL.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ
              AND T_ATTACH_MNG_A.DELETE_FLG = '0'
            LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_B ON 
              T_QUOT_ACQ_APL.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ
              AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        WHERE
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
            AND T_QUOT_ACQ_APL.DELETE_FLG = '0'
    </select>
    <!--見積依頼明細情報取得SQL -->
    <select id="searchQuotAcqReqItemList" resultMap="QuotReqItem_Map">
        SELECT
            T_QUOT_ACQ_REQUEST.ITEM_CD,
            T_QUOT_ACQ_REQUEST.ITEM_NAME,
            T_QUOT_ACQ_REQUEST.KATASHIKI,
            T_QUOT_ACQ_REQUEST.CURRENCY_CD,
            T_QUOT_ACQ_REQUEST.MANUFACT_CD,
            T_QUOT_ACQ_REQUEST.MANUFACT_NAME,
            T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ,
            T_ATTACH_MNG.ATTACH_FILE_NAME,
            T_ATTACH_MNG.ATTACH_SCOPE,
            T_QUOT_ACQ_REQUEST.UNIT_PRICE,
            T_QUOT_ACQ_REQUEST.REQ_AMOUNT,
            T_QUOT_ACQ_REQUEST.REQ_VOL,
            T_QUOT_ACQ_REQUEST.UNIT_CD,
            T_QUOT_ACQ_REQUEST.UNIT_NAME,
            T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE,
            T_SLIP_MNG.SLIP_NO AS EXCLUSIVE_SLIP_NO,
            T_SLIP_MNG.LAST_UPD_DATE AS EXCLUSIVE_LAST_UPD_DATE
        FROM 
            T_QUOT_ACQ_REQUEST
        LEFT JOIN
            T_ATTACH_MNG
        ON 
            T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ = T_ATTACH_MNG.ATTACH_FILE_SEQ
        AND T_ATTACH_MNG.DELETE_FLG = '0'
        LEFT JOIN 
            T_SLIP_MNG	
        ON 
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO = T_SLIP_MNG.SLIP_NO	
        AND T_SLIP_MNG.DELETE_FLG = '0'
        WHERE 
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
        AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
        ORDER BY 
        	T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO
    </select>
    <!-- 見積依頼番号が存在する場合、採用取引先情報取得SQL(取引先情報) -->
    <select id="searchQuotReqRespSupplierList" resultMap="SupplierItem_Map">
    SELECT 
            T_QUOT_REQ_SUP.SUP_COMPANY_CD, 
            T_QUOT_REQ_SUP.SUP_CD, 
            T_QUOT_REQ_SUP.SUP_ABBR_NAME,
            T_QUOT_REQ_SUP.SUP_TEL_NO, 
            T_QUOT_REQ_SUP.SUP_FAX_NO, 
            T_QUOT_REQ_SUP.SUP_ADDRESS1, 
            T_QUOT_REQ_SUP.SUP_ADDRESS2, 
            T_QUOT_REQ_SUP.SUP_PERSON_NAME,
            T_QUOT_REQ_SUP.SUP_REG_FLG,
            T_QUOT_REQ_SUP.EDI_IND,
            T_QUOT_RESPONSE.QUOT_ADO_IND
        FROM T_QUOT_REQUEST
        LEFT JOIN T_QUOT_REQ_SUP
            ON T_QUOT_REQUEST.QUOT_REQ_SEQ = T_QUOT_REQ_SUP.QUOT_REQ_SEQ
            AND T_QUOT_REQ_SUP.DELETE_FLG = '0'
        INNER JOIN T_QUOT_RESPONSE
            ON T_QUOT_RESPONSE.QUOT_REQ_NO = T_QUOT_REQ_SUP.QUOT_REQ_NO
            AND T_QUOT_RESPONSE.QUOT_REQ_VERSION = T_QUOT_REQ_SUP.QUOT_REQ_VERSION
            AND T_QUOT_RESPONSE.QUOT_SUP_LINE_NO = T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO
            AND T_QUOT_RESPONSE.QUOT_ADO_IND = '1'
            AND T_QUOT_RESPONSE.DELETE_FLG = '0'
        WHERE 
            T_QUOT_REQUEST.QUOT_REQ_NO = #{quotReqNo}
            AND T_QUOT_REQUEST.QUOT_REQ_VERSION = #{quotReqVersion}
            AND T_QUOT_REQUEST.NEW_FLG = '1'
            AND T_QUOT_REQUEST.DELETE_FLG = '0'
    </select>
    <!-- 見積取得申請からの取引先の取得用SQL -->
    <select id="searchQuotAcqReqSupplierList" resultMap="SupplierItem_Map">
        SELECT 
            T_QUOT_ACQ_APL.SUP_COMPANY_CD,
            T_QUOT_ACQ_APL.SUP_CD,
            T_QUOT_ACQ_APL.SUP_ABBR_NAME
        FROM T_QUOT_ACQ_APL
        WHERE 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
            AND T_QUOT_ACQ_APL.DELETE_FLG = '0'
    </select>
    
    <!--購入依頼から遷移した場合用SQL-->
    <!--画面初期表示時用SQL-->
    <select id="searchPurApl" resultMap="QuotReq_Map">
        SELECT
            CASE WHEN T_QUOT_REQUEST.QUOT_REQ_NO IS NULL THEN 
                T_PUR_APL.PUR_APL_NO ELSE T_QUOT_REQUEST.QUOT_REQ_NO END AS QUOT_REQ_NO,
            T_PUR_APL.PUR_APL_NO AS PUR_APL_NO,
            T_QUOT_REQUEST.QUOT_REQ_SEQ,
            T_QUOT_REQUEST.QUOT_REQ_VERSION,
            T_QUOT_REQUEST.QUOT_REQ_STATUS,
            T_PUR_APL.ITEM_CLASS_L,
            T_PUR_APL.ITEM_CLASS_L_NAME,
            T_PUR_APL.ITEM_CLASS_M,
            T_PUR_APL.ITEM_CLASS_M_NAME,
            T_PUR_APL.ITEM_CLASS_S,
            T_PUR_APL.ITEM_CLASS_S_NAME,
            T_PUR_APL.REQ_COMPANY_CD,
            T_PUR_APL.REQ_COMPANY_NAME,
            T_PUR_APL.REQ_SECTION_PLACE_CD,
            T_PUR_APL.REQ_SECTION_PLACE_NAME,
            T_PUR_APL.REQ_SECTION_CD,
            T_PUR_APL.REQ_SECTION_NAME,
            T_PUR_APL.REQ_USER_ID,
            T_PUR_APL.REQ_USER_NAME,
            T_PUR_APL.REQ_USER_EXTENSION_NO,
            T_PUR_APL.REQ_USER_TEL_NO,
            T_PUR_APL.TITLE_NAME,
            T_PUR_APL.FOR_BUYER_COMMENT,
            T_PUR_APL.FOR_SUPPRIER_COMMENT,
            T_PUR_APL.ATTACH_FILE_SEQ1,
            T_PUR_APL.ATTACH_FILE_SEQ2,
            T_PUR_APL.DELIV_PLACE_COMPANY_CD,
            T_PUR_APL.DELIV_PLACE_CD,
            T_PUR_APL.DELIV_PLACE_NAME,
            T_ATTACH_MNG_A.ATTACH_FILE_NAME AS ATTACH_FILE_NAME1, 
            T_ATTACH_MNG_A.ATTACH_SCOPE AS ATTACH_SCOPE1, 
            T_ATTACH_MNG_B.ATTACH_FILE_NAME AS ATTACH_FILE_NAME2, 
            T_ATTACH_MNG_B.ATTACH_SCOPE AS ATTACH_SCOPE2,
            T_PUR_APL.LAST_UPD_DATE
         FROM 
             T_PUR_APL
         LEFT JOIN 
                T_QUOT_REQUEST 
         ON    (T_PUR_APL.PUR_APL_NO = T_QUOT_REQUEST.QUOT_REQ_NO
         OR     T_QUOT_REQUEST.QUOT_REQ_NO = #{slipNo})
         AND    T_QUOT_REQUEST.NEW_FLG = '1'
         AND    T_QUOT_REQUEST.DELETE_FLG = '0'
         LEFT JOIN 
             T_ATTACH_MNG T_ATTACH_MNG_A 
         ON 
             T_PUR_APL.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ
         AND T_ATTACH_MNG_A.DELETE_FLG = '0'
         LEFT JOIN 
             T_ATTACH_MNG T_ATTACH_MNG_B 
         ON 
             T_PUR_APL.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ
         AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        WHERE 
             T_PUR_APL.PUR_APL_SEQ = #{purAplSeq}
        AND T_PUR_APL.DELETE_FLG = '0'
    </select>
    <!--見積依頼明細情報取得SQL -->
    <select id="searchPurReqItemList" resultMap="QuotReqItem_Map">
        SELECT
            T_PUR_REQUEST.ITEM_CD,
            T_PUR_REQUEST.ITEM_NAME,
            T_PUR_REQUEST.KATASHIKI,
            T_PUR_REQUEST.MANUFACT_CD,
            T_PUR_REQUEST.MANUFACT_NAME,
            T_PUR_REQUEST.REQ_VOL,
            T_PUR_REQUEST.UNIT_PRICE,
            T_PUR_REQUEST.REQ_AMOUNT,
            T_PUR_REQUEST.CURRENCY_CD,
            T_PUR_REQUEST.UNIT_CD,
            T_PUR_REQUEST.UNIT_NAME,
            T_PUR_REQUEST.REQ_DELIV_DATE,
            T_PUR_REQUEST.ATTACH_FILE_SEQ,
            T_ATTACH_MNG.ATTACH_FILE_NAME,
            T_ATTACH_MNG.ATTACH_SCOPE,
            T_SLIP_MNG.SLIP_NO AS EXCLUSIVE_SLIP_NO,
            T_SLIP_MNG.LAST_UPD_DATE AS EXCLUSIVE_LAST_UPD_DATE
        FROM 
            T_PUR_APL
        LEFT JOIN 
            T_PUR_REQUEST 
        ON 
            T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST.PUR_APL_SEQ
        AND T_PUR_REQUEST.NEW_FLG = '1'
        AND T_PUR_REQUEST.DELETE_FLG = '0'
        LEFT JOIN 
            T_ATTACH_MNG 
        ON 
            T_PUR_REQUEST.ATTACH_FILE_SEQ = T_ATTACH_MNG.ATTACH_FILE_SEQ
        AND T_ATTACH_MNG.DELETE_FLG = '0'
        LEFT JOIN 
            T_SLIP_MNG
        ON 
            T_PUR_REQUEST.PUR_REQ_NO = T_SLIP_MNG.SLIP_NO	
        AND T_SLIP_MNG.DELETE_FLG = '0'
        WHERE 
            T_PUR_APL.PUR_APL_SEQ = #{purAplSeq}
        AND T_PUR_APL.DELETE_FLG = '0'
        <if test="@org.apache.commons.lang.StringUtils@isNotBlank(slipNo)">
        AND T_PUR_REQUEST.PUR_REQ_NO = #{slipNo}
        </if>
        ORDER BY 
            T_PUR_REQUEST.PUR_REQ_NO
    </select>
    <!--見積依頼の取引先取得用SQL -->
    <select id="searchPurReqSupplierList" resultMap="SupplierItem_Map">
        SELECT 
            T_PUR_APL.HOPE_SUPPLIER_CD AS SUP_CD,
            T_PUR_APL.HOPE_SUPPLIER_NAME AS SUP_NAME,
            T_PUR_APL.HOPE_SUPPLIER_ABBR_NAME AS SUP_ABBR_NAME
        FROM T_PUR_APL
        WHERE T_PUR_APL.PUR_APL_SEQ = #{purAplSeq}
            AND T_PUR_APL.NEW_FLG = '1'
            AND T_PUR_APL.DELETE_FLG = '0'
    </select>
    
    <!--編集、再申請、再見積、取引先追加の場合用SQL-->
    <!--画面初期表示時用SQL-->
    <select id="searchQuotReqAgain" resultMap="QuotReq_Map">
        SELECT 
            T_QUOT_REQUEST.QUOT_REQ_SEQ,
            T_QUOT_REQUEST.QUOT_REQ_NO,
            T_QUOT_REQUEST.QUOT_ACQ_APL_NO,
            T_QUOT_REQUEST.PUR_APL_NO,
            T_QUOT_REQUEST.QUOT_REQ_VERSION,
            T_QUOT_REQUEST.CORRECT_CD,
            T_QUOT_REQUEST.QUOT_TYPE_IND,
            T_QUOT_REQUEST.ITEM_CLASS_L, 
            T_QUOT_REQUEST.ITEM_CLASS_L_NAME, 
            T_QUOT_REQUEST.ITEM_CLASS_M, 
            T_QUOT_REQUEST.ITEM_CLASS_M_NAME, 
            T_QUOT_REQUEST.ITEM_CLASS_S,
            T_QUOT_REQUEST.ITEM_CLASS_S_NAME,
            T_QUOT_REQUEST.REQ_COMPANY_CD, 
            T_QUOT_REQUEST.REQ_COMPANY_NAME, 
            T_QUOT_REQUEST.REQ_SECTION_PLACE_CD,
            T_QUOT_REQUEST.REQ_SECTION_PLACE_NAME, 
            T_QUOT_REQUEST.REQ_SECTION_CD, 
            T_QUOT_REQUEST.REQ_SECTION_NAME,
            T_QUOT_REQUEST.REQ_USER_EXTENSION_NO, 
            T_QUOT_REQUEST.REQ_USER_TEL_NO, 
            T_QUOT_REQUEST.REQ_USER_ID, 
            T_QUOT_REQUEST.REQ_USER_NAME,
            T_QUOT_REQUEST.APP_ROUTE_NO,
            T_QUOT_REQUEST.APP_ROUTE_NAME,
            T_QUOT_REQUEST.TITLE_NAME, 
            T_QUOT_REQUEST.QUOT_RESP_LIMIT_DATE, 
            T_QUOT_REQUEST.DELIV_PLACE_ZIP_CD,
            T_QUOT_REQUEST.DELIV_PLACE_COMPANY_CD,
            T_QUOT_REQUEST.DELIV_PLACE_CD,
            T_QUOT_REQUEST.DELIV_PLACE_NAME, 
            T_QUOT_REQUEST.FOR_SUPPRIER_COMMENT, 
            T_QUOT_REQUEST.ATTACH_FILE_SEQ1,
            T_QUOT_REQUEST.QUOT_REQ_STATUS,
            T_ATTACH_MNG_A.ATTACH_FILE_NAME AS ATTACH_FILE_NAME1,
            T_ATTACH_MNG_A.ATTACH_SCOPE AS ATTACH_SCOPE1,
            T_QUOT_REQUEST.ATTACH_FILE_SEQ2,
            T_ATTACH_MNG_B.ATTACH_FILE_NAME AS ATTACH_FILE_NAME2,
            T_ATTACH_MNG_B.ATTACH_SCOPE AS ATTACH_SCOPE2,
            T_QUOT_REQUEST.LAST_UPD_DATE,
            T_QUOT_REQUEST.QUOT_REQ_SEQ,
            T_QUOT_REQUEST.QUOT_REQ_SEQ AS "QUOT_REQ_SEQ_FOR_EXCLUSIVE",
            T_QUOT_REQUEST.LAST_UPD_DATE AS "QUOT_REQ_LAST_UPD_DATE",
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_REQUEST")}
        FROM
            T_QUOT_REQUEST
            LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_A ON
              T_QUOT_REQUEST.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ
              AND T_ATTACH_MNG_A.DELETE_FLG = '0'
            LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_B ON 
              T_QUOT_REQUEST.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ
              AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        WHERE
            T_QUOT_REQUEST.QUOT_REQ_SEQ = #{quotReqSeq}
            AND T_QUOT_REQUEST.DELETE_FLG = '0'
    </select>
    <!--見積依頼明細情報取得SQL -->
    <select id="searchQuotReqAgainItemList" resultMap="QuotReqItem_Map">
        SELECT
            T_QUOT_REQ_DTL.QUOT_REQ_DTL_NO,
            T_QUOT_REQ_DTL.ITEM_CD,
            T_QUOT_REQ_DTL.ITEM_NAME,
            T_QUOT_REQ_DTL.KATASHIKI,
            T_QUOT_REQ_DTL.MANUFACT_CD,
            T_QUOT_REQ_DTL.MANUFACT_NAME,
            T_QUOT_REQ_DTL.CURRENCY_CD,
            T_QUOT_REQ_DTL.UNIT_PRICE,
            T_QUOT_REQ_DTL.QUOT_REQ_AMOUNT AS REQ_AMOUNT,
            T_QUOT_REQ_DTL.QUOT_REQ_VOL AS REQ_VOL,
            T_QUOT_REQ_DTL.UNIT_CD,
            T_QUOT_REQ_DTL.UNIT_NAME,
            T_QUOT_REQ_DTL.REQ_DELIV_DATE,
            T_QUOT_REQ_DTL.ATTACH_FILE_SEQ,
            T_ATTACH_MNG.ATTACH_FILE_NAME,
            T_ATTACH_MNG.ATTACH_SCOPE,
            T_SLIP_MNG.SLIP_NO AS EXCLUSIVE_SLIP_NO,
            T_SLIP_MNG.LAST_UPD_DATE AS EXCLUSIVE_LAST_UPD_DATE,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_REQ_DTL")}
        FROM 
            T_QUOT_REQ_DTL
        LEFT JOIN
            T_ATTACH_MNG
        ON
            T_QUOT_REQ_DTL.ATTACH_FILE_SEQ = T_ATTACH_MNG.ATTACH_FILE_SEQ
        AND T_ATTACH_MNG.DELETE_FLG = '0'
        LEFT JOIN 
            T_SLIP_MNG	
        ON 
            T_QUOT_REQ_DTL.QUOT_REQ_DTL_NO = T_SLIP_MNG.SLIP_NO	
        AND T_SLIP_MNG.DELETE_FLG = '0'
        WHERE 
            T_QUOT_REQ_DTL.QUOT_REQ_SEQ = #{quotReqSeq}
        AND T_QUOT_REQ_DTL.DELETE_FLG = '0'
        ORDER BY 
            T_QUOT_REQ_DTL.QUOT_REQ_DTL_NO
    </select>
    <!--見積依頼の取引先取得用SQL -->
    <select id="searchQuotReqAgainSupplierList" resultMap="SupplierItem_Map">
        SELECT 
            T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO,
            T_QUOT_REQ_SUP.CORRECT_CD,
            T_QUOT_REQ_SUP.SUP_REG_FLG,
            T_QUOT_REQ_SUP.APPROVAL_IND,
            T_QUOT_REQ_SUP.SUP_COMPANY_CD,
            T_QUOT_REQ_SUP.SUP_CD,
            T_QUOT_REQ_SUP.SUP_ABBR_NAME,
            T_QUOT_REQ_SUP.SUP_ADDRESS1,
            T_QUOT_REQ_SUP.SUP_ADDRESS2,
            T_QUOT_REQ_SUP.SUP_PERSON_NAME,
            T_QUOT_REQ_SUP.SUP_TEL_NO,
            T_QUOT_REQ_SUP.SUP_FAX_NO,
            T_QUOT_REQ_SUP.EDI_IND
        FROM T_QUOT_REQ_SUP
        WHERE 
            T_QUOT_REQ_SUP.QUOT_REQ_SEQ = #{quotReqSeq}
            AND T_QUOT_REQ_SUP.DELETE_FLG = '0'
        ORDER BY T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO
    </select>
    <!-- a.購買担当者向けコメント取得SQL (ＳＱＬ仕様（４）①で取得した見積取得申請番号がある場合) -->
    <select id="searchBuyComFromQuotReqAcq" resultType="java.lang.String">
        SELECT T_QUOT_ACQ_APL.FOR_BUYER_COMMENT
        FROM T_QUOT_ACQ_APL
        WHERE T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = #{quotAcqAplNo}
            AND T_QUOT_ACQ_APL.NEW_APP_FLG = '1'
            AND T_QUOT_ACQ_APL.DELETE_FLG = '0'
    </select>
    <!-- b.購買担当者向けコメント取得SQL (ＳＱＬ仕様（４）①で取得した見積取得申請番号がない場合) -->
    <select id="searchBuyComFromQuotPurApl" resultType="java.lang.String">
        SELECT      T_PUR_APL.FOR_BUYER_COMMENT
        FROM        (
                        SELECT      *
                        FROM        T_PUR_APL
                        WHERE       T_PUR_APL.NEW_FLG = '1'
                        AND         T_PUR_APL.DELETE_FLG = '0'
                    ) T_PUR_APL
        INNER JOIN  (
                        SELECT      *
                        FROM        T_PUR_REQUEST
                        WHERE       T_PUR_REQUEST.NEW_FLG = '1'
                        AND         T_PUR_REQUEST.DELETE_FLG = '0'
                    ) T_PUR_REQUEST
        ON          T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST.PUR_APL_SEQ
        WHERE       T_PUR_APL.PUR_APL_NO = #{purAplNo}
        AND         T_PUR_REQUEST.PUR_REQ_NO = #{purReqNo}

    </select>
    
    <!--申請ボタン押下時用SQL-->    
    <!--見積依頼の新規登録SQL -->
    <insert id="insertQuotRequest">
    INSERT INTO T_QUOT_REQUEST 
         (
            QUOT_REQ_SEQ,
            QUOT_REQ_NO,
            QUOT_REQ_VERSION,
            QUOT_REQ_STATUS,
            QUOT_ADO_STATUS,
            QUOT_TYPE_IND,
            CORRECT_CD,
            PRE_SEQ,
            QUOT_ACQ_APL_NO,
            PUR_APL_NO,
            NEW_FLG,
            NEW_APP_FLG,
            QUOT_RESP_LIMIT_DATE,
            REQ_COMPANY_CD,
            REQ_COMPANY_NAME,
            REQ_SECTION_PLACE_CD,
            REQ_SECTION_PLACE_NAME,
            REQ_SECTION_CD,
            REQ_SECTION_NAME,
            REQ_USER_ID,
            REQ_USER_NAME,
            REQ_USER_EXTENSION_NO,
            REQ_USER_TEL_NO,
            REQ_USER_MAIL_ADDR,
            BUYER_COMPANY_CD,
            BUYER_COMPANY_NAME,
            BUYER_SECTION_PLACE_CD,
            BUYER_SECTION_PLACE_NAME,
            BUYER_SECTION_CD,
            BUYER_SECTION_NAME,
            BUYER_USER_ID,
            BUYER_USER_NAME,
            BUYER_USER_EXTENSION_NO,
            BUYER_USER_TEL_NO,
            BUYER_USER_MAIL_ADDR,
            FOR_SUPPRIER_COMMENT,
            TITLE_NAME,
            DELIV_PLACE_ZIP_CD,
            DELIV_PLACE_COMPANY_CD,
            DELIV_PLACE_CD,
            DELIV_PLACE_NAME,
            ITEM_CLASS_COMPANY_CD,
            ITEM_CLASS_L,
            ITEM_CLASS_L_NAME,
            ITEM_CLASS_M,
            ITEM_CLASS_M_NAME,
            ITEM_CLASS_S,
            ITEM_CLASS_S_NAME,
            ATTACH_FILE_SEQ1,
            ATTACH_FILE_SEQ2,
            QUOT_ADO_COMMENT,
            APP_ROUTE_NO,
            APP_ROUTE_NAME,
            DELETE_FLG,
            AUTO_DELETE_FLG,
            AUTO_DELETE_DATE,
            LAST_UPD_DATE,
            LAST_UPD_COMPANY_CD,
            LAST_UPD_SECTION_CD,
            LAST_UPD_USER_ID,
            REG_DATE,
            REG_COMPANY_CD,
            REG_SECTION_CD,
            REG_USER_ID,
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()}
        ) VALUES(
            #{quotReqIdentify.quotReqSeqNo.seqNumber},
            #{quotReqIdentify.quotReqNo.quotReqNo},
            #{quotReqIdentify.historyNo.historyNo},
            #{quotReqStatus.status},
            '',  <!-- 見積採否ステータス：空白 -->
            #{quotInd.quotInd},
            #{correctInd.correctInd},
            #{quotReqIdentify.quotReqSeqNo.seqNumberBeforChange},
            #{quotAcqAplNo.quotAcqAplNo}, 
            #{purAplNo.purAplNo}, 
            '1',  <!-- 最新フラグ：最新 -->
            CASE WHEN #{quotReqStatus.status} = '05' THEN '1' ELSE '0' END,  <!-- 最新承認済フラグ：最新でない -->
            #{respLimitDate.respLimitDate.dateOfymd},
            #{reqUser.reqUser.section.company.companyCd},
            #{reqUser.reqUser.section.company.companyName},
            #{reqUser.reqUser.section.sectionPlace.sectionPlaceCd},
            #{reqUser.reqUser.section.sectionPlace.sectionPlaceName},
            #{reqUser.reqUser.section.sectionCd},
            #{reqUser.reqUser.section.sectionName},
            #{reqUser.reqUser.userID},
            #{reqUser.reqUser.userName},
            #{reqUser.reqUser.extNo.extensionNo},
            #{reqUser.reqUser.externalNo.externalNo},
            #{reqUser.reqUser.mailAddr.mail},
            #{buyUser.buyUser.section.company.companyCd},
            #{buyUser.buyUser.section.company.companyName},
            #{buyUser.buyUser.section.sectionPlace.sectionPlaceCd},
            #{buyUser.buyUser.section.sectionPlace.sectionPlaceName},
            #{buyUser.buyUser.section.sectionCd},
            #{buyUser.buyUser.section.sectionName},
            #{buyUser.buyUser.userID},
            #{buyUser.buyUser.userName},
            #{buyUser.buyUser.extNo.extensionNo},
            #{buyUser.buyUser.externalNo.externalNo},
            #{buyUser.buyUser.mailAddr.mail},
            #{forSupplierComment.forSupplierComment.comment},
            #{titleName.titleName},
            #{delivPlace.contact.zipCd.zipCd},
            #{delivPlace.delivPlaceCompanyCd},
            #{delivPlace.delivPlaceCd},
            #{delivPlace.delivPlaceName},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            #{itemKind.itemClassL},
            #{itemKind.itemClassLName},
            #{itemKind.itemClassM},
            #{itemKind.itemClassMName},
            #{itemKind.itemClassS},
            #{itemKind.itemClassSName},
            #{rangeByAttachFile1.attachFile.seqNo},
            #{rangeByAttachFile2.attachFile.seqNo},
            '',<!-- 見積採否コメント -->
            #{approute.appRouteNo},
            #{approute.appRouteName},
            '0',
            '0',
            '',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
             ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("editExtItem.")}
    )
    </insert>
    
    <!--見積依頼テーブルを更新（申請ボタン押下後（再申請（差し戻しから）、（再見積）、（取引先追加））-->
    <update id="updateQuotReq">
        UPDATE 
            T_QUOT_REQUEST
        SET 
            NEW_FLG = '0',
            LAST_UPD_DATE       = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID    = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
        WHERE
            QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumber}
    </update>
    
    <!--見積依頼番号より、見積依頼テーブルを更新（申請ボタン押下後（見積取得依頼、及び購入依頼から））-->
    <update id="updateQuotReqForReqNo">
        UPDATE  T_QUOT_REQUEST
            SET T_QUOT_REQUEST.NEW_FLG = '0'  
              , T_QUOT_REQUEST.LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}'
              , T_QUOT_REQUEST.LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
              , T_QUOT_REQUEST.LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}'
              , T_QUOT_REQUEST.LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
         WHERE 
              T_QUOT_REQUEST.QUOT_REQ_NO = #{quotReqNo}
          AND T_QUOT_REQUEST.NEW_FLG = '1'
    </update>
    
    <!--承認者なしの場合の見積依頼テーブルの変更前の承認済みデータを更新（申請ボタン押下後（見積取得依頼から）、（再申請（差し戻しから）、（再見積）、（取引先追加））-->
    <update id="updateQuotReqForApproval">
        UPDATE  T_QUOT_REQUEST
            SET T_QUOT_REQUEST.NEW_APP_FLG = '0'  
              , T_QUOT_REQUEST.LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}'
              , T_QUOT_REQUEST.LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
              , T_QUOT_REQUEST.LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}'
              , T_QUOT_REQUEST.LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
         WHERE 
              T_QUOT_REQUEST.QUOT_REQ_NO = #{quotReqNo}
          AND T_QUOT_REQUEST.NEW_APP_FLG = '1'
    </update>
    
    <!--見積依頼テーブルを更新（申請ボタン押下後（編集/再申請（未承認））-->
    <update id="updateQuotReqFromUnApp">
        UPDATE 
            T_QUOT_REQUEST
        SET 
            NEW_FLG = '1',
            NEW_APP_FLG = CASE WHEN #{quotReqStatus.status} = '05' THEN '1' ELSE '0' END,
            QUOT_REQ_STATUS = #{quotReqStatus.status},
            QUOT_RESP_LIMIT_DATE = #{respLimitDate.respLimitDate.dateOfymd},
            REQ_SECTION_PLACE_CD = #{reqUser.reqUser.section.sectionPlace.sectionPlaceCd},
            REQ_SECTION_PLACE_NAME = #{reqUser.reqUser.section.sectionPlace.sectionPlaceName},
            REQ_SECTION_CD = #{reqUser.reqUser.section.sectionCd},
            REQ_SECTION_NAME = #{reqUser.reqUser.section.sectionName},
            REQ_USER_EXTENSION_NO = #{reqUser.reqUser.extNo.extensionNo},
            REQ_USER_TEL_NO = #{reqUser.reqUser.externalNo.externalNo},
            REQ_USER_MAIL_ADDR = #{reqUser.reqUser.mailAddr.mail},
            REQ_USER_ID = #{reqUser.reqUser.userID},
            REQ_USER_NAME = #{reqUser.reqUser.userName},
            BUYER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            BUYER_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            BUYER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            BUYER_SECTION_PLACE_NAME = '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            BUYER_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            BUYER_SECTION_NAME = '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',
            BUYER_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            BUYER_USER_NAME = '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',
            BUYER_USER_EXTENSION_NO = '${@fw.security.SecurityUtil@getLoginUserExtNoByEscapeSql()}',
            BUYER_USER_TEL_NO = '${@fw.security.SecurityUtil@getLoginUserExternalNoByEscapeSql()}',
            BUYER_USER_MAIL_ADDR = '${@fw.security.SecurityUtil@getLoginUserMailAddrByEscapeSql()}',
            FOR_SUPPRIER_COMMENT = #{forSupplierComment.forSupplierComment.comment},
            TITLE_NAME = #{titleName.titleName},
            ITEM_CLASS_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            ITEM_CLASS_L = #{itemKind.itemClassL},
            ITEM_CLASS_L_NAME = #{itemKind.itemClassLName},
            ITEM_CLASS_M = #{itemKind.itemClassM},
            ITEM_CLASS_M_NAME = #{itemKind.itemClassMName},
            ITEM_CLASS_S = #{itemKind.itemClassS},
            ITEM_CLASS_S_NAME = #{itemKind.itemClassSName},
            DELIV_PLACE_COMPANY_CD = #{delivPlace.delivPlaceCompanyCd},
            DELIV_PLACE_CD = #{delivPlace.delivPlaceCd},
            DELIV_PLACE_NAME = #{delivPlace.delivPlaceName},
            ATTACH_FILE_SEQ1 = #{rangeByAttachFile1.attachFile.seqNo},
            ATTACH_FILE_SEQ2 = #{rangeByAttachFile2.attachFile.seqNo},
            APP_ROUTE_NO = #{approute.appRouteNo},
            APP_ROUTE_NAME = #{approute.appRouteName},
            LAST_UPD_DATE       = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID    = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            ${@ps.common.util.ItemSettingUtil@getItemSettingUpdateValueSQL("editExtItem.")}
        WHERE
            QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumber}
    </update>
    
    <!--見積依頼明細の登録SQL -->
    <insert id="insertQuotRequestDtl">
        INSERT INTO T_QUOT_REQ_DTL
          (
           QUOT_REQ_SEQ,
           QUOT_REQ_DTL_NO,
           QUOT_REQ_NO,
           QUOT_REQ_VERSION,
           ITEM_COMPANY_CD,
           ITEM_CD,
           ITEM_NAME,
           KATASHIKI,
           MANUFACT_CD,
           MANUFACT_NAME,
           REQ_DELIV_DATE,
           CURRENCY_CD,
           QUOT_REQ_VOL,
           UNIT_CD,
           UNIT_NAME,
           UNIT_PRICE,
           QUOT_REQ_AMOUNT,
           ATTACH_FILE_SEQ,
           DELETE_FLG,
           AUTO_DELETE_FLG,
           AUTO_DELETE_DATE,
           LAST_UPD_DATE,
           LAST_UPD_COMPANY_CD,
           LAST_UPD_SECTION_CD,
           LAST_UPD_USER_ID,
           REG_DATE,
           REG_COMPANY_CD,
           REG_SECTION_CD,
           REG_USER_ID,
           ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()}        
         ) VALUES(
           #{quotReqItemIdentify.quotReqIdentify.quotReqSeqNo.seqNumber},
           #{quotReqItemIdentify.detailedNumber},
           #{quotReqItemIdentify.quotReqIdentify.quotReqNo.quotReqNo},
           #{quotReqItemIdentify.quotReqIdentify.historyNo.historyNo},
           '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
           #{itemName.itemCd},
           #{itemName.itemName},
           #{itemName.katashiki},
           #{itemName.manufact.manufactCd},
           #{itemName.manufact.manufactName},
           #{quotHopeCondition.hopeDlvEst.dateOfymd},
           #{currency.currencyCd},
           #{quotHopeCondition.hopeVol.vol},
           #{quotHopeCondition.hopeUnit.unitCd},
           #{quotHopeCondition.hopeUnit.unitName},
           #{quotHopeCondition.hopePrice.amount},
           #{quotHopeCondition.hopeAmount.amount},
           #{rangeByAttachFile.attachFile.seqNo},
           '0',
           '0',
           '',
           '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
           '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
           '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
           '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("editExtItem.")}
         )
    </insert>
    
    <!--見積依頼明細を削除SQL-->
    <delete id="deleteQuotReqDtl">
        DELETE FROM T_QUOT_REQ_DTL
        WHERE QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumber}
    </delete>
    
    <!--見積依頼明細取引先を削除SQL-->
    <delete id="deleteQuotReqDtlLang">
        DELETE FROM T_QUOT_REQ_DTL_SUP_LNG
        WHERE QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumber}
    </delete>

    <!--取引先マスタ情報取得用SQL -->
    <select id="searchSupplier" resultMap="Supplier_Map">
        SELECT M_SUPPLIER.TEL_NO,
               M_SUPPLIER.FAX_NO,
               M_SUPPLIER.ZIP_CD,
               M_SUPPLIER.SUBCON_IND,
               M_SUPPLIER.EDI_IND,
               M_SUPPLIER.QUOT_FAX_IND
          FROM M_SUPPLIER
         WHERE (M_SUPPLIER.COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
            OR M_SUPPLIER.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
           AND M_SUPPLIER.SUP_CD = #{supplierFrom.supCd}
           AND M_SUPPLIER.TERM_FLG = '0'
           AND M_SUPPLIER.VALID_START_DATE &lt;= '${@fw.common.util.AppUtil@getSysDate()}'
           AND M_SUPPLIER.VALID_END_DATE &gt;= '${@fw.common.util.AppUtil@getSysDate()}'
    </select>

    <!--見積依頼取引先の登録SQL -->
    <insert id="insertQuotReqSup">
        INSERT INTO T_QUOT_REQ_SUP
          (
            QUOT_REQ_SEQ,
            QUOT_SUP_LINE_NO,
            QUOT_SUP_STATUS,
            QUOT_REQ_NO,
            QUOT_REQ_VERSION,
            CORRECT_CD,
            SUP_REG_FLG,
            APPROVAL_IND,
            SUP_COMPANY_CD,
            SUP_CD,
            SUP_NAME,
            SUP_ABBR_NAME,
            SUP_TEL_NO,
            SUP_FAX_NO,
            SUP_SECTION_NAME,
            SUP_PERSON_NAME,
            SUP_ZIP_CD,
            SUP_ADDRESS1,
            SUP_ADDRESS2,
            SUBCON_IND,
            EDI_IND,
            QUOT_REQ_FIRST_DATE,
            QUOT_REQ_DATE,
            QUOT_REQ_SEND_IND,
            REQ_RECEIPT_NUMBER,
            QUOT_CANCEL_SEND_IND,
            CANCEL_RECEIPT_NUMBER,
            FAX_SEND_IND,
            FAX_RECEIPT_NUMBER,
            PRINT_IND,
            QUOT_ADO_SEND_IND,
            ADO_RECEIPT_NUMBER,
            DELETE_FLG,
            AUTO_DELETE_FLG,
            AUTO_DELETE_DATE,
            LAST_UPD_DATE,
            LAST_UPD_COMPANY_CD,
            LAST_UPD_SECTION_CD,
            LAST_UPD_USER_ID,
            REG_DATE,
            REG_COMPANY_CD,
            REG_SECTION_CD,
            REG_USER_ID
          ) VALUES(
            #{quotReqSupplierIdentify.quotReqIdentify.quotReqSeqNo.seqNumber},
            #{quotReqSupplierIdentify.quotSupplierLineNo},
            '01',
            #{quotReqSupplierIdentify.quotReqIdentify.quotReqNo.quotReqNo},
            #{quotReqSupplierIdentify.quotReqIdentify.historyNo.historyNo},
            '1',
            #{supplierRegistrationFlg.supplierRegistrationFlg},
            #{approvalIndValue},
            #{supplierFrom.supCompanyCd},
            #{supplierFrom.supCd},
            #{supplierFrom.supplierName.supplierName},
            #{supplierFrom.supplierName.supplierAbbrName},
            #{supplierFrom.supplierContact.ctc.telNo.telNo},
            #{supplierFrom.supplierContact.ctc.faxNo.faxNo},
            #{supplierFrom.supplierContact.supPersonName.supSectionName},
            #{supplierFrom.supplierContact.supPersonName.supPersonName},
            #{supplierFrom.supplierContact.ctc.zipCd.zipCd},
            #{supplierFrom.supplierContact.ctc.address1.address},
            #{supplierFrom.supplierContact.ctc.address2.address},
            #{supplierFrom.subcon.subconInd},
            #{supplierFrom.ediInd.ediInd},
            #{quotReqDate.firstTimeQuotReqDate.reqDate.dateOfymd},
            #{quotReqDate.quotReqDate.reqDate.dateOfymd},
            #{dataInd.reqDataSendInd.sendInd},
            '',
            '9',
            '',
            #{dataInd.faxSendInd.sendInd},
            '',
            #{printInd.printInd.sendInd},
            #{dataInd.adoDataSendInd.sendInd},
            '',
            '0',
            '0',
            '',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
          )
    </insert>
    
    <!--見積依頼取引先から削除SQL-->
    <delete id="deleteQuotReqSup">
        DELETE FROM T_QUOT_REQ_SUP 
        WHERE QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumber}
    </delete>
    
    <!--見積依頼取引先言語から削除SQL-->
    <delete id="deleteQuotReqSupLang">
        DELETE FROM T_QUOT_REQ_SUP_LNG 
        WHERE QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumber}
    </delete>

    <!--取引先基本言語取得用SQL -->
    <select id="searchBaseLanguageInd" resultType = "java.lang.String">
       SELECT BASE_LANGUAGE_IND
         FROM M_SUPPLIER
        WHERE (COMPANY_CD = #{supplierFrom.supCompanyCd}
           OR M_SUPPLIER.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
          AND SUP_CD = #{supplierFrom.supCd}
          AND TERM_FLG = '0'
          AND VALID_START_DATE &lt;= '${@fw.common.util.AppUtil@getSysDate()}'
          AND VALID_END_DATE  &gt;= '${@fw.common.util.AppUtil@getSysDate()}'
    </select>

    <!--見積依頼取引先言語の登録SQL-->
    <insert id="insertQuotReqSupLng">
        INSERT INTO T_QUOT_REQ_SUP_LNG
          (
           QUOT_REQ_SEQ,
           QUOT_SUP_LINE_NO,
           SUP_LANGUAGE_IND,
           REQ_COMPANY_NAME,
           REQ_SECTION_PLACE_NAME,
           REQ_SECTION_NAME,
           REQ_USER_NAME,
           BUYER_COMPANY_NAME,
           BUYER_SECTION_PLACE_NAME,
           BUYER_SECTION_NAME,
           BUYER_USER_NAME,
           ITEM_CLASS_L_NAME,
           ITEM_CLASS_M_NAME,
           ITEM_CLASS_S_NAME,
           SUP_NAME,
           SUP_ABBR_NAME,
           SUP_SECTOIN_NAME,
           SUP_PERSON_NAME,
           SUP_ADDRESS1,
           SUP_ADDRESS2,
           DELIV_PLACE_NAME,
           DELIV_PLACE_ADDRESS1,
           DELIV_PLACE_ADDRESS2,
           DELIV_PLACE_NAME_LIB,
           DELETE_FLG,
           AUTO_DELETE_FLG,
           AUTO_DELETE_DATE,
           LAST_UPD_DATE,
           LAST_UPD_COMPANY_CD,
           LAST_UPD_SECTION_CD,
           LAST_UPD_USER_ID,
           REG_DATE,
           REG_COMPANY_CD,
           REG_SECTION_CD,
           REG_USER_ID
          ) VALUES(
           #{quotReqSupplierIdentify.quotReqIdentify.quotReqSeqNo.seqNumber},
           #{quotReqSupplierIdentify.quotSupplierLineNo},
           #{languageInd.languageInd},
           #{reqUser.reqUser.section.company.companyName},
           #{reqUser.reqUser.section.sectionPlace.sectionPlaceName},
           #{reqUser.reqUser.section.sectionName},
           #{reqUser.reqUser.userName}, 
           #{itemKind.buyUser.buyUser.section.company.companyName},
           #{itemKind.buyUser.buyUser.section.sectionPlace.sectionPlaceName}, 
           #{itemKind.buyUser.buyUser.section.sectionName}, 
           #{itemKind.buyUser.buyUser.userName}, 
           #{itemKind.itemClassLName}, 
           #{itemKind.itemClassMName}, 
           #{itemKind.itemClassSName}, 
           #{supplierFrom.supplierName.supplierName}, 
           #{supplierFrom.supplierName.supplierAbbrName}, 
           #{supplierFrom.supplierContact.supPersonName.supSectionName}, 
           #{supplierFrom.supplierContact.supPersonName.supPersonName}, 
           #{supplierFrom.supplierContact.ctc.address1.address}, 
           #{supplierFrom.supplierContact.ctc.address2.address}, 
           #{delivPlace.delivPlaceName}, 
           #{delivPlace.contact.address1.address}, 
           #{delivPlace.contact.address2.address}, 
           #{delivPlace.delivPlaceNameInb}, 
           '0',
           '0',
           '',
           '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
           '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
           '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
           '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
          )
    </insert>
    <!--見積依頼明細取引先言語の登録SQL-->
    <insert id="insertQuotReqDtlSupLng">
        INSERT INTO T_QUOT_REQ_DTL_SUP_LNG
        (                    
          QUOT_REQ_SEQ,
          QUOT_SUP_LINE_NO,
          QUOT_REQ_DTL_NO,
          ITEM_NAME,
          MANUFACT_NAME,
          UNIT_NAME,
          DELETE_FLG,                              
          AUTO_DELETE_FLG,                         
          AUTO_DELETE_DATE,                        
          LAST_UPD_DATE,                           
          LAST_UPD_COMPANY_CD,           
          LAST_UPD_SECTION_CD,
          LAST_UPD_USER_ID,
          REG_DATE,
          REG_COMPANY_CD,
          REG_SECTION_CD,                
          REG_USER_ID
         ) VALUES(
           #{quotReqItem.quotReqItemIdentify.quotReqIdentify.quotReqSeqNo.seqNumber},
           #{quotSupplierLineNo},
           #{quotReqItem.quotReqItemIdentify.detailedNumber},
           #{quotReqItem.itemName.itemName},
           #{quotReqItem.itemName.manufact.manufactName},
           #{quotReqItem.quotHopeCondition.hopeUnit.unitName},
           '0',
           '0',
           '',
           '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
           '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
           '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
           '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'      
         )
    </insert>    
    
    <!-- 見積取得申請を更新SQL -->
    <update id="updateQuotAcqApl">
        UPDATE T_QUOT_ACQ_APL
        SET QUOT_ACQ_APL_STATUS = '03',
            BUYER_BACK_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            BUYER_BACK_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            BUYER_BACK_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            BUYER_BACK_SECTION_NAME = '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',
            BUYER_BACK_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            BUYER_BACK_USER_NAME = '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',
            BUYER_BACK_USER_COMMENTS = #{receipt.remand.backReason.backReason.comment},
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}', 
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
        WHERE QUOT_ACQ_APL_SEQ = #{quotReqIdentify.quotAcqAplSeq}
            AND DELETE_FLG = '0'
    </update>
    
    <select id="latestSlipMng" resultType="String">
        SELECT
            LAST_UPD_DATE
        FROM T_SLIP_MNG
        WHERE
            SLIP_NO = #{slipNo}
    </select>
    
    <!-- 取引先追加より、既存データを追加 START -->
    <!--見積依頼明細の既存登録SQL-->
    <insert id="insertSelectQuotReqDtl">
        INSERT INTO T_QUOT_REQ_DTL
            (QUOT_REQ_SEQ,
            QUOT_REQ_DTL_NO,
            QUOT_REQ_NO,
            QUOT_REQ_VERSION,
            ITEM_COMPANY_CD,
            ITEM_CD,
            ITEM_NAME,
            KATASHIKI,
            MANUFACT_CD,
            MANUFACT_NAME,
            REQ_DELIV_DATE,
            CURRENCY_CD,
            QUOT_REQ_VOL,
            UNIT_CD,
            UNIT_NAME,
            UNIT_PRICE,
            QUOT_REQ_AMOUNT,
            ATTACH_FILE_SEQ,
            DELETE_FLG,
            AUTO_DELETE_FLG,
            AUTO_DELETE_DATE,
            LAST_UPD_DATE,
            LAST_UPD_COMPANY_CD,
            LAST_UPD_SECTION_CD,
            LAST_UPD_USER_ID,
            REG_DATE,
            REG_COMPANY_CD,
            REG_SECTION_CD,
            REG_USER_ID,
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()}
            )
        SELECT 
            #{quotReqIdentify.quotReqSeqNo.seqNumber},
            QUOT_REQ_DTL_NO,
            QUOT_REQ_NO,
            QUOT_REQ_VERSION,
            ITEM_COMPANY_CD,
            ITEM_CD,
            ITEM_NAME,
            KATASHIKI,
            MANUFACT_CD,
            MANUFACT_NAME,
            REQ_DELIV_DATE,
            CURRENCY_CD,
            QUOT_REQ_VOL, 
            UNIT_CD, 
            UNIT_NAME, 
            UNIT_PRICE, 
            QUOT_REQ_AMOUNT,
            ATTACH_FILE_SEQ,
            '0',
            '0',
            '',
           '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
           '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
           '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
           '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_REQ_DTL")}
        FROM T_QUOT_REQ_DTL
        WHERE QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumberBeforChange}
    </insert>
    
    <!--見積依頼明細取引先言語の既存登録SQL-->
    <insert id="insertSelectQuotReqDtlSupLang">
        INSERT INTO T_QUOT_REQ_DTL_SUP_LNG
            (QUOT_REQ_SEQ,
            QUOT_SUP_LINE_NO,
      QUOT_REQ_DTL_NO,
      ITEM_NAME,
      MANUFACT_NAME,
      UNIT_NAME,
      DELETE_FLG,
      AUTO_DELETE_FLG,
      AUTO_DELETE_DATE,
      LAST_UPD_DATE,
      LAST_UPD_COMPANY_CD,
      LAST_UPD_SECTION_CD,
      LAST_UPD_USER_ID,
      REG_DATE,
      REG_COMPANY_CD,
      REG_SECTION_CD,
      REG_USER_ID)
    SELECT 
      #{quotReqIdentify.quotReqSeqNo.seqNumber},
      QUOT_SUP_LINE_NO,
      QUOT_REQ_DTL_NO,
      ITEM_NAME,
      MANUFACT_NAME,
      UNIT_NAME,
            '0',
            '0',
            '',
           '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
           '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
           '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
           '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'  
    FROM T_QUOT_REQ_DTL_SUP_LNG
    WHERE QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumberBeforChange}
    </insert>
    
    <!--見積依頼明細取引先言語の既存登録SQL（再申請用）-->
    <insert id="insertSelectQuotReqDtlSupLangProcessFlgAgain">
    INSERT INTO T_QUOT_REQ_DTL_SUP_LNG
      (QUOT_REQ_SEQ,
      QUOT_SUP_LINE_NO,
      QUOT_REQ_DTL_NO,
      ITEM_NAME,
      MANUFACT_NAME,
      UNIT_NAME,
      DELETE_FLG,
      AUTO_DELETE_FLG,
      AUTO_DELETE_DATE,
      LAST_UPD_DATE,
      LAST_UPD_COMPANY_CD,
      LAST_UPD_SECTION_CD,
      LAST_UPD_USER_ID,
      REG_DATE,
      REG_COMPANY_CD,
      REG_SECTION_CD,
      REG_USER_ID)
    SELECT
      #{quotReqIdentify.quotReqSeqNo.seqNumber},
      T_QUOT_REQ_DTL_SUP_LNG.QUOT_SUP_LINE_NO,
      T_QUOT_REQ_DTL_SUP_LNG.QUOT_REQ_DTL_NO,
      T_QUOT_REQ_DTL_SUP_LNG.ITEM_NAME,
      T_QUOT_REQ_DTL_SUP_LNG.MANUFACT_NAME,
      T_QUOT_REQ_DTL_SUP_LNG.UNIT_NAME,
            '0',
            '0',
            '',
           '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
           '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
           '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
           '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
           '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
    FROM T_QUOT_REQ_DTL_SUP_LNG
    INNER JOIN T_QUOT_REQ_SUP
        ON T_QUOT_REQ_DTL_SUP_LNG.QUOT_REQ_SEQ = T_QUOT_REQ_SUP.QUOT_REQ_SEQ
        AND T_QUOT_REQ_DTL_SUP_LNG.QUOT_SUP_LINE_NO = T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO
    WHERE T_QUOT_REQ_DTL_SUP_LNG.QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumberBeforChange}
        AND T_QUOT_REQ_SUP.APPROVAL_IND = '1'
    </insert>

    <!--見積依頼取引先の既存登録SQL-->
    <insert id="insertSelectQuotReqSup">
    INSERT INTO T_QUOT_REQ_SUP
      (QUOT_REQ_SEQ,
      QUOT_SUP_LINE_NO,
      QUOT_SUP_STATUS,
      QUOT_REQ_NO,
      QUOT_REQ_VERSION,
      CORRECT_CD,
      SUP_REG_FLG,
      APPROVAL_IND,
      SUP_COMPANY_CD,
      SUP_CD,
      SUP_NAME,
      SUP_ABBR_NAME,
      SUP_TEL_NO,
      SUP_FAX_NO,
      SUP_SECTION_NAME,
      SUP_PERSON_NAME,
      SUP_ZIP_CD,
      SUP_ADDRESS1,
      SUP_ADDRESS2,
      SUBCON_IND,
      EDI_IND,
      QUOT_REQ_FIRST_DATE,
      QUOT_REQ_DATE,
      QUOT_REQ_SEND_IND,
      REQ_RECEIPT_NUMBER,
      QUOT_CANCEL_SEND_IND,
      CANCEL_RECEIPT_NUMBER,
      FAX_SEND_IND,
      FAX_RECEIPT_NUMBER,
      PRINT_IND,
      QUOT_ADO_SEND_IND,
      ADO_RECEIPT_NUMBER,
      DELETE_FLG,
      AUTO_DELETE_FLG,
      AUTO_DELETE_DATE,
      LAST_UPD_DATE,
      LAST_UPD_COMPANY_CD,
      LAST_UPD_SECTION_CD,
      LAST_UPD_USER_ID,
      REG_DATE,
      REG_COMPANY_CD,
      REG_SECTION_CD,
      REG_USER_ID)
    SELECT 
      #{quotReqIdentify.quotReqSeqNo.seqNumber},
      QUOT_SUP_LINE_NO,
      QUOT_SUP_STATUS,
      QUOT_REQ_NO,
      QUOT_REQ_VERSION,
      CORRECT_CD,
      SUP_REG_FLG,
      APPROVAL_IND,
      SUP_COMPANY_CD,
      SUP_CD,
      SUP_NAME,
      SUP_ABBR_NAME,
      SUP_TEL_NO,
      SUP_FAX_NO,
      SUP_SECTION_NAME,
      SUP_PERSON_NAME,
      SUP_ZIP_CD,
      SUP_ADDRESS1,
      SUP_ADDRESS2,
      SUBCON_IND,
      EDI_IND,
      QUOT_REQ_FIRST_DATE,
      QUOT_REQ_DATE,
      '9',
      REQ_RECEIPT_NUMBER,
      QUOT_CANCEL_SEND_IND,
      CANCEL_RECEIPT_NUMBER,
      '9',
      FAX_RECEIPT_NUMBER,
      '9',
      '9',
      ADO_RECEIPT_NUMBER,
      '0',
      '0',
      '',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
    FROM T_QUOT_REQ_SUP
    WHERE QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumberBeforChange}
        AND CORRECT_CD &lt; &gt; '3'
    </insert>
    
    <!--見積依頼取引先の既存登録SQL-->
    <insert id="insertSelectQuotReqSupForCancel">
    INSERT INTO T_QUOT_REQ_SUP
      (QUOT_REQ_SEQ,
      QUOT_SUP_LINE_NO,
      QUOT_SUP_STATUS,
      QUOT_REQ_NO,
      QUOT_REQ_VERSION,
      CORRECT_CD,
      SUP_REG_FLG,
      APPROVAL_IND,
      SUP_COMPANY_CD,
      SUP_CD,
      SUP_NAME,
      SUP_ABBR_NAME,
      SUP_TEL_NO,
      SUP_FAX_NO,
      SUP_SECTION_NAME,
      SUP_PERSON_NAME,
      SUP_ZIP_CD,
      SUP_ADDRESS1,
      SUP_ADDRESS2,
      SUBCON_IND,
      EDI_IND,
      QUOT_REQ_FIRST_DATE,
      QUOT_REQ_DATE,
      QUOT_REQ_SEND_IND,
      REQ_RECEIPT_NUMBER,
      QUOT_CANCEL_SEND_IND,
      CANCEL_RECEIPT_NUMBER,
      FAX_SEND_IND,
      FAX_RECEIPT_NUMBER,
      PRINT_IND,
      QUOT_ADO_SEND_IND,
      ADO_RECEIPT_NUMBER,
      DELETE_FLG,
      AUTO_DELETE_FLG,
      AUTO_DELETE_DATE,
      LAST_UPD_DATE,
      LAST_UPD_COMPANY_CD,
      LAST_UPD_SECTION_CD,
      LAST_UPD_USER_ID,
      REG_DATE,
      REG_COMPANY_CD,
      REG_SECTION_CD,
      REG_USER_ID)
    SELECT 
      #{quotReqIdentify.quotReqSeqNo.seqNumber},
      QUOT_SUP_LINE_NO,
      QUOT_SUP_STATUS,
      QUOT_REQ_NO,
      QUOT_REQ_VERSION,
      '3',
      SUP_REG_FLG,
      APPROVAL_IND,
      SUP_COMPANY_CD,
      SUP_CD,
      SUP_NAME,
      SUP_ABBR_NAME,
      SUP_TEL_NO,
      SUP_FAX_NO,
      SUP_SECTION_NAME,
      SUP_PERSON_NAME,
      SUP_ZIP_CD,
      SUP_ADDRESS1,
      SUP_ADDRESS2,
      SUBCON_IND,
      EDI_IND,
      QUOT_REQ_FIRST_DATE,
      QUOT_REQ_DATE,
      '9',
      REQ_RECEIPT_NUMBER,
      QUOT_CANCEL_SEND_IND,
      CANCEL_RECEIPT_NUMBER,
      '9',
      FAX_RECEIPT_NUMBER,
      '9',
      '9',
      ADO_RECEIPT_NUMBER,
      '0',
      '0',
      '',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
    FROM T_QUOT_REQ_SUP
    WHERE QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumberBeforChange}
        AND CORRECT_CD = '3'
    </insert>
    
    <!--見積依頼取引先の既存登録SQL(再申請用) -->
    <insert id="insertSelectQuotReqSupProcessFlgAgain">
    INSERT INTO T_QUOT_REQ_SUP
      (QUOT_REQ_SEQ,
      QUOT_SUP_LINE_NO,
      QUOT_SUP_STATUS,
      QUOT_REQ_NO,
      QUOT_REQ_VERSION,
      CORRECT_CD,
      SUP_REG_FLG,
      APPROVAL_IND,
      SUP_COMPANY_CD,
      SUP_CD,
      SUP_NAME,
      SUP_ABBR_NAME,
      SUP_TEL_NO,
      SUP_FAX_NO,
      SUP_SECTION_NAME,
      SUP_PERSON_NAME,
      SUP_ZIP_CD,
      SUP_ADDRESS1,
      SUP_ADDRESS2,
      SUBCON_IND,
      EDI_IND,
      QUOT_REQ_FIRST_DATE,
      QUOT_REQ_DATE,
      QUOT_REQ_SEND_IND,
      REQ_RECEIPT_NUMBER,
      QUOT_CANCEL_SEND_IND,
      CANCEL_RECEIPT_NUMBER,
      FAX_SEND_IND,
      FAX_RECEIPT_NUMBER,
      PRINT_IND,
      QUOT_ADO_SEND_IND,
      ADO_RECEIPT_NUMBER,
      DELETE_FLG,
      AUTO_DELETE_FLG,
      AUTO_DELETE_DATE,
      LAST_UPD_DATE,
      LAST_UPD_COMPANY_CD,
      LAST_UPD_SECTION_CD,
      LAST_UPD_USER_ID,
      REG_DATE,
      REG_COMPANY_CD,
      REG_SECTION_CD,
      REG_USER_ID)
    SELECT
      #{quotReqIdentify.quotReqSeqNo.seqNumber},
      QUOT_SUP_LINE_NO,
      QUOT_SUP_STATUS,
      QUOT_REQ_NO,
      QUOT_REQ_VERSION,
      CORRECT_CD,
      SUP_REG_FLG,
      APPROVAL_IND,
      SUP_COMPANY_CD,
      SUP_CD,
      SUP_NAME,
      SUP_ABBR_NAME,
      SUP_TEL_NO,
      SUP_FAX_NO,
      SUP_SECTION_NAME,
      SUP_PERSON_NAME,
      SUP_ZIP_CD,
      SUP_ADDRESS1,
      SUP_ADDRESS2,
      SUBCON_IND,
      EDI_IND,
      QUOT_REQ_FIRST_DATE,
      QUOT_REQ_DATE,
      '9',
      REQ_RECEIPT_NUMBER,
      QUOT_CANCEL_SEND_IND,
      CANCEL_RECEIPT_NUMBER,
      '9',
      FAX_RECEIPT_NUMBER,
      '9',
      '9',
      ADO_RECEIPT_NUMBER,
      '0',
      '0',
      '',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
    FROM T_QUOT_REQ_SUP
    WHERE QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumberBeforChange}
        AND CORRECT_CD &lt; &gt; '3'
        AND APPROVAL_IND = '1'
    </insert>

    <!--見積依頼取引先の既存登録SQL（取消済用）(再申請用) -->
    <insert id="insertSelectQuotReqSupProcessFlgAgainForCancel">
    INSERT INTO T_QUOT_REQ_SUP
      (QUOT_REQ_SEQ,
      QUOT_SUP_LINE_NO,
      QUOT_SUP_STATUS,
      QUOT_REQ_NO,
      QUOT_REQ_VERSION,
      CORRECT_CD,
      SUP_REG_FLG,
      APPROVAL_IND,
      SUP_COMPANY_CD,
      SUP_CD,
      SUP_NAME,
      SUP_ABBR_NAME,
      SUP_TEL_NO,
      SUP_FAX_NO,
      SUP_SECTION_NAME,
      SUP_PERSON_NAME,
      SUP_ZIP_CD,
      SUP_ADDRESS1,
      SUP_ADDRESS2,
      SUBCON_IND,
      EDI_IND,
      QUOT_REQ_FIRST_DATE,
      QUOT_REQ_DATE,
      QUOT_REQ_SEND_IND,
      REQ_RECEIPT_NUMBER,
      QUOT_CANCEL_SEND_IND,
      CANCEL_RECEIPT_NUMBER,
      FAX_SEND_IND,
      FAX_RECEIPT_NUMBER,
      PRINT_IND,
      QUOT_ADO_SEND_IND,
      ADO_RECEIPT_NUMBER,
      DELETE_FLG,
      AUTO_DELETE_FLG,
      AUTO_DELETE_DATE,
      LAST_UPD_DATE,
      LAST_UPD_COMPANY_CD,
      LAST_UPD_SECTION_CD,
      LAST_UPD_USER_ID,
      REG_DATE,
      REG_COMPANY_CD,
      REG_SECTION_CD,
      REG_USER_ID)
    SELECT
      #{quotReqIdentify.quotReqSeqNo.seqNumber},
      QUOT_SUP_LINE_NO,
      QUOT_SUP_STATUS,
      QUOT_REQ_NO,
      QUOT_REQ_VERSION,
      '3',
      SUP_REG_FLG,
      APPROVAL_IND,
      SUP_COMPANY_CD,
      SUP_CD,
      SUP_NAME,
      SUP_ABBR_NAME,
      SUP_TEL_NO,
      SUP_FAX_NO,
      SUP_SECTION_NAME,
      SUP_PERSON_NAME,
      SUP_ZIP_CD,
      SUP_ADDRESS1,
      SUP_ADDRESS2,
      SUBCON_IND,
      EDI_IND,
      QUOT_REQ_FIRST_DATE,
      QUOT_REQ_DATE,
      '9',
      REQ_RECEIPT_NUMBER,
      QUOT_CANCEL_SEND_IND,
      CANCEL_RECEIPT_NUMBER,
      '9',
      FAX_RECEIPT_NUMBER,
      '9',
      '9',
      ADO_RECEIPT_NUMBER,
      '0',
      '0',
      '',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
    FROM T_QUOT_REQ_SUP
    WHERE QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumberBeforChange} 
        AND CORRECT_CD = '3'
        AND APPROVAL_IND = '1'
    </insert>

    <!--見積依頼取引先言語の既存登録SQL-->
    <insert id="insertSelectQuotReqSupLang">
        INSERT INTO T_QUOT_REQ_SUP_LNG
      (QUOT_REQ_SEQ,
      QUOT_SUP_LINE_NO,
      SUP_LANGUAGE_IND,
      REQ_COMPANY_NAME,
      REQ_SECTION_PLACE_NAME,
      REQ_SECTION_NAME,
      REQ_USER_NAME,
      BUYER_COMPANY_NAME,
      BUYER_SECTION_PLACE_NAME,
      BUYER_SECTION_NAME,
      BUYER_USER_NAME,
      ITEM_CLASS_L_NAME,
      ITEM_CLASS_M_NAME,
      ITEM_CLASS_S_NAME,
      SUP_NAME,
      SUP_ABBR_NAME,
      SUP_SECTOIN_NAME,
      SUP_PERSON_NAME,
      SUP_ADDRESS1,
      SUP_ADDRESS2,
      DELIV_PLACE_NAME,
      DELIV_PLACE_ADDRESS1,
      DELIV_PLACE_ADDRESS2,
      DELIV_PLACE_NAME_LIB,
      DELETE_FLG,
      AUTO_DELETE_FLG,
      AUTO_DELETE_DATE,
      LAST_UPD_DATE,
      LAST_UPD_COMPANY_CD,
      LAST_UPD_SECTION_CD,
      LAST_UPD_USER_ID,
      REG_DATE,
      REG_COMPANY_CD,
      REG_SECTION_CD,
      REG_USER_ID)
        SELECT 
            #{quotReqIdentify.quotReqSeqNo.seqNumber},
      QUOT_SUP_LINE_NO,
      SUP_LANGUAGE_IND,
      REQ_COMPANY_NAME,
      REQ_SECTION_PLACE_NAME,
      REQ_SECTION_NAME,
      REQ_USER_NAME,
      BUYER_COMPANY_NAME,
      BUYER_SECTION_PLACE_NAME,
      BUYER_SECTION_NAME,
      BUYER_USER_NAME,
      ITEM_CLASS_L_NAME,
      ITEM_CLASS_M_NAME,
      ITEM_CLASS_S_NAME,
      SUP_NAME,
      SUP_ABBR_NAME,
      SUP_SECTOIN_NAME,
      SUP_PERSON_NAME,
      SUP_ADDRESS1,
      SUP_ADDRESS2,
      DELIV_PLACE_NAME,
      DELIV_PLACE_ADDRESS1,
      DELIV_PLACE_ADDRESS2,
      DELIV_PLACE_NAME_LIB,
      '0',
      '0',
      '',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
    FROM T_QUOT_REQ_SUP_LNG
    WHERE QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumberBeforChange}
    
    </insert>

    <!--見積依頼取引先言語の既存登録SQL(再申請用)-->
    <insert id="insertSelectQuotReqSupLangProcessFlgAgain">
        INSERT INTO T_QUOT_REQ_SUP_LNG
      (QUOT_REQ_SEQ,
      QUOT_SUP_LINE_NO,
      SUP_LANGUAGE_IND,
      REQ_COMPANY_NAME,
      REQ_SECTION_PLACE_NAME,
      REQ_SECTION_NAME,
      REQ_USER_NAME,
      BUYER_COMPANY_NAME,
      BUYER_SECTION_PLACE_NAME,
      BUYER_SECTION_NAME,
      BUYER_USER_NAME,
      ITEM_CLASS_L_NAME,
      ITEM_CLASS_M_NAME,
      ITEM_CLASS_S_NAME,
      SUP_NAME,
      SUP_ABBR_NAME,
      SUP_SECTOIN_NAME,
      SUP_PERSON_NAME,
      SUP_ADDRESS1,
      SUP_ADDRESS2,
      DELIV_PLACE_NAME,
      DELIV_PLACE_ADDRESS1,
      DELIV_PLACE_ADDRESS2,
      DELIV_PLACE_NAME_LIB,
      DELETE_FLG,
      AUTO_DELETE_FLG,
      AUTO_DELETE_DATE,
      LAST_UPD_DATE,
      LAST_UPD_COMPANY_CD,
      LAST_UPD_SECTION_CD,
      LAST_UPD_USER_ID,
      REG_DATE,
      REG_COMPANY_CD,
      REG_SECTION_CD,
      REG_USER_ID)
        SELECT
            #{quotReqIdentify.quotReqSeqNo.seqNumber},
      T_QUOT_REQ_SUP_LNG.QUOT_SUP_LINE_NO,
      T_QUOT_REQ_SUP_LNG.SUP_LANGUAGE_IND,
      T_QUOT_REQ_SUP_LNG.REQ_COMPANY_NAME,
      T_QUOT_REQ_SUP_LNG.REQ_SECTION_PLACE_NAME,
      T_QUOT_REQ_SUP_LNG.REQ_SECTION_NAME,
      T_QUOT_REQ_SUP_LNG.REQ_USER_NAME,
      T_QUOT_REQ_SUP_LNG.BUYER_COMPANY_NAME,
      T_QUOT_REQ_SUP_LNG.BUYER_SECTION_PLACE_NAME,
      T_QUOT_REQ_SUP_LNG.BUYER_SECTION_NAME,
      T_QUOT_REQ_SUP_LNG.BUYER_USER_NAME,
      T_QUOT_REQ_SUP_LNG.ITEM_CLASS_L_NAME,
      T_QUOT_REQ_SUP_LNG.ITEM_CLASS_M_NAME,
      T_QUOT_REQ_SUP_LNG.ITEM_CLASS_S_NAME,
      T_QUOT_REQ_SUP_LNG.SUP_NAME,
      T_QUOT_REQ_SUP_LNG.SUP_ABBR_NAME,
      T_QUOT_REQ_SUP_LNG.SUP_SECTOIN_NAME,
      T_QUOT_REQ_SUP_LNG.SUP_PERSON_NAME,
      T_QUOT_REQ_SUP_LNG.SUP_ADDRESS1,
      T_QUOT_REQ_SUP_LNG.SUP_ADDRESS2,
      T_QUOT_REQ_SUP_LNG.DELIV_PLACE_NAME,
      T_QUOT_REQ_SUP_LNG.DELIV_PLACE_ADDRESS1,
      T_QUOT_REQ_SUP_LNG.DELIV_PLACE_ADDRESS2,
      T_QUOT_REQ_SUP_LNG.DELIV_PLACE_NAME_LIB,
      '0',
      '0',
      '',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
    FROM T_QUOT_REQ_SUP_LNG
    INNER JOIN T_QUOT_REQ_SUP
        ON T_QUOT_REQ_SUP_LNG.QUOT_REQ_SEQ = T_QUOT_REQ_SUP.QUOT_REQ_SEQ
        AND T_QUOT_REQ_SUP_LNG.QUOT_SUP_LINE_NO = T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO
    WHERE T_QUOT_REQ_SUP_LNG.QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumberBeforChange}
        AND T_QUOT_REQ_SUP.APPROVAL_IND = '1'
    </insert>
    <!-- 見積依頼番号から変更前SEQ取得SQL -->
    <select id="searchForPreSeq" resultType="java.lang.String">
        SELECT 
            T_QUOT_REQUEST.QUOT_REQ_SEQ
        FROM T_QUOT_REQUEST
        INNER JOIN ( SELECT QUOT_REQ_NO,MAX( QUOT_REQ_VERSION ) AS QUOT_REQ_VERSION 
            FROM T_QUOT_REQUEST 
            WHERE QUOT_REQ_NO = #{quotReqNo}
            AND NEW_APP_FLG = '1'
            AND DELETE_FLG = '0' 
            GROUP BY QUOT_REQ_NO ) A 
            ON T_QUOT_REQUEST.QUOT_REQ_NO = A.QUOT_REQ_NO
            AND T_QUOT_REQUEST.QUOT_REQ_VERSION = A.QUOT_REQ_VERSION 
        WHERE 
            T_QUOT_REQUEST.QUOT_REQ_NO = #{quotReqNo}
            AND T_QUOT_REQUEST.NEW_APP_FLG = '1'
            AND T_QUOT_REQUEST.DELETE_FLG = '0'
    </select>

    <select id="getQuotStatusFromAnswerCount" parameterType="fw.domain.slip.quot.quotreq.QuotReq"
            resultType="String">
        SELECT 
         CASE WHEN (COUNT(T_QUOT_RESPONSE.QUOT_RESP_SEQ)) = 0 THEN '05'
              WHEN (COUNT(T_QUOT_RESPONSE.QUOT_RESP_SEQ) &lt; COUNT(T_QUOT_REQ_SUP.QUOT_REQ_SEQ)) THEN '06'
              WHEN (COUNT(T_QUOT_RESPONSE.QUOT_RESP_SEQ) = COUNT(T_QUOT_REQ_SUP.QUOT_REQ_SEQ)) THEN '07'
              ELSE '' END
        FROM T_QUOT_REQUEST
        INNER JOIN T_QUOT_REQ_SUP
         ON T_QUOT_REQUEST.QUOT_REQ_SEQ = T_QUOT_REQ_SUP.QUOT_REQ_SEQ
        LEFT OUTER JOIN T_QUOT_RESPONSE
         ON T_QUOT_REQ_SUP.QUOT_REQ_NO = T_QUOT_RESPONSE.QUOT_REQ_NO
          AND T_QUOT_REQ_SUP.QUOT_REQ_VERSION = T_QUOT_RESPONSE.QUOT_REQ_VERSION
          AND T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO = T_QUOT_RESPONSE.QUOT_SUP_LINE_NO
          AND T_QUOT_RESPONSE.DELETE_FLG = '0'
        WHERE
          <choose>
              <when test="@org.apache.commons.lang.StringUtils@isNotBlank(quotReqIdentify.quotReqSeqNo.seqNumber)">
                  T_QUOT_REQUEST.QUOT_REQ_SEQ = #{quotReqIdentify.quotReqSeqNo.seqNumber}
              </when>
              <otherwise>
                  T_QUOT_REQUEST.QUOT_REQ_NO = #{quotReqIdentify.quotReqNo.quotReqNo}
                  AND T_QUOT_REQUEST.QUOT_REQ_VERSION = #{quotReqIdentify.historyNo.historyNo}
              </otherwise>
          </choose>
          AND T_QUOT_REQUEST.DELETE_FLG = '0'
          AND T_QUOT_REQ_SUP.CORRECT_CD IN ('1','2','4')
          AND T_QUOT_REQ_SUP.DELETE_FLG = '0'
    </select>

<!-- ============================= 見積依頼詳細 PSQOT020 START ==========================-->
    <resultMap type="fw.domain.slip.quot.quotreq.QuotReq" id="QuotRequest_Map">
        <id column="QUOT_REQ_NO" property="quotReqIdentify.quotReqNo.quotReqNo"/>
        <id column="QUOT_REQ_VERSION" property="quotReqIdentify.historyNo.historyNo"/>
        <id column="REQ_COMPANY_CD" property="reqUser.reqUser.section.company.companyCd"/>
        <id column="REQ_SECTION_CD" property="reqUser.reqUser.section.sectionCd"/>
        <id column="REQ_SECTION_NAME" property="reqUser.reqUser.section.sectionName"/>
        <id column="BUYER_COMPANY_CD" property="buyUser.buyUser.section.company.companyCd"/>
        <id column="BUYER_SECTION_CD" property="buyUser.buyUser.section.sectionCd"/>
        <id column="BUYER_SECTION_NAME" property="buyUser.buyUser.section.sectionName"/>
        <id column="QUOT_RESP_LIMIT_DATE" property="respLimitDate.respLimitDate.dateOfymd"/>
        <id column="FOR_SUPPRIER_COMMENT" property="forSupplierComment.forSupplierComment.comment"/>
        <id column="FOR_BUYER_COMMENT" property="forBuyerComment.forBuyerComment.comment"/>
        <id column="A_ATTACH_FILE_NAME" property="rangeByAttachFile1.attachFile.fileName"/>
        <id column="B_ATTACH_FILE_NAME" property="rangeByAttachFile2.attachFile.fileName"/>
        <id column="ATTACH_FILE_SEQ1" property="rangeByAttachFile1.attachFile.seqNo"/>
        <id column="ATTACH_FILE_SEQ2" property="rangeByAttachFile2.attachFile.seqNo"/>
        <id column="A_ATTACH_SCOPE" property="rangeByAttachFile1.attachRange.attachRange"/>
        <id column="B_ATTACH_SCOPE" property="rangeByAttachFile2.attachRange.attachRange"/>
        <id column="REQ_USER_EXTENSION_NO" property="reqUser.reqUser.extNo.extensionNo"/>
        <id column="REQ_USER_TEL_NO" property="reqUser.reqUser.externalNo.externalNo"/>
        <id column="BUYER_USER_EXTENSION_NO" property="buyUser.buyUser.extNo.extensionNo"/>
        <id column="BUYER_USER_TEL_NO" property="buyUser.buyUser.externalNo.externalNo"/>
        <id column="EXT_TXT_1" property="detailExtItem.extendTxt.extendTxt1"/>
        <id column="EXT_TXT_2" property="detailExtItem.extendTxt.extendTxt2"/>
        <id column="EXT_TXT_3" property="detailExtItem.extendTxt.extendTxt3"/>
        <id column="EXT_TXT_4" property="detailExtItem.extendTxt.extendTxt4"/>
        <id column="EXT_TXT_5" property="detailExtItem.extendTxt.extendTxt5"/>
        <id column="EXT_TXT_6" property="detailExtItem.extendTxt.extendTxt6"/>
        <id column="EXT_TXT_7" property="detailExtItem.extendTxt.extendTxt7"/>
        <id column="EXT_TXT_8" property="detailExtItem.extendTxt.extendTxt8"/>
        <id column="EXT_TXT_9" property="detailExtItem.extendTxt.extendTxt9"/>
        <id column="EXT_TXT_10" property="detailExtItem.extendTxt.extendTxt10"/>
        <id column="EXT_AREA_1" property="detailExtItem.extendArea.extendArea1"/>
        <id column="EXT_AREA_2" property="detailExtItem.extendArea.extendArea2"/>
        <id column="EXT_AREA_3" property="detailExtItem.extendArea.extendArea3"/>
        <id column="EXT_AREA_4" property="detailExtItem.extendArea.extendArea4"/>
        <id column="EXT_AREA_5" property="detailExtItem.extendArea.extendArea5"/>
        <id column="EXT_DATE_1" property="detailExtItem.extendDate.extendDate1.dateOfymd"/>
        <id column="EXT_DATE_2" property="detailExtItem.extendDate.extendDate2.dateOfymd"/>
        <id column="EXT_DATE_3" property="detailExtItem.extendDate.extendDate3.dateOfymd"/>
        <id column="EXT_DATE_4" property="detailExtItem.extendDate.extendDate4.dateOfymd"/>
        <id column="EXT_DATE_5" property="detailExtItem.extendDate.extendDate5.dateOfymd"/>
        <id column="EXT_INT_1" property="detailExtItem.extendInt.extendInt1.value"/>
        <id column="EXT_INT_2" property="detailExtItem.extendInt.extendInt2.value"/>
        <id column="EXT_INT_3" property="detailExtItem.extendInt.extendInt3.value"/>
        <id column="EXT_INT_4" property="detailExtItem.extendInt.extendInt4.value"/>
        <id column="EXT_INT_5" property="detailExtItem.extendInt.extendInt5.value"/>
        <id column="EXT_INT_6" property="detailExtItem.extendInt.extendInt6.value"/>
        <id column="EXT_INT_7" property="detailExtItem.extendInt.extendInt7.value"/>
        <id column="EXT_INT_8" property="detailExtItem.extendInt.extendInt8.value"/>
        <id column="EXT_INT_9" property="detailExtItem.extendInt.extendInt9.value"/>
        <id column="EXT_INT_10" property="detailExtItem.extendInt.extendInt10.value"/>
        <id column="EXT_DEC_1" property="detailExtItem.extendDec.extendDec1.value"/>
        <id column="EXT_DEC_2" property="detailExtItem.extendDec.extendDec2.value"/>
        <id column="EXT_DEC_3" property="detailExtItem.extendDec.extendDec3.value"/>
        <id column="EXT_DEC_4" property="detailExtItem.extendDec.extendDec4.value"/>
        <id column="EXT_DEC_5" property="detailExtItem.extendDec.extendDec5.value"/>
        <id column="EXT_SEL_1" property="detailExtItem.extendSel.extendSel1"/>
        <id column="EXT_SEL_2" property="detailExtItem.extendSel.extendSel2"/>
        <id column="EXT_SEL_3" property="detailExtItem.extendSel.extendSel3"/>
        <id column="EXT_SEL_4" property="detailExtItem.extendSel.extendSel4"/>
        <id column="EXT_SEL_5" property="detailExtItem.extendSel.extendSel5"/>
        <id column="EXT_SEL_6" property="detailExtItem.extendSel.extendSel6"/>
        <id column="EXT_SEL_7" property="detailExtItem.extendSel.extendSel7"/>
        <id column="EXT_SEL_8" property="detailExtItem.extendSel.extendSel8"/>
        <id column="EXT_SEL_9" property="detailExtItem.extendSel.extendSel9"/>
        <id column="EXT_SEL_10" property="detailExtItem.extendSel.extendSel10"/>
        <id column="EXT_CHK_1" property="detailExtItem.extendChk.extendChk1"/>
        <id column="EXT_CHK_2" property="detailExtItem.extendChk.extendChk2"/>
        <id column="EXT_CHK_3" property="detailExtItem.extendChk.extendChk3"/>
        <id column="EXT_CHK_4" property="detailExtItem.extendChk.extendChk4"/>
        <id column="EXT_CHK_5" property="detailExtItem.extendChk.extendChk5"/>
        <id column="EXT_FILE_1" property="detailExtItem.extendFile.extendFile1.fileName"/>
        <id column="EXT_FILE_2" property="detailExtItem.extendFile.extendFile2.fileName"/>
        <id column="EXT_FILE_3" property="detailExtItem.extendFile.extendFile3.fileName"/>
        <id column="EXT_FILE_BINARY_1" property="detailExtItem.extendFile.extendFile1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="detailExtItem.extendFile.extendFile2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="detailExtItem.extendFile.extendFile3.binary"/>
        <id column="EXT_MST_1" property="detailExtItem.extendMst.extendMst1.mstKey"/>
        <id column="EXT_MST_2" property="detailExtItem.extendMst.extendMst2.mstKey"/>
        <id column="EXT_MST_3" property="detailExtItem.extendMst.extendMst3.mstKey"/>
        <id column="EXT_MST_4" property="detailExtItem.extendMst.extendMst4.mstKey"/>
        <id column="EXT_MST_5" property="detailExtItem.extendMst.extendMst5.mstKey"/>
        <id column="EXT_MST_6" property="detailExtItem.extendMst.extendMst6.mstKey"/>
        <id column="EXT_MST_7" property="detailExtItem.extendMst.extendMst7.mstKey"/>
        <id column="EXT_MST_8" property="detailExtItem.extendMst.extendMst8.mstKey"/>
        <id column="EXT_MST_NAME_1" property="detailExtItem.extendMst.extendMst1.mstName"/>
        <id column="EXT_MST_NAME_2" property="detailExtItem.extendMst.extendMst2.mstName"/>
        <id column="EXT_MST_NAME_3" property="detailExtItem.extendMst.extendMst3.mstName"/>
        <id column="EXT_MST_NAME_4" property="detailExtItem.extendMst.extendMst4.mstName"/>
        <id column="EXT_MST_NAME_5" property="detailExtItem.extendMst.extendMst5.mstName"/>
        <id column="EXT_MST_NAME_6" property="detailExtItem.extendMst.extendMst6.mstName"/>
        <id column="EXT_MST_NAME_7" property="detailExtItem.extendMst.extendMst7.mstName"/>
        <id column="EXT_MST_NAME_8" property="detailExtItem.extendMst.extendMst8.mstName"/>
    </resultMap>
    <!-- 見積依頼情報の取得 -->
    <select id="listReq" parameterType="fw.domain.slip.quot.quotreq.QuotReqIdentify" 
        resultMap="QuotRequest_Map">
        SELECT 
            T_QUOT_REQUEST.QUOT_REQ_NO,
            T_QUOT_REQUEST.QUOT_REQ_VERSION,
            T_QUOT_REQUEST.ITEM_CLASS_L_NAME as "itemKind.itemClassLName", 
            T_QUOT_REQUEST.ITEM_CLASS_M_NAME as "itemKind.itemClassMName",
            T_QUOT_REQUEST.ITEM_CLASS_S_NAME as "itemKind.itemClassSName",
            T_QUOT_REQUEST.REQ_COMPANY_CD ,
            T_QUOT_REQUEST.REQ_SECTION_CD ,
            T_QUOT_REQUEST.REQ_SECTION_NAME ,
            T_QUOT_REQUEST.REQ_USER_ID as "reqUser.reqUser.userID",
            T_QUOT_REQUEST.REQ_USER_NAME as "reqUser.reqUser.userName",
            T_QUOT_REQUEST.REQ_USER_EXTENSION_NO as "REQ_USER_EXTENSION_NO",
            T_QUOT_REQUEST.REQ_USER_TEL_NO as "REQ_USER_TEL_NO",
            T_QUOT_REQUEST.APP_ROUTE_NO as "approute.appRouteNo",
            T_QUOT_REQUEST.APP_ROUTE_NAME as "approute.appRouteName",
            T_QUOT_REQUEST.TITLE_NAME as "titleName.titleName",
            T_QUOT_REQUEST.BUYER_COMPANY_CD ,
            T_QUOT_REQUEST.BUYER_SECTION_CD ,
            T_QUOT_REQUEST.BUYER_SECTION_NAME ,
            T_QUOT_REQUEST.BUYER_USER_ID as "buyUser.buyUser.userID",
            T_QUOT_REQUEST.BUYER_USER_NAME as "buyUser.buyUser.userName",
            T_QUOT_REQUEST.BUYER_USER_EXTENSION_NO,
            T_QUOT_REQUEST.BUYER_USER_TEL_NO as "BUYER_USER_TEL_NO",
            T_QUOT_REQUEST.QUOT_RESP_LIMIT_DATE ,
            T_QUOT_REQUEST.FOR_SUPPRIER_COMMENT ,
            T_QUOT_REQUEST.ATTACH_FILE_SEQ1 ,
            T_QUOT_REQUEST.ATTACH_FILE_SEQ2 ,
            T_QUOT_ACQ_APL.FOR_BUYER_COMMENT ,
            T_ATTACH_MNG_A.ATTACH_FILE_NAME as "A_ATTACH_FILE_NAME",
            T_ATTACH_MNG_A.ATTACH_SCOPE as "A_ATTACH_SCOPE",
            T_ATTACH_MNG_B.ATTACH_FILE_NAME as "B_ATTACH_FILE_NAME",
            T_ATTACH_MNG_B.ATTACH_SCOPE as "B_ATTACH_SCOPE",
            T_QUOT_REQUEST.DELIV_PLACE_CD as "delivPlace.delivPlaceCd" ,
            T_QUOT_REQUEST.DELIV_PLACE_NAME as "delivPlace.delivPlaceName",
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_REQUEST")}
        FROM T_QUOT_REQUEST
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_A
            ON T_QUOT_REQUEST.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_A.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_B
            ON T_QUOT_REQUEST.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        LEFT JOIN T_QUOT_ACQ_APL
            ON T_QUOT_REQUEST.QUOT_ACQ_APL_NO = T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO 
            AND T_QUOT_ACQ_APL.NEW_FLG = '1'
            AND T_QUOT_ACQ_APL.DELETE_FLG = '0'
        WHERE 
            T_QUOT_REQUEST.QUOT_REQ_SEQ = #{quotReqSeqNo.seqNumber}
            AND T_QUOT_REQUEST.QUOT_TYPE_IND IN ('1','4') 
            AND T_QUOT_REQUEST.DELETE_FLG = '0'
            AND T_QUOT_REQUEST.NEW_FLG = '1'
    </select>

    <resultMap type="fw.domain.slip.quot.quotreq.QuotReqSupplier" id="QuotSup_Map">
        <id column="QUOT_REQ_DATE" property="quotReqDate.quotReqDate.reqDate.dateOfymd"/>
        <id column="SUP_REG_FLG" property="supplierRegistrationFlg.supplierRegistrationFlg"/>
        <id column="SUP_CD" property="supplierFrom.supCd"/>
        <id column="SUP_ABBR_NAME" property="supplierFrom.supplierName.supplierName"/>
        <id column="SUBCON_IND" property="supplierFrom.subcon.subconInd"/>
        <id column="SUP_ADDRESS1" property="supplierFrom.supplierContact.ctc.address1.address"/>
        <id column="SUP_ADDRESS2" property="supplierFrom.supplierContact.ctc.address2.address"/>
        <id column="SUP_TEL_NO" property="supplierFrom.supplierContact.ctc.telNo.telNo"/>
        <id column="SUP_FAX_NO" property="supplierFrom.supplierContact.ctc.faxNo.faxNo"/>
        <id column="SUP_COMPANY_CD" property="supplierFrom.supCompanyCd"/>
        <id column="EDI_IND" property="supplierFrom.ediInd.ediInd"/>
    </resultMap>
    <!-- 見積依頼取引先情報の取得 -->
    <select id="listSup" parameterType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify" 
        resultMap="QuotSup_Map">
        SELECT 
            T_QUOT_REQ_SUP.QUOT_REQ_DATE ,
            T_QUOT_REQ_SUP.SUP_REG_FLG ,
            T_QUOT_REQ_SUP.SUP_CD ,
            T_QUOT_REQ_SUP.SUP_ABBR_NAME ,
            T_QUOT_REQ_SUP.SUBCON_IND ,
            T_QUOT_REQ_SUP.SUP_ADDRESS1 ,
            T_QUOT_REQ_SUP.SUP_ADDRESS2 ,
            T_QUOT_REQ_SUP.SUP_TEL_NO ,
            T_QUOT_REQ_SUP.SUP_FAX_NO ,
            T_QUOT_REQ_SUP.SUP_COMPANY_CD,
            T_QUOT_REQ_SUP.EDI_IND
        FROM T_QUOT_REQ_SUP
        WHERE 
            QUOT_REQ_SEQ = #{quotReqSeqNo.seqNumber}
            AND QUOT_REQ_VERSION = #{historyNo.historyNo}
        ORDER BY QUOT_SUP_LINE_NO ASC
    </select>

    <resultMap type="fw.domain.slip.quot.quotreq.QuotReqItem" id="QuotDtl_Map">
        <id column="QUOT_REQ_AMOUNT" property="quotHopeCondition.hopeAmount.amount"/>
        <id column="UNIT_PRICE" property="quotHopeCondition.hopePrice.amount"/>
        <id column="REQ_DELIV_DATE" property="quotHopeCondition.hopeDlvEst.dateOfymd"/>
        <id column="ATTACH_FILE_NAME" property="rangeByAttachFile.attachFile.fileName"/>
        <id column="ATTACH_SCOPE" property="rangeByAttachFile.attachRange.attachRange"/>
        <id column="ATTACH_FILE_SEQ" property="rangeByAttachFile.attachFile.seqNo"/>
        <id column="QUOT_REQ_VOL" property="quotHopeCondition.hopeVol.vol"/>
        <id column="UNIT_NAME" property="quotHopeCondition.hopeUnit.unitName" />
        <id column="QUOT_REQ_DTL_NO" property="quotReqItemIdentify.detailedNumber" />
        <id column="EXT_TXT_1" property="detailExtItem.extendTxt.extendTxt1"/>
        <id column="EXT_TXT_2" property="detailExtItem.extendTxt.extendTxt2"/>
        <id column="EXT_TXT_3" property="detailExtItem.extendTxt.extendTxt3"/>
        <id column="EXT_TXT_4" property="detailExtItem.extendTxt.extendTxt4"/>
        <id column="EXT_TXT_5" property="detailExtItem.extendTxt.extendTxt5"/>
        <id column="EXT_TXT_6" property="detailExtItem.extendTxt.extendTxt6"/>
        <id column="EXT_TXT_7" property="detailExtItem.extendTxt.extendTxt7"/>
        <id column="EXT_TXT_8" property="detailExtItem.extendTxt.extendTxt8"/>
        <id column="EXT_TXT_9" property="detailExtItem.extendTxt.extendTxt9"/>
        <id column="EXT_TXT_10" property="detailExtItem.extendTxt.extendTxt10"/>
        <id column="EXT_AREA_1" property="detailExtItem.extendArea.extendArea1"/>
        <id column="EXT_AREA_2" property="detailExtItem.extendArea.extendArea2"/>
        <id column="EXT_AREA_3" property="detailExtItem.extendArea.extendArea3"/>
        <id column="EXT_AREA_4" property="detailExtItem.extendArea.extendArea4"/>
        <id column="EXT_AREA_5" property="detailExtItem.extendArea.extendArea5"/>
        <id column="EXT_DATE_1" property="detailExtItem.extendDate.extendDate1.dateOfymd"/>
        <id column="EXT_DATE_2" property="detailExtItem.extendDate.extendDate2.dateOfymd"/>
        <id column="EXT_DATE_3" property="detailExtItem.extendDate.extendDate3.dateOfymd"/>
        <id column="EXT_DATE_4" property="detailExtItem.extendDate.extendDate4.dateOfymd"/>
        <id column="EXT_DATE_5" property="detailExtItem.extendDate.extendDate5.dateOfymd"/>
        <id column="EXT_INT_1" property="detailExtItem.extendInt.extendInt1.value"/>
        <id column="EXT_INT_2" property="detailExtItem.extendInt.extendInt2.value"/>
        <id column="EXT_INT_3" property="detailExtItem.extendInt.extendInt3.value"/>
        <id column="EXT_INT_4" property="detailExtItem.extendInt.extendInt4.value"/>
        <id column="EXT_INT_5" property="detailExtItem.extendInt.extendInt5.value"/>
        <id column="EXT_INT_6" property="detailExtItem.extendInt.extendInt6.value"/>
        <id column="EXT_INT_7" property="detailExtItem.extendInt.extendInt7.value"/>
        <id column="EXT_INT_8" property="detailExtItem.extendInt.extendInt8.value"/>
        <id column="EXT_INT_9" property="detailExtItem.extendInt.extendInt9.value"/>
        <id column="EXT_INT_10" property="detailExtItem.extendInt.extendInt10.value"/>
        <id column="EXT_DEC_1" property="detailExtItem.extendDec.extendDec1.value"/>
        <id column="EXT_DEC_2" property="detailExtItem.extendDec.extendDec2.value"/>
        <id column="EXT_DEC_3" property="detailExtItem.extendDec.extendDec3.value"/>
        <id column="EXT_DEC_4" property="detailExtItem.extendDec.extendDec4.value"/>
        <id column="EXT_DEC_5" property="detailExtItem.extendDec.extendDec5.value"/>
        <id column="EXT_SEL_1" property="detailExtItem.extendSel.extendSel1"/>
        <id column="EXT_SEL_2" property="detailExtItem.extendSel.extendSel2"/>
        <id column="EXT_SEL_3" property="detailExtItem.extendSel.extendSel3"/>
        <id column="EXT_SEL_4" property="detailExtItem.extendSel.extendSel4"/>
        <id column="EXT_SEL_5" property="detailExtItem.extendSel.extendSel5"/>
        <id column="EXT_SEL_6" property="detailExtItem.extendSel.extendSel6"/>
        <id column="EXT_SEL_7" property="detailExtItem.extendSel.extendSel7"/>
        <id column="EXT_SEL_8" property="detailExtItem.extendSel.extendSel8"/>
        <id column="EXT_SEL_9" property="detailExtItem.extendSel.extendSel9"/>
        <id column="EXT_SEL_10" property="detailExtItem.extendSel.extendSel10"/>
        <id column="EXT_CHK_1" property="detailExtItem.extendChk.extendChk1"/>
        <id column="EXT_CHK_2" property="detailExtItem.extendChk.extendChk2"/>
        <id column="EXT_CHK_3" property="detailExtItem.extendChk.extendChk3"/>
        <id column="EXT_CHK_4" property="detailExtItem.extendChk.extendChk4"/>
        <id column="EXT_CHK_5" property="detailExtItem.extendChk.extendChk5"/>
        <id column="EXT_FILE_1" property="detailExtItem.extendFile.extendFile1.fileName"/>
        <id column="EXT_FILE_2" property="detailExtItem.extendFile.extendFile2.fileName"/>
        <id column="EXT_FILE_3" property="detailExtItem.extendFile.extendFile3.fileName"/>
        <id column="EXT_FILE_BINARY_1" property="detailExtItem.extendFile.extendFile1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="detailExtItem.extendFile.extendFile2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="detailExtItem.extendFile.extendFile3.binary"/>
        <id column="EXT_MST_1" property="detailExtItem.extendMst.extendMst1.mstKey"/>
        <id column="EXT_MST_2" property="detailExtItem.extendMst.extendMst2.mstKey"/>
        <id column="EXT_MST_3" property="detailExtItem.extendMst.extendMst3.mstKey"/>
        <id column="EXT_MST_4" property="detailExtItem.extendMst.extendMst4.mstKey"/>
        <id column="EXT_MST_5" property="detailExtItem.extendMst.extendMst5.mstKey"/>
        <id column="EXT_MST_6" property="detailExtItem.extendMst.extendMst6.mstKey"/>
        <id column="EXT_MST_7" property="detailExtItem.extendMst.extendMst7.mstKey"/>
        <id column="EXT_MST_8" property="detailExtItem.extendMst.extendMst8.mstKey"/>
        <id column="EXT_MST_NAME_1" property="detailExtItem.extendMst.extendMst1.mstName"/>
        <id column="EXT_MST_NAME_2" property="detailExtItem.extendMst.extendMst2.mstName"/>
        <id column="EXT_MST_NAME_3" property="detailExtItem.extendMst.extendMst3.mstName"/>
        <id column="EXT_MST_NAME_4" property="detailExtItem.extendMst.extendMst4.mstName"/>
        <id column="EXT_MST_NAME_5" property="detailExtItem.extendMst.extendMst5.mstName"/>
        <id column="EXT_MST_NAME_6" property="detailExtItem.extendMst.extendMst6.mstName"/>
        <id column="EXT_MST_NAME_7" property="detailExtItem.extendMst.extendMst7.mstName"/>
        <id column="EXT_MST_NAME_8" property="detailExtItem.extendMst.extendMst8.mstName"/>
    </resultMap>
    <!-- 見積依頼明細情報の取得 -->
    <select id="listDtl" parameterType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify" 
        resultMap="QuotDtl_Map">
        SELECT 
            T_QUOT_REQ_DTL.QUOT_REQ_DTL_NO,
            T_QUOT_REQ_DTL.ITEM_CD as "itemName.itemCd",
            T_QUOT_REQ_DTL.ITEM_NAME as "itemName.itemName" ,
            T_QUOT_REQ_DTL.KATASHIKI as "itemName.katashiki",
            T_QUOT_REQ_DTL.MANUFACT_CD as "itemName.manufact.manufactCd" ,
            T_QUOT_REQ_DTL.MANUFACT_NAME as "itemName.manufact.manufactName" ,
            T_QUOT_REQ_DTL.CURRENCY_CD as "currency.currencyCd" ,
            T_QUOT_REQ_DTL.QUOT_REQ_VOL ,
            T_QUOT_REQ_DTL.UNIT_NAME ,
            T_QUOT_REQ_DTL.UNIT_PRICE ,
            T_QUOT_REQ_DTL.QUOT_REQ_AMOUNT ,
            T_QUOT_REQ_DTL.REQ_DELIV_DATE ,
            T_QUOT_REQ_DTL.ATTACH_FILE_SEQ ,
            T_ATTACH_MNG.ATTACH_FILE_NAME,
            T_ATTACH_MNG.ATTACH_SCOPE,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_REQ_DTL")}
        FROM T_QUOT_REQ_DTL
        LEFT JOIN  T_ATTACH_MNG
            ON T_QUOT_REQ_DTL.ATTACH_FILE_SEQ  = T_ATTACH_MNG.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG.DELETE_FLG = '0'
        WHERE 
            T_QUOT_REQ_DTL.QUOT_REQ_SEQ = #{quotReqSeqNo.seqNumber}
            AND T_QUOT_REQ_DTL.DELETE_FLG = '0'
        ORDER BY T_QUOT_REQ_DTL.QUOT_REQ_DTL_NO ASC
    </select>
<!-- ============================= 見積依頼詳細  PSQOT020 END ==========================-->

    <select id="searchPurReqForUpl" resultType="String" resultMap="QuotReqUpl_Map">
        SELECT
            T_PUR_APL.PUR_APL_NO,
            T_PUR_APL.REQ_COMPANY_CD,
            T_PUR_APL.REQ_COMPANY_NAME,
            T_PUR_APL.REQ_SECTION_PLACE_CD,
            T_PUR_APL.REQ_SECTION_PLACE_NAME,
            T_PUR_APL.REQ_SECTION_CD,
            T_PUR_APL.REQ_SECTION_NAME,
            T_PUR_APL.REQ_USER_ID,
            T_PUR_APL.REQ_USER_NAME,
            T_PUR_APL.REQ_USER_EXTENSION_NO,
            T_PUR_APL.REQ_USER_TEL_NO,
            M_B_USER.MAIL_ADDR AS REQ_USER_MAIL_ADDR,
            T_PUR_REQUEST.BUYER_COMPANY_CD,
            T_PUR_REQUEST.BUYER_SECTION_CD,
            T_PUR_REQUEST.BUYER_USER_ID
        FROM  T_PUR_REQUEST
        INNER JOIN T_SLIP_MNG
        ON
            T_PUR_REQUEST.PUR_REQ_NO = T_SLIP_MNG.SLIP_NO
        INNER JOIN T_PUR_APL
        ON
            T_PUR_REQUEST.PUR_APL_SEQ = T_PUR_APL.PUR_APL_SEQ
        LEFT OUTER JOIN M_B_USER
          ON T_PUR_APL.REQ_COMPANY_CD = M_B_USER.COMPANY_CD
         AND T_PUR_APL.REQ_USER_ID = M_B_USER.USER_ID
         AND M_B_USER.TERM_FLG = '0'
        WHERE
            T_PUR_REQUEST.PUR_REQ_NO = #{pureReqNo}
            AND T_PUR_REQUEST.NEW_FLG = '1'
            AND T_PUR_REQUEST.CORRECT_CD != '3'
            AND T_PUR_REQUEST.DELETE_FLG = '0'
            AND T_SLIP_MNG.SLIP_STATUS = '0612'
            AND T_SLIP_MNG.DELETE_FLG = '0'
            AND T_PUR_APL.REQ_TYPE_IND IN ('3', '9')
            AND T_PUR_APL.NEW_FLG = '1'
            AND T_PUR_APL.CORRECT_CD != '3'
            AND T_PUR_APL.DELETE_FLG = '0'
    </select>
    
        <select id="searchQotReqForUpl" resultType="String" resultMap="QuotReqUpl_Map">
        SELECT
            T_QUOT_ACQ_APL.REQ_COMPANY_CD,
            T_QUOT_ACQ_APL.REQ_COMPANY_NAME,
            T_QUOT_ACQ_APL.REQ_SECTION_PLACE_CD,
            T_QUOT_ACQ_APL.REQ_SECTION_PLACE_NAME,
            T_QUOT_ACQ_APL.REQ_SECTION_CD,
            T_QUOT_ACQ_APL.REQ_SECTION_NAME,
            T_QUOT_ACQ_APL.REQ_USER_ID,
            T_QUOT_ACQ_APL.REQ_USER_NAME,
            T_QUOT_ACQ_APL.REQ_USER_EXTENSION_NO,
            T_QUOT_ACQ_APL.REQ_USER_TEL_NO,
            M_B_USER.MAIL_ADDR AS REQ_USER_MAIL_ADDR,
            T_QUOT_ACQ_APL.BUYER_COMPANY_CD,
            T_QUOT_ACQ_APL.BUYER_SECTION_CD,
            T_QUOT_ACQ_APL.BUYER_USER_ID
        FROM  T_QUOT_ACQ_APL
        LEFT OUTER JOIN M_B_USER
          ON T_QUOT_ACQ_APL.REQ_COMPANY_CD = M_B_USER.COMPANY_CD
         AND T_QUOT_ACQ_APL.REQ_USER_ID = M_B_USER.USER_ID
         AND M_B_USER.TERM_FLG = '0'
        WHERE 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = #{quotReqNo}
            AND T_QUOT_ACQ_APL.DELETE_FLG = '0'
            AND T_QUOT_ACQ_APL.NEW_FLG = '1'
            AND T_QUOT_ACQ_APL.REQ_TYPE_IND = '1'
            AND T_QUOT_ACQ_APL.REQ_TYPE_IND = '1'
            AND EXISTS (
                SELECT T_SLIP_MNG.APL_NO
                FROM T_SLIP_MNG
                WHERE
                    T_SLIP_MNG.APL_NO = T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO
                    AND T_SLIP_MNG.SLIP_STATUS = '0212'
                    AND T_SLIP_MNG.DELETE_FLG = '0'
            )
    </select>
    <resultMap type="fw.domain.slip.quot.quotreq.packages.QuotReqRecord" id="QuotReqUpl_Map">
        <id column="PUR_APL_NO" property="purAplNo.purAplNo"/>
        <id column="REQ_COMPANY_CD" property="reqUser.reqUser.section.company.companyCd"/>
        <id column="REQ_COMPANY_CD" property="reqUser.reqUser.section.company.companyCd"/>
        <id column="REQ_COMPANY_NAME" property="reqUser.reqUser.section.company.companyName"/>
        <id column="REQ_SECTION_PLACE_CD" property="reqUser.reqUser.section.sectionPlace.sectionPlaceCd"/>
        <id column="REQ_SECTION_PLACE_NAME" property="reqUser.reqUser.section.sectionPlace.sectionPlaceName"/>
        <id column="REQ_SECTION_CD" property="reqUser.reqUser.section.sectionCd"/>
        <id column="REQ_SECTION_NAME" property="reqUser.reqUser.section.sectionName"/>
        <id column="REQ_USER_ID" property="reqUser.reqUser.userID"/>
        <id column="REQ_USER_NAME" property="reqUser.reqUser.userName"/>
        <id column="REQ_USER_EXTENSION_NO" property="reqUser.reqUser.extNo.extensionNo"/>
        <id column="REQ_USER_TEL_NO" property="reqUser.reqUser.externalNo.externalNo"/>
        <id column="REQ_USER_MAIL_ADDR" property="reqUser.reqUser.mailAddr.mail"/>
        <id column="BUYER_COMPANY_CD" property="buyUser.buyUser.section.company.companyCd"/>
        <id column="BUYER_SECTION_CD" property="buyUser.buyUser.section.sectionCd"/>
        <id column="BUYER_USER_ID" property="buyUser.buyUser.userID"/>
    </resultMap>
</mapper>