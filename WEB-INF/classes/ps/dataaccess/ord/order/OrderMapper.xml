<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ps.dataaccess.ord.order.OrderMapper">

    <!-- ====================== PSORD070 注文一覧（発注済）Start =================== -->

    <!-- 注文一覧（発注済） 明細MAP -->
    <resultMap type="fw.domain.slip.order.order.orderlist.OrderListItem" id="OrderListItem_Map">
        <id column="ORDER_CANCEL_VOL" property="orderCancel.orderCancelVol.vol"/>
        <id column="ORDER_CANCEL_AMOUNT" property="orderCancel.orderCancelAmount.amount"/>
        <id column="CURRENCY_CD" property="orderCancel.orderCancelAmount.currencyCd"/>
        <id column="EXCLUSIVE_SLIP_NO" property="orderIdentify.exclusiveSlipId.slipNo"/>
        <id column="EXCLUSIVE_LAST_UPD_DATE" property="orderIdentify.exclusiveSlipId.lastUpdDate"/>
    </resultMap>

    <!-- 注文一覧（発注済）取得SELECT句 -->
    <sql id="orderdListSelect">
        SELECT 
            T_ORDER.ORDER_SEQ AS "orderIdentify.orderSeq",
            T_ORDER.PRE_SEQ AS "orderIdentify.preSeq",
            T_ORDER.ORDER_NO AS "orderNo",
            T_ORDER.ORDER_STATUS AS "status",
            T_SLIP_MNG.RECEIVE_STATUS_IND AS "receiveStatus",
            T_ORDER.REQ_TYPE_IND AS "reqTypeInd",
            T_ORDER.INFO_CD AS "infoCd",
            T_ORDER.ORDER_INPUT_DATE AS "orderInputDate.dateOfymd",
            T_ORDER.ORDER_DATE AS "changeOrderDate.dateOfymd",
            T_ORDER.ORDER_FIRST_DATE AS "orderDate.dateOfymd",
            T_ORDER.BUYER_COMMENT AS "buyerComment",
            T_ORDER.FOR_SUPPRIER_COMMENT AS "forSupprierComment",
            T_ORDER.SUP_CONFIRM_FLG AS "supConfirmFlg.supConfirmFlag",
            CASE WHEN T_ORDER.EDI_IND = '1'
                THEN TO_NUMBER(T_ORDER.SUP_CONFIRM_FLG)
                ELSE -1
                END SUP_CONFIRM_FLG_SORT,
            T_ATTACH_MNG_1.ATTACH_FILE_SEQ as "attachFileSeq1",
            T_ATTACH_MNG_2.ATTACH_FILE_SEQ as "attachFileSeq2",
            T_ATTACH_MNG_3.ATTACH_FILE_SEQ as "attachFileSeq3",
            T_ORDER.TITLE_NAME AS "titleName",
            T_ORDER.SUP_CD AS "supCd",
            T_ORDER.SUP_ABBR_NAME AS "supName",
            T_ORDER.SUBCON_IND AS "subconInd",
            T_ORDER.EDI_IND AS "edi",
            T_ORDER.ITEM_CD AS "itemCd",
            T_ORDER.ITEM_NAME AS "itemName",
            T_ORDER.ORDER_VOL AS "orderVol.vol",
            T_ORDER.UNIT_CD AS "unitCd",
            T_ORDER.UNIT_NAME AS "unitName",
            (T_ORDER.ORDER_VOL - (CASE WHEN T_RECEIVE_MNG.DELIV_VOL IS NULL THEN 0 ELSE T_RECEIVE_MNG.DELIV_VOL END)) AS "receiveRemainderVol.vol",
            T_ORDER.CURRENCY_CD AS "currencyCd",
            T_ORDER.UNIT_PRICE AS "unitPrice.amount",
            T_ORDER.ORDER_AMOUNT AS "orderAmount.amount",
            T_ORDER.ORDER_CANCEL_VOL,
            T_ORDER.ORDER_CANCEL_AMOUNT,
            T_ORDER.CURRENCY_CD,
            T_ORDER.UNIT_PRICE_IND AS "unitPriceInd",
            T_ORDER.PRICE_DEC_DATE AS "priceDecDate.dateOfymd",
            T_ORDER.ORDER_DELIV_DATE AS "orderDelivDate.dateOfymd",
            T_ORDER.DELIV_PLACE_CD AS "delivPlaceCd",
            T_ORDER.DELIV_PLACE_NAME AS "delivPlaceName",
            T_ORDER.REQ_SECTION_CD AS "reqSectionCd",
            T_ORDER.REQ_SECTION_NAME AS "reqSectionName",
            T_ORDER.REQ_USER_ID AS "reqUserCd",
            T_ORDER.REQ_USER_NAME AS "reqUserName",
            T_ORDER.BUYER_SECTION_CD AS "buyerSectionCd",
            T_ORDER.BUYER_SECTION_NAME AS "buyerSectionName",
            T_ORDER.BUYER_USER_ID AS "buyerUserId",
            T_ORDER.BUYER_USER_NAME AS "buyerUserName",
            T_ORDER.LAST_UPD_DATE AS "orderIdentify.lastUpdDate",
            T_ORDER.PAY_CONDITION_CD AS "payConditionCd",
            T_ORDER.PAY_CONDITION_NAME AS "payConditionName",
            T_SLIP_MNG.SLIP_NO AS EXCLUSIVE_SLIP_NO,
            T_SLIP_MNG.LAST_UPD_DATE AS EXCLUSIVE_LAST_UPD_DATE,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQLDomainAliasNonBinary("T_ORDER", "orderExtItem")}
    </sql>

    <!-- 注文一覧（発注済）取得FROM句 -->
    <sql id="orderdListFrom">
        FROM 
            T_ORDER
        LEFT JOIN 
            T_SLIP_MNG 
        ON 
            T_SLIP_MNG.SLIP_NO=T_ORDER.ORDER_NO
        LEFT JOIN   (
                        SELECT  T_QUOT_REQUEST.QUOT_REQ_NO
                        FROM    T_QUOT_REQUEST
                        WHERE   T_QUOT_REQUEST.NEW_FLG = '1'
                        AND     T_QUOT_REQUEST.QUOT_REQ_STATUS IN ('05','06','07','21')
                        AND     T_QUOT_REQUEST.DELETE_FLG = '0'
                    ) T_QUOT_REQUEST
        ON         (T_SLIP_MNG.APL_NO = T_QUOT_REQUEST.QUOT_REQ_NO
        OR          T_SLIP_MNG.SLIP_NO = T_QUOT_REQUEST.QUOT_REQ_NO)
        LEFT JOIN 
            (
                SELECT 
                    SUM(T_RECEIVE_MNG.DELIV_VOL) AS DELIV_VOL,
                    T_RECEIVE_MNG.ORDER_NO
                FROM
                    T_RECEIVE_MNG
                WHERE
                    T_RECEIVE_MNG.DELETE_FLG = '0'
                GROUP BY
                    T_RECEIVE_MNG.ORDER_NO
            ) T_RECEIVE_MNG
        ON
            T_ORDER.ORDER_NO=  T_RECEIVE_MNG.ORDER_NO
        LEFT JOIN 
            T_ATTACH_MNG T_ATTACH_MNG_1
        ON 
            T_ORDER.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_1.ATTACH_FILE_SEQ
        AND T_ATTACH_MNG_1.DELETE_FLG = '0'
        LEFT JOIN 
            T_ATTACH_MNG T_ATTACH_MNG_2
        ON 
            T_ORDER.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_2.ATTACH_FILE_SEQ
        AND T_ATTACH_MNG_2.DELETE_FLG = '0'
        LEFT JOIN 
            T_ATTACH_MNG T_ATTACH_MNG_3
        ON 
            T_ORDER.ATTACH_FILE_SEQ3 = T_ATTACH_MNG_3.ATTACH_FILE_SEQ
        AND T_ATTACH_MNG_3.DELETE_FLG = '0'
    </sql>

    <!-- 注文一覧（発注済）取得WHERET句 -->
    <sql id="orderdListWhere">
        <!-- クイックリンク -->
        <if test="@org.apache.commons.lang.StringUtils@isNotBlank(status)">
            AND T_ORDER.ORDER_STATUS = #{status, jdbcType=VARCHAR}
            AND T_ORDER.BUYER_USER_ID='${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
            <if test="status=='05'">
                AND T_ORDER.UNIT_PRICE_IND='0'
                <!-- 単価決定予定日-->
                AND
                <![CDATA[
                    PRICE_DEC_DATE > (
                        SELECT 
                            CASE 
                                WHEN CAST(MAX(CUTOFF_DATE) AS VARCHAR2(8)) IS NULL THEN '${@fw.common.util.AppUtil@getSysDate()}' || '0101' 
                                ELSE CAST(MAX(CUTOFF_DATE) AS VARCHAR2(8)) 
                            END
                        FROM 
                            M_CUTOFF_DATE
                        WHERE 
                            M_CUTOFF_DATE.CUTOFF_DATE < '${@fw.common.util.AppUtil@getSysDate()}'
                        AND (M_CUTOFF_DATE.COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}' 
                            OR M_CUTOFF_DATE.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}'))
                ]]>
                AND
                <![CDATA[
                    PRICE_DEC_DATE <= (
                        SELECT 
                            CASE 
                                WHEN CAST(MIN(CUTOFF_DATE) AS VARCHAR2(8)) IS NULL THEN '${@fw.common.util.AppUtil@getSysDate()}' || '1231'
                                ELSE CAST(MIN(CUTOFF_DATE) AS VARCHAR2(8)) 
                            END
                        FROM 
                            M_CUTOFF_DATE
                        WHERE 
                            M_CUTOFF_DATE.CUTOFF_DATE >= '${@fw.common.util.AppUtil@getSysDate()}'
                       AND (M_CUTOFF_DATE.COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                           OR M_CUTOFF_DATE.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}'))
                ]]>
            </if>
        </if>
        <!-- クイックリンク以外 -->
        <if test="@org.apache.commons.lang.StringUtils@isBlank(status)">
            ${@ps.common.util.ItemSettingUtil@getItemSettingWhereSQL()}
            <!--  状態 --> 
            <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(statusList)">
                AND T_ORDER.ORDER_STATUS IN
                <if test="@fw.common.util.WebFlowUtil@getFlowScopeAttribute('hasOrdered') != 'true'">
                    <foreach collection="statusList" item="orderStatus" open="(" separator="," close=")">
                        <!-- 承認済み -->
                        <if test="orderStatus=='05' ">
                            '05','10','20'
                        </if>
                        <if test="orderStatus!='05' ">
                            #{orderStatus, jdbcType=VARCHAR}
                        </if>
                    </foreach>
                </if>
                <if test="@fw.common.util.WebFlowUtil@getFlowScopeAttribute('hasOrdered') == 'true'">
                    <foreach collection="statusList" item="orderStatus" open="(" separator="," close=")">
                        <if test="orderStatus=='05' ">
                            '05','10','20'
                        </if>
                        <if test="orderStatus!='05' ">
                            ' '
                        </if>
                    </foreach>
                </if>
            </if>
            <if test="@org.apache.commons.collections.CollectionUtils@isEmpty(statusList)">
                  AND T_ORDER.ORDER_STATUS IN
                  <if test="@fw.common.util.WebFlowUtil@getFlowScopeAttribute('hasOrdered') != 'true'">
                      ('03','01','02','04')
                  </if>
                  <if test="@fw.common.util.WebFlowUtil@getFlowScopeAttribute('hasOrdered') == 'true'">
                      ('05','10','20')
                  </if>
            </if>
            <!--  受入残あり -->
            <if test="@org.apache.commons.lang.StringUtils@isNotBlank(rcvRemainView)">
               AND ((T_ORDER.ORDER_VOL-T_RECEIVE_MNG.DELIV_VOL)>0 or T_RECEIVE_MNG.DELIV_VOL is null)
               AND T_ORDER.ORDER_STATUS != '10'
            </if>
            <!--  単価未定 -->
            <if test="@org.apache.commons.lang.StringUtils@isNotBlank(unitPriceUndecidedness)">
               AND T_ORDER.UNIT_PRICE_IND = '0'
            </if>
            <!-- 購買担当者ID-->
            <if test="@org.apache.commons.lang.StringUtils@isNotBlank(buyerUserName)">
                AND T_ORDER.BUYER_USER_ID = #{buyerUserName, jdbcType=VARCHAR}
            </if>
        </if>
        <!-- 依頼区分 -->
        <if test="@org.apache.commons.lang.StringUtils@isNotBlank(reqTypeInd)">
          AND T_ORDER.REQ_TYPE_IND IN (#{reqTypeInd, jdbcType=VARCHAR})
        </if>
        <if test="@org.apache.commons.lang.StringUtils@isBlank(reqTypeInd)">
          AND T_ORDER.REQ_TYPE_IND IN ('2','3','9')
        </if>
        AND T_ORDER.NEW_FLG = '1'
        AND T_ORDER.DELETE_FLG = '0'
        AND T_ORDER.BUYER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}' <!-- 購買会社コード-->
        AND T_ORDER.BUYER_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}' <!-- 購買部門コード-->
        AND T_SLIP_MNG.DELETE_FLG = '0'
    </sql>

    <!--検索条件で全てキリストを取得する-->
    <select id="listKeyIdentity" parameterType="fw.domain.slip.order.order.orderlist.OrderListSearchCondition" resultType="fw.domain.slip.order.order.OrderIdentify">
        SELECT 
            T_ORDER.ORDER_SEQ AS "orderSeq",
            T_ORDER.LAST_UPD_DATE AS "lastUpdDate",
            CASE WHEN T_ORDER.EDI_IND = '1'
                THEN TO_NUMBER(T_ORDER.SUP_CONFIRM_FLG)
                ELSE -1
                END SUP_CONFIRM_FLG_SORT
        <include refid="orderdListFrom"/>
        <where>
            <include refid="orderdListWhere"/>
        </where>
        ORDER BY ${searchCondition.columnOrder.columnOrder()}
    </select>

    <!--注文一覧（発注済） 明細を取得する-->
    <select id="listPageItem"  parameterType="fw.domain.slip.order.order.orderlist.OrderListSearchCondition" resultMap="OrderListItem_Map">
        <include refid="orderdListSelect"/>
        <include refid="orderdListFrom"/>
        <where>
            <include refid="orderdListWhere"/>
            AND T_ORDER.ORDER_SEQ IN
            <foreach collection="searchCondition.page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">  
                #{keyList.orderSeq, jdbcType=VARCHAR}
            </foreach>
        </where>
        ORDER BY ${searchCondition.columnOrder.columnOrder()}
    </select>
    
    <!-- 注文一覧のダウンロード件数を取得する -->
    <select id="countOfDownloadOrderdList" parameterType="fw.domain.slip.order.order.orderlist.OrderListSearchCondition" resultType="java.lang.Long">
        SELECT
            COUNT(1)
        <include refid="orderdListFrom"/>
        <where> 
            <include refid="orderdListWhere"/>
        </where>
    </select>
    
    <!-- 注文一覧ダウンロード -->
    <select id="downloadOrderdList" parameterType="fw.domain.slip.order.order.orderlist.OrderListSearchCondition" resultMap="OrderListItem_Map">
        <include refid="downloadHeader"/>
        <include refid="orderdListSelect"/>
        <include refid="orderdListFrom"/>
        <where>
            <include refid="orderdListWhere"/>
        </where>
        ORDER BY ${searchCondition.columnOrder.columnOrder()}
        <include refid="downloadFooter"/>
    </select>

   <!-- 見積状態を取得 -->
   <select id="getQuotReqStatus" resultType="fw.domain.slip.order.order.QuotRequestStatus">
       SELECT
           T_QUOT_REQUEST.QUOT_REQ_SEQ AS "quotReqSeq",
           T_QUOT_REQUEST.LAST_UPD_DATE AS "lastUpdDate",
           T_QUOT_REQUEST.QUOT_REQ_STATUS AS "quotReqStatus",
           T_QUOT_REQUEST.QUOT_ADO_STATUS AS "quotAdoStatus"
       FROM
           T_ORDER
       INNER JOIN
           T_PUR_REQUEST
       ON
           T_ORDER.PUR_REQ_NO = T_PUR_REQUEST.PUR_REQ_NO
       AND T_PUR_REQUEST.NEW_APP_FLG = '1'
       AND T_PUR_REQUEST.NEW_FLG = '1'
       AND T_PUR_REQUEST.DELETE_FLG = '0'
       INNER JOIN 
           T_PUR_APL
       ON
           T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST.PUR_APL_SEQ
       AND T_PUR_APL.DELETE_FLG = '0'
       INNER JOIN
           T_QUOT_REQUEST
       ON
           (T_PUR_REQUEST.PUR_APL_NO = T_QUOT_REQUEST.QUOT_REQ_NO
       OR  T_PUR_REQUEST.PUR_REQ_NO = T_QUOT_REQUEST.QUOT_REQ_NO)
       AND T_QUOT_REQUEST.NEW_FLG = '1'
       AND T_QUOT_REQUEST.NEW_APP_FLG = '1'
       AND T_QUOT_REQUEST.DELETE_FLG = '0'
       WHERE
           T_ORDER.ORDER_SEQ = #{orderSeq}
   </select>

    <!-- ====================== PSORD070 注文一覧（発注済）END =================== -->

    <resultMap type="fw.domain.slip.order.order.Order" id="Order_Map">
        <id  column="ORDER_SEQ" property="orderIdentify.orderSeq"/>
        <id  column="PRE_SEQ" property="orderIdentify.preSeq"/>
        <id  column="ORDER_NO" property="orderManagement.orderNo.orderNo"/>
        <id  column="ORDER_VERSION" property="orderManagement.historyNo.historyNo"/>
        <id  column="INFO_CD" property="orderManagement.informationInd.informationInd"/>
        <id  column="TITLE_NAME" property="orderManagement.titleName.titleName"/>
        <id  column="ORDER_FIRST_DATE" property="schedule.orderDate.orderFirstDate.dateOfymd"/>
        <id  column="ORDER_DATE" property="schedule.orderDate.orderDate.dateOfymd"/>
        <id  column="LOAD_SECTION_CD" property="user.loadSection.loadSection.sectionCd"/>
        <id  column="LOAD_SECTION_NAME" property="user.loadSection.loadSection.sectionName"/>
        <id  column="DELIV_PLACE_CD" property="complement.delivPlace.delivPlaceCd"/>
        <id  column="DELIV_PLACE_NAME" property="complement.delivPlace.delivPlaceName"/>
        <id  column="SUP_ABBR_NAME" property="supplierFrom.supplierName.supplierAbbrName"/>
        <id  column="SUP_ZIP_CD" property="supplierFrom.supplierContact.ctc.zipCd.zipCd"/>
        <id  column="SUP_ADDRESS1" property="supplierFrom.supplierContact.ctc.address1.address"/>
        <id  column="SUP_ADDRESS2" property="supplierFrom.supplierContact.ctc.address2.address"/>
        <id  column="SUP_TEL_NO" property="supplierFrom.supplierContact.ctc.telNo.telNo"/>
        <id  column="SUP_FAX_NO" property="supplierFrom.supplierContact.ctc.faxNo.faxNo"/>
        <id  column="ITEM_CLASS_COMPANY_CD" property="accounting.orderItem.itemKind.itemClassCompanyCd"/>
        <id  column="ITEM_CLASS_L_NAME" property="accounting.orderItem.itemKind.itemClassLName"/>
        <id  column="ITEM_CLASS_M_NAME" property="accounting.orderItem.itemKind.itemClassMName"/>
        <id  column="ITEM_CLASS_S_NAME" property="accounting.orderItem.itemKind.itemClassSName"/>
        <id  column="ITEM_CD" property="accounting.orderItem.item.itemCd"/>
        <id  column="ITEM_NAME" property="accounting.orderItem.item.itemName"/>
        <id  column="KATASHIKI" property="accounting.orderItem.item.katashiki"/>
        <id  column="MANUFACT_CD" property="accounting.orderItem.item.manufact.manufactCd"/>
        <id  column="MANUFACT_NAME" property="accounting.orderItem.item.manufact.manufactName"/>
        <id  column="INSPECT_IND" property="condition.inspectInd.inspectInd"/>
        <id  column="ORDER_DELIV_DATE" property="schedule.dlvEst.dlvEst.dateOfymd"/>
        <id  column="UNIT_PRICE_IND" property="status.priceManagement.unitPriceInd"/>
        <id  column="PRICE_UNDEC_REASON" property="status.priceManagement.priceUndecReason.comment"/>
        <id  column="PRICE_DEC_DATE" property="status.priceManagement.priceDecDate.dateOfymd"/>
        <id  column="CURRENCY_CD" property="accounting.orderAmount.amountMng.currency.currencyCd"/>
        <id  column="UNIT_PRICE" property="accounting.orderAmount.unitPrice.amount.amount"/>
        <id  column="ORDER_VOL" property="accounting.orderAmount.orderVolume.orderVol.vol"/>
        <id column="UNIT_CD" property="accounting.orderItem.item.unit.unitCd"/>
        <id column="UNIT_NAME" property="accounting.orderItem.item.unit.unitName"/>
        <id  column="ORDER_AMOUNT" property="accounting.orderAmount.orderAmount.amount"/>
        <id  column="TAX_IND" property="accounting.orderAmount.amountMng.taxCalculationInd.taxInd.taxInd"/>
        <id  column="CONSUMPT_IND" property="accounting.orderAmount.amountMng.taxCalculationInd.consumptInd.consumptInd"/>
        <id  column="BUDGET_NO" property="complement.budgetNumber.budgetNumber"/>
        <id  column="BUDGET_NAME" property="complement.budgetNumber.titleName.titleName"/>
        <id  column="ORDER_CANCEL_VOL" property="orderCancel.orderCancelVol.vol"/>
        <id  column="ORDER_CANCEL_AMOUNT" property="orderCancel.orderCancelAmount.amount"/>
        <id  column="CURRENCY_CD" property="orderCancel.orderCancelAmount.currencyCd"/>
        <id  column="ATTACH_FILE_SEQ1" property="complement.rangeByAttachFile1.attachFile.seqNo"/>
        <id  column="ATTACH_FILE_SEQ2" property="complement.rangeByAttachFile2.attachFile.seqNo"/>
        <id  column="ATTACH_FILE_SEQ3" property="complement.rangeByAttachFile3.attachFile.seqNo"/>
        <id  column="REQ_SECTION_CD" property="user.reqUser.reqUser.section.sectionCd"/>
        <id  column="REQ_SECTION_NAME" property="user.reqUser.reqUser.section.sectionName"/>
        <id  column="REQ_USER_EXTENSION_NO" property="user.reqUser.reqUser.extNo.extensionNo"/>
        <id  column="REQ_USER_TEL_NO" property="user.reqUser.reqUser.externalNo.externalNo"/>
        <id  column="BUYER_SECTION_CD" property="user.buyUser.buyUser.section.sectionCd"/>
        <id  column="BUYER_SECTION_NAME" property="user.buyUser.buyUser.section.sectionName"/>
        <id  column="BUYER_USER_EXTENSION_NO" property="user.buyUser.buyUser.extNo.extensionNo"/>
        <id  column="BUYER_USER_TEL_NO" property="user.buyUser.buyUser.externalNo.externalNo"/>
        <id  column="BUYER_COMMENT" property="orderComment.buyerComment.comment.comment"/>
        <id  column="REQ_TYPE_IND" property="reqInd.reqInd"/>
        <id  column="FOR_SUPPRIER_COMMENT" property="orderComment.forSupplierComment.forSupplierComment.comment"/>
        <id  column="APP_ROUTE_NO" property="approute.appRouteNo"/>
        <id  column="APP_ROUTE_NAME" property="approute.appRouteName"/>
        <id  column="FOR_BUYER_COMMENT" property="orderComment.forBuyerComment.forBuyerComment.comment"/>
        <id  column="PUR_REQ_NO" property="orderManagement.slipOriginNo.purReqNo.purReqNo"/>
        <id  column="REQ_CURRENCY_CD" property="requestAccount.unitPrice.currencyCd"/>
        <id  column="REQ_UNIT_PRICE" property="requestAccount.unitPrice.amount"/>
        <id  column="REQ_VOL" property="requestAccount.requestVol.vol"/>
        <id  column="REQ_UNIT_NAME" property="requestAccount.unitName"/>
        <id  column="REQ_CURRENCY_CD" property="requestAccount.requestAmount.currencyCd"/>
        <id  column="REQ_AMOUNT" property="requestAccount.requestAmount.amount"/>
        <id  column="PRICE_REG_FLG" property="condition.priceRegFlg"/>
        <id  column="SUP_CONFIRM_FLG" property="status.supConfirmFlg.supConfirmFlag"/>
        <id  column="attach_file_name_a" property="complement.rangeByAttachFile1.attachFile.fileName"/>
        <id  column="attach_file_name_b" property="complement.rangeByAttachFile2.attachFile.fileName"/>
        <id  column="attach_file_name_c" property="complement.rangeByAttachFile3.attachFile.fileName"/>
        <id  column="requser.mail" property="user.reqUser.reqUser.mailAddr.mail"/>
        <id  column="buyuser.mail" property="user.buyUser.buyUser.mailAddr.mail"/>
        <id  column="ATTACHRANGE1" property="complement.rangeByAttachFile1.attachRange.attachRange"/>
        <id  column="ATTACHRANGE2" property="complement.rangeByAttachFile2.attachRange.attachRange"/>
        <id  column="ATTACHRANGE3" property="complement.rangeByAttachFile3.attachRange.attachRange"/>
        <id  column="PAY_CONDITION_CD" property="payConditionItem.payConditionIdentify.payConditionCd"/>
        <id  column="PAY_CONDITION_NAME" property="payConditionItem.payConditionName"/>
        <id column="EXT_TXT_1" property="detailExtItem.extendTxt.extendTxt1"/>
        <id column="EXT_TXT_2" property="detailExtItem.extendTxt.extendTxt2"/>
        <id column="EXT_TXT_3" property="detailExtItem.extendTxt.extendTxt3"/>
        <id column="EXT_TXT_4" property="detailExtItem.extendTxt.extendTxt4"/>
        <id column="EXT_TXT_5" property="detailExtItem.extendTxt.extendTxt5"/>
        <id column="EXT_TXT_6" property="detailExtItem.extendTxt.extendTxt6"/>
        <id column="EXT_TXT_7" property="detailExtItem.extendTxt.extendTxt7"/>
        <id column="EXT_TXT_8" property="detailExtItem.extendTxt.extendTxt8"/>
        <id column="EXT_TXT_9" property="detailExtItem.extendTxt.extendTxt9"/>
        <id column="EXT_TXT_10" property="detailExtItem.extendTxt.extendTxt10"/>
        <id column="EXT_AREA_1" property="detailExtItem.extendArea.extendArea1"/>
        <id column="EXT_AREA_2" property="detailExtItem.extendArea.extendArea2"/>
        <id column="EXT_AREA_3" property="detailExtItem.extendArea.extendArea3"/>
        <id column="EXT_AREA_4" property="detailExtItem.extendArea.extendArea4"/>
        <id column="EXT_AREA_5" property="detailExtItem.extendArea.extendArea5"/>
        <id column="EXT_DATE_1" property="detailExtItem.extendDate.extendDate1.dateOfymd"/>
        <id column="EXT_DATE_2" property="detailExtItem.extendDate.extendDate2.dateOfymd"/>
        <id column="EXT_DATE_3" property="detailExtItem.extendDate.extendDate3.dateOfymd"/>
        <id column="EXT_DATE_4" property="detailExtItem.extendDate.extendDate4.dateOfymd"/>
        <id column="EXT_DATE_5" property="detailExtItem.extendDate.extendDate5.dateOfymd"/>
        <id column="EXT_INT_1" property="detailExtItem.extendInt.extendInt1.value"/>
        <id column="EXT_INT_2" property="detailExtItem.extendInt.extendInt2.value"/>
        <id column="EXT_INT_3" property="detailExtItem.extendInt.extendInt3.value"/>
        <id column="EXT_INT_4" property="detailExtItem.extendInt.extendInt4.value"/>
        <id column="EXT_INT_5" property="detailExtItem.extendInt.extendInt5.value"/>
        <id column="EXT_INT_6" property="detailExtItem.extendInt.extendInt6.value"/>
        <id column="EXT_INT_7" property="detailExtItem.extendInt.extendInt7.value"/>
        <id column="EXT_INT_8" property="detailExtItem.extendInt.extendInt8.value"/>
        <id column="EXT_INT_9" property="detailExtItem.extendInt.extendInt9.value"/>
        <id column="EXT_INT_10" property="detailExtItem.extendInt.extendInt10.value"/>
        <id column="EXT_DEC_1" property="detailExtItem.extendDec.extendDec1.value"/>
        <id column="EXT_DEC_2" property="detailExtItem.extendDec.extendDec2.value"/>
        <id column="EXT_DEC_3" property="detailExtItem.extendDec.extendDec3.value"/>
        <id column="EXT_DEC_4" property="detailExtItem.extendDec.extendDec4.value"/>
        <id column="EXT_DEC_5" property="detailExtItem.extendDec.extendDec5.value"/>
        <id column="EXT_SEL_1" property="detailExtItem.extendSel.extendSel1"/>
        <id column="EXT_SEL_2" property="detailExtItem.extendSel.extendSel2"/>
        <id column="EXT_SEL_3" property="detailExtItem.extendSel.extendSel3"/>
        <id column="EXT_SEL_4" property="detailExtItem.extendSel.extendSel4"/>
        <id column="EXT_SEL_5" property="detailExtItem.extendSel.extendSel5"/>
        <id column="EXT_SEL_6" property="detailExtItem.extendSel.extendSel6"/>
        <id column="EXT_SEL_7" property="detailExtItem.extendSel.extendSel7"/>
        <id column="EXT_SEL_8" property="detailExtItem.extendSel.extendSel8"/>
        <id column="EXT_SEL_9" property="detailExtItem.extendSel.extendSel9"/>
        <id column="EXT_SEL_10" property="detailExtItem.extendSel.extendSel10"/>
        <id column="EXT_CHK_1" property="detailExtItem.extendChk.extendChk1"/>
        <id column="EXT_CHK_2" property="detailExtItem.extendChk.extendChk2"/>
        <id column="EXT_CHK_3" property="detailExtItem.extendChk.extendChk3"/>
        <id column="EXT_CHK_4" property="detailExtItem.extendChk.extendChk4"/>
        <id column="EXT_CHK_5" property="detailExtItem.extendChk.extendChk5"/>
        <id column="EXT_FILE_1" property="detailExtItem.extendFile.extendFile1.fileName"/>
        <id column="EXT_FILE_2" property="detailExtItem.extendFile.extendFile2.fileName"/>
        <id column="EXT_FILE_3" property="detailExtItem.extendFile.extendFile3.fileName"/>
        <id column="EXT_FILE_BINARY_1" property="detailExtItem.extendFile.extendFile1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="detailExtItem.extendFile.extendFile2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="detailExtItem.extendFile.extendFile3.binary"/>
        <id column="EXT_MST_1" property="detailExtItem.extendMst.extendMst1.mstKey"/>
        <id column="EXT_MST_2" property="detailExtItem.extendMst.extendMst2.mstKey"/>
        <id column="EXT_MST_3" property="detailExtItem.extendMst.extendMst3.mstKey"/>
        <id column="EXT_MST_4" property="detailExtItem.extendMst.extendMst4.mstKey"/>
        <id column="EXT_MST_5" property="detailExtItem.extendMst.extendMst5.mstKey"/>
        <id column="EXT_MST_6" property="detailExtItem.extendMst.extendMst6.mstKey"/>
        <id column="EXT_MST_7" property="detailExtItem.extendMst.extendMst7.mstKey"/>
        <id column="EXT_MST_8" property="detailExtItem.extendMst.extendMst8.mstKey"/>
        <id column="EXT_MST_NAME_1" property="detailExtItem.extendMst.extendMst1.mstName"/>
        <id column="EXT_MST_NAME_2" property="detailExtItem.extendMst.extendMst2.mstName"/>
        <id column="EXT_MST_NAME_3" property="detailExtItem.extendMst.extendMst3.mstName"/>
        <id column="EXT_MST_NAME_4" property="detailExtItem.extendMst.extendMst4.mstName"/>
        <id column="EXT_MST_NAME_5" property="detailExtItem.extendMst.extendMst5.mstName"/>
        <id column="EXT_MST_NAME_6" property="detailExtItem.extendMst.extendMst6.mstName"/>
        <id column="EXT_MST_NAME_7" property="detailExtItem.extendMst.extendMst7.mstName"/>
        <id column="EXT_MST_NAME_8" property="detailExtItem.extendMst.extendMst8.mstName"/>
        
    </resultMap>
    <!--注文マスタを取得する-->
    <select id="detail" 
        parameterType="fw.domain.slip.order.order.OrderIdentify"
          resultMap="Order_Map">
           SELECT 
              T_ORDER.ORDER_SEQ,
              T_ORDER.PRE_SEQ,
              T_ORDER.ORDER_NO,
              T_ORDER.ORDER_VERSION,
              T_ORDER.INFO_CD,
              T_ORDER.ORDER_STATUS AS "status.orderstatus.orderstatus",
              T_ORDER.TITLE_NAME,
              T_ORDER.ORDER_FIRST_DATE,
              T_ORDER.ORDER_DATE,
              T_ORDER.LOAD_SECTION_CD,
              T_ORDER.LOAD_SECTION_NAME, 
              T_ORDER.DELIV_PLACE_CD,
              T_ORDER.DELIV_PLACE_NAME, 
              T_ORDER.SUP_CD AS "supplierfrom.supcd", 
              T_ORDER.SUP_ABBR_NAME,
              T_ORDER.SUBCON_IND AS "supplierfrom.subcon.subconind",
              T_ORDER.EDI_IND AS "supplierfrom.ediInd.ediInd",
              T_ORDER.SUP_ZIP_CD,
              T_ORDER.SUP_ADDRESS1,
              T_ORDER.SUP_ADDRESS2,
              T_ORDER.SUP_TEL_NO,
              T_ORDER.SUP_FAX_NO,
              T_ORDER.SUBJECT_CD AS "accounting.subject.subjectcd",
              T_ORDER.SUBJECT_NAME AS "accounting.subject.subjectname", 
              T_ORDER.ITEM_CLASS_COMPANY_CD,
              T_ORDER.ITEM_CLASS_L_NAME, 
              T_ORDER.ITEM_CLASS_M_NAME,
              T_ORDER.ITEM_CLASS_S_NAME,
              T_ORDER.ITEM_CD,
              T_ORDER.ITEM_NAME,
              T_ORDER.KATASHIKI, 
              T_ORDER.MANUFACT_CD,
              T_ORDER.MANUFACT_NAME,
              T_ORDER.INSPECT_IND,
              T_ORDER.ORDER_DELIV_DATE,
              T_ORDER.UNIT_PRICE_IND,
              T_ORDER.PRICE_UNDEC_REASON,
              T_ORDER.PRICE_DEC_DATE,
              T_ORDER.CURRENCY_CD,
              T_ORDER.UNIT_PRICE,
              T_ORDER.ORDER_VOL,
              T_ORDER.UNIT_CD,
              T_ORDER.UNIT_NAME,
              T_ORDER.ORDER_AMOUNT,
              T_ORDER.TAX_IND,
              T_ORDER.CONSUMPT_IND,
              T_ORDER.BUDGET_NO,
              T_RINGI_BUDGET_DTL.BUDGET_NAME,
              T_ORDER.ORDER_CANCEL_VOL,
              T_ORDER.ORDER_CANCEL_AMOUNT,
              T_ORDER.SUP_CONFIRM_FLG,
              T_ORDER.ATTACH_FILE_SEQ1,
              T_ORDER.ATTACH_FILE_SEQ2,
              T_ORDER.ATTACH_FILE_SEQ3,
              T_ORDER.BUYER_COMMENT,
              T_ORDER.FOR_SUPPRIER_COMMENT,
              T_ORDER.REQ_SECTION_CD,
              T_ORDER.REQ_SECTION_NAME,
              T_ORDER.REQ_USER_EXTENSION_NO,
              T_ORDER.REQ_USER_TEL_NO,
              T_ORDER.REQ_USER_ID AS "user.requser.requser.userid",
              T_ORDER.REQ_USER_NAME AS "user.reqUser.reqUser.userName",
              T_ORDER.BUYER_SECTION_CD,
              T_ORDER.BUYER_SECTION_NAME,
              T_ORDER.BUYER_USER_EXTENSION_NO,
              T_ORDER.BUYER_USER_TEL_NO,
              T_ORDER.BUYER_USER_ID AS "user.buyuser.buyuser.userid",
              T_ORDER.BUYER_USER_NAME AS "user.buyuser.buyuser.username",
              T_ORDER.APP_ROUTE_NO,
              T_ORDER.APP_ROUTE_NAME,
              T_ORDER.PAY_CONDITION_CD,
              T_ORDER.PAY_CONDITION_NAME,
              T_PUR_APL.FOR_BUYER_COMMENT,
              T_PUR_APL.REQ_TYPE_IND,
              T_PUR_REQUEST.PUR_REQ_NO,
              T_PUR_REQUEST.CURRENCY_CD AS REQ_CURRENCY_CD,
              T_PUR_REQUEST.UNIT_PRICE AS REQ_UNIT_PRICE,
              T_PUR_REQUEST.REQ_VOL,
              T_PUR_REQUEST.UNIT_NAME AS REQ_UNIT_NAME,
              T_PUR_REQUEST.REQ_AMOUNT,
              T_PUR_REQUEST.PRICE_REG_FLG,
              M_B_USER_A.MAIL_ADDR AS "requser.mail",
              M_B_USER_B.MAIL_ADDR AS "buyuser.mail",
              T_ATTACH_MNG_A.ATTACH_FILE_NAME AS "attach_file_name_a",
              T_ATTACH_MNG_B.ATTACH_FILE_NAME AS "attach_file_name_b",
              T_ATTACH_MNG_C.ATTACH_FILE_NAME AS "attach_file_name_c",
              T_ATTACH_MNG_A.ATTACH_SCOPE AS "ATTACHRANGE1", 
              T_ATTACH_MNG_B.ATTACH_SCOPE AS "ATTACHRANGE2", 
              T_ATTACH_MNG_C.ATTACH_SCOPE AS "ATTACHRANGE3",
              ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_ORDER")}
          FROM  T_ORDER
          LEFT JOIN T_PUR_REQUEST
              ON        T_ORDER.PUR_REQ_NO = T_PUR_REQUEST.PUR_REQ_NO
              AND  T_PUR_REQUEST.NEW_APP_FLG = '1'
              AND  T_PUR_REQUEST.NEW_FLG = '1'
              AND  T_PUR_REQUEST.DELETE_FLG  = '0'
          LEFT JOIN T_PUR_APL
            ON   T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST.PUR_APL_SEQ
            AND  T_PUR_APL.NEW_APP_FLG = '1'
            AND  T_PUR_APL.DELETE_FLG  = '0'
          LEFT JOIN M_B_USER　M_B_USER_A
              ON    T_ORDER.REQ_COMPANY_CD = M_B_USER_A.COMPANY_CD
              AND  T_ORDER.REQ_USER_ID  = M_B_USER_A.USER_ID
              AND  M_B_USER_A.TERM_FLG = '0'
          LEFT JOIN M_B_USER　M_B_USER_B
              ON T_ORDER.BUYER_COMPANY_CD = M_B_USER_B.COMPANY_CD
              AND  T_ORDER.BUYER_USER_ID = M_B_USER_B.USER_ID
              AND  M_B_USER_B.TERM_FLG = '0'
          LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_A
              ON    T_ORDER.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ
              AND  T_ATTACH_MNG_A.DELETE_FLG  = '0'
          LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_B
              ON    T_ORDER.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ
              AND  T_ATTACH_MNG_B.DELETE_FLG  = '0'
          LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_C
              ON    T_ORDER.ATTACH_FILE_SEQ3 = T_ATTACH_MNG_C.ATTACH_FILE_SEQ
              AND  T_ATTACH_MNG_C.DELETE_FLG  = '0'
          LEFT JOIN T_RINGI_BUDGET_DTL 
              ON T_RINGI_BUDGET_DTL.COMPANY_CD = T_ORDER.LOAD_COMPANY_CD 
             AND T_RINGI_BUDGET_DTL.SECTION_PLACE_CD = T_ORDER.LOAD_SECTION_PLACE_CD 
             AND T_RINGI_BUDGET_DTL.BUDGET_DTL_NO = T_ORDER.BUDGET_NO 
           WHERE    T_ORDER.ORDER_SEQ = #{orderSeq, jdbcType=VARCHAR}
    </select>
    
    <!--注文テーブルの更新 削除の場合-->
    <update id="update" parameterType="fw.domain.slip.order.order.OrderIdentify">
        UPDATE T_ORDER
        SET 
            NEW_FLG='0',
            NEW_APP_FLG='0',
            DELETE_FLG='1',
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
        WHERE ORDER_SEQ=  #{orderSeq, jdbcType=VARCHAR}
    </update>
    
    <!--注文テーブルの更新 削除の場合(変更前に戻る)-->
    <update id="updatePre" parameterType="fw.domain.slip.order.order.OrderIdentify">
        UPDATE T_ORDER
        SET 
            NEW_FLG='1',
            NEW_APP_FLG='1',
            DELETE_FLG='0',
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
        WHERE ORDER_SEQ=  #{preSeq, jdbcType=VARCHAR}
    </update>

   <select id="searchDoomsdayMonth" resultType="String" >
      SELECT CUTOFF_DATE
       FROM (SELECT CUTOFF_DATE
            FROM M_CUTOFF_DATE
            WHERE CUTOFF_DATE >= '${@fw.common.util.AppUtil@getSysDate()}'
            ORDER BY CUTOFF_DATE ASC)
      WHERE ROWNUM = 1
   </select>
   
    <!-- =============================注文入力   PSORD040 START ===========================-->
    <resultMap type="fw.domain.slip.order.order.Order" id="OrderInputInit_Map">
        <id column="ORDER_NO" property="orderNo.orderNo"/><!-- 注文番号 -->
        <id column="ORDER_VERSION" property="historyNo.historyNo"/><!-- 注文版数 -->
        <id column="TITLE_NAME" property="titleName.titleName"/><!-- 件名 -->
        <id column="INFO_CD" property="informationInd.informationInd"/><!-- 情報区分コード -->
        <id column="SUP_LANGUAGE_IND" property="supplierFrom.languageInd.languageInd"/><!-- 取引先言語区分 -->
        <id column="REQ_COMPANY_CD" property="user.reqUser.reqUser.section.company.companyCd"/> <!-- 依頼元会社コード -->
        <id column="REQ_COMPANY_NAME" property="user.reqUser.reqUser.section.company.companyName"/><!-- 依頼元会社名 -->
        <id column="REQ_SECTION_PLACE_CD" property="user.reqUser.reqUser.section.sectionPlace.sectionPlaceCd"/> <!-- 依頼元事業所コード -->
        <id column="REQ_SECTION_PLACE_NAME" property="user.reqUser.reqUser.section.sectionPlace.sectionPlaceName"/><!-- 依頼元事業所名 -->
        <id column="REQ_SECTION_CD" property="user.reqUser.reqUser.section.sectionCd"/> <!-- 依頼元部門コード -->
        <id column="REQ_SECTION_NAME" property="user.reqUser.reqUser.section.sectionName"/><!-- 依頼元部門名 -->
        <id column="REQ_USER_ID" property="user.reqUser.reqUser.userID"/><!-- 依頼元担当者ID -->
        <id column="REQ_USER_NAME" property="user.reqUser.reqUser.userName"/><!-- 依頼元担当者名 -->
        <id column="REQ_USER_EXTENSION_NO" property="user.reqUser.reqUser.extNo.extensionNo"/><!-- 依頼元担当内線番号 -->
        <id column="REQ_USER_TEL_NO" property="user.reqUser.reqUser.externalNo.externalNo"/><!-- 依頼元担当外線番号 -->
        <id column="MAIL_ADDR" property="user.reqUser.reqUser.mailAddr.mail"/><!-- メールアドレス -->
        <id column="PUR_REQ_DATE" property="schedule.reqDate.reqDate.dateOfymd"/><!-- 購入依頼日 -->
        <id column="ORDER_FIRST_DATE" property="schedule.orderDate.orderFirstDate.dateOfymd"/><!-- 初回注文日 -->
        <id column="ORDER_INPUT_DATE" property="schedule.orderDate.orderInputDate.dateOfymd"/><!-- 注文登録日 -->
        <id column="APP_ROUTE_NO" property="approute.appRouteNo"/><!-- 承認ルート番号 -->
        <id column="APP_ROUTE_NAME" property="approute.appRouteName"/><!-- 承認ルート名 -->
        <id column="BUYER_COMPANY_NAME" property="user.buyUser.buyUser.section.company.companyName"/><!-- 購買会社名 -->
        <id column="BUYER_SECTION_PLACE_NAME" property="user.buyUser.buyUser.section.sectionPlace.sectionPlaceName"/><!-- 購買事業所名 -->
        <id column="BUYER_SECTION_NAME" property="user.buyUser.buyUser.section.sectionName"/><!-- 購買部門名 -->
        <id column="BUYER_USER_NAME" property="user.buyUser.buyUser.userName"/><!-- 購買担当者名 -->
        <id column="LOAD_COMPANY_CD" property="user.loadSection.loadSection.company.companyCd"/><!-- 負担会社コード -->
        <id column="LOAD_COMPANY_NAME" property="user.loadSection.loadSection.company.companyName"/><!-- 負担会社名 -->
        <id column="LOAD_SECTION_PLACE_CD" property="user.loadSection.loadSection.sectionPlace.sectionPlaceCd"/><!-- 負担事業所コード -->
        <id column="LOAD_SECTION_PLACE_NAME" property="user.loadSection.loadSection.sectionPlace.sectionPlaceName"/><!-- 負担事業所名 -->
        <id column="LOAD_SECTION_CD" property="user.loadSection.loadSection.sectionCd"/><!-- 負担部門コード -->
        <id column="LOAD_SECTION_NAME" property="user.loadSection.loadSection.sectionName"/><!-- 負担部門名 -->
        <id column="DELIV_PLACE_COMPANY_CD" property="complement.delivPlace.delivPlaceCompanyCd"/><!-- 納入先会社コード -->
        <id column="DELIV_PLACE_CD" property="complement.delivPlace.delivPlaceCd"/><!-- 納入先コード -->
        <id column="DELIV_PLACE_NAME" property="complement.delivPlace.delivPlaceName"/><!-- 納入先名 -->
        <id column="DELIV_PLACE_ZIP_CD" property="complement.delivPlace.contact.zipCd.zipCd"/><!-- 納入先郵便番号 -->
        <id column="DELIV_PLACE_ADDRESS1" property="complement.delivPlace.contact.address1.address"/><!-- 納入先住所１ -->
        <id column="DELIV_PLACE_ADDRESS2" property="complement.delivPlace.contact.address2.address"/><!-- 納入先住所２ -->
        <id column="DELIV_PLACE_NAME_INB" property="complement.delivPlace.delivPlaceNameInb"/><!-- 構内配送先 -->
        <id column="DELIV_PLACE_TEL_NO" property="complement.delivPlace.contact.telNo.telNo"/><!-- 納入先電話番号 -->
        <id column="DELIV_PLACE_FAX_NO" property="complement.delivPlace.contact.faxNo.faxNo"/><!-- 納入先FAX番号 -->
        <id column="DELIV_PLACE_COMPANY_NAME" property="complement.delivPlace.delivPlaceCompanyName"/><!-- 納入先会社名 -->
        <id column="DELIV_PLACE_CONTACT_NAME" property="complement.delivPlace.delivPlaceContactName"/><!-- 納入先担当者名 -->
        <id column="SUP_COMPANY_CD" property="supplierFrom.supCompanyCd"/><!-- 取引先会社コード -->
        <id column="SUP_CD" property="supplierFrom.supCd"/><!-- 取引先コード -->
        <id column="SUP_NAME" property="supplierFrom.supplierName.supplierName"/><!-- 取引先名 -->
        <id column="SUP_ABBR_NAME" property="supplierFrom.supplierName.supplierAbbrName"/><!-- 取引先名（略称） -->
        <id column="SUP_ZIP_CD" property="supplierFrom.supplierContact.ctc.zipCd.zipCd"/><!-- 郵便番号 -->
        <id column="SUP_TEL_NO" property="supplierFrom.supplierContact.ctc.telNo.telNo"/><!-- 電話番号 -->
        <id column="SUP_FAX_NO" property="supplierFrom.supplierContact.ctc.faxNo.faxNo"/><!-- FAX番号 -->
        <id column="SUP_ADDRESS1" property="supplierFrom.supplierContact.ctc.address1.address"/><!-- 住所1 -->
        <id column="SUP_ADDRESS2" property="supplierFrom.supplierContact.ctc.address2.address"/><!-- 住所2 -->
        <id column="SUBCON_IND" property="supplierFrom.subcon.subconInd"/><!-- 下請法適用業者区分 -->
        <id column="EDI_IND" property="supplierFrom.ediInd.ediInd"/><!-- EDIデータ送受信方法 -->
        <id column="VENDOR_CD" property="supplierFrom.vendor.vendorCd"/><!-- 統一取引先コード -->     
        <id column="SUBJECT_COMPANY_CD" property="accounting.subject.subjectCompanyCd"/><!-- 科目会社コード -->
        <id column="SUBJECT_CD" property="accounting.subject.subjectCd"/><!-- 科目コード -->
        <id column="SUBJECT_NAME" property="accounting.subject.subjectName"/><!-- 科目名 -->
        <id column="ITEM_CLASS_COMPANY_CD" property="accounting.orderItem.itemKind.itemClassCompanyCd"/><!-- 品種会社コード -->
        <id column="ITEM_CLASS_L" property="accounting.orderItem.itemKind.itemClassL"/><!-- 大分類コード -->
        <id column="ITEM_CLASS_M" property="accounting.orderItem.itemKind.itemClassM"/><!-- 中分類コード -->
        <id column="ITEM_CLASS_S" property="accounting.orderItem.itemKind.itemClassS"/><!-- 小分類コード -->
        <id column="ITEM_CLASS_L_NAME" property="accounting.orderItem.itemKind.itemClassLName"/><!-- 大分類名 -->
        <id column="ITEM_CLASS_M_NAME" property="accounting.orderItem.itemKind.itemClassMName"/><!-- 中分類名 -->
        <id column="ITEM_CLASS_S_NAME" property="accounting.orderItem.itemKind.itemClassSName"/><!-- 小分類名 -->
        <id column="ITEM_COMPANY_CD" property="accounting.orderItem.item.itemCompanyCd"/><!-- 品名会社コード -->
        <id column="ITEM_CD" property="accounting.orderItem.item.itemCd"/><!-- 品名コード -->
        <id column="ITEM_NAME" property="accounting.orderItem.item.itemName"/><!-- 品名 -->
        <id column="KATASHIKI" property="accounting.orderItem.item.katashiki"/><!-- 型式 -->
        <id column="MANUFACT_CD" property="accounting.orderItem.item.manufact.manufactCd"/><!-- メーカーコード -->
        <id column="MANUFACT_NAME" property="accounting.orderItem.item.manufact.manufactName"/><!-- メーカー名 -->
        <id column="INSPECT_IND" property="condition.inspectInd.inspectInd"/><!-- 検査区分 -->
        <id column="ORDER_DELIV_DATE" property="schedule.dlvEst.dlvEst.dateOfymd"/><!-- 注文納期 -->
        <id column="PRE_ORDER_DELIV_DATE" property="schedule.dlvEst.preDlvEst.dateOfymd"/><!-- 変更前注文納期 -->
        <id column="ORDER_LT" property="schedule.dlvEst.standardDelivDayCount.standardDelivDayCount.dayCount"/><!-- 標準納入日 -->
        <id column="REQ_CURRENCY_CD" property="requestAccount.unitPrice.currencyCd"/><!-- 希望通貨コード -->
        <id column="REQ_UNIT_PRICE" property="requestAccount.unitPrice.amount"/><!-- 希望単価 -->
        <id column="REQ_VOL" property="requestAccount.requestVol.vol"/><!-- 希望数量 -->
        <id column="REQ_UNIT_NAME" property="requestAccount.unitName"/><!-- 希望数量単位名 -->
        <id column="REQ_CURRENCY_CD" property="requestAccount.requestAmount.currencyCd"/><!-- 通貨コード -->
        <id column="REQ_AMOUNT" property="requestAccount.requestAmount.amount"/><!-- 希望金額 -->
        <id column="CURRENCY_CD" property="accounting.orderAmount.amountMng.currency.currencyCd"/><!-- 通貨コード -->
        <id column="UNIT_PRICE" property="accounting.orderAmount.unitPrice.amount.amount"/><!-- 注文単価 -->
        <id column="T_ORDER$UNIT_PRICE" property="accounting.orderAmount.oldUnitPrice.amount.amount"/><!-- 注文単価 -->
        <id column="UNIT_PRICE_IND" property="status.priceManagement.unitPriceInd"/><!-- 単価区分 -->
        <id column="UNIT_PRICE_IND_PRE" property="status.priceManagement.unitPriceIndPre"/><!-- 単価区分_変更前 -->
        <id column="PRICE_UNDEC_REASON" property="status.priceManagement.priceUndecReason.comment"/><!-- 未定理由 -->
        <id column="PRICE_DEC_DATE" property="status.priceManagement.priceDecDate.dateOfymd"/><!-- 価格決定予定日 -->
        <id column="PRICE_DEC_FLG" property="status.priceDecFlag.priceDecFlag"/><!-- 単価確定変更フラグ -->
        <id column="ORDER_VOL" property="accounting.orderAmount.orderVolume.orderVol.vol"/><!-- 注文数量 -->
        <id column="DELIV_VOL" property="accounting.orderAmount.orderVolume.receivedVol.vol"/><!-- 受入済数量 -->
        <id column="UNDELIV_VOL" property="accounting.orderAmount.orderVolume.unDelivVol.vol"/><!-- 受入残数量 -->
        <id column="CANCEL_VOL" property="orderCancel.orderCancelVol.vol"/><!-- 取消／打切数量 -->
        <id column="CANCEL_AMOUNT" property="orderCancel.orderCancelAmount.amount"/><!-- 取消／打切金額 -->
        <id column="UNIT_CD" property="accounting.orderItem.item.unit.unitCd"/><!-- 単位コード -->
        <id column="UNIT_NAME" property="accounting.orderItem.item.unit.unitName"/><!-- 単位名 -->
        <id column="ORDER_AMOUNT" property="accounting.orderAmount.orderAmount.amount"/><!-- 注文金額 -->
        <id column="T_ORDER$ORDER_AMOUNT" property="accounting.orderAmount.oldOrderAmount.amount"/><!-- 注文金額 -->
        <id column="CURRENCY_CD" property="accounting.orderAmount.oldOrderAmount.currencyCd"/><!-- 通貨コード-->
        <id column="HOPE_AMOUNT" property="accounting.orderAmount.hopeAmount.amount"/><!-- 希望金額 -->
        <id column="TAX_IND" property="accounting.orderAmount.amountMng.taxCalculationInd.taxInd.taxInd"/><!-- 課税区分 -->
        <id column="CONSUMPT_IND" property="accounting.orderAmount.amountMng.taxCalculationInd.consumptInd.consumptInd"/><!-- 消費税区分 -->
        <id column="TAX_RATE" property="accounting.orderAmount.taxRate.taxRate"/><!-- 税率 -->
        <id column="ORDER_CNV_CURRENCY_CD" property="accounting.orderCnv.currency.currencyCd"/><!-- 注文登録時換算通貨 -->
        <id column="ORDER_CNV_RATE" property="accounting.orderCnv.orderCnvRate.rate"/><!-- 注文登録時換算レート -->
        <id column="BUDGET_NO" property="complement.budgetNumber.budgetNumber"/><!-- 予算番号 -->
        <id column="BUDGET_NAME" property="complement.budgetNumber.titleName.titleName"/><!-- 予算名 -->
        <id column="SEND_IND" property="status.dataInd.supSend.sendInd.sendInd"/><!-- データ送信区分 -->
        <id column="PRINT_IND" property="status.dataInd.printInd.printInd.sendInd"/><!-- 印刷区分 -->
        <id column="FAX_SEND_IND" property="status.dataInd.supSend.faxSendInd.sendInd"/><!-- FAX送信区分 -->
        <id column="EST_DELIV_FLG" property="status.dlvRespFlg.dlvRespFlg"/><!-- 納期回答フラグ -->
        <id column="AUTO_TERMINATE_FLG" property="condition.autoTerminateFlg.autoTerminateFlg"/><!-- 自動打切フラグ -->
        <id column="BUYER_COMMENT" property="orderComment.buyerComment.comment.comment"/><!-- 発注コメント（取引先非通知） -->
        <id column="FOR_SUPPRIER_COMMENT" property="orderComment.forSupplierComment.forSupplierComment.comment"/><!-- 取引先向けコメント -->
        <id column="FOR_BUYER_COMMENT" property="orderComment.forBuyerComment.forBuyerComment.comment"/><!-- 購買担当者向けコメント -->   
        <id column="ATTACH_FILE_NAME1" property="complement.rangeByAttachFile1.attachFile.fileName"/><!-- 添付ファイル1 -->
        <id column="ATTACH_FILE_NAME2" property="complement.rangeByAttachFile2.attachFile.fileName"/><!-- 添付ファイル2 -->
        <id column="ATTACH_FILE_NAME3" property="complement.rangeByAttachFile3.attachFile.fileName"/><!-- 添付ファイル3 -->
        <id column="ATTACH_FILE_SEQ1" property="complement.rangeByAttachFile1.attachFile.seqNo"/><!-- 添付ファイル1シーケンス番号 -->
        <id column="ATTACH_FILE_SEQ2" property="complement.rangeByAttachFile2.attachFile.seqNo"/><!-- 添付ファイル2シーケンス番号 -->
        <id column="ATTACH_FILE_SEQ3" property="complement.rangeByAttachFile3.attachFile.seqNo"/><!-- 添付ファイル3シーケンス番号 -->
        <id column="ATTACH_SCOPE1" property="complement.rangeByAttachFile1.attachRange.attachRange"/><!-- 取引先へ開示1 -->
        <id column="ATTACH_SCOPE2" property="complement.rangeByAttachFile2.attachRange.attachRange"/><!-- 取引先へ開示2 -->
        <id column="ATTACH_SCOPE3" property="complement.rangeByAttachFile3.attachRange.attachRange"/><!-- 取引先へ開示3 -->
        <id column="RECEIVE_COMPANY_CD" property="user.receiveSection.receiveSection.company.companyCd"/><!-- 受入会社コード -->
        <id column="RECEIVE_COMPANY_NAME" property="user.receiveSection.receiveSection.company.companyName"/><!-- 受入会社名 -->
        <id column="RECEIVE_SECTION_PLACE_CD" property="user.receiveSection.receiveSection.sectionPlace.sectionPlaceCd"/><!-- 受入事業所コード -->
        <id column="RECEIVE_SECTION_PLACE_NAME" property="user.receiveSection.receiveSection.sectionPlace.sectionPlaceName"/><!-- 受入事業所名 -->
        <id column="RECEIVE_SECTION_CD" property="user.receiveSection.receiveSection.sectionCd"/><!-- 受入部門コード -->
        <id column="RECEIVE_SECTION_NAME" property="user.receiveSection.receiveSection.sectionName"/><!-- 受入部門名 -->
        <id column="QUOT_REQ_NO" property="orderManagement.slipOriginNo.quotReqNo.quotReqNo"/><!-- 見積依頼番号 -->
        <id column="PUR_REQ_NO" property="orderManagement.slipOriginNo.purReqNo.purReqNo"/><!-- 購入依頼番号 -->
        <id column="QUOT_REQ_DTL_NO" property="orderManagement.slipOriginNo.quotReqDtlNo.quotReqItemNo"/><!-- 見積依頼明細番号 -->
        <id column="LAST_UPD_DATE" property="orderIdentify.lastUpdDate"/><!-- 最終更新日時 -->
        <id column="PUR_REQ_SEQ" property="everyPurReqIdentify.puraplseq"/><!-- 購入依頼シーケンス番号 -->
        <id column="PUR_LAST_UPD_DATE" property="everyPurReqIdentify.lastUpdDate"/><!-- 購入依頼最終更新日時 -->
        <id column="RESP_LAST_UPD_DATE" property="quotRespIdentify.lastUpdDate"/><!-- 見積回答最終更新日時 -->
        <id column="SLIP_LAST_UPD_DATE" property="slipMngIdentify.lastUpdDate"/><!-- 伝票管理最終更新日時 -->
        <id column="ORDER_STATUS" property="status.orderStatus.orderStatus"/><!-- 注文ステータス -->
        <id column="REQ_TYPE_IND" property="reqInd.reqInd"/><!-- 依頼区分 -->
        <id column="CORRECT_CD" property="correctInd.correctInd"/><!-- 訂正区分 -->
        <id column="QUOT_RESP_SEQ" property="quotRespIdentify.quotRespSeqNo"/><!-- 見積回答シーケンス番号 -->
        <id column="RESPONSE_LAST_UPD_DATE" property="quotRespIdentify.lastUpdDate"/><!-- 見積回答シーケンス番号 -->
        <id column="QUOT_REQ_SEQ" property="quotReqSeq"/><!-- 見積シーケンス番号 -->
        <id column="QUOT_ADO_STATUS" property="status.quotAdoStatus.status"/><!-- 見積採否ステータス -->
        <id column="PRICE_REG_FLG" property="condition.priceRegFlg"/><!-- 価格登録品フラグ -->
        <id column="BUYER_COMPANY_CD" property="user.buyUser.buyUser.section.company.companyCd"/><!-- 購買会社コード --> 
        <id column="BUYER_SECTION_CD" property="user.buyUser.buyUser.section.sectionCd"/><!-- 購買部門コード --> 
        <id column="BUYER_USER_ID" property="user.buyUser.buyUser.userID"/><!-- 購買担当者 -->
        <id column="BUYER_USER_NAME" property="user.buyUser.buyUser.userName"/><!-- 購買担当者ID -->
        <id column="EXCLUSIVE_SLIP_NO" property="orderIdentify.exclusiveSlipId.slipNo"/>
        <id column="EXCLUSIVE_LAST_UPD_DATE" property="orderIdentify.exclusiveSlipId.lastUpdDate"/>
        <id column="PUR_APL_SEQ" property="purAplSeq"/>
        <id column="EXT_TXT_1" property="editExtItem.editTextExtItem.textExtItem1.value"/>
        <id column="EXT_TXT_2" property="editExtItem.editTextExtItem.textExtItem2.value"/>
        <id column="EXT_TXT_3" property="editExtItem.editTextExtItem.textExtItem3.value"/>
        <id column="EXT_TXT_4" property="editExtItem.editTextExtItem.textExtItem4.value"/>
        <id column="EXT_TXT_5" property="editExtItem.editTextExtItem.textExtItem5.value"/>
        <id column="EXT_TXT_6" property="editExtItem.editTextExtItem.textExtItem6.value"/>
        <id column="EXT_TXT_7" property="editExtItem.editTextExtItem.textExtItem7.value"/>
        <id column="EXT_TXT_8" property="editExtItem.editTextExtItem.textExtItem8.value"/>
        <id column="EXT_TXT_9" property="editExtItem.editTextExtItem.textExtItem9.value"/>
        <id column="EXT_TXT_10" property="editExtItem.editTextExtItem.textExtItem10.value"/>
        <id column="EXT_AREA_1" property="editExtItem.editAreaExtItem.arrayExtItem1.value"/>
        <id column="EXT_AREA_2" property="editExtItem.editAreaExtItem.arrayExtItem2.value"/>
        <id column="EXT_AREA_3" property="editExtItem.editAreaExtItem.arrayExtItem3.value"/>
        <id column="EXT_AREA_4" property="editExtItem.editAreaExtItem.arrayExtItem4.value"/>
        <id column="EXT_AREA_5" property="editExtItem.editAreaExtItem.arrayExtItem5.value"/>
        <id column="EXT_DATE_1" property="editExtItem.editDateExtItem.dateExtItem1.dateType.dateOfymd"/>
        <id column="EXT_DATE_2" property="editExtItem.editDateExtItem.dateExtItem2.dateType.dateOfymd"/>
        <id column="EXT_DATE_3" property="editExtItem.editDateExtItem.dateExtItem3.dateType.dateOfymd"/>
        <id column="EXT_DATE_4" property="editExtItem.editDateExtItem.dateExtItem4.dateType.dateOfymd"/>
        <id column="EXT_DATE_5" property="editExtItem.editDateExtItem.dateExtItem5.dateType.dateOfymd"/>
        <id column="EXT_INT_1" property="editExtItem.editIntExtItem.intExtItem1.value"/>
        <id column="EXT_INT_2" property="editExtItem.editIntExtItem.intExtItem2.value"/>
        <id column="EXT_INT_3" property="editExtItem.editIntExtItem.intExtItem3.value"/>
        <id column="EXT_INT_4" property="editExtItem.editIntExtItem.intExtItem4.value"/>
        <id column="EXT_INT_5" property="editExtItem.editIntExtItem.intExtItem5.value"/>
        <id column="EXT_INT_6" property="editExtItem.editIntExtItem.intExtItem6.value"/>
        <id column="EXT_INT_7" property="editExtItem.editIntExtItem.intExtItem7.value"/>
        <id column="EXT_INT_8" property="editExtItem.editIntExtItem.intExtItem8.value"/>
        <id column="EXT_INT_9" property="editExtItem.editIntExtItem.intExtItem9.value"/>
        <id column="EXT_INT_10" property="editExtItem.editIntExtItem.intExtItem10.value"/>
        <id column="EXT_DEC_1" property="editExtItem.editDecExtItem.decExtItem1.value"/>
        <id column="EXT_DEC_2" property="editExtItem.editDecExtItem.decExtItem2.value"/>
        <id column="EXT_DEC_3" property="editExtItem.editDecExtItem.decExtItem3.value"/>
        <id column="EXT_DEC_4" property="editExtItem.editDecExtItem.decExtItem4.value"/>
        <id column="EXT_DEC_5" property="editExtItem.editDecExtItem.decExtItem5.value"/>
        <id column="EXT_SEL_1" property="editExtItem.editSelExtItem.selExtItem1.value"/>
        <id column="EXT_SEL_2" property="editExtItem.editSelExtItem.selExtItem2.value"/>
        <id column="EXT_SEL_3" property="editExtItem.editSelExtItem.selExtItem3.value"/>
        <id column="EXT_SEL_4" property="editExtItem.editSelExtItem.selExtItem4.value"/>
        <id column="EXT_SEL_5" property="editExtItem.editSelExtItem.selExtItem5.value"/>
        <id column="EXT_SEL_6" property="editExtItem.editSelExtItem.selExtItem6.value"/>
        <id column="EXT_SEL_7" property="editExtItem.editSelExtItem.selExtItem7.value"/>
        <id column="EXT_SEL_8" property="editExtItem.editSelExtItem.selExtItem8.value"/>
        <id column="EXT_SEL_9" property="editExtItem.editSelExtItem.selExtItem9.value"/>
        <id column="EXT_SEL_10" property="editExtItem.editSelExtItem.selExtItem10.value"/>
        <id column="EXT_CHK_1" property="editExtItem.editChkExtItem.chkExtItem1.value"/>
        <id column="EXT_CHK_2" property="editExtItem.editChkExtItem.chkExtItem2.value"/>
        <id column="EXT_CHK_3" property="editExtItem.editChkExtItem.chkExtItem3.value"/>
        <id column="EXT_CHK_4" property="editExtItem.editChkExtItem.chkExtItem4.value"/>
        <id column="EXT_CHK_5" property="editExtItem.editChkExtItem.chkExtItem5.value"/>
        <id column="EXT_FILE_1" property="editExtItem.editFileExtItem.fileExtItem1.fileName"/>
        <id column="EXT_FILE_2" property="editExtItem.editFileExtItem.fileExtItem2.fileName"/>
        <id column="EXT_FILE_3" property="editExtItem.editFileExtItem.fileExtItem3.fileName"/>
        <id column="EXT_FILE_BINARY_1" property="editExtItem.editFileExtItem.fileExtItem1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="editExtItem.editFileExtItem.fileExtItem2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="editExtItem.editFileExtItem.fileExtItem3.binary"/>
        <id column="EXT_MST_1" property="editExtItem.editMstExtItem.mstExtItem1.mstKey"/>
        <id column="EXT_MST_2" property="editExtItem.editMstExtItem.mstExtItem2.mstKey"/>
        <id column="EXT_MST_3" property="editExtItem.editMstExtItem.mstExtItem3.mstKey"/>
        <id column="EXT_MST_4" property="editExtItem.editMstExtItem.mstExtItem4.mstKey"/>
        <id column="EXT_MST_5" property="editExtItem.editMstExtItem.mstExtItem5.mstKey"/>
        <id column="EXT_MST_6" property="editExtItem.editMstExtItem.mstExtItem6.mstKey"/>
        <id column="EXT_MST_7" property="editExtItem.editMstExtItem.mstExtItem7.mstKey"/>
        <id column="EXT_MST_8" property="editExtItem.editMstExtItem.mstExtItem8.mstKey"/>
        <id column="EXT_MST_NAME_1" property="editExtItem.editMstExtItem.mstExtItem1.mstName"/>
        <id column="EXT_MST_NAME_2" property="editExtItem.editMstExtItem.mstExtItem2.mstName"/>
        <id column="EXT_MST_NAME_3" property="editExtItem.editMstExtItem.mstExtItem3.mstName"/>
        <id column="EXT_MST_NAME_4" property="editExtItem.editMstExtItem.mstExtItem4.mstName"/>
        <id column="EXT_MST_NAME_5" property="editExtItem.editMstExtItem.mstExtItem5.mstName"/>
        <id column="EXT_MST_NAME_6" property="editExtItem.editMstExtItem.mstExtItem6.mstName"/>
        <id column="EXT_MST_NAME_7" property="editExtItem.editMstExtItem.mstExtItem7.mstName"/>
        <id column="EXT_MST_NAME_8" property="editExtItem.editMstExtItem.mstExtItem8.mstName"/>
        <id column="PAY_CONDITION_CD" property="payConditionItem.payConditionIdentify.payConditionCd"/>
        <id column="PAY_CONDITION_NAME" property="payConditionItem.payConditionName"/>
        <id column="QUOT_SUP_LINE_NO" property="quotReqSupplierIdentify.quotSupplierLineNo"/><!-- 見積取引先行番号 -->
    </resultMap>
    
    <!-- 注文入力(新規)初期化SQL -->
    <select id="initOrderPage" resultMap="OrderInputInit_Map">
        SELECT T_PUR_REQUEST.PUR_REQ_NO AS ORDER_NO,<!-- 購入依頼番号 -->
            T_PUR_REQUEST.PUR_REQ_NO,<!-- 購入依頼番号 -->
            '1' AS ORDER_VERSION,<!-- 注文版数 -->
            T_PUR_APL.TITLE_NAME,<!-- 件名 -->
            T_PUR_APL.REQ_COMPANY_CD,<!-- 依頼元会社コード -->
            T_PUR_APL.REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
            T_PUR_APL.REQ_SECTION_PLACE_CD,<!-- 依頼元事業所コード -->
            T_PUR_APL.REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
            T_PUR_APL.REQ_SECTION_CD,<!-- 依頼元部門コード -->
            T_PUR_APL.REQ_SECTION_NAME,<!-- 依頼元部門名 -->
            T_PUR_APL.REQ_USER_ID,<!-- 依頼元担当者ID -->
            T_PUR_APL.REQ_USER_NAME,<!-- 依頼元担当者名 -->
            T_PUR_APL.REQ_USER_EXTENSION_NO,<!-- 依頼元担当内線番号 -->
            T_PUR_APL.REQ_USER_TEL_NO,<!-- 依頼元担当外線番号 -->
            T_PUR_APL.PUR_REQ_DATE,<!-- 購入依頼日 -->
            T_PUR_APL.LOAD_COMPANY_CD,<!-- 負担会社コード -->
            T_PUR_APL.LOAD_COMPANY_NAME,<!-- 負担会社名 -->
            T_PUR_APL.LOAD_SECTION_PLACE_CD,<!-- 負担事業所コード -->
            T_PUR_APL.LOAD_SECTION_PLACE_NAME,<!-- 負担事業所名 -->
            T_PUR_APL.LOAD_SECTION_CD,<!-- 負担部門コード -->
            T_PUR_APL.LOAD_SECTION_NAME,<!-- 負担部門名 -->
            T_PUR_APL.DELIV_PLACE_COMPANY_CD,<!-- 納入先会社コード -->
            T_PUR_APL.DELIV_PLACE_CD,<!-- 納入先コード -->
            T_PUR_APL.DELIV_PLACE_NAME,<!-- 納入先名 -->
            T_PUR_REQUEST.SUP_COMPANY_CD,<!-- 取引先会社コード -->
            T_PUR_REQUEST.SUP_CD,<!-- 取引先コード -->
            T_PUR_REQUEST.SUP_NAME,<!-- 取引先名 -->
            T_PUR_REQUEST.SUP_ABBR_NAME,<!-- 取引先名（略称） -->
            (SELECT 
            		EDI_IND
            	FROM
            		M_SUPPLIER
            	WHERE
            		(COMPANY_CD = T_PUR_REQUEST.SUP_COMPANY_CD OR COMPANY_CD = 'ALL') AND SUP_CD = T_PUR_REQUEST.SUP_CD) AS EDI_IND,
            T_PUR_REQUEST.SUBJECT_COMPANY_CD,<!-- 科目会社コード -->
            T_PUR_REQUEST.SUBJECT_CD,<!-- 科目コード -->
            T_PUR_REQUEST.SUBJECT_NAME,<!-- 科目名 -->
            T_PUR_APL.ITEM_CLASS_COMPANY_CD,<!-- 品種会社コード -->
            T_PUR_REQUEST.ITEM_CLASS_L,<!-- 大分類コード -->
            T_PUR_REQUEST.ITEM_CLASS_M,<!-- 中分類コード -->
            T_PUR_REQUEST.ITEM_CLASS_S,<!-- 小分類コード -->
            T_PUR_REQUEST.ITEM_CLASS_L_NAME,<!-- 大分類名 -->
            T_PUR_REQUEST.ITEM_CLASS_M_NAME,<!-- 中分類名 -->
            T_PUR_REQUEST.ITEM_CLASS_S_NAME,<!-- 小分類名 -->
            T_PUR_REQUEST.ITEM_COMPANY_CD,<!-- 品名会社コード -->
            T_PUR_REQUEST.ITEM_CD,<!-- 品名コード -->
            T_PUR_REQUEST.ITEM_NAME,<!-- 品名 -->
            T_PUR_REQUEST.KATASHIKI,<!-- 型式 -->
            T_PUR_REQUEST.MANUFACT_CD,<!-- メーカーコード -->
            T_PUR_REQUEST.MANUFACT_NAME,<!-- メーカー名 -->
            T_PUR_REQUEST.INSPECT_IND,<!-- 検査区分 -->
            T_PUR_REQUEST.REQ_DELIV_DATE AS ORDER_DELIV_DATE,<!-- 希望納期 -->
            T_PUR_REQUEST.CURRENCY_CD,<!-- 通貨コード -->
            T_PUR_REQUEST.CURRENCY_CD AS REQ_CURRENCY_CD,<!-- 希望通貨コード -->
            T_PUR_REQUEST.UNIT_PRICE AS REQ_UNIT_PRICE,<!-- 希望単価 -->
            T_PUR_REQUEST.UNIT_PRICE,<!-- 単価 -->
            T_PUR_REQUEST.REQ_VOL AS ORDER_VOL,<!-- 依頼数量 -->
            T_PUR_REQUEST.REQ_VOL,<!-- 依頼数量 -->
            T_PUR_REQUEST.UNIT_CD,<!-- 単位コード -->
            T_PUR_REQUEST.UNIT_NAME,<!-- 単位名 -->
            T_PUR_REQUEST.UNIT_NAME AS REQ_UNIT_NAME,<!-- 希望単位名 -->
            T_PUR_REQUEST.REQ_AMOUNT AS ORDER_AMOUNT,<!-- 依頼金額 -->
            T_PUR_REQUEST.REQ_AMOUNT,<!-- 依頼金額 -->
            T_PUR_REQUEST.REQ_AMOUNT AS HOPE_AMOUNT,<!-- 希望金額 -->
            T_PUR_REQUEST.TAX_IND,<!-- 課税区分 -->
            T_PUR_REQUEST.CONSUMPT_IND,<!-- 消費税区分 -->
            T_PUR_APL.BUDGET_NO,<!-- 予算番号 -->
            T_RINGI_BUDGET_DTL.BUDGET_NAME, <!-- 予算名 -->
            T_PUR_APL.ATTACH_FILE_SEQ1 AS ATTACH_FILE_SEQ1,<!-- 添付ファイル１シーケンス番号 -->
            T_PUR_APL.ATTACH_FILE_SEQ2 AS ATTACH_FILE_SEQ2,<!-- 添付ファイル２シーケンス番号 -->
            T_PUR_REQUEST.ATTACH_FILE_SEQ AS ATTACH_FILE_SEQ3,<!-- 添付ファイル３シーケンス番号 -->
            T_ATTACH_MNG_A.ATTACH_FILE_NAME AS ATTACH_FILE_NAME1,<!-- 添付ファイル１ -->
            T_ATTACH_MNG_B.ATTACH_FILE_NAME AS ATTACH_FILE_NAME2,<!-- 添付ファイル２ -->
            T_ATTACH_MNG_C.ATTACH_FILE_NAME AS ATTACH_FILE_NAME3,<!-- 添付ファイル３ -->
            T_ATTACH_MNG_A.ATTACH_SCOPE AS ATTACH_SCOPE1,<!-- 取引先へ開示１ -->
            T_ATTACH_MNG_B.ATTACH_SCOPE AS ATTACH_SCOPE2,<!-- 取引先へ開示２ -->
            T_ATTACH_MNG_C.ATTACH_SCOPE AS ATTACH_SCOPE3,<!-- 取引先へ開示３ -->
            T_PUR_APL.FOR_SUPPRIER_COMMENT,<!-- 取引先向けコメント -->
            T_PUR_APL.FOR_BUYER_COMMENT,<!-- 購買担当者向けコメント -->
            T_PUR_REQUEST.RECEIVE_COMPANY_CD,<!-- 受入会社コード -->
            T_PUR_REQUEST.RECEIVE_COMPANY_NAME,<!-- 受入会社名 -->
            T_PUR_REQUEST.RECEIVE_SECTION_PLACE_CD,<!-- 受入事業所コード -->
            T_PUR_REQUEST.RECEIVE_SECTION_PLACE_NAME,<!-- 受入事業所名 -->
            T_PUR_REQUEST.RECEIVE_SECTION_CD,<!-- 受入部門コード -->
            T_PUR_REQUEST.RECEIVE_SECTION_NAME,<!-- 受入部門名 -->
            T_PUR_REQUEST.LAST_UPD_DATE AS PUR_LAST_UPD_DATE,
            T_SLIP_MNG.LAST_UPD_DATE AS SLIP_LAST_UPD_DATE,
            T_PUR_APL.QUOT_REQ_NO,<!-- 見積依頼番号 -->
            T_PUR_APL.REQ_TYPE_IND,<!-- 依頼区分 -->
            T_PUR_APL.QUOT_RESP_SEQ,<!-- 見積回答シーケンス番号 -->
            T_QUOT_RESPONSE.LAST_UPD_DATE AS RESPONSE_LAST_UPD_DATE,
            T_QUOT_REQUEST.QUOT_REQ_SEQ,<!-- 見積シーケンス番号 -->
            T_QUOT_REQUEST.QUOT_ADO_STATUS,<!-- 見積採否ステータス -->
            T_PUR_REQUEST.PRICE_REG_FLG,
            T_PUR_REQUEST.BUYER_COMPANY_CD,<!-- 購買会社コード -->
            T_PUR_REQUEST.BUYER_SECTION_CD, <!-- 購買部門コード -->
            T_PUR_REQUEST.BUYER_USER_ID,<!-- 購買担当者ID -->
            T_PUR_REQUEST.BUYER_USER_NAME,<!-- 購買担当者名 -->
            T_SLIP_MNG.SLIP_NO AS EXCLUSIVE_SLIP_NO,
            T_SLIP_MNG.LAST_UPD_DATE AS EXCLUSIVE_LAST_UPD_DATE,
            T_PUR_APL.PUR_APL_SEQ,
            M_PAY_CONDITION_LANG.PAY_CONDITION_CD AS PAY_CONDITION_CD,
            M_PAY_CONDITION_LANG.PAY_CONDITION_NAME AS PAY_CONDITION_NAME
        FROM T_PUR_REQUEST
        LEFT JOIN T_PUR_APL
            ON T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST.PUR_APL_SEQ
            AND T_PUR_APL.DELETE_FLG = '0'
        LEFT JOIN T_QUOT_RESPONSE
            ON T_PUR_APL.QUOT_RESP_SEQ = T_QUOT_RESPONSE.QUOT_RESP_SEQ
            AND T_QUOT_RESPONSE.DELETE_FLG = '0'
        LEFT JOIN T_QUOT_REQUEST
            ON (T_PUR_REQUEST.PUR_APL_NO = T_QUOT_REQUEST.QUOT_REQ_NO
            OR  T_PUR_REQUEST.PUR_REQ_NO = T_QUOT_REQUEST.QUOT_REQ_NO)
            AND T_QUOT_REQUEST.NEW_FLG = '1'
            AND T_QUOT_REQUEST.NEW_APP_FLG = '1'
            AND T_QUOT_REQUEST.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_A
            ON T_PUR_APL.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_A.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_B
            ON T_PUR_APL.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_C
            ON T_PUR_REQUEST.ATTACH_FILE_SEQ = T_ATTACH_MNG_C.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_C.DELETE_FLG = '0'
        LEFT JOIN T_SLIP_MNG
            ON T_PUR_REQUEST.PUR_REQ_NO = T_SLIP_MNG.SLIP_NO
            AND T_SLIP_MNG.DELETE_FLG = '0'
        LEFT JOIN M_SUPPLIER
            ON (M_SUPPLIER.COMPANY_CD = T_PUR_REQUEST.SUP_COMPANY_CD
                OR M_SUPPLIER.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
            AND M_SUPPLIER.SUP_CD = T_PUR_REQUEST.SUP_CD
        LEFT JOIN M_PAY_CONDITION_LANG
            ON M_PAY_CONDITION_LANG.COMPANY_CD = M_SUPPLIER.COMPANY_CD
            AND M_PAY_CONDITION_LANG.PAY_CONDITION_CD = M_SUPPLIER.PAY_CONDITION_CD
            AND M_PAY_CONDITION_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
          LEFT JOIN T_RINGI_BUDGET_DTL 
              ON T_RINGI_BUDGET_DTL.COMPANY_CD = T_PUR_APL.LOAD_COMPANY_CD 
             AND T_RINGI_BUDGET_DTL.SECTION_PLACE_CD = T_PUR_APL.LOAD_SECTION_PLACE_CD 
             AND T_RINGI_BUDGET_DTL.BUDGET_DTL_NO = T_PUR_APL.BUDGET_NO 
        WHERE T_PUR_REQUEST.PUR_REQ_SEQ = #{purReqSeq}
    </select>
    
    <!-- 注文入力(新規)初期化 見積取得依頼存在するSQL -->
    <select id="getQuotAcqReqCount" resultType="int">
        SELECT COUNT(1)
          FROM T_PUR_REQUEST
          INNER JOIN T_PUR_APL ON T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST.PUR_APL_SEQ
                             AND T_PUR_APL.DELETE_FLG = '0'
          INNER JOIN T_QUOT_ACQ_APL ON T_PUR_APL.PUR_APL_NO = T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO
                             AND T_QUOT_ACQ_APL.DELETE_FLG = '0'
         WHERE T_PUR_REQUEST.PUR_REQ_SEQ = #{purReqSeq}
    </select>
    
    <!-- 見積依頼取引情報取得SQL（採用された取引先が1件の場合のみ使用できます） -->
    <select id="getQuotReqSup" resultMap="OrderInputInit_Map">
        SELECT 
            T_QUOT_REQ_SUP.SUP_COMPANY_CD,<!-- 取引先会社コード -->
            T_QUOT_REQ_SUP.SUP_CD,<!-- 取引先コード -->
            T_QUOT_REQ_SUP.SUP_NAME,<!-- 取引先名 -->
            T_QUOT_REQ_SUP.SUP_ABBR_NAME,<!-- 取引先名（略称） -->
            T_QUOT_REQ_SUP.SUP_ZIP_CD,<!-- 郵便番号 -->
            T_QUOT_REQ_SUP.SUP_TEL_NO,<!-- 電話番号 -->
            T_QUOT_REQ_SUP.SUP_FAX_NO,<!-- FAX番号 -->
            T_QUOT_REQ_SUP.EDI_IND,<!-- EDIデータ送受信方法 -->
            T_QUOT_REQ_SUP.SUBCON_IND,<!-- 下請法適用業者区分 -->
            T_QUOT_REQ_SUP.SUP_ADDRESS1,<!-- 住所１ -->
            T_QUOT_REQ_SUP.SUP_ADDRESS2,<!-- 住所２ -->
            T_QUOT_RESP_DTL.ITEM_COMPANY_CD,<!-- 品名会社コード -->
            T_QUOT_RESP_DTL.ITEM_CD,<!-- 品名コード -->
            T_QUOT_RESP_DTL.QUOT_RESP_ITEM_NAME AS ITEM_NAME,<!-- 品名 -->
            T_QUOT_RESP_DTL.QUOT_RESP_KATASHIKI AS KATASHIKI,<!-- 型式 -->
            T_QUOT_RESP_DTL.QUOT_RESP_MANUFACT_CD AS MANUFACT_CD,<!-- メーカーコード -->
            T_QUOT_RESP_DTL.QUOT_RESP_MANUFACT_NAME AS MANUFACT_NAME,<!-- メーカー名 -->
            T_QUOT_RESP_DTL.QUOT_RESP_DELIV_DATE AS ORDER_DELIV_DATE,<!-- 希望納期 -->
            T_QUOT_RESP_DTL.CURRENCY_CD,<!-- 通貨コード -->
            T_QUOT_RESP_DTL.UNIT_PRICE,<!-- 単価 -->
            T_QUOT_RESP_DTL.QUOT_RESP_VOL AS ORDER_VOL,<!-- 依頼数量 -->
            T_QUOT_RESP_DTL.UNIT_CD,<!-- 単位コード -->
            T_QUOT_RESP_DTL.UNIT_NAME,<!-- 単位名 -->
            T_QUOT_RESP_DTL.QUOT_RESP_AMOUNT AS ORDER_AMOUNT,<!-- 依頼金額 -->
            T_QUOT_RESP_DTL.QUOT_RESP_AMOUNT AS HOPE_AMOUNT,<!-- 依頼金額 -->
            T_QUOT_RESP_DTL.TAX_IND,<!-- 課税区分 -->
            T_QUOT_RESP_DTL.CONSUMPT_IND,<!-- 消費税区分 -->
            T_QUOT_RESP_DTL.ORDER_LT AS ORDER_LT,<!-- 標準納入日数 -->
            T_QUOT_RESPONSE.QUOT_RESP_SEQ,
            T_QUOT_RESPONSE.LAST_UPD_DATE AS RESP_LAST_UPD_DATE,
            M_PAY_CONDITION_LANG.PAY_CONDITION_CD AS PAY_CONDITION_CD,
            M_PAY_CONDITION_LANG.PAY_CONDITION_NAME AS PAY_CONDITION_NAME
        FROM T_QUOT_REQ_SUP
        INNER JOIN T_QUOT_RESPONSE
            ON T_QUOT_REQ_SUP.QUOT_REQ_NO = T_QUOT_RESPONSE.QUOT_REQ_NO
            AND T_QUOT_REQ_SUP.QUOT_REQ_VERSION = T_QUOT_RESPONSE.QUOT_REQ_VERSION
            AND T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO = T_QUOT_RESPONSE.QUOT_SUP_LINE_NO
            AND T_QUOT_RESPONSE.QUOT_ADO_IND = '1'
            AND T_QUOT_RESPONSE.DELETE_FLG = '0'
        INNER JOIN T_QUOT_RESP_DTL
            ON T_QUOT_RESPONSE.QUOT_RESP_SEQ = T_QUOT_RESP_DTL.QUOT_RESP_SEQ
            AND T_QUOT_RESP_DTL.QUOT_REQ_DTL_NO = #{purReqNo}
            AND T_QUOT_RESP_DTL.DELETE_FLG = '0'
        LEFT JOIN M_SUPPLIER
            ON (M_SUPPLIER.COMPANY_CD = T_QUOT_REQ_SUP.SUP_COMPANY_CD
                OR M_SUPPLIER.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
            AND M_SUPPLIER.SUP_CD = T_QUOT_REQ_SUP.SUP_CD
        LEFT JOIN M_PAY_CONDITION_LANG
            ON M_PAY_CONDITION_LANG.COMPANY_CD = M_SUPPLIER.COMPANY_CD
            AND M_PAY_CONDITION_LANG.PAY_CONDITION_CD = M_SUPPLIER.PAY_CONDITION_CD
            AND M_PAY_CONDITION_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
        WHERE T_QUOT_REQ_SUP.QUOT_REQ_SEQ = #{quotReqSeq}
            AND T_QUOT_REQ_SUP.DELETE_FLG = '0'
    </select>

    <resultMap type="fw.domain.slip.common.dlvest.DlvEst" id="DlvEst_Map">
        <id column="ORDER_DELIV_DATE" property="dlvEst.dateOfymd"/><!-- 注文納期 -->
        <id column="ORDER_LT" property="standardDelivDayCount.standardDelivDayCount.dayCount"/><!-- 標準納入日 -->
    </resultMap>
    
    <!-- 見積依頼納期情報取得SQL -->
    <select id="getQuotRespDeliv" resultMap="DlvEst_Map">
        SELECT 
            T_QUOT_RESP_DTL.QUOT_RESP_DELIV_DATE AS ORDER_DELIV_DATE,<!-- 希望納期 -->
            T_QUOT_RESP_DTL.ORDER_LT AS ORDER_LT<!-- 標準納入日数 -->
        FROM T_QUOT_RESP_DTL
        WHERE
                T_QUOT_RESP_DTL.QUOT_RESP_SEQ = #{quotRespSeq}
            AND T_QUOT_RESP_DTL.QUOT_REQ_DTL_NO = #{quotReqDtlNo}
    </select>

    <!-- 見積依頼取引情報取得SQL(見積取得依頼から、マスタに登録されていない取引先の場合) -->
    <select id="getQuotReqSupWithNoMaster" resultMap="OrderInputInit_Map">
       SELECT T_QUOT_REQ_SUP.SUP_ZIP_CD,<!-- 郵便番号 -->
              T_QUOT_REQ_SUP.SUP_TEL_NO,<!-- 電話番号 -->
              T_QUOT_REQ_SUP.SUP_FAX_NO,<!-- FAX番号 -->
              T_QUOT_REQ_SUP.EDI_IND,<!-- EDIデータ送受信方法 -->
              T_QUOT_REQ_SUP.SUBCON_IND,<!-- 下請法適用業者区分 -->
              T_QUOT_REQ_SUP.SUP_ADDRESS1,<!-- 住所１ -->
              T_QUOT_REQ_SUP.SUP_ADDRESS2<!-- 住所２ -->
         FROM T_QUOT_REQUEST
    LEFT JOIN T_QUOT_REQ_SUP
           ON T_QUOT_REQUEST.QUOT_REQ_SEQ = T_QUOT_REQ_SUP.QUOT_REQ_SEQ
          AND T_QUOT_REQUEST.DELETE_FLG = '0'
    LEFT JOIN T_QUOT_RESPONSE
           ON T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO = T_QUOT_RESPONSE.QUOT_SUP_LINE_NO
          AND T_QUOT_REQ_SUP.QUOT_REQ_NO = T_QUOT_RESPONSE.QUOT_REQ_NO
          AND T_QUOT_REQ_SUP.QUOT_REQ_VERSION = T_QUOT_RESPONSE.QUOT_REQ_VERSION
          AND T_QUOT_RESPONSE.DELETE_FLG = '0'
        WHERE T_QUOT_REQUEST.QUOT_REQ_SEQ = #{quotReqSeq}
          AND T_QUOT_RESPONSE.QUOT_RESP_SEQ = #{quotRespSeq}
    </select>

    <!-- 注文入力(新規)初期化SQL -->
    <select id="initOrderInsert" resultMap="OrderInputInit_Map">
        SELECT T_PUR_REQUEST.PUR_REQ_NO AS ORDER_NO,<!-- 購入依頼番号 -->
            T_PUR_REQUEST.PUR_REQ_NO,<!-- 購入依頼番号 -->
            '1' AS ORDER_VERSION,<!-- 注文版数 -->
            T_QUOT_REQUEST.TITLE_NAME,<!-- 件名 -->
            T_PUR_APL.REQ_COMPANY_CD,<!-- 依頼元会社コード -->
            T_PUR_APL.REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
            T_PUR_APL.REQ_SECTION_PLACE_CD,<!-- 依頼元事業所コード -->
            T_PUR_APL.REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
            T_PUR_APL.REQ_SECTION_CD,<!-- 依頼元部門コード -->
            T_PUR_APL.REQ_SECTION_NAME,<!-- 依頼元部門名 -->
            T_PUR_APL.REQ_USER_ID,<!-- 依頼元担当者ID -->
            T_PUR_APL.REQ_USER_NAME,<!-- 依頼元担当者名 -->
            T_PUR_APL.REQ_USER_EXTENSION_NO,<!-- 依頼元担当内線番号 -->
            T_PUR_APL.REQ_USER_TEL_NO,<!-- 依頼元担当外線番号 -->
            T_PUR_APL.PUR_REQ_DATE,<!-- 購入依頼日 -->
            T_PUR_APL.LOAD_COMPANY_CD,<!-- 負担会社コード -->
            T_PUR_APL.LOAD_COMPANY_NAME,<!-- 負担会社名 -->
            T_PUR_APL.LOAD_SECTION_PLACE_CD,<!-- 負担事業所コード -->
            T_PUR_APL.LOAD_SECTION_PLACE_NAME,<!-- 負担事業所名 -->
            T_PUR_APL.LOAD_SECTION_CD,<!-- 負担部門コード -->
            T_PUR_APL.LOAD_SECTION_NAME,<!-- 負担部門名 -->
            T_QUOT_REQUEST.DELIV_PLACE_COMPANY_CD,<!-- 納入先会社コード -->
            T_QUOT_REQUEST.DELIV_PLACE_CD,<!-- 納入先コード -->
            T_QUOT_REQUEST.DELIV_PLACE_NAME,<!-- 納入先名 -->
            T_QUOT_REQ_SUP.SUP_COMPANY_CD,<!-- 取引先会社コード -->
            T_QUOT_REQ_SUP.SUP_CD,<!-- 取引先コード -->
            T_QUOT_REQ_SUP.SUP_NAME,<!-- 取引先名 -->
            T_QUOT_REQ_SUP.SUP_ABBR_NAME,<!-- 取引先名（略称） -->
            T_QUOT_REQ_SUP.SUP_ZIP_CD,<!-- 郵便番号 -->
            T_QUOT_REQ_SUP.SUP_TEL_NO,<!-- 電話番号 -->
            T_QUOT_REQ_SUP.SUP_FAX_NO,<!-- FAX番号 -->
            T_QUOT_REQ_SUP.EDI_IND,<!-- EDIデータ送受信方法 -->
            T_QUOT_REQ_SUP.SUBCON_IND,<!-- 下請法適用業者区分 -->
            T_QUOT_REQ_SUP.SUP_ADDRESS1,<!-- 住所１ -->
            T_QUOT_REQ_SUP.SUP_ADDRESS2,<!-- 住所２ -->
            T_PUR_REQUEST.SUBJECT_COMPANY_CD,<!-- 科目会社コード -->
            T_PUR_REQUEST.SUBJECT_CD,<!-- 科目コード -->
            T_PUR_REQUEST.SUBJECT_NAME,<!-- 科目名 -->
            T_QUOT_REQUEST.ITEM_CLASS_COMPANY_CD, <!-- 品種会社コード -->
            T_QUOT_REQUEST.ITEM_CLASS_L,<!-- 大分類コード  -->
            T_QUOT_REQUEST.ITEM_CLASS_M,<!-- 中分類コード  -->
            T_QUOT_REQUEST.ITEM_CLASS_S,<!-- 小分類コード  -->
            T_QUOT_REQUEST.ITEM_CLASS_L_NAME,<!-- 大分類名  -->
            T_QUOT_REQUEST.ITEM_CLASS_M_NAME,<!-- 中分類名  -->
            T_QUOT_REQUEST.ITEM_CLASS_S_NAME,<!-- 小分類名  -->
            T_QUOT_RESP_DTL.ITEM_COMPANY_CD,<!-- 品名会社コード -->
            T_QUOT_RESP_DTL.ITEM_CD,<!-- 品名コード -->
            T_QUOT_RESP_DTL.QUOT_RESP_ITEM_NAME AS ITEM_NAME,<!-- 品名 -->
            T_QUOT_RESP_DTL.QUOT_RESP_KATASHIKI AS KATASHIKI,<!-- 型式 -->
            T_QUOT_RESP_DTL.QUOT_RESP_MANUFACT_CD AS MANUFACT_CD,<!-- メーカーコード -->
            T_QUOT_RESP_DTL.QUOT_RESP_MANUFACT_NAME AS MANUFACT_NAME,<!-- メーカー名 -->
            T_PUR_REQUEST.INSPECT_IND,<!-- 検査区分 -->
            T_QUOT_RESP_DTL.QUOT_RESP_DELIV_DATE AS ORDER_DELIV_DATE,<!-- 希望納期 -->
            T_QUOT_RESP_DTL.ORDER_LT AS ORDER_LT,<!-- 標準納入日数 -->
            T_QUOT_RESP_DTL.CURRENCY_CD,<!-- 通貨コード -->
            T_QUOT_RESP_DTL.UNIT_PRICE,<!-- 単価 -->
            T_QUOT_RESP_DTL.QUOT_RESP_VOL AS ORDER_VOL,<!-- 依頼数量 -->
            T_QUOT_RESP_DTL.UNIT_CD,<!-- 単位コード -->
            T_QUOT_RESP_DTL.UNIT_NAME,<!-- 単位名 -->
            T_QUOT_RESP_DTL.QUOT_RESP_AMOUNT AS ORDER_AMOUNT,<!-- 依頼金額 -->
            T_PUR_REQUEST.CURRENCY_CD AS REQ_CURRENCY_CD,<!-- 希望通貨コード -->
            T_PUR_REQUEST.UNIT_PRICE AS REQ_UNIT_PRICE,<!-- 希望単価 -->
            T_PUR_REQUEST.REQ_VOL,<!-- 依頼数量 -->
            T_PUR_REQUEST.UNIT_NAME AS REQ_UNIT_NAME,<!-- 単位名 -->
            T_PUR_REQUEST.REQ_AMOUNT,<!-- 依頼金額 -->
            T_PUR_REQUEST.REQ_AMOUNT AS HOPE_AMOUNT,<!-- 希望金額 -->
            T_QUOT_RESP_DTL.TAX_IND,<!-- 課税区分 -->
            T_QUOT_RESP_DTL.CONSUMPT_IND,<!-- 消費税区分 -->
            T_PUR_APL.BUDGET_NO,<!-- 予算番号 -->
            T_RINGI_BUDGET_DTL.BUDGET_NAME, <!-- 予算名 -->
            T_QUOT_REQUEST.ATTACH_FILE_SEQ1 AS ATTACH_FILE_SEQ1,<!-- 添付ファイル１シーケンス番号 -->
            T_QUOT_REQUEST.ATTACH_FILE_SEQ2 AS ATTACH_FILE_SEQ2,<!-- 添付ファイル２シーケンス番号 -->
            T_QUOT_REQ_DTL.ATTACH_FILE_SEQ AS ATTACH_FILE_SEQ3,<!-- 添付ファイル３シーケンス番号 -->
            T_ATTACH_MNG_A.ATTACH_FILE_NAME AS ATTACH_FILE_NAME1,<!-- 添付ファイル１ -->
            T_ATTACH_MNG_B.ATTACH_FILE_NAME AS ATTACH_FILE_NAME2,<!-- 添付ファイル２ -->
            T_ATTACH_MNG_C.ATTACH_FILE_NAME AS ATTACH_FILE_NAME3,<!-- 添付ファイル３ -->
            T_ATTACH_MNG_A.ATTACH_SCOPE AS ATTACH_SCOPE1,<!-- 取引先へ開示１ -->
            T_ATTACH_MNG_B.ATTACH_SCOPE AS ATTACH_SCOPE2,<!-- 取引先へ開示２ -->
            T_ATTACH_MNG_C.ATTACH_SCOPE AS ATTACH_SCOPE3,<!-- 取引先へ開示３ -->
            T_QUOT_REQUEST.FOR_SUPPRIER_COMMENT,<!-- 取引先向けコメント -->
            T_PUR_APL.FOR_BUYER_COMMENT,<!-- 購買担当者向けコメント -->
            T_PUR_REQUEST.RECEIVE_COMPANY_CD,<!-- 受入会社コード -->
            T_PUR_REQUEST.RECEIVE_COMPANY_NAME,<!-- 受入会社名 -->
            T_PUR_REQUEST.RECEIVE_SECTION_PLACE_CD,<!-- 受入事業所コード -->
            T_PUR_REQUEST.RECEIVE_SECTION_PLACE_NAME,<!-- 受入事業所名 -->
            T_PUR_REQUEST.RECEIVE_SECTION_CD,<!-- 受入部門コード -->
            T_PUR_REQUEST.RECEIVE_SECTION_NAME,<!-- 受入部門名 -->
            T_PUR_REQUEST.PUR_REQ_SEQ,
            T_PUR_REQUEST.LAST_UPD_DATE AS PUR_LAST_UPD_DATE,
            T_QUOT_RESPONSE.QUOT_RESP_SEQ,
            T_QUOT_RESPONSE.LAST_UPD_DATE AS RESP_LAST_UPD_DATE,
            T_SLIP_MNG.LAST_UPD_DATE AS SLIP_LAST_UPD_DATE,
            T_PUR_APL.QUOT_REQ_NO,<!-- 見積依頼番号 -->
            T_PUR_APL.REQ_TYPE_IND,<!-- 依頼区分 -->
            T_QUOT_REQUEST.QUOT_ADO_STATUS,<!-- 見積採否ステータス -->
            T_PUR_REQUEST.PRICE_REG_FLG,
            T_PUR_REQUEST.BUYER_COMPANY_CD,<!-- 購買会社コード -->
            T_PUR_REQUEST.BUYER_SECTION_CD, <!-- 購買部門コード -->
            T_PUR_REQUEST.BUYER_USER_ID,<!-- 購買担当者ID -->
            T_PUR_REQUEST.BUYER_USER_NAME,<!-- 購買担当者名 -->
            T_SLIP_MNG.SLIP_NO AS EXCLUSIVE_SLIP_NO,
            T_SLIP_MNG.LAST_UPD_DATE AS EXCLUSIVE_LAST_UPD_DATE,
            T_PUR_APL.PUR_APL_SEQ,
            M_PAY_CONDITION_LANG.PAY_CONDITION_CD AS PAY_CONDITION_CD,<!-- 支払条件コード -->
            M_PAY_CONDITION_LANG.PAY_CONDITION_NAME AS PAY_CONDITION_NAME<!-- 支払条件名 -->
        FROM T_QUOT_REQUEST
        LEFT JOIN T_QUOT_REQ_DTL
            ON T_QUOT_REQ_DTL.QUOT_REQ_SEQ = T_QUOT_REQUEST.QUOT_REQ_SEQ
            AND T_QUOT_REQ_DTL.DELETE_FLG = '0'
        LEFT JOIN T_QUOT_REQ_SUP
            ON T_QUOT_REQ_SUP.QUOT_REQ_SEQ = T_QUOT_REQUEST.QUOT_REQ_SEQ
            AND T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO = #{quotSupLineNo}
            AND T_QUOT_REQ_SUP.DELETE_FLG = '0'
        LEFT JOIN T_PUR_APL
            ON T_PUR_APL.PUR_APL_NO = T_QUOT_REQUEST.PUR_APL_NO
            AND T_PUR_APL.NEW_FLG = '1'
            AND T_PUR_APL.DELETE_FLG = '0'
        LEFT JOIN T_PUR_REQUEST
            ON T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST.PUR_APL_SEQ
            AND T_PUR_REQUEST.NEW_FLG = '1'
            AND T_PUR_REQUEST.DELETE_FLG = '0'
        LEFT JOIN T_QUOT_RESPONSE
            ON T_QUOT_RESPONSE.QUOT_RESP_SEQ = #{quotRespSeq}
            AND T_QUOT_RESPONSE.DELETE_FLG = '0'
        LEFT JOIN T_QUOT_RESP_DTL
            ON T_QUOT_RESPONSE.QUOT_RESP_SEQ = T_QUOT_RESP_DTL.QUOT_RESP_SEQ
            AND T_QUOT_RESP_DTL.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_A
            ON T_QUOT_REQUEST.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_A.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_B
            ON T_QUOT_REQUEST.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_C
            ON T_QUOT_REQ_DTL.ATTACH_FILE_SEQ = T_ATTACH_MNG_C.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_C.DELETE_FLG = '0'
        LEFT JOIN T_SLIP_MNG
            ON T_PUR_REQUEST.PUR_REQ_NO = T_SLIP_MNG.SLIP_NO
            AND T_SLIP_MNG.DELETE_FLG = '0'
        LEFT JOIN M_SUPPLIER
            ON (M_SUPPLIER.COMPANY_CD = T_QUOT_REQ_SUP.SUP_COMPANY_CD
                OR M_SUPPLIER.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
            AND M_SUPPLIER.SUP_CD = T_QUOT_REQ_SUP.SUP_CD
        LEFT JOIN M_PAY_CONDITION_LANG
            ON M_PAY_CONDITION_LANG.COMPANY_CD = M_SUPPLIER.COMPANY_CD
            AND M_PAY_CONDITION_LANG.PAY_CONDITION_CD = M_SUPPLIER.PAY_CONDITION_CD
            AND M_PAY_CONDITION_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
        LEFT JOIN T_RINGI_BUDGET_DTL 
            ON T_RINGI_BUDGET_DTL.COMPANY_CD = T_PUR_APL.LOAD_COMPANY_CD 
            AND T_RINGI_BUDGET_DTL.SECTION_PLACE_CD = T_PUR_APL.LOAD_SECTION_PLACE_CD 
            AND T_RINGI_BUDGET_DTL.BUDGET_DTL_NO = T_PUR_APL.BUDGET_NO 
        WHERE T_QUOT_REQUEST.QUOT_REQ_SEQ = #{quotReqSeq}
        AND     T_PUR_REQUEST.PUR_REQ_NO = T_QUOT_RESP_DTL.QUOT_REQ_DTL_NO
        AND     T_PUR_REQUEST.PUR_REQ_NO = T_QUOT_REQ_DTL.QUOT_REQ_DTL_NO
    </select>
        
    <!-- 注文入力(更新)初期化SQL -->
    <select id="initOrderUpdate" resultMap="OrderInputInit_Map">
        SELECT T_ORDER.ORDER_NO,<!-- 注文番号 -->
            CASE WHEN T_ORDER_LATEST_APPROVED.ORDER_VERSION IS NULL THEN
                T_ORDER.ORDER_VERSION
            ELSE
                T_ORDER_LATEST_APPROVED.ORDER_VERSION
            END ORDER_VERSION,<!-- 注文版数 -->
            T_ORDER.INFO_CD,<!-- 情報区分 -->
            T_ORDER.TITLE_NAME,<!-- 件名 -->
            T_ORDER.ORDER_FIRST_DATE,<!-- 初回注文日 -->
            T_ORDER.REQ_COMPANY_CD,<!-- 依頼元会社コード -->
            T_ORDER.REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
            T_ORDER.REQ_SECTION_PLACE_CD,<!-- 依頼元事業所コード -->
            T_ORDER.REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
            T_ORDER.REQ_SECTION_CD,<!-- 依頼元部門コード -->
            T_ORDER.REQ_SECTION_NAME,<!-- 依頼元部門名 -->
            T_ORDER.REQ_USER_ID,<!-- 依頼元担当者ID -->
            T_ORDER.REQ_USER_NAME,<!-- 依頼元担当者名 -->
            T_ORDER.REQ_USER_EXTENSION_NO,<!-- 依頼元担当内線番号 -->
            T_ORDER.REQ_USER_TEL_NO,<!-- 依頼元担当外線番号 -->
            T_ORDER.BUYER_COMPANY_CD,<!-- 購買会社コード -->
            T_ORDER.BUYER_SECTION_CD, <!-- 購買部門コード -->
            T_ORDER.BUYER_USER_ID,<!-- 購買担当者ID -->
            T_ORDER.BUYER_USER_NAME,<!-- 購買担当者名 -->
            T_ORDER.PUR_REQ_DATE,<!-- 購入依頼日 -->
            T_ORDER.PUR_REQ_NO,<!-- 購入依頼番号 -->
            T_ORDER.QUOT_REQ_NO,<!-- 見積依頼番号 -->
            T_ORDER.QUOT_REQ_DTL_NO,<!-- 見積依頼明細番号 -->
            T_ORDER.APP_ROUTE_NO,<!-- 承認ルート番号 -->
            T_ORDER.APP_ROUTE_NAME,<!-- 承認ルート名 -->
            T_ORDER.LOAD_COMPANY_CD,<!-- 負担会社コード -->
            T_ORDER.LOAD_COMPANY_NAME,<!-- 負担会社名 -->
            T_ORDER.LOAD_SECTION_PLACE_CD,<!-- 負担事業所コード -->
            T_ORDER.LOAD_SECTION_PLACE_NAME,<!-- 負担事業所名 -->
            T_ORDER.LOAD_SECTION_CD,<!-- 負担部門コード -->
            T_ORDER.LOAD_SECTION_NAME,<!-- 負担部門名 -->
            T_ORDER.RECIVE_COMPANY_CD AS RECEIVE_COMPANY_CD,<!-- 受入会社コード -->
            T_ORDER.RECIVE_COMPANY_NAME AS RECEIVE_COMPANY_NAME,<!-- 受入会社名 -->
            T_ORDER.RECIVE_SECTION_PLACE_CD AS RECEIVE_SECTION_PLACE_CD,<!-- 受入事業所コード -->
            T_ORDER.RECIVE_SECTION_PLACE_NAME AS RECEIVE_SECTION_PLACE_NAME,<!-- 受入事業所名 -->
            T_ORDER.RECIVE_SECTION_CD AS RECEIVE_SECTION_CD,<!-- 受入部門コード -->
            T_ORDER.RECIVE_SECTION_NAME AS RECEIVE_SECTION_NAME,<!-- 受入部門名 -->
            T_SLIP_MNG.LAST_UPD_DATE AS SLIP_LAST_UPD_DATE,
            T_ORDER.DELIV_PLACE_COMPANY_CD,<!-- 納入先会社コード -->
            T_ORDER.DELIV_PLACE_CD,<!-- 納入先コード -->
            T_ORDER.DELIV_PLACE_NAME,<!-- 納入先名 -->
            T_ORDER.DELIV_PLACE_ZIP_CD,<!-- 納入先郵便番号 -->
            T_ORDER.DELIV_PLACE_ADDRESS1,<!-- 納入先住所１ -->
            T_ORDER.DELIV_PLACE_ADDRESS2,<!-- 納入先住所２ -->
            T_ORDER.DELIV_PLACE_NAME_INB,<!-- 構内配送先 -->
            T_ORDER.DELIV_PLACE_TEL_NO,<!-- 納入先電話番号 -->
            T_ORDER.DELIV_PLACE_FAX_NO,<!-- 納入先FAX番号 -->
            T_ORDER.DELIV_PLACE_COMPANY_NAME,<!-- 納入先会社名 -->
            T_ORDER.DELIV_PLACE_CONTACT_NAME,<!-- 納入先担当者名 -->
            T_ORDER.SUP_COMPANY_CD,<!-- 取引先会社コード -->
            T_ORDER.SUP_CD,<!-- 取引先コード -->
            T_ORDER.SUP_NAME,<!-- 取引先名 -->
            T_ORDER.SUP_ABBR_NAME,<!-- 取引先名（略称） -->
            T_ORDER.SUP_ZIP_CD,<!-- 取引先郵便番号 -->
            T_ORDER.SUP_TEL_NO,<!-- 取引先電話番号 -->
            T_ORDER.SUP_FAX_NO,<!-- 取引先FAX番号 -->
            T_ORDER.EDI_IND,<!-- EDIデータ送受信方法 -->
            T_ORDER.SUBCON_IND,<!-- 下請法適用業者区分 -->
            T_ORDER.VENDOR_CD,<!-- 統一取引先コード -->
            T_ORDER.SUP_ADDRESS1,<!-- 取引先住所１ -->
            T_ORDER.SUP_ADDRESS2,<!-- 取引先住所２ -->
            T_ORDER.SUBJECT_COMPANY_CD,<!-- 科目会社コード -->
            T_ORDER.SUBJECT_CD,<!-- 科目コード -->
            T_ORDER.SUBJECT_NAME,<!-- 科目名 -->
            T_ORDER.ITEM_CLASS_COMPANY_CD,<!-- 品種会社コード -->
            T_ORDER.ITEM_CLASS_L,<!-- 大分類コード -->
            T_ORDER.ITEM_CLASS_M,<!-- 中分類コード -->
            T_ORDER.ITEM_CLASS_S,<!-- 小分類コード -->
            T_ORDER.ITEM_CLASS_L_NAME,<!-- 大分類名 -->
            T_ORDER.ITEM_CLASS_M_NAME,<!-- 中分類名 -->
            T_ORDER.ITEM_CLASS_S_NAME,<!-- 小分類名 -->
            T_ORDER.ITEM_COMPANY_CD,<!-- 品名会社コード -->
            T_ORDER.ITEM_CD,<!-- 品名コード -->
            T_ORDER.ITEM_NAME,<!-- 品名 -->
            T_ORDER.KATASHIKI,<!-- 型式 -->
            T_ORDER.MANUFACT_CD,<!-- メーカーコード -->
            T_ORDER.MANUFACT_NAME,<!-- メーカー名 -->
            T_ORDER.INSPECT_IND,<!-- 検査区分 -->
            T_ORDER.ORDER_DELIV_DATE AS PRE_ORDER_DELIV_DATE,<!-- 注文納期 -->
            T_ORDER.ORDER_DELIV_DATE,<!-- 注文納期 -->
            T_ORDER.CURRENCY_CD,<!-- 通貨コード -->
            T_ORDER.UNIT_PRICE,<!-- 単価 -->
            T_ORDER.UNIT_PRICE AS "T_ORDER$UNIT_PRICE",<!-- 単価一時保存用 -->
            T_ORDER.UNIT_PRICE_IND,<!-- 単価区分 -->
            T_ORDER.UNIT_PRICE_IND AS UNIT_PRICE_IND_PRE,<!-- 単価区分_変更前 -->
            T_ORDER.PRICE_UNDEC_REASON,<!-- 単価未定理由 -->
            T_ORDER.PRICE_DEC_DATE AS PRICE_DEC_DATE,<!-- 価格決定予定日 -->
            T_ORDER.PRICE_DEC_FLG,<!-- 単価確定変更フラグ -->
            T_ORDER.ORDER_VOL,<!-- 注文数量 -->
            T_ORDER.UNIT_CD,<!-- 単位コード -->
            T_ORDER.UNIT_NAME,<!-- 単位名 -->
            CASE WHEN T_DELIV_VOL.DELIV_VOL IS NULL THEN 0 ELSE T_DELIV_VOL.DELIV_VOL END AS DELIV_VOL,<!-- 受入済数量 -->
            ((CASE WHEN T_ORDER.ORDER_VOL IS NULL THEN 0 ELSE T_ORDER.ORDER_VOL END) - (CASE WHEN T_DELIV_VOL.DELIV_VOL IS NULL THEN 0 ELSE T_DELIV_VOL.DELIV_VOL END)) AS UNDELIV_VOL,<!-- 受入残数量 -->
            T_ORDER.ORDER_AMOUNT,<!-- 注文金額 -->
            T_ORDER.ORDER_AMOUNT AS "T_ORDER$ORDER_AMOUNT",<!-- 注文金額一時保存用 -->
            T_PUR_REQUEST.CURRENCY_CD AS REQ_CURRENCY_CD,<!-- 希望通貨コード -->
            T_PUR_REQUEST.UNIT_PRICE AS REQ_UNIT_PRICE,<!-- 希望単価 -->
            T_PUR_REQUEST.REQ_VOL,<!-- 依頼数量 -->
            T_PUR_REQUEST.UNIT_NAME AS REQ_UNIT_NAME,<!-- 希望単位名 -->
            T_PUR_REQUEST.REQ_AMOUNT,<!-- 依頼金額 -->
            T_PUR_REQUEST.REQ_AMOUNT AS HOPE_AMOUNT,<!-- 依頼金額 -->
            T_PUR_REQUEST.PUR_REQ_SEQ,<!-- 購入依頼シーケンス番号 -->
            T_ORDER.TAX_IND,<!-- 課税区分 -->
            T_ORDER.CONSUMPT_IND,<!-- 消費税区分 -->
            T_ORDER.TAX_RATE,<!-- 税率 -->
            T_ORDER.ORDER_CNV_CURRENCY_CD,<!-- 注文登録時換算通貨 -->
            T_ORDER.ORDER_CNV_RATE,<!-- 注文登録時換算レート -->
            T_ORDER.BUDGET_NO,<!-- 予算番号 -->
            T_RINGI_BUDGET_DTL.BUDGET_NAME AS "BUDGET_NAME" ,
            T_ORDER.SEND_IND,<!-- データ送信区分 -->
            T_ORDER.PRINT_IND,<!-- 印刷区分 -->
            T_ORDER.FAX_SEND_IND,<!-- FAX送信区分 -->
            T_ORDER.EST_DELIV_FLG,<!-- 納期回答フラグ -->
            T_ORDER.AUTO_TERMINATE_FLG,<!-- 自動打切フラグ -->
            T_ORDER.ATTACH_FILE_SEQ1 AS ATTACH_FILE_SEQ1,<!-- 添付ファイル１シーケンス番号 -->
            T_ORDER.ATTACH_FILE_SEQ2 AS ATTACH_FILE_SEQ2,<!-- 添付ファイル２シーケンス番号 -->
            T_ORDER.ATTACH_FILE_SEQ3 AS ATTACH_FILE_SEQ3,<!-- 添付ファイル３シーケンス番号 -->
            T_ATTACH_MNG_A.ATTACH_FILE_NAME AS ATTACH_FILE_NAME1,<!-- 添付ファイル１ -->
            T_ATTACH_MNG_B.ATTACH_FILE_NAME AS ATTACH_FILE_NAME2,<!-- 添付ファイル２ -->
            T_ATTACH_MNG_C.ATTACH_FILE_NAME AS ATTACH_FILE_NAME3,<!-- 添付ファイル３ -->
            T_ATTACH_MNG_A.ATTACH_SCOPE AS ATTACH_SCOPE1,<!-- 取引先へ開示１ -->
            T_ATTACH_MNG_B.ATTACH_SCOPE AS ATTACH_SCOPE2,<!-- 取引先へ開示２ -->
            T_ATTACH_MNG_C.ATTACH_SCOPE AS ATTACH_SCOPE3,<!-- 取引先へ開示３ -->
            T_ORDER.BUYER_COMMENT,<!-- 発注コメント（取引先非通知） -->
            T_ORDER.FOR_SUPPRIER_COMMENT,<!-- 取引先向けコメント -->
            T_PUR_APL.FOR_BUYER_COMMENT,<!-- 購買担当者向けコメント -->
            T_ORDER.LAST_UPD_DATE,
            T_ORDER.ORDER_STATUS,<!-- 注文ステータス -->
            T_ORDER.REQ_TYPE_IND,<!-- 依頼区分 -->
            T_ORDER.CORRECT_CD,<!-- 訂正コード -->
            T_PUR_APL.QUOT_RESP_SEQ,<!-- 見積回答シーケンス番号 -->
            T_QUOT_REQUEST.QUOT_REQ_SEQ,<!-- 見積シーケンス番号 -->
            T_QUOT_REQUEST.QUOT_ADO_STATUS,<!-- 見積採否ステータス -->
            T_PUR_REQUEST.PRICE_REG_FLG,
            T_SLIP_MNG.SLIP_NO AS EXCLUSIVE_SLIP_NO,
            T_SLIP_MNG.LAST_UPD_DATE AS EXCLUSIVE_LAST_UPD_DATE,
            T_ORDER.PAY_CONDITION_CD AS PAY_CONDITION_CD,
            T_ORDER.PAY_CONDITION_NAME AS PAY_CONDITION_NAME,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_ORDER")},
            T_PUR_APL.PUR_APL_SEQ
        FROM T_ORDER
        LEFT JOIN T_SLIP_MNG
            ON T_ORDER.ORDER_NO = T_SLIP_MNG.SLIP_NO
            AND T_SLIP_MNG.DELETE_FLG = '0'
        LEFT JOIN T_PUR_REQUEST
            ON T_ORDER.PUR_REQ_NO = T_PUR_REQUEST.PUR_REQ_NO
            AND T_PUR_REQUEST.NEW_APP_FLG = '1'
            AND T_PUR_REQUEST.NEW_FLG = '1'
            AND T_PUR_REQUEST.DELETE_FLG = '0'
        LEFT JOIN T_PUR_APL
            ON T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST.PUR_APL_SEQ
            AND T_PUR_APL.DELETE_FLG = '0'
        LEFT JOIN T_QUOT_REQUEST
            ON (T_PUR_REQUEST.PUR_APL_NO = T_QUOT_REQUEST.QUOT_REQ_NO
            OR T_PUR_REQUEST.PUR_REQ_NO = T_QUOT_REQUEST.QUOT_REQ_NO)
            AND T_QUOT_REQUEST.NEW_FLG = '1'
            AND T_QUOT_REQUEST.NEW_APP_FLG = '1'
            AND T_QUOT_REQUEST.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_A
            ON T_ORDER.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_A.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_B
            ON T_ORDER.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_C
            ON T_ORDER.ATTACH_FILE_SEQ3 = T_ATTACH_MNG_C.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_C.DELETE_FLG = '0'
        LEFT JOIN (SELECT T_ORDER.ORDER_NO,SUM(T_RECEIVE_MNG.DELIV_VOL) AS DELIV_VOL 
                FROM T_RECEIVE_MNG 
                LEFT JOIN T_ORDER ON T_ORDER.ORDER_NO = T_RECEIVE_MNG.ORDER_NO
                WHERE T_ORDER.ORDER_SEQ = #{orderSeq} AND T_RECEIVE_MNG.DELETE_FLG = '0' 
                GROUP BY T_ORDER.ORDER_NO) T_DELIV_VOL
            ON T_ORDER.ORDER_NO = T_DELIV_VOL.ORDER_NO
        LEFT JOIN (SELECT
                    ORDER_NO,
                    ORDER_VERSION
                   FROM
                    T_ORDER
                   WHERE
                        NEW_APP_FLG = '1'
                    AND DELETE_FLG = '0') T_ORDER_LATEST_APPROVED
            ON T_ORDER_LATEST_APPROVED.ORDER_NO = T_ORDER.ORDER_NO
          LEFT JOIN T_RINGI_BUDGET_DTL 
              ON T_RINGI_BUDGET_DTL.COMPANY_CD = T_ORDER.LOAD_COMPANY_CD 
             AND T_RINGI_BUDGET_DTL.SECTION_PLACE_CD = T_ORDER.LOAD_SECTION_PLACE_CD 
             AND T_RINGI_BUDGET_DTL.BUDGET_DTL_NO = T_ORDER.BUDGET_NO 
        WHERE T_ORDER.ORDER_SEQ = #{orderSeq}
    </select>
    
    <!-- 注文入力(更新-見積状態から遷移した場合)初期化SQL -->
    <select id="initOrderUpdateByStatus" resultMap="OrderInputInit_Map">
        SELECT T_ORDER.ORDER_NO,<!-- 注文番号 -->
            CASE WHEN T_ORDER_LATEST_APPROVED.ORDER_VERSION IS NULL THEN
                T_ORDER.ORDER_VERSION
            ELSE
                T_ORDER_LATEST_APPROVED.ORDER_VERSION
            END ORDER_VERSION,<!-- 注文版数 -->
            T_ORDER.INFO_CD,<!-- 情報区分 -->
            T_ORDER.TITLE_NAME,<!-- 件名 -->
            T_ORDER.ORDER_FIRST_DATE,<!-- 初回注文日 -->
            T_ORDER.REQ_COMPANY_CD,<!-- 依頼元会社コード -->
            T_ORDER.REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
            T_ORDER.REQ_SECTION_PLACE_CD,<!-- 依頼元事業所コード -->
            T_ORDER.REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
            T_ORDER.REQ_SECTION_CD,<!-- 依頼元部門コード -->
            T_ORDER.REQ_SECTION_NAME,<!-- 依頼元部門名 -->
            T_ORDER.REQ_USER_ID,<!-- 依頼元担当者ID -->
            T_ORDER.REQ_USER_NAME,<!-- 依頼元担当者名 -->
            T_ORDER.REQ_USER_EXTENSION_NO,<!-- 依頼元担当内線番号 -->
            T_ORDER.REQ_USER_TEL_NO,<!-- 依頼元担当外線番号 -->
            T_ORDER.PUR_REQ_DATE,<!-- 購入依頼日 -->
            T_ORDER.PUR_REQ_NO,<!-- 購入依頼番号 -->
            T_ORDER.QUOT_REQ_NO,<!-- 見積依頼番号 -->
            T_ORDER.QUOT_REQ_DTL_NO,<!-- 見積依頼明細番号 -->
            T_ORDER.APP_ROUTE_NO,<!-- 承認ルート番号 -->
            T_ORDER.APP_ROUTE_NAME,<!-- 承認ルート名 -->
            T_ORDER.LOAD_COMPANY_CD,<!-- 負担会社コード -->
            T_ORDER.LOAD_COMPANY_NAME,<!-- 負担会社名 -->
            T_ORDER.LOAD_SECTION_PLACE_CD,<!-- 負担事業所コード -->
            T_ORDER.LOAD_SECTION_PLACE_NAME,<!-- 負担事業所名 -->
            T_ORDER.LOAD_SECTION_CD,<!-- 負担部門コード -->
            T_ORDER.LOAD_SECTION_NAME,<!-- 負担部門名 -->
            T_ORDER.RECIVE_COMPANY_CD AS RECEIVE_COMPANY_CD,<!-- 受入会社コード -->
            T_ORDER.RECIVE_COMPANY_NAME AS RECEIVE_COMPANY_NAME,<!-- 受入会社名 -->
            T_ORDER.RECIVE_SECTION_PLACE_CD AS RECEIVE_SECTION_PLACE_CD,<!-- 受入事業所コード -->
            T_ORDER.RECIVE_SECTION_PLACE_NAME AS RECEIVE_SECTION_PLACE_NAME,<!-- 受入事業所名 -->
            T_ORDER.RECIVE_SECTION_CD AS RECEIVE_SECTION_CD,<!-- 受入部門コード -->
            T_ORDER.RECIVE_SECTION_NAME AS RECEIVE_SECTION_NAME,<!-- 受入部門名 -->
            T_SLIP_MNG.LAST_UPD_DATE AS SLIP_LAST_UPD_DATE,
            T_ORDER.DELIV_PLACE_COMPANY_CD,<!-- 納入先会社コード -->
            T_ORDER.DELIV_PLACE_CD,<!-- 納入先コード -->
            T_ORDER.DELIV_PLACE_NAME,<!-- 納入先名 -->
            T_ORDER.DELIV_PLACE_ZIP_CD,<!-- 納入先郵便番号 -->
            T_ORDER.DELIV_PLACE_ADDRESS1,<!-- 納入先住所１ -->
            T_ORDER.DELIV_PLACE_ADDRESS2,<!-- 納入先住所２ -->
            T_ORDER.DELIV_PLACE_NAME_INB,<!-- 構内配送先 -->
            T_ORDER.DELIV_PLACE_TEL_NO,<!-- 納入先電話番号 -->
            T_ORDER.DELIV_PLACE_FAX_NO,<!-- 納入先FAX番号 -->
            T_ORDER.DELIV_PLACE_COMPANY_NAME,<!-- 納入先会社名 -->
            T_ORDER.DELIV_PLACE_CONTACT_NAME,<!-- 納入先担当者名 -->
            T_ORDER.SUP_COMPANY_CD,<!-- 取引先会社コード -->
            T_ORDER.SUP_CD,<!-- 取引先コード -->
            T_ORDER.SUP_NAME,<!-- 取引先名 -->
            T_ORDER.SUP_ABBR_NAME,<!-- 取引先名（略称） -->
            T_ORDER.SUP_ZIP_CD,<!-- 取引先郵便番号 -->
            T_ORDER.SUP_TEL_NO,<!-- 取引先電話番号 -->
            T_ORDER.SUP_FAX_NO,<!-- 取引先FAX番号 -->
            T_ORDER.EDI_IND,<!-- EDIデータ送受信方法 -->
            T_ORDER.SUBCON_IND,<!-- 下請法適用業者区分 -->
            T_ORDER.VENDOR_CD,<!-- 統一取引先コード -->
            T_ORDER.SUP_ADDRESS1,<!-- 取引先住所１ -->
            T_ORDER.SUP_ADDRESS2,<!-- 取引先住所２ -->
            T_ORDER.SUBJECT_COMPANY_CD,<!-- 科目会社コード -->
            T_ORDER.SUBJECT_CD,<!-- 科目コード -->
            T_ORDER.SUBJECT_NAME,<!-- 科目名 -->
            T_ORDER.ITEM_CLASS_COMPANY_CD,<!-- 品種会社コード -->
            T_ORDER.ITEM_CLASS_L,<!-- 大分類コード -->
            T_ORDER.ITEM_CLASS_M,<!-- 中分類コード -->
            T_ORDER.ITEM_CLASS_S,<!-- 小分類コード -->
            T_ORDER.ITEM_CLASS_L_NAME,<!-- 大分類名 -->
            T_ORDER.ITEM_CLASS_M_NAME,<!-- 中分類名 -->
            T_ORDER.ITEM_CLASS_S_NAME,<!-- 小分類名 -->
            T_ORDER.ITEM_COMPANY_CD,<!-- 品名会社コード -->
            T_QUOT_RESP_DTL.ITEM_CD ,<!-- 品名コード -->
            T_QUOT_RESP_DTL.QUOT_RESP_ITEM_NAME AS ITEM_NAME,<!-- 品名 -->
            T_QUOT_RESP_DTL.QUOT_RESP_KATASHIKI AS KATASHIKI,<!-- 型式 -->
            T_QUOT_RESP_DTL.QUOT_RESP_MANUFACT_CD AS MANUFACT_CD,<!-- メーカーコード -->
            T_QUOT_RESP_DTL.QUOT_RESP_MANUFACT_NAME AS MANUFACT_NAME,<!-- メーカー名 -->
            T_ORDER.INSPECT_IND,<!-- 検査区分 -->
            T_ORDER.ORDER_DELIV_DATE AS PRE_ORDER_DELIV_DATE,<!-- 注文納期 -->
            T_ORDER.ORDER_DELIV_DATE,<!-- 注文納期 -->
            T_ORDER.CURRENCY_CD,<!-- 通貨コード -->
            T_QUOT_RESP_DTL.UNIT_PRICE,<!-- 単価 -->
            T_QUOT_RESP_DTL.UNIT_PRICE AS "T_ORDER$UNIT_PRICE",<!-- 単価一時保存用 -->
            T_ORDER.UNIT_PRICE_IND AS UNIT_PRICE_IND_PRE,<!-- 単価区分_変更前 -->
            '1' AS UNIT_PRICE_IND,<!-- 単価区分 -->
            T_ORDER.PRICE_DEC_FLG,<!-- 単価確定変更フラグ -->
            T_QUOT_RESP_DTL.QUOT_RESP_VOL AS ORDER_VOL,<!-- 注文数量 -->
            T_QUOT_RESP_DTL.UNIT_CD,<!-- 単位コード -->
            T_QUOT_RESP_DTL.UNIT_NAME,<!-- 単位名 -->
            CASE WHEN T_DELIV_VOL.DELIV_VOL IS NULL THEN 0 ELSE T_DELIV_VOL.DELIV_VOL END AS DELIV_VOL,<!-- 受入済数量 -->
            ((CASE WHEN T_ORDER.ORDER_VOL IS NULL THEN 0 ELSE T_ORDER.ORDER_VOL END) - (CASE WHEN T_DELIV_VOL.DELIV_VOL IS NULL THEN 0 ELSE T_DELIV_VOL.DELIV_VOL END)) AS UNDELIV_VOL,<!-- 受入残数量 -->
            T_QUOT_RESP_DTL.QUOT_RESP_AMOUNT AS ORDER_AMOUNT,<!-- 注文金額 -->
            T_QUOT_RESP_DTL.QUOT_RESP_AMOUNT AS "T_ORDER$ORDER_AMOUNT",<!-- 注文金額一時保存用 -->
            T_PUR_REQUEST.REQ_AMOUNT AS HOPE_AMOUNT,<!-- 依頼金額 -->
            T_QUOT_RESP_DTL.TAX_IND,<!-- 課税区分 -->
            T_QUOT_RESP_DTL.CONSUMPT_IND,<!-- 消費税区分 -->
            T_ORDER.ORDER_CNV_CURRENCY_CD,<!-- 注文登録時換算通貨 -->
            T_ORDER.ORDER_CNV_RATE,<!-- 注文登録時換算レート -->
            T_ORDER.BUDGET_NO,<!-- 予算番号 -->
            T_RINGI_BUDGET_DTL.BUDGET_NAME,<!-- 予算名 -->
            T_ORDER.SEND_IND,<!-- データ送信区分 -->
            T_ORDER.PRINT_IND,<!-- 印刷区分 -->
            T_ORDER.FAX_SEND_IND,<!-- FAX送信区分 -->
            T_ORDER.EST_DELIV_FLG,<!-- 納期回答フラグ -->
            T_ORDER.AUTO_TERMINATE_FLG,<!-- 自動打切フラグ -->
            T_ORDER.ATTACH_FILE_SEQ1 AS ATTACH_FILE_SEQ1,<!-- 添付ファイル１シーケンス番号 -->
            T_ORDER.ATTACH_FILE_SEQ2 AS ATTACH_FILE_SEQ2,<!-- 添付ファイル２シーケンス番号 -->
            T_ORDER.ATTACH_FILE_SEQ3 AS ATTACH_FILE_SEQ3,<!-- 添付ファイル３シーケンス番号 -->
            T_ATTACH_MNG_A.ATTACH_FILE_NAME AS ATTACH_FILE_NAME1,<!-- 添付ファイル１ -->
            T_ATTACH_MNG_B.ATTACH_FILE_NAME AS ATTACH_FILE_NAME2,<!-- 添付ファイル２ -->
            T_ATTACH_MNG_C.ATTACH_FILE_NAME AS ATTACH_FILE_NAME3,<!-- 添付ファイル３ -->
            T_ATTACH_MNG_A.ATTACH_SCOPE AS ATTACH_SCOPE1,<!-- 取引先へ開示１ -->
            T_ATTACH_MNG_B.ATTACH_SCOPE AS ATTACH_SCOPE2,<!-- 取引先へ開示２ -->
            T_ATTACH_MNG_C.ATTACH_SCOPE AS ATTACH_SCOPE3,<!-- 取引先へ開示３ -->
            T_ORDER.BUYER_COMMENT,<!-- 発注コメント（取引先非通知） -->
            T_ORDER.FOR_SUPPRIER_COMMENT,<!-- 取引先向けコメント -->
            T_PUR_APL.FOR_BUYER_COMMENT,<!-- 購買担当者向けコメント -->
            T_PUR_REQUEST.CURRENCY_CD AS REQ_CURRENCY_CD,<!-- 希望通貨コード -->
            T_PUR_REQUEST.UNIT_PRICE AS REQ_UNIT_PRICE,<!-- 希望単価 -->
            T_PUR_REQUEST.REQ_VOL,<!-- 依頼数量 -->
            T_PUR_REQUEST.UNIT_NAME AS REQ_UNIT_NAME,<!-- 希望単位名 -->
            T_PUR_REQUEST.REQ_AMOUNT,<!-- 依頼金額 -->
            T_ORDER.LAST_UPD_DATE,
            T_ORDER.ORDER_STATUS,<!-- 注文ステータス -->
            T_ORDER.REQ_TYPE_IND,<!-- 依頼区分 -->
            T_ORDER.CORRECT_CD,<!-- 訂正コード -->
            T_PUR_APL.QUOT_RESP_SEQ,<!-- 見積回答シーケンス番号 -->
            T_QUOT_REQUEST.QUOT_REQ_SEQ,<!-- 見積シーケンス番号 -->
            T_QUOT_REQUEST.QUOT_ADO_STATUS,<!-- 見積採否ステータス -->
            T_PUR_REQUEST.PRICE_REG_FLG,
            T_SLIP_MNG.SLIP_NO AS EXCLUSIVE_SLIP_NO,
            T_SLIP_MNG.LAST_UPD_DATE AS EXCLUSIVE_LAST_UPD_DATE,
            T_ORDER.PAY_CONDITION_CD AS PAY_CONDITION_CD,
            T_ORDER.PAY_CONDITION_NAME AS PAY_CONDITION_NAME,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_ORDER")},
            T_PUR_APL.PUR_APL_SEQ
        FROM T_ORDER
        LEFT JOIN T_SLIP_MNG
            ON T_ORDER.ORDER_NO = T_SLIP_MNG.SLIP_NO
            AND T_SLIP_MNG.DELETE_FLG = '0'
        LEFT JOIN T_PUR_REQUEST
            ON T_ORDER.PUR_REQ_NO = T_PUR_REQUEST.PUR_REQ_NO
            AND T_PUR_REQUEST.NEW_APP_FLG = '1'
            AND T_PUR_REQUEST.NEW_FLG = '1'
            AND T_PUR_REQUEST.DELETE_FLG = '0'
        LEFT JOIN T_PUR_APL
            ON T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST.PUR_APL_SEQ
            AND T_PUR_APL.DELETE_FLG = '0'
        LEFT JOIN T_QUOT_REQUEST
            ON (T_PUR_REQUEST.PUR_APL_NO = T_QUOT_REQUEST.QUOT_REQ_NO
            OR T_PUR_REQUEST.PUR_REQ_NO = T_QUOT_REQUEST.QUOT_REQ_NO)
            AND T_QUOT_REQUEST.NEW_FLG = '1'
            AND T_QUOT_REQUEST.NEW_APP_FLG = '1'
            AND T_QUOT_REQUEST.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_A
            ON T_ORDER.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_A.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_B
            ON T_ORDER.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_C
            ON T_ORDER.ATTACH_FILE_SEQ3 = T_ATTACH_MNG_C.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_C.DELETE_FLG = '0'
        LEFT JOIN (SELECT T_ORDER.ORDER_NO,SUM(T_RECEIVE_MNG.DELIV_VOL) AS DELIV_VOL 
                FROM T_RECEIVE_MNG 
                LEFT JOIN T_ORDER ON T_ORDER.ORDER_NO = T_RECEIVE_MNG.ORDER_NO
                WHERE T_ORDER.ORDER_SEQ = #{orderSeq} AND T_RECEIVE_MNG.DELETE_FLG = '0' 
                GROUP BY T_ORDER.ORDER_NO) T_DELIV_VOL
            ON T_ORDER.ORDER_NO = T_DELIV_VOL.ORDER_NO
        INNER JOIN T_QUOT_RESP_DTL
        ON T_QUOT_RESP_DTL.QUOT_REQ_DTL_NO = T_ORDER.ORDER_NO
        AND T_QUOT_RESP_DTL.QUOT_RESP_SEQ = #{quotReqSeq}
        LEFT JOIN (SELECT
                    ORDER_NO,
                    ORDER_VERSION
                   FROM
                    T_ORDER
                   WHERE
                        NEW_APP_FLG = '1'
                    AND DELETE_FLG = '0') T_ORDER_LATEST_APPROVED
            ON T_ORDER_LATEST_APPROVED.ORDER_NO = T_ORDER.ORDER_NO
          LEFT JOIN T_RINGI_BUDGET_DTL 
              ON T_RINGI_BUDGET_DTL.COMPANY_CD = T_ORDER.LOAD_COMPANY_CD 
             AND T_RINGI_BUDGET_DTL.SECTION_PLACE_CD = T_ORDER.LOAD_SECTION_PLACE_CD 
             AND T_RINGI_BUDGET_DTL.BUDGET_DTL_NO = T_ORDER.BUDGET_NO 
        WHERE T_ORDER.ORDER_SEQ = #{orderSeq}
    </select>
    
    <!-- 注文入力(入力-見積状態から遷移、一時保存、再申請、差戻し)初期化SQL -->
    <select id="initOrderUpdateByStatusForNew" resultMap="OrderInputInit_Map">
        SELECT T_ORDER.ORDER_NO,<!-- 注文番号 -->
            CASE WHEN T_ORDER_LATEST_APPROVED.ORDER_VERSION IS NULL THEN
                T_ORDER.ORDER_VERSION
            ELSE
                T_ORDER_LATEST_APPROVED.ORDER_VERSION
            END ORDER_VERSION,<!-- 注文版数 -->
            T_ORDER.INFO_CD,<!-- 情報区分 -->
            T_QUOT_REQUEST.TITLE_NAME,<!-- 件名 -->
            T_ORDER.ORDER_FIRST_DATE,<!-- 初回注文日 -->
            T_ORDER.REQ_COMPANY_CD,<!-- 依頼元会社コード -->
            T_ORDER.REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
            T_ORDER.REQ_SECTION_PLACE_CD,<!-- 依頼元事業所コード -->
            T_ORDER.REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
            T_ORDER.REQ_SECTION_CD,<!-- 依頼元部門コード -->
            T_ORDER.REQ_SECTION_NAME,<!-- 依頼元部門名 -->
            T_ORDER.REQ_USER_ID,<!-- 依頼元担当者ID -->
            T_ORDER.REQ_USER_NAME,<!-- 依頼元担当者名 -->
            T_ORDER.REQ_USER_EXTENSION_NO,<!-- 依頼元担当内線番号 -->
            T_ORDER.REQ_USER_TEL_NO,<!-- 依頼元担当外線番号 -->
            T_ORDER.PUR_REQ_DATE,<!-- 購入依頼日 -->
            T_ORDER.PUR_REQ_NO,<!-- 購入依頼番号 -->
            T_ORDER.QUOT_REQ_NO,<!-- 見積依頼番号 -->
            T_ORDER.QUOT_REQ_DTL_NO,<!-- 見積依頼明細番号 -->
            T_ORDER.APP_ROUTE_NO,<!-- 承認ルート番号 -->
            T_ORDER.APP_ROUTE_NAME,<!-- 承認ルート名 -->
            T_ORDER.LOAD_COMPANY_CD,<!-- 負担会社コード -->
            T_ORDER.LOAD_COMPANY_NAME,<!-- 負担会社名 -->
            T_ORDER.LOAD_SECTION_PLACE_CD,<!-- 負担事業所コード -->
            T_ORDER.LOAD_SECTION_PLACE_NAME,<!-- 負担事業所名 -->
            T_ORDER.LOAD_SECTION_CD,<!-- 負担部門コード -->
            T_ORDER.LOAD_SECTION_NAME,<!-- 負担部門名 -->
            T_ORDER.RECIVE_COMPANY_CD AS RECEIVE_COMPANY_CD,<!-- 受入会社コード -->
            T_ORDER.RECIVE_COMPANY_NAME AS RECEIVE_COMPANY_NAME,<!-- 受入会社名 -->
            T_ORDER.RECIVE_SECTION_PLACE_CD AS RECEIVE_SECTION_PLACE_CD,<!-- 受入事業所コード -->
            T_ORDER.RECIVE_SECTION_PLACE_NAME AS RECEIVE_SECTION_PLACE_NAME,<!-- 受入事業所名 -->
            T_ORDER.RECIVE_SECTION_CD AS RECEIVE_SECTION_CD,<!-- 受入部門コード -->
            T_ORDER.RECIVE_SECTION_NAME AS RECEIVE_SECTION_NAME,<!-- 受入部門名 -->
            T_SLIP_MNG.LAST_UPD_DATE AS SLIP_LAST_UPD_DATE,
            T_QUOT_REQUEST.DELIV_PLACE_COMPANY_CD,<!-- 納入先会社コード -->
            T_QUOT_REQUEST.DELIV_PLACE_CD,<!-- 納入先コード -->
            T_QUOT_REQUEST.DELIV_PLACE_NAME,<!-- 納入先名 -->
            T_QUOT_REQ_SUP.SUP_COMPANY_CD,<!-- 取引先会社コード -->
            T_QUOT_REQ_SUP.SUP_CD,<!-- 取引先コード -->
            T_QUOT_REQ_SUP.SUP_NAME,<!-- 取引先名 -->
            T_QUOT_REQ_SUP.SUP_ABBR_NAME,<!-- 取引先名（略称） -->
            T_QUOT_REQ_SUP.SUP_ZIP_CD,<!-- 郵便番号 -->
            T_QUOT_REQ_SUP.SUP_TEL_NO,<!-- 電話番号 -->
            T_QUOT_REQ_SUP.SUP_FAX_NO,<!-- FAX番号 -->
            T_QUOT_REQ_SUP.EDI_IND,<!-- EDIデータ送受信方法 -->
            T_QUOT_REQ_SUP.SUBCON_IND,<!-- 下請法適用業者区分 -->
            T_QUOT_REQ_SUP.SUP_ADDRESS1,<!-- 住所１ -->
            T_QUOT_REQ_SUP.SUP_ADDRESS2,<!-- 住所２ -->
            T_ORDER.SUBJECT_COMPANY_CD,<!-- 科目会社コード -->
            T_ORDER.SUBJECT_CD,<!-- 科目コード -->
            T_ORDER.SUBJECT_NAME,<!-- 科目名 -->
            T_QUOT_REQUEST.ITEM_CLASS_COMPANY_CD, <!-- 品種会社コード -->
            T_QUOT_REQUEST.ITEM_CLASS_L,<!-- 大分類コード  -->
            T_QUOT_REQUEST.ITEM_CLASS_M,<!-- 中分類コード  -->
            T_QUOT_REQUEST.ITEM_CLASS_S,<!-- 小分類コード  -->
            T_QUOT_REQUEST.ITEM_CLASS_L_NAME,<!-- 大分類名  -->
            T_QUOT_REQUEST.ITEM_CLASS_M_NAME,<!-- 中分類名  -->
            T_QUOT_REQUEST.ITEM_CLASS_S_NAME,<!-- 小分類名  -->
            T_ORDER.ITEM_COMPANY_CD,<!-- 品名会社コード -->
            T_QUOT_RESP_DTL.ITEM_CD ,<!-- 品名コード -->
            T_QUOT_RESP_DTL.QUOT_RESP_ITEM_NAME AS ITEM_NAME,<!-- 品名 -->
            T_QUOT_RESP_DTL.QUOT_RESP_KATASHIKI AS KATASHIKI,<!-- 型式 -->
            T_QUOT_RESP_DTL.QUOT_RESP_MANUFACT_CD AS MANUFACT_CD,<!-- メーカーコード -->
            T_QUOT_RESP_DTL.QUOT_RESP_MANUFACT_NAME AS MANUFACT_NAME,<!-- メーカー名 -->
            T_ORDER.INSPECT_IND,<!-- 検査区分 -->
            T_ORDER.ORDER_DELIV_DATE AS PRE_ORDER_DELIV_DATE,<!-- 注文納期 -->
            T_QUOT_RESP_DTL.QUOT_RESP_DELIV_DATE AS ORDER_DELIV_DATE,<!-- 希望納期 -->
            T_QUOT_RESP_DTL.ORDER_LT AS ORDER_LT,<!-- 標準納入日数 -->
            T_QUOT_RESP_DTL.CURRENCY_CD,<!-- 通貨コード -->
            T_QUOT_RESP_DTL.UNIT_PRICE,<!-- 単価 -->
            T_QUOT_RESP_DTL.UNIT_PRICE AS "T_ORDER$UNIT_PRICE",<!-- 単価一時保存用 -->
            T_ORDER.UNIT_PRICE_IND AS UNIT_PRICE_IND_PRE,<!-- 単価区分_変更前 -->
            '1' AS UNIT_PRICE_IND,<!-- 単価区分 -->
            T_ORDER.PRICE_DEC_FLG,<!-- 単価確定変更フラグ -->
            T_QUOT_RESP_DTL.QUOT_RESP_VOL AS ORDER_VOL,<!-- 注文数量 -->
            T_QUOT_RESP_DTL.UNIT_CD,<!-- 単位コード -->
            T_QUOT_RESP_DTL.UNIT_NAME,<!-- 単位名 -->
            CASE WHEN T_DELIV_VOL.DELIV_VOL IS NULL THEN 0 ELSE T_DELIV_VOL.DELIV_VOL END AS DELIV_VOL,<!-- 受入済数量 -->
            ((CASE WHEN T_ORDER.ORDER_VOL IS NULL THEN 0 ELSE T_ORDER.ORDER_VOL END) - (CASE WHEN T_DELIV_VOL.DELIV_VOL IS NULL THEN 0 ELSE T_DELIV_VOL.DELIV_VOL END)) AS UNDELIV_VOL,<!-- 受入残数量 -->
            T_QUOT_RESP_DTL.QUOT_RESP_AMOUNT AS ORDER_AMOUNT,<!-- 注文金額 -->
            T_QUOT_RESP_DTL.QUOT_RESP_AMOUNT AS "T_ORDER$ORDER_AMOUNT",<!-- 注文金額一時保存用 -->
            T_PUR_REQUEST.REQ_AMOUNT AS HOPE_AMOUNT,<!-- 依頼金額 -->
            T_QUOT_RESP_DTL.TAX_IND,<!-- 課税区分 -->
            T_QUOT_RESP_DTL.CONSUMPT_IND,<!-- 消費税区分 -->
            T_ORDER.ORDER_CNV_CURRENCY_CD,<!-- 注文登録時換算通貨 -->
            T_ORDER.ORDER_CNV_RATE,<!-- 注文登録時換算レート -->
            T_ORDER.BUDGET_NO,<!-- 予算番号 -->
            T_RINGI_BUDGET_DTL.BUDGET_NAME,<!-- 予算名 -->
            T_ORDER.SEND_IND,<!-- データ送信区分 -->
            T_ORDER.PRINT_IND,<!-- 印刷区分 -->
            T_ORDER.FAX_SEND_IND,<!-- FAX送信区分 -->
            T_ORDER.EST_DELIV_FLG,<!-- 納期回答フラグ -->
            T_ORDER.AUTO_TERMINATE_FLG,<!-- 自動打切フラグ -->
            T_QUOT_REQUEST.ATTACH_FILE_SEQ1 AS ATTACH_FILE_SEQ1,<!-- 添付ファイル１シーケンス番号 -->
            T_QUOT_REQUEST.ATTACH_FILE_SEQ2 AS ATTACH_FILE_SEQ2,<!-- 添付ファイル２シーケンス番号 -->
            T_QUOT_REQ_DTL.ATTACH_FILE_SEQ AS ATTACH_FILE_SEQ3,<!-- 添付ファイル３シーケンス番号 -->
            T_ATTACH_MNG_A.ATTACH_FILE_NAME AS ATTACH_FILE_NAME1,<!-- 添付ファイル１ -->
            T_ATTACH_MNG_B.ATTACH_FILE_NAME AS ATTACH_FILE_NAME2,<!-- 添付ファイル２ -->
            T_ATTACH_MNG_C.ATTACH_FILE_NAME AS ATTACH_FILE_NAME3,<!-- 添付ファイル３ -->
            T_ATTACH_MNG_A.ATTACH_SCOPE AS ATTACH_SCOPE1,<!-- 取引先へ開示１ -->
            T_ATTACH_MNG_B.ATTACH_SCOPE AS ATTACH_SCOPE2,<!-- 取引先へ開示２ -->
            T_ATTACH_MNG_C.ATTACH_SCOPE AS ATTACH_SCOPE3,<!-- 取引先へ開示３ -->
            T_ORDER.BUYER_COMMENT,<!-- 発注コメント（取引先非通知） -->
            T_QUOT_REQUEST.FOR_SUPPRIER_COMMENT,<!-- 取引先向けコメント -->
            T_PUR_APL.FOR_BUYER_COMMENT,<!-- 購買担当者向けコメント -->
            T_PUR_REQUEST.CURRENCY_CD AS REQ_CURRENCY_CD,<!-- 希望通貨コード -->
            T_PUR_REQUEST.UNIT_PRICE AS REQ_UNIT_PRICE,<!-- 希望単価 -->
            T_PUR_REQUEST.REQ_VOL,<!-- 依頼数量 -->
            T_PUR_REQUEST.UNIT_NAME AS REQ_UNIT_NAME,<!-- 希望単位名 -->
            T_PUR_REQUEST.REQ_AMOUNT,<!-- 依頼金額 -->
            T_ORDER.LAST_UPD_DATE,
            T_ORDER.ORDER_STATUS,<!-- 注文ステータス -->
            T_ORDER.REQ_TYPE_IND,<!-- 依頼区分 -->
            T_ORDER.CORRECT_CD,<!-- 訂正コード -->
            T_PUR_APL.QUOT_RESP_SEQ,<!-- 見積回答シーケンス番号 -->
            T_QUOT_REQUEST.QUOT_REQ_SEQ,<!-- 見積シーケンス番号 -->
            T_QUOT_REQUEST.QUOT_ADO_STATUS,<!-- 見積採否ステータス -->
            T_PUR_REQUEST.PRICE_REG_FLG,
            T_SLIP_MNG.SLIP_NO AS EXCLUSIVE_SLIP_NO,
            T_SLIP_MNG.LAST_UPD_DATE AS EXCLUSIVE_LAST_UPD_DATE,
            M_PAY_CONDITION_LANG.PAY_CONDITION_CD AS PAY_CONDITION_CD,<!-- 支払条件コード -->
            M_PAY_CONDITION_LANG.PAY_CONDITION_NAME AS PAY_CONDITION_NAME,<!-- 支払条件名 -->
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_ORDER")},
            T_PUR_APL.PUR_APL_SEQ
        FROM T_ORDER
        LEFT JOIN T_SLIP_MNG
            ON T_ORDER.ORDER_NO = T_SLIP_MNG.SLIP_NO
            AND T_SLIP_MNG.DELETE_FLG = '0'
        LEFT JOIN T_PUR_REQUEST
            ON T_ORDER.PUR_REQ_NO = T_PUR_REQUEST.PUR_REQ_NO
            AND T_PUR_REQUEST.NEW_APP_FLG = '1'
            AND T_PUR_REQUEST.NEW_FLG = '1'
            AND T_PUR_REQUEST.DELETE_FLG = '0'
        LEFT JOIN T_PUR_APL
            ON T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST.PUR_APL_SEQ
            AND T_PUR_APL.DELETE_FLG = '0'
        LEFT JOIN T_QUOT_REQUEST
            ON (T_PUR_REQUEST.PUR_REQ_NO = T_QUOT_REQUEST.QUOT_REQ_NO
            OR  T_PUR_REQUEST.PUR_APL_NO = T_QUOT_REQUEST.QUOT_REQ_NO)
            AND T_QUOT_REQUEST.NEW_FLG = '1'
            AND T_QUOT_REQUEST.NEW_APP_FLG = '1'
            AND T_QUOT_REQUEST.DELETE_FLG = '0'
        LEFT JOIN T_QUOT_REQ_DTL
            ON T_QUOT_REQ_DTL.QUOT_REQ_SEQ = T_QUOT_REQUEST.QUOT_REQ_SEQ
            AND T_QUOT_REQ_DTL.DELETE_FLG = '0'
        LEFT JOIN T_QUOT_REQ_SUP
            ON T_QUOT_REQ_SUP.QUOT_REQ_SEQ = T_QUOT_REQUEST.QUOT_REQ_SEQ
            AND T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO = #{quotSupLineNo}
            AND T_QUOT_REQ_SUP.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_A
            ON T_QUOT_REQUEST.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_A.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_B
            ON T_QUOT_REQUEST.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_C
            ON T_QUOT_REQ_DTL.ATTACH_FILE_SEQ = T_ATTACH_MNG_C.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_C.DELETE_FLG = '0'
        LEFT JOIN (SELECT T_ORDER.ORDER_NO,SUM(T_RECEIVE_MNG.DELIV_VOL) AS DELIV_VOL 
                FROM T_RECEIVE_MNG 
                LEFT JOIN T_ORDER ON T_ORDER.ORDER_NO = T_RECEIVE_MNG.ORDER_NO
                WHERE T_ORDER.ORDER_SEQ = #{orderSeq} AND T_RECEIVE_MNG.DELETE_FLG = '0' 
                GROUP BY T_ORDER.ORDER_NO) T_DELIV_VOL
            ON T_ORDER.ORDER_NO = T_DELIV_VOL.ORDER_NO
        INNER JOIN T_QUOT_RESP_DTL
            ON T_QUOT_RESP_DTL.QUOT_REQ_DTL_NO = T_ORDER.ORDER_NO
            AND T_QUOT_RESP_DTL.QUOT_RESP_SEQ = #{quotReqSeq}
        LEFT JOIN M_SUPPLIER
            ON (M_SUPPLIER.COMPANY_CD = T_QUOT_REQ_SUP.SUP_COMPANY_CD
                OR M_SUPPLIER.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
            AND M_SUPPLIER.SUP_CD = T_QUOT_REQ_SUP.SUP_CD
        LEFT JOIN M_PAY_CONDITION_LANG
            ON M_PAY_CONDITION_LANG.COMPANY_CD = M_SUPPLIER.COMPANY_CD
            AND M_PAY_CONDITION_LANG.PAY_CONDITION_CD = M_SUPPLIER.PAY_CONDITION_CD
            AND M_PAY_CONDITION_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
        LEFT JOIN (SELECT
                    ORDER_NO,
                    ORDER_VERSION
                   FROM
                    T_ORDER
                   WHERE
                        NEW_APP_FLG = '1'
                    AND DELETE_FLG = '0') T_ORDER_LATEST_APPROVED
            ON T_ORDER_LATEST_APPROVED.ORDER_NO = T_ORDER.ORDER_NO
        LEFT JOIN T_RINGI_BUDGET_DTL 
            ON T_RINGI_BUDGET_DTL.COMPANY_CD = T_ORDER.LOAD_COMPANY_CD 
           AND T_RINGI_BUDGET_DTL.SECTION_PLACE_CD = T_ORDER.LOAD_SECTION_PLACE_CD 
           AND T_RINGI_BUDGET_DTL.BUDGET_DTL_NO = T_ORDER.BUDGET_NO 
        WHERE T_ORDER.ORDER_SEQ = #{orderSeq}
    </select>
    
    <!-- 購入依頼テーブル(差戻し)SQL -->
    <update id="remandOrder">
        UPDATE T_PUR_REQUEST   
           SET PUR_REQ_STATUS = '03',  
               APP_UNIT_NO = #{purReqNo},
               BUYER_BACK_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}', 
               BUYER_BACK_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}', 
               BUYER_BACK_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}', 
               BUYER_BACK_SECTION_PLACE_NAME = '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}', 
               BUYER_BACK_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}', 
               BUYER_BACK_SECTION_NAME = '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}', 
               BUYER_BACK_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
               BUYER_BACK_USER_NAME = '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',
               BUYER_BACK_USER_COMMENTS = #{backComment},
               LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}', 
               LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}', 
               LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}', 
               LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'  
         WHERE PUR_REQ_SEQ = #{purReqSeq} 
    </update>
    
    <!-- 注文テーブル(新規)SQL -->
    <insert id="insertOrder" parameterType="fw.domain.slip.order.order.Order">
        INSERT INTO T_ORDER
            (ORDER_SEQ,<!-- 注文シーケンス番号 -->
             ORDER_NO,<!-- 注文番号 -->
             ORDER_VERSION,<!-- 注文版数 -->
             ORDER_STATUS,<!-- 注文ステータス -->
             INFO_CD,<!-- 情報区分コード -->
             REQ_TYPE_IND,<!-- 依頼区分 -->
             CORRECT_CD,<!-- 訂正コード -->
             PRE_SEQ,<!-- 変更前シーケンス番号 -->
             NEW_FLG,<!-- 最新フラグ -->
             NEW_APP_FLG,<!-- 最新承認済みフラグ -->
             PUR_REQ_DATE,<!-- 購入依頼日 -->
             ORDER_INPUT_DATE,<!-- 注文登録日 -->
             ORDER_DATE,<!-- 注文日 -->
             ORDER_FIRST_DATE,<!-- 初回注文日 -->
             PUR_REQ_NO,<!-- 購入依頼番号 -->
             QUOT_REQ_NO,<!-- 見積依頼番号 -->
             QUOT_REQ_DTL_NO,<!-- 見積依頼明細番号 -->
             REQ_COMPANY_CD,<!-- 依頼元会社コード -->
             REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
             REQ_SECTION_PLACE_CD,<!-- 依頼元事業所コード -->
             REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
             REQ_SECTION_CD,<!-- 依頼元部門コード -->
             REQ_SECTION_NAME,<!-- 依頼元部門名 -->
             REQ_USER_ID,<!-- 依頼元担当者ID -->
             REQ_USER_NAME,<!-- 依頼元担当者名 -->
             REQ_USER_EXTENSION_NO,<!-- 依頼元担当内線番号 -->
             REQ_USER_TEL_NO,<!-- 依頼元担当外線番号 -->
             REQ_USER_MAIL_ADDR,<!-- 依頼元担当メールアドレス -->
             BUYER_COMPANY_CD,<!-- 購買会社コード -->
             BUYER_COMPANY_NAME,<!-- 購買会社名 -->
             BUYER_SECTION_PLACE_CD,<!-- 購買事業所コード -->
             BUYER_SECTION_PLACE_NAME,<!-- 購買事業所名 -->
             BUYER_SECTION_CD,<!-- 購買部門コード -->
             BUYER_SECTION_NAME,<!-- 購買部門名 -->
             BUYER_USER_ID,<!-- 購買担当者ID -->
             BUYER_USER_NAME,<!-- 購買担当者名 -->
             BUYER_USER_EXTENSION_NO,<!-- 購買担当内線番号 -->
             BUYER_USER_TEL_NO,<!-- 購買担当外線番号 -->
             BUYER_USER_MAIL_ADDR,<!-- 購買担当メールアドレス -->
             BUYER_COMMENT,<!-- 発注コメント（取引先非通知） -->
             FOR_SUPPRIER_COMMENT,<!-- 取引先向けコメント -->
             TITLE_NAME,<!-- 件名 -->
             LOAD_COMPANY_CD,<!-- 負担会社コード -->
             LOAD_COMPANY_NAME,<!-- 負担会社名 -->
             LOAD_SECTION_PLACE_CD,<!-- 負担事業所コード -->
             LOAD_SECTION_PLACE_NAME,<!-- 負担事業所名 -->
             LOAD_SECTION_CD,<!-- 負担部門コード -->
             LOAD_SECTION_NAME,<!-- 負担部門名 -->
             RECIVE_COMPANY_CD,<!-- 受入会社コード -->
             RECIVE_COMPANY_NAME,<!-- 受入会社名 -->
             RECIVE_SECTION_PLACE_CD,<!-- 受入事業所コード -->
             RECIVE_SECTION_PLACE_NAME,<!-- 受入事業所名 -->
             RECIVE_SECTION_CD,<!-- 受入部門コード -->
             RECIVE_SECTION_NAME,<!-- 受入部門名 -->
             INSPECT_IND,<!-- 検査区分 -->
             ITEM_CLASS_COMPANY_CD,<!-- 品種会社コード -->
             ITEM_CLASS_L,<!-- 大分類コード -->
             ITEM_CLASS_L_NAME,<!-- 大分類名 -->
             ITEM_CLASS_M,<!-- 中分類コード -->
             ITEM_CLASS_M_NAME,<!-- 中分類名 -->
             ITEM_CLASS_S,<!-- 小分類コード -->
             ITEM_CLASS_S_NAME,<!-- 小分類名 -->
             ITEM_COMPANY_CD,<!-- 品名会社コード -->
             ITEM_CD,<!-- 品名コード -->
             ITEM_NAME,<!-- 品名 -->
             KATASHIKI,<!-- 型式 -->
             MANUFACT_CD,<!-- メーカーコード -->
             MANUFACT_NAME,<!-- メーカー名 -->
             SUBJECT_COMPANY_CD,<!-- 科目会社コード -->
             SUBJECT_CD,<!-- 科目コード  -->
             SUBJECT_NAME,<!-- 科目名 -->
             SUP_COMPANY_CD,<!-- 取引先会社コード -->
             SUP_CD,<!-- 取引先コード -->
             SUP_NAME,<!-- 取引先名 -->
             SUP_ABBR_NAME,<!-- 取引先名（略称） -->
             SUP_ZIP_CD,<!-- 取引先郵便番号 -->
             SUP_ADDRESS1,<!-- 取引先住所１ -->
             SUP_ADDRESS2,<!-- 取引先住所２ -->
             SUP_TEL_NO,<!-- 取引先電話番号 -->
             SUP_FAX_NO,<!-- 取引先FAX番号 -->
             SUBCON_IND,<!-- 下請法適用業者区分 -->
             EDI_IND,<!-- EDIデータ送受信方法 -->
             VENDOR_CD,<!-- 統一取引先コード -->
             BUDGET_NO,<!-- 予算番号 -->
             ORDER_DELIV_DATE,<!-- 注文納期 -->
             DELIV_PLACE_COMPANY_CD,<!-- 納入先会社コード -->
             DELIV_PLACE_CD,<!-- 納入先コード -->
             DELIV_PLACE_NAME,<!-- 納入先名 -->
             DELIV_PLACE_ZIP_CD,<!-- 納入先郵便番号 -->
             DELIV_PLACE_ADDRESS1,<!-- 納入先住所１ -->
             DELIV_PLACE_ADDRESS2,<!-- 納入先住所２ -->
             DELIV_PLACE_NAME_INB,<!-- 構内配送先 -->
             DELIV_PLACE_TEL_NO,<!-- 納入先電話番号 -->
             DELIV_PLACE_FAX_NO,<!-- 納入先FAX番号 -->
             DELIV_PLACE_COMPANY_NAME,<!-- 納入先会社名 -->
             DELIV_PLACE_CONTACT_NAME,<!-- 納入先担当者名 -->
             CURRENCY_CD,<!-- 通貨コード -->
             TAX_IND,<!-- 課税区分 -->
             CONSUMPT_IND,<!-- 消費税区分 -->
             TAX_RATE,<!-- 税率 -->
             ORDER_VOL,<!-- 注文数量 -->
             UNIT_CD,<!-- 単位コード -->
             UNIT_NAME,<!-- 単位名 -->
             UNIT_PRICE,<!-- 単価 -->
             ORDER_AMOUNT,<!-- 注文金額 -->
             CONSUMPT_AMOUNT,<!-- 消費税額 -->
             TOTAL_AMOUNT,<!-- 合計金額 -->
             ORDER_CANCEL_VOL,<!-- 打切取消数量 -->
             ORDER_CANCEL_AMOUNT,<!-- 打切取消金額 -->
             UNIT_PRICE_IND,<!-- 単価区分 -->
             PRICE_UNDEC_REASON,<!-- 単価未定理由 -->
             PRICE_DEC_DATE,<!-- 単価決定予定日 -->
             ORDER_CNV_CURRENCY_CD,<!-- 注文登録時換算通貨 -->
             ORDER_CNV_RATE,<!-- 注文登録時換算レート -->
             ORDER_CNV_AMOUNT,<!-- 注文登録時換算金額 -->
             EST_DELIV_FLG,<!-- 納期回答フラグ -->
             AUTO_TERMINATE_FLG,<!-- 自動打切フラグ -->
             SUP_CONFIRM_FLG,<!-- 取引先確認フラグ -->
             PRICE_DEC_FLG,<!-- 単価確定変更フラグ -->
             ATTACH_FILE_SEQ1,<!-- 添付ファイルシーケンス１ -->
             ATTACH_FILE_SEQ2,<!-- 添付ファイルシーケンス２ -->
             ATTACH_FILE_SEQ3,<!-- 添付ファイルシーケンス３ -->
             APP_ROUTE_NO,<!-- 承認ルート番号 -->
             APP_ROUTE_NAME,<!-- 承認ルート名 -->
             SEND_IND,<!-- データ送信区分 -->
             PRINT_IND,<!-- 印刷区分 -->
             FAX_SEND_IND,<!-- FAX送信区分 -->
             BI_OUT_IND,<!-- 実績抽出区分 -->
             RECEIPT_NUMBER,<!-- 受付番号 -->
             FAX_RECEIPT_NUMBER,<!-- FAX受付番号 -->
             DYN_SEND_IND,<!-- 外部カタログ連携区分 -->
             DYN_RECEIPT_NUMBER,<!-- 外部カタログ受付番号 -->
             PAY_CONDITION_COMPANY_CD,<!-- 支払条件会社コード -->
             PAY_CONDITION_CD,<!-- 支払条件コード -->
             PAY_CONDITION_NAME,<!-- 支払条件名 -->
             DELETE_FLG,<!-- 削除フラグ -->
             AUTO_DELETE_FLG,<!-- 自動データ削除フラグ -->
             AUTO_DELETE_DATE,<!-- 自動データ削除日 -->
             LAST_UPD_DATE,<!-- 最終更新日時 -->
             LAST_UPD_COMPANY_CD,<!-- 最終更新会社コード -->
             LAST_UPD_SECTION_CD,<!-- 最終更新部門コード -->
             LAST_UPD_USER_ID,<!-- 最終更新ユーザーID -->
             REG_DATE,<!-- 登録日時 -->
             REG_COMPANY_CD,<!-- 登録会社コード -->
             REG_SECTION_CD,<!-- 登録部門コード -->
             REG_USER_ID,<!-- 登録ユーザーID -->
             ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()})
        VALUES
            (#{orderIdentify.orderSeq},<!-- 注文シーケンス番号 -->
             #{orderNo.orderNo},<!-- 注文番号 -->
             #{historyNo.historyNo},<!-- 注文版数 -->
             #{status.orderStatus.orderStatus},<!-- 注文ステータス -->
             #{informationInd.informationInd},<!-- 情報区分コード -->
             #{reqInd.reqInd},<!-- 依頼区分 -->
             #{correctInd.correctInd},<!-- 訂正コード -->
             #{orderIdentify.preSeq},<!-- 変更前シーケンス番号 -->
             #{status.newFlg.newFlg},<!-- 最新フラグ -->
             #{status.newAppFlg.newAppFlg},<!-- 最新承認済みフラグ -->
             #{schedule.reqDate.reqDate.dateOfymd},<!-- 購入依頼日 -->
             #{schedule.orderDate.orderInputDate.dateOfymd},<!-- 注文登録日 -->
             #{schedule.orderDate.orderDate.dateOfymd},<!-- 注文日 -->
             #{schedule.orderDate.orderFirstDate.dateOfymd},<!-- 初回注文日 -->
             #{orderManagement.slipOriginNo.purReqNo.purReqNo},<!-- 購入依頼番号 -->
             #{orderManagement.slipOriginNo.quotReqNo.quotReqNo},<!-- 見積依頼番号 -->
             #{orderManagement.slipOriginNo.quotReqDtlNo.quotReqItemNo},<!-- 見積依頼明細番号 -->
             #{user.reqUser.reqUser.section.company.companyCd},<!-- 依頼元会社コード -->
             #{user.reqUser.reqUser.section.company.companyName},<!-- 依頼元会社名 -->
             #{user.reqUser.reqUser.section.sectionPlace.sectionPlaceCd},<!-- 依頼元事業所コード -->
             #{user.reqUser.reqUser.section.sectionPlace.sectionPlaceName},<!-- 依頼元事業所名 -->
             #{user.reqUser.reqUser.section.sectionCd},<!-- 依頼元部門コード -->
             #{user.reqUser.reqUser.section.sectionName},<!-- 依頼元部門名 -->
             #{user.reqUser.reqUser.userID},<!-- 依頼元担当者ID -->
             #{user.reqUser.reqUser.userName},<!-- 依頼元担当者名 -->
             #{user.reqUser.reqUser.extNo.extensionNo},<!-- 依頼元担当内線番号 -->
             #{user.reqUser.reqUser.externalNo.externalNo},<!-- 依頼元担当外線番号 -->
             #{user.reqUser.reqUser.mailAddr.mail},<!-- 依頼元担当メールアドレス -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 購買会社コード -->
             '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',<!-- 購買会社名 -->
             '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',<!-- 購買事業所コード -->
             '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',<!-- 購買事業所名 -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 購買部門コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',<!-- 購買部門名 -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 購買担当者ID -->
             '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',<!-- 購買担当者名 -->
             '${@fw.security.SecurityUtil@getLoginUserExtNoByEscapeSql()}',<!-- 購買担当内線番号 -->
             '${@fw.security.SecurityUtil@getLoginUserExternalNoByEscapeSql()}',<!-- 購買担当外線番号 -->
             '${@fw.security.SecurityUtil@getLoginUserMailAddrByEscapeSql()}',<!-- 購買担当メールアドレス -->
             #{orderComment.buyerComment.comment.comment},<!-- 発注コメント（取引先非通知） -->
             #{orderComment.forSupplierComment.forSupplierComment.comment},<!-- 取引先向けコメント -->
             #{titleName.titleName},<!-- 件名 -->
             #{user.loadSection.loadSection.company.companyCd},<!-- 負担会社コード -->
             #{user.loadSection.loadSection.company.companyName},<!-- 負担会社名 -->
             #{user.loadSection.loadSection.sectionPlace.sectionPlaceCd},<!-- 負担事業所コード -->
             #{user.loadSection.loadSection.sectionPlace.sectionPlaceName},<!-- 負担事業所名 -->
             #{user.loadSection.loadSection.sectionCd},<!-- 負担部門コード -->
             #{user.loadSection.loadSection.sectionName},<!-- 負担部門名 -->
             #{user.receiveSection.receiveSection.company.companyCd},<!-- 受入会社コード -->
             #{user.receiveSection.receiveSection.company.companyName},<!-- 受入会社名 -->
             #{user.receiveSection.receiveSection.sectionPlace.sectionPlaceCd},<!-- 受入事業所コード -->
             #{user.receiveSection.receiveSection.sectionPlace.sectionPlaceName},<!-- 受入事業所名 -->
             #{user.receiveSection.receiveSection.sectionCd},<!-- 受入部門コード -->
             #{user.receiveSection.receiveSection.sectionName},<!-- 受入部門名 -->
             #{condition.inspectInd.inspectInd},<!-- 検査区分 -->
             #{accounting.orderItem.itemKind.itemClassCompanyCd},<!-- 品種会社コード -->
             #{accounting.orderItem.itemKind.itemClassL},<!-- 大分類コード -->
             #{accounting.orderItem.itemKind.itemClassLName},<!-- 大分類名 -->
             #{accounting.orderItem.itemKind.itemClassM},<!-- 中分類コード -->
             #{accounting.orderItem.itemKind.itemClassMName},<!-- 中分類名 -->
             #{accounting.orderItem.itemKind.itemClassS},<!-- 小分類コード -->
             #{accounting.orderItem.itemKind.itemClassSName},<!-- 小分類名 -->
             #{accounting.orderItem.item.itemCompanyCd},<!-- 品名会社コード -->
             #{accounting.orderItem.item.itemCd},<!-- 品名コード -->
             #{accounting.orderItem.item.itemName},<!-- 品名 -->
             #{accounting.orderItem.item.katashiki},<!-- 型式 -->
             #{accounting.orderItem.item.manufact.manufactCd},<!-- メーカーコード -->
             #{accounting.orderItem.item.manufact.manufactName},<!-- メーカー名 -->
             #{accounting.subject.subjectCompanyCd},<!-- 科目会社コード -->
             #{accounting.subject.subjectCd},<!-- 科目コード  -->
             #{accounting.subject.subjectName},<!-- 科目名 -->
             #{supplierFrom.supCompanyCd},<!-- 取引先会社コード -->
             #{supplierFrom.supCd},<!-- 取引先コード -->
             #{supplierFrom.supplierName.supplierName},<!-- 取引先名 -->
             #{supplierFrom.supplierName.supplierAbbrName},<!-- 取引先名（略称） -->
             #{supplierFrom.supplierContact.ctc.zipCd.zipCd},<!-- 取引先郵便番号 -->
             #{supplierFrom.supplierContact.ctc.address1.address},<!-- 取引先住所１ -->
             #{supplierFrom.supplierContact.ctc.address2.address},<!-- 取引先住所２ -->
             #{supplierFrom.supplierContact.ctc.telNo.telNo},<!-- 取引先電話番号 -->
             #{supplierFrom.supplierContact.ctc.faxNo.faxNo},<!-- 取引先FAX番号 -->
             #{supplierFrom.subcon.subconInd},<!-- 下請法適用業者区分 -->
             #{supplierFrom.ediInd.ediInd},<!-- EDIデータ送受信方法 -->
             #{supplierFrom.vendor.vendorCd},<!-- 統一取引先コード -->
             #{complement.budgetNumber.budgetNumber},<!-- 予算番号 -->
             #{schedule.dlvEst.dlvEst.dateOfymd},<!-- 注文納期 -->
             #{complement.delivPlace.delivPlaceCompanyCd},<!-- 納入先会社コード -->
             #{complement.delivPlace.delivPlaceCd},<!-- 納入先コード -->
             #{complement.delivPlace.delivPlaceName},<!-- 納入先名 -->
             #{complement.delivPlace.contact.zipCd.zipCd},<!-- 納入先郵便番号 -->
             #{complement.delivPlace.contact.address1.address},<!-- 納入先住所１ -->
             #{complement.delivPlace.contact.address2.address},<!-- 納入先住所２ -->
             #{complement.delivPlace.delivPlaceNameInb},<!-- 構内配送先 -->
             #{complement.delivPlace.contact.telNo.telNo},<!-- 納入先電話番号 -->
             #{complement.delivPlace.contact.faxNo.faxNo},<!-- 納入先FAX番号 -->
             #{complement.delivPlace.delivPlaceCompanyName},<!-- 納入先会社名 -->
             #{complement.delivPlace.delivPlaceContactName},<!-- 納入先担当者名 -->
             #{accounting.orderAmount.amountMng.currency.currencyCd},<!-- 通貨コード -->
             #{accounting.orderAmount.amountMng.taxCalculationInd.taxInd.taxInd},<!-- 課税区分 -->
             #{accounting.orderAmount.amountMng.taxCalculationInd.consumptInd.consumptInd},<!-- 消費税区分 -->
             #{accounting.orderAmount.taxRate.taxRate},<!-- 税率 -->
             #{accounting.orderAmount.orderVolume.orderVol.vol},<!-- 注文数量 -->
             #{accounting.orderItem.item.unit.unitCd},<!-- 単位コード -->
             #{accounting.orderItem.item.unit.unitName},<!-- 単位名 -->
             #{accounting.orderAmount.unitPrice.amount.amount},<!-- 単価 -->
             #{accounting.orderAmount.orderAmount.amount},<!-- 注文金額 -->
             #{accounting.orderAmount.amountMng.consumptAmount.consumptAmount.amount},<!-- 消費税額 -->
             #{accounting.orderAmount.amountMng.totalAmount.totalAmount.amount},<!-- 合計金額 -->
             #{orderCancel.orderCancelVol.vol},<!-- 打切取消数量 -->
             #{orderCancel.orderCancelAmount.amount},<!-- 打切取消金額 -->
             #{status.priceManagement.unitPriceInd},<!-- 単価区分 -->
             #{status.priceManagement.priceUndecReason.comment},<!-- 単価未定理由 -->
             #{status.priceManagement.priceDecDate.dateOfymd},<!-- 単価決定予定日 -->
             #{accounting.orderCnv.currency.currencyCd},<!-- 注文登録時換算通貨 -->
             #{accounting.orderCnv.orderCnvRate.rate},<!-- 注文登録時換算レート -->
             #{accounting.orderCnv.orderCnvAmount.amount},<!-- 注文登録時換算金額 -->
             #{status.dlvRespFlg.dlvRespFlg},<!-- 納期回答フラグ -->
             #{condition.autoTerminateFlg.autoTerminateFlg},<!-- 自動打切フラグ -->
             #{status.supConfirmFlg.supConfirmFlag},<!-- 取引先確認フラグ -->
             #{status.priceDecFlag.priceDecFlag},<!-- 単価確定変更フラグ -->
             #{complement.rangeByAttachFile1.attachFile.seqNo},<!-- 添付ファイルシーケンス１ -->
             #{complement.rangeByAttachFile2.attachFile.seqNo},<!-- 添付ファイルシーケンス２ -->
             #{complement.rangeByAttachFile3.attachFile.seqNo},<!-- 添付ファイルシーケンス３ -->
             #{approute.appRouteNo},<!-- 承認ルート番号 -->
             #{approute.appRouteName},<!-- 承認ルート名 -->
             #{status.dataInd.supSend.sendInd.sendInd},<!-- データ送信区分 -->
             #{status.dataInd.printInd.printInd.sendInd},<!-- 印刷区分 -->
             #{status.dataInd.supSend.faxSendInd.sendInd},<!-- FAX送信区分 -->
             #{status.dataInd.supSend.biOutind.sendInd},<!-- 実績抽出区分 -->
             #{status.dataInd.supSend.receiptNumber.reciptNumber},<!-- 受付番号 -->
             #{status.dataInd.supSend.faxReceiptNumber.reciptNumber},<!-- FAX受付番号 -->
             #{status.dataInd.supSend.dynSendInd.sendInd},<!-- 外部カタログ連携区分 -->
             #{status.dataInd.supSend.dynReceiptNumber.reciptNumber},<!-- 外部カタログ受付番号 -->
             CASE 
               WHEN #{payConditionItem.payConditionIdentify.payConditionCd} IS NULL THEN NULL
               ELSE '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}' 
             END,
             #{payConditionItem.payConditionIdentify.payConditionCd},<!-- 支払条件コード -->
             #{payConditionItem.payConditionName},<!-- 支払条件名-->
             '0',<!-- 削除フラグ -->
             '0',<!-- 自動データ削除フラグ -->
             '',<!-- 自動データ削除日 -->
             '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 最終更新日時 -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 最終更新会社コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 最終更新部門コード -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 最終更新ユーザーID -->
             '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 登録日時 -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 登録会社コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 登録部門コード -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 登録ユーザーID -->
              ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("editExtItem.")})
    </insert>
    
    <!-- 注文テーブル(更新)SQL -->
    <update id="updateOrder" parameterType="fw.domain.slip.order.order.Order">
        UPDATE T_ORDER 
        SET 
             ORDER_STATUS = #{status.orderStatus.orderStatus},<!-- 注文ステータス -->
             NEW_FLG = #{status.newFlg.newFlg},<!-- 最新フラグ -->
             NEW_APP_FLG = #{status.newAppFlg.newAppFlg},<!-- 最新承認済みフラグ -->
             ORDER_INPUT_DATE = #{schedule.orderDate.orderInputDate.dateOfymd},<!-- 注文登録日 -->
             REQ_USER_MAIL_ADDR = #{user.reqUser.reqUser.mailAddr.mail},<!-- 依頼元担当メールアドレス -->
             BUYER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 購買会社コード -->
             BUYER_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',<!-- 購買会社名 -->
             BUYER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',<!-- 購買事業所コード -->
             BUYER_SECTION_PLACE_NAME = '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',<!-- 購買事業所名 -->
             BUYER_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 購買部門コード -->
             BUYER_SECTION_NAME = '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',<!-- 購買部門名 -->
             BUYER_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 購買担当者ID -->
             BUYER_USER_NAME = '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',<!-- 購買担当者名 -->
             BUYER_USER_EXTENSION_NO = '${@fw.security.SecurityUtil@getLoginUserExtNoByEscapeSql()}',<!-- 購買担当内線番号 -->
             BUYER_USER_TEL_NO = '${@fw.security.SecurityUtil@getLoginUserExternalNoByEscapeSql()}',<!-- 購買担当外線番号 -->
             BUYER_USER_MAIL_ADDR = '${@fw.security.SecurityUtil@getLoginUserMailAddrByEscapeSql()}',<!-- 購買担当メールアドレス -->
             BUYER_COMMENT = #{orderComment.buyerComment.comment.comment},<!-- 発注コメント（取引先非通知） -->
             FOR_SUPPRIER_COMMENT = #{orderComment.forSupplierComment.forSupplierComment.comment},<!-- 取引先向けコメント -->
             TITLE_NAME = #{titleName.titleName},<!-- 件名 -->
             LOAD_COMPANY_CD = #{user.loadSection.loadSection.company.companyCd},<!-- 負担会社コード -->
             LOAD_COMPANY_NAME = #{user.loadSection.loadSection.company.companyName},<!-- 負担会社名 -->
             LOAD_SECTION_PLACE_CD = #{user.loadSection.loadSection.sectionPlace.sectionPlaceCd},<!-- 負担事業所コード -->
             LOAD_SECTION_PLACE_NAME = #{user.loadSection.loadSection.sectionPlace.sectionPlaceName},<!-- 負担事業所名 -->
             LOAD_SECTION_CD = #{user.loadSection.loadSection.sectionCd},<!-- 負担部門コード -->
             LOAD_SECTION_NAME = #{user.loadSection.loadSection.sectionName},<!-- 負担部門名 -->
             INSPECT_IND = #{condition.inspectInd.inspectInd},<!-- 検査区分 -->
             ITEM_CLASS_COMPANY_CD = #{accounting.orderItem.itemKind.itemClassCompanyCd},<!-- 品種会社コード -->
             ITEM_CLASS_L = #{accounting.orderItem.itemKind.itemClassL},<!-- 大分類コード -->
             ITEM_CLASS_L_NAME = #{accounting.orderItem.itemKind.itemClassLName},<!-- 大分類名 -->
             ITEM_CLASS_M = #{accounting.orderItem.itemKind.itemClassM},<!-- 中分類コード -->
             ITEM_CLASS_M_NAME = #{accounting.orderItem.itemKind.itemClassMName},<!-- 中分類名 -->
             ITEM_CLASS_S = #{accounting.orderItem.itemKind.itemClassS},<!-- 小分類コード -->
             ITEM_CLASS_S_NAME = #{accounting.orderItem.itemKind.itemClassSName},<!-- 小分類名 -->
             ITEM_COMPANY_CD = #{accounting.orderItem.item.itemCompanyCd},<!-- 品名会社コード -->
             ITEM_CD = #{accounting.orderItem.item.itemCd},<!-- 品名コード -->
             ITEM_NAME = #{accounting.orderItem.item.itemName},<!-- 品名 -->
             KATASHIKI = #{accounting.orderItem.item.katashiki},<!-- 型式 -->
             MANUFACT_CD = #{accounting.orderItem.item.manufact.manufactCd},<!-- メーカーコード -->
             MANUFACT_NAME = #{accounting.orderItem.item.manufact.manufactName},<!-- メーカー名 -->
             SUBJECT_COMPANY_CD = #{accounting.subject.subjectCompanyCd},<!-- 科目会社コード -->
             SUBJECT_CD = #{accounting.subject.subjectCd},<!-- 科目コード  -->
             SUBJECT_NAME = #{accounting.subject.subjectName},<!-- 科目名 -->
             SUP_COMPANY_CD = #{supplierFrom.supCompanyCd},<!-- 取引先会社コード -->
             SUP_CD = #{supplierFrom.supCd},<!-- 取引先コード -->
             SUP_NAME = #{supplierFrom.supplierName.supplierName},<!-- 取引先名 -->
             SUP_ABBR_NAME = #{supplierFrom.supplierName.supplierAbbrName},<!-- 取引先名（略称） -->
             SUP_ZIP_CD = #{supplierFrom.supplierContact.ctc.zipCd.zipCd},<!-- 取引先郵便番号 -->
             SUP_ADDRESS1 = #{supplierFrom.supplierContact.ctc.address1.address},<!-- 取引先住所１ -->
             SUP_ADDRESS2 = #{supplierFrom.supplierContact.ctc.address2.address},<!-- 取引先住所２ -->
             SUP_TEL_NO = #{supplierFrom.supplierContact.ctc.telNo.telNo},<!-- 取引先電話番号 -->
             SUP_FAX_NO = #{supplierFrom.supplierContact.ctc.faxNo.faxNo},<!-- 取引先FAX番号 -->
             SUBCON_IND = #{supplierFrom.subcon.subconInd},<!-- 下請法適用業者区分 -->
             EDI_IND = #{supplierFrom.ediInd.ediInd},<!-- EDIデータ送受信方法 -->
             VENDOR_CD = #{supplierFrom.vendor.vendorCd},<!-- 統一取引先コード -->
             BUDGET_NO = #{complement.budgetNumber.budgetNumber},<!-- 予算番号 -->
             ORDER_DELIV_DATE = #{schedule.dlvEst.dlvEst.dateOfymd},<!-- 注文納期 -->
             DELIV_PLACE_COMPANY_CD = #{complement.delivPlace.delivPlaceCompanyCd},<!-- 納入先会社コード -->
             DELIV_PLACE_CD = #{complement.delivPlace.delivPlaceCd},<!-- 納入先コード -->
             DELIV_PLACE_NAME = #{complement.delivPlace.delivPlaceName},<!-- 納入先名 -->
             DELIV_PLACE_ZIP_CD = #{complement.delivPlace.contact.zipCd.zipCd},<!-- 納入先郵便番号 -->
             DELIV_PLACE_ADDRESS1 = #{complement.delivPlace.contact.address1.address},<!-- 納入先住所１ -->
             DELIV_PLACE_ADDRESS2 = #{complement.delivPlace.contact.address2.address},<!-- 納入先住所２ -->
             DELIV_PLACE_NAME_INB = #{complement.delivPlace.delivPlaceNameInb},<!-- 構内配送先 -->
             DELIV_PLACE_TEL_NO = #{complement.delivPlace.contact.telNo.telNo},<!-- 納入先電話番号 -->
             DELIV_PLACE_FAX_NO = #{complement.delivPlace.contact.faxNo.faxNo},<!-- 納入先FAX番号 -->
             DELIV_PLACE_COMPANY_NAME = #{complement.delivPlace.delivPlaceCompanyName},<!-- 納入先会社名 -->
             DELIV_PLACE_CONTACT_NAME = #{complement.delivPlace.delivPlaceContactName},<!-- 納入先担当者名 -->
             CURRENCY_CD = #{accounting.orderAmount.amountMng.currency.currencyCd},<!-- 通貨コード -->
             TAX_IND = #{accounting.orderAmount.amountMng.taxCalculationInd.taxInd.taxInd},<!-- 課税区分 -->
             CONSUMPT_IND = #{accounting.orderAmount.amountMng.taxCalculationInd.consumptInd.consumptInd},<!-- 消費税区分 -->
             TAX_RATE = #{accounting.orderAmount.taxRate.taxRate},<!-- 税率 -->
             ORDER_VOL = #{accounting.orderAmount.orderVolume.orderVol.vol},<!-- 注文数量 -->
             UNIT_CD = #{accounting.orderItem.item.unit.unitCd},<!-- 単位コード -->
             UNIT_NAME = #{accounting.orderItem.item.unit.unitName},<!-- 単位名 -->
             UNIT_PRICE = #{accounting.orderAmount.unitPrice.amount.amount},<!-- 単価 -->
             ORDER_AMOUNT = #{accounting.orderAmount.orderAmount.amount},<!-- 注文金額 -->
             CONSUMPT_AMOUNT = #{accounting.orderAmount.amountMng.consumptAmount.consumptAmount.amount},<!-- 消費税額 -->
             TOTAL_AMOUNT = #{accounting.orderAmount.amountMng.totalAmount.totalAmount.amount},<!-- 合計金額 -->
             ORDER_CANCEL_VOL = #{orderCancel.orderCancelVol.vol},<!-- 打切取消数量 -->
             ORDER_CANCEL_AMOUNT = #{orderCancel.orderCancelAmount.amount},<!-- 打切取消金額 -->
             UNIT_PRICE_IND = #{status.priceManagement.unitPriceInd},<!-- 単価区分 -->
             PRICE_UNDEC_REASON = #{status.priceManagement.priceUndecReason.comment},<!-- 単価未定理由 -->
             PRICE_DEC_DATE = #{status.priceManagement.priceDecDate.dateOfymd},<!-- 単価決定予定日 -->
             ORDER_CNV_CURRENCY_CD = #{accounting.orderCnv.currency.currencyCd},<!-- 注文登録時換算通貨 -->
             ORDER_CNV_RATE = #{accounting.orderCnv.orderCnvRate.rate},<!-- 注文登録時換算レート -->
             ORDER_CNV_AMOUNT = #{accounting.orderCnv.orderCnvAmount.amount},<!-- 注文登録時換算金額 -->
             EST_DELIV_FLG = #{status.dlvRespFlg.dlvRespFlg},<!-- 納期回答フラグ -->
             AUTO_TERMINATE_FLG = #{condition.autoTerminateFlg.autoTerminateFlg},<!-- 自動打切フラグ -->
             SUP_CONFIRM_FLG = '0',<!-- 取引先確認フラグ -->
             PRICE_DEC_FLG = #{status.priceDecFlag.priceDecFlag},<!-- 単価確定変更フラグ -->
             ATTACH_FILE_SEQ1 = #{complement.rangeByAttachFile1.attachFile.seqNo},<!-- 添付ファイルシーケンス１ -->
             ATTACH_FILE_SEQ2 = #{complement.rangeByAttachFile2.attachFile.seqNo},<!-- 添付ファイルシーケンス２ -->
             ATTACH_FILE_SEQ3 = #{complement.rangeByAttachFile3.attachFile.seqNo},<!-- 添付ファイルシーケンス３ -->
             APP_ROUTE_NO = #{approute.appRouteNo},<!-- 承認ルート番号 -->
             APP_ROUTE_NAME = #{approute.appRouteName},<!-- 承認ルート名 -->
             SEND_IND = #{status.dataInd.supSend.sendInd.sendInd},<!-- データ送信区分 -->
             FAX_SEND_IND = #{status.dataInd.supSend.faxSendInd.sendInd},<!-- FAX送信区分 -->    
             DYN_SEND_IND = #{status.dataInd.supSend.dynSendInd.sendInd},<!-- 外部カタログ連携区分 -->    
             <if test="@org.apache.commons.lang.StringUtils@isNotBlank(payConditionItem.payConditionIdentify.payConditionCd)">
                PAY_CONDITION_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 支払条件会社コード -->
             </if>
             <if test="@org.apache.commons.lang.StringUtils@isBlank(payConditionItem.payConditionIdentify.payConditionCd)">
                PAY_CONDITION_COMPANY_CD = NULL,<!-- 支払条件会社コード -->
             </if>
             PAY_CONDITION_CD = #{payConditionItem.payConditionIdentify.payConditionCd},<!-- 支払条件コード -->
             PAY_CONDITION_NAME = #{payConditionItem.payConditionName},<!-- 支払条件名 -->
             LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 最終更新日時 -->
             LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 最終更新会社コード -->
             LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 最終更新部門コード -->
             LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 最終更新ユーザーID -->
             ${@ps.common.util.ItemSettingUtil@getItemSettingUpdateValueSQL("editExtItem.")}
         WHERE ORDER_SEQ = #{orderIdentify.orderSeq}
    </update>
    
    <!-- 注文テーブル(再申請)SQL -->
    <insert id="reApplyOrder" parameterType="fw.domain.slip.order.order.Order">
        INSERT INTO T_ORDER
            (ORDER_SEQ,<!-- 注文シーケンス番号 -->
             ORDER_NO,<!-- 注文番号 -->
             ORDER_VERSION,<!-- 注文版数 -->
             ORDER_STATUS,<!-- 注文ステータス -->
             INFO_CD,<!-- 情報区分コード -->
             REQ_TYPE_IND,<!-- 依頼区分 -->
             CORRECT_CD,<!-- 訂正コード -->
             PRE_SEQ,<!-- 変更前シーケンス番号 -->
             NEW_FLG,<!-- 最新フラグ -->
             NEW_APP_FLG,<!-- 最新承認済みフラグ -->
             PUR_REQ_DATE,<!-- 購入依頼日 -->
             ORDER_INPUT_DATE,<!-- 注文登録日 -->
             ORDER_DATE,<!-- 注文日 -->
             ORDER_FIRST_DATE,<!-- 初回注文日 -->
             PUR_REQ_NO,<!-- 購入依頼番号 -->
             QUOT_REQ_NO,<!-- 見積依頼番号 -->
             QUOT_REQ_DTL_NO,<!-- 見積依頼明細番号 -->
             REQ_COMPANY_CD,<!-- 依頼元会社コード -->
             REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
             REQ_SECTION_PLACE_CD,<!-- 依頼元事業所コード -->
             REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
             REQ_SECTION_CD,<!-- 依頼元部門コード -->
             REQ_SECTION_NAME,<!-- 依頼元部門名 -->
             REQ_USER_ID,<!-- 依頼元担当者ID -->
             REQ_USER_NAME,<!-- 依頼元担当者名 -->
             REQ_USER_EXTENSION_NO,<!-- 依頼元担当内線番号 -->
             REQ_USER_TEL_NO,<!-- 依頼元担当外線番号 -->
             REQ_USER_MAIL_ADDR,<!-- 依頼元担当メールアドレス -->
             BUYER_COMPANY_CD,<!-- 購買会社コード -->
             BUYER_COMPANY_NAME,<!-- 購買会社名 -->
             BUYER_SECTION_PLACE_CD,<!-- 購買事業所コード -->
             BUYER_SECTION_PLACE_NAME,<!-- 購買事業所名 -->
             BUYER_SECTION_CD,<!-- 購買部門コード -->
             BUYER_SECTION_NAME,<!-- 購買部門名 -->
             BUYER_USER_ID,<!-- 購買担当者ID -->
             BUYER_USER_NAME,<!-- 購買担当者名 -->
             BUYER_USER_EXTENSION_NO,<!-- 購買担当内線番号 -->
             BUYER_USER_TEL_NO,<!-- 購買担当外線番号 -->
             BUYER_USER_MAIL_ADDR,<!-- 購買担当メールアドレス -->
             BUYER_COMMENT,<!-- 発注コメント（取引先非通知） -->
             FOR_SUPPRIER_COMMENT,<!-- 取引先向けコメント -->
             TITLE_NAME,<!-- 件名 -->
             LOAD_COMPANY_CD,<!-- 負担会社コード -->
             LOAD_COMPANY_NAME,<!-- 負担会社名 -->
             LOAD_SECTION_PLACE_CD,<!-- 負担事業所コード -->
             LOAD_SECTION_PLACE_NAME,<!-- 負担事業所名 -->
             LOAD_SECTION_CD,<!-- 負担部門コード -->
             LOAD_SECTION_NAME,<!-- 負担部門名 -->
             RECIVE_COMPANY_CD,<!-- 受入会社コード -->
             RECIVE_COMPANY_NAME,<!-- 受入会社名 -->
             RECIVE_SECTION_PLACE_CD,<!-- 受入事業所コード -->
             RECIVE_SECTION_PLACE_NAME,<!-- 受入事業所名 -->
             RECIVE_SECTION_CD,<!-- 受入部門コード -->
             RECIVE_SECTION_NAME,<!-- 受入部門名 -->
             INSPECT_IND,<!-- 検査区分 -->
             ITEM_CLASS_COMPANY_CD,<!-- 品種会社コード -->
             ITEM_CLASS_L,<!-- 大分類コード -->
             ITEM_CLASS_L_NAME,<!-- 大分類名 -->
             ITEM_CLASS_M,<!-- 中分類コード -->
             ITEM_CLASS_M_NAME,<!-- 中分類名 -->
             ITEM_CLASS_S,<!-- 小分類コード -->
             ITEM_CLASS_S_NAME,<!-- 小分類名 -->
             ITEM_COMPANY_CD,<!-- 品名会社コード -->
             ITEM_CD,<!-- 品名コード -->
             ITEM_NAME,<!-- 品名 -->
             KATASHIKI,<!-- 型式 -->
             MANUFACT_CD,<!-- メーカーコード -->
             MANUFACT_NAME,<!-- メーカー名 -->
             SUBJECT_COMPANY_CD,<!-- 科目会社コード -->
             SUBJECT_CD,<!-- 科目コード  -->
             SUBJECT_NAME,<!-- 科目名 -->
             SUP_COMPANY_CD,<!-- 取引先会社コード -->
             SUP_CD,<!-- 取引先コード -->
             SUP_NAME,<!-- 取引先名 -->
             SUP_ABBR_NAME,<!-- 取引先名（略称） -->
             SUP_ZIP_CD,<!-- 取引先郵便番号 -->
             SUP_ADDRESS1,<!-- 取引先住所１ -->
             SUP_ADDRESS2,<!-- 取引先住所２ -->
             SUP_TEL_NO,<!-- 取引先電話番号 -->
             SUP_FAX_NO,<!-- 取引先FAX番号 -->
             SUBCON_IND,<!-- 下請法適用業者区分 -->
             EDI_IND,<!-- EDIデータ送受信方法 -->
             VENDOR_CD,<!-- 統一取引先コード -->
             BUDGET_NO,<!-- 予算番号 -->
             ORDER_DELIV_DATE,<!-- 注文納期 -->
             DELIV_PLACE_COMPANY_CD,<!-- 納入先会社コード -->
             DELIV_PLACE_CD,<!-- 納入先コード -->
             DELIV_PLACE_NAME,<!-- 納入先名 -->
             DELIV_PLACE_ZIP_CD,<!-- 納入先郵便番号 -->
             DELIV_PLACE_ADDRESS1,<!-- 納入先住所１ -->
             DELIV_PLACE_ADDRESS2,<!-- 納入先住所２ -->
             DELIV_PLACE_NAME_INB,<!-- 構内配送先 -->
             DELIV_PLACE_TEL_NO,<!-- 納入先電話番号 -->
             DELIV_PLACE_FAX_NO,<!-- 納入先FAX番号 -->
             DELIV_PLACE_COMPANY_NAME,<!-- 納入先会社名 -->
             DELIV_PLACE_CONTACT_NAME,<!-- 納入先担当者名 -->
             CURRENCY_CD,<!-- 通貨コード -->
             TAX_IND,<!-- 課税区分 -->
             CONSUMPT_IND,<!-- 消費税区分 -->
             TAX_RATE,<!-- 税率 -->
             ORDER_VOL,<!-- 注文数量 -->
             UNIT_CD,<!-- 単位コード -->
             UNIT_NAME,<!-- 単位名 -->
             UNIT_PRICE,<!-- 単価 -->
             ORDER_AMOUNT,<!-- 注文金額 -->
             CONSUMPT_AMOUNT,<!-- 消費税額 -->
             TOTAL_AMOUNT,<!-- 合計金額 -->
             ORDER_CANCEL_VOL,<!-- 打切取消数量 -->
             ORDER_CANCEL_AMOUNT,<!-- 打切取消金額 -->
             UNIT_PRICE_IND,<!-- 単価区分 -->
             PRICE_UNDEC_REASON,<!-- 単価未定理由 -->
             PRICE_DEC_DATE,<!-- 単価決定予定日 -->
             ORDER_CNV_CURRENCY_CD,<!-- 注文登録時換算通貨 -->
             ORDER_CNV_RATE,<!-- 注文登録時換算レート -->
             ORDER_CNV_AMOUNT,<!-- 注文登録時換算金額 -->
             EST_DELIV_FLG,<!-- 納期回答フラグ -->
             AUTO_TERMINATE_FLG,<!-- 自動打切フラグ -->
             SUP_CONFIRM_FLG,<!-- 取引先確認フラグ -->
             PRICE_DEC_FLG,<!-- 単価確定変更フラグ -->
             ATTACH_FILE_SEQ1,<!-- 添付ファイルシーケンス１ -->
             ATTACH_FILE_SEQ2,<!-- 添付ファイルシーケンス２ -->
             ATTACH_FILE_SEQ3,<!-- 添付ファイルシーケンス３ -->
             APP_ROUTE_NO,<!-- 承認ルート番号 -->
             APP_ROUTE_NAME,<!-- 承認ルート名 -->
             SEND_IND,<!-- データ送信区分 -->
             PRINT_IND,<!-- 印刷区分 -->
             FAX_SEND_IND,<!-- FAX送信区分 -->
             BI_OUT_IND,<!-- 実績抽出区分 -->
             RECEIPT_NUMBER,<!-- 受付番号 -->
             FAX_RECEIPT_NUMBER,<!-- FAX受付番号 -->
             DELETE_FLG,<!-- 削除フラグ -->
             AUTO_DELETE_FLG,<!-- 自動データ削除フラグ -->
             AUTO_DELETE_DATE,<!-- 自動データ削除日 -->
             LAST_UPD_DATE,<!-- 最終更新日時 -->
             LAST_UPD_COMPANY_CD,<!-- 最終更新会社コード -->
             LAST_UPD_SECTION_CD,<!-- 最終更新部門コード -->
             LAST_UPD_USER_ID,<!-- 最終更新ユーザーID -->
             REG_DATE,<!-- 登録日時 -->
             REG_COMPANY_CD,<!-- 登録会社コード -->
             REG_SECTION_CD,<!-- 登録部門コード -->
             REG_USER_ID,<!-- 登録ユーザーID -->
             ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()})
        SELECT
             #{orderIdentify.orderSeq},<!-- 注文シーケンス番号 -->
             #{orderNo.orderNo},<!-- 注文番号 -->
             #{historyNo.historyNo},<!-- 注文版数 -->
             #{status.orderStatus.orderStatus},<!-- 注文ステータス -->
             INFO_CD,<!-- 情報区分コード -->
             REQ_TYPE_IND,<!-- 依頼区分 -->
             CORRECT_CD,<!-- 訂正コード -->
             #{orderIdentify.preSeq},<!-- 変更前シーケンス番号 -->
             '1',<!-- 最新フラグ -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '1' ELSE '0' END,<!-- 最新承認済みフラグ -->
             PUR_REQ_DATE,<!-- 購入依頼日 -->
             '${@fw.common.util.AppUtil@getSysDate()}',<!-- 注文登録日 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '${@fw.common.util.AppUtil@getSysDate()}' ELSE '' END,<!-- 注文日 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' AND #{historyNo.historyNo} = '1' 
             THEN '${@fw.common.util.AppUtil@getSysDate()}' 
             ELSE #{schedule.orderDate.orderFirstDate.dateOfymd} END,<!-- 初回注文日 -->
             PUR_REQ_NO,<!-- 購入依頼番号 -->
             QUOT_REQ_NO,<!-- 見積依頼番号 -->
             QUOT_REQ_DTL_NO,<!-- 見積依頼明細番号 -->
             REQ_COMPANY_CD,<!-- 依頼元会社コード -->
             REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
             REQ_SECTION_PLACE_CD,<!-- 依頼元事業所コード -->
             REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
             REQ_SECTION_CD,<!-- 依頼元部門コード -->
             REQ_SECTION_NAME,<!-- 依頼元部門名 -->
             REQ_USER_ID,<!-- 依頼元担当者ID -->
             REQ_USER_NAME,<!-- 依頼元担当者名 -->
             REQ_USER_EXTENSION_NO,<!-- 依頼元担当内線番号 -->
             REQ_USER_TEL_NO,<!-- 依頼元担当外線番号 -->
             REQ_USER_MAIL_ADDR,<!-- 依頼元担当メールアドレス -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 購買会社コード -->
             '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',<!-- 購買会社名 -->
             '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',<!-- 購買事業所コード -->
             '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',<!-- 購買事業所名 -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 購買部門コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',<!-- 購買部門名 -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 購買担当者ID -->
             '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',<!-- 購買担当者名 -->
             '${@fw.security.SecurityUtil@getLoginUserExtNoByEscapeSql()}',<!-- 購買担当内線番号 -->
             '${@fw.security.SecurityUtil@getLoginUserExternalNoByEscapeSql()}',<!-- 購買担当外線番号 -->
             '${@fw.security.SecurityUtil@getLoginUserMailAddrByEscapeSql()}',<!-- 購買担当メールアドレス -->
             #{orderComment.buyerComment.comment.comment},<!-- 発注コメント（取引先非通知） -->
             #{orderComment.forSupplierComment.forSupplierComment.comment},<!-- 取引先向けコメント -->
             #{titleName.titleName},<!-- 件名 -->
             #{user.loadSection.loadSection.company.companyCd},<!-- 負担会社コード -->
             #{user.loadSection.loadSection.company.companyName},<!-- 負担会社名 -->
             #{user.loadSection.loadSection.sectionPlace.sectionPlaceCd},<!-- 負担事業所コード -->
             #{user.loadSection.loadSection.sectionPlace.sectionPlaceName},<!-- 負担事業所名 -->
             #{user.loadSection.loadSection.sectionCd},<!-- 負担部門コード -->
             #{user.loadSection.loadSection.sectionName},<!-- 負担部門名 -->
             RECIVE_COMPANY_CD,<!-- 受入会社コード -->
             RECIVE_COMPANY_NAME,<!-- 受入会社名 -->
             RECIVE_SECTION_PLACE_CD,<!-- 受入事業所コード -->
             RECIVE_SECTION_PLACE_NAME,<!-- 受入事業所名 -->
             RECIVE_SECTION_CD,<!-- 受入部門コード -->
             RECIVE_SECTION_NAME,<!-- 受入部門名 -->
             #{condition.inspectInd.inspectInd},<!-- 検査区分 -->
             #{accounting.orderItem.itemKind.itemClassCompanyCd},<!-- 品種会社コード -->
             #{accounting.orderItem.itemKind.itemClassL},<!-- 大分類コード -->
             #{accounting.orderItem.itemKind.itemClassLName},<!-- 大分類名 -->
             #{accounting.orderItem.itemKind.itemClassM},<!-- 中分類コード -->
             #{accounting.orderItem.itemKind.itemClassMName},<!-- 中分類名 -->
             #{accounting.orderItem.itemKind.itemClassS},<!-- 小分類コード -->
             #{accounting.orderItem.itemKind.itemClassSName},<!-- 小分類名 -->
             #{accounting.orderItem.item.itemCompanyCd},<!-- 品名会社コード -->
             #{accounting.orderItem.item.itemCd},<!-- 品名コード -->
             #{accounting.orderItem.item.itemName},<!-- 品名 -->
             #{accounting.orderItem.item.katashiki},<!-- 型式 -->
             #{accounting.orderItem.item.manufact.manufactCd},<!-- メーカーコード -->
             #{accounting.orderItem.item.manufact.manufactName},<!-- メーカー名 -->
             #{accounting.subject.subjectCompanyCd},<!-- 科目会社コード -->
             #{accounting.subject.subjectCd},<!-- 科目コード  -->
             #{accounting.subject.subjectName},<!-- 科目名 -->
             #{supplierFrom.supCompanyCd},<!-- 取引先会社コード -->
             #{supplierFrom.supCd},<!-- 取引先コード -->
             #{supplierFrom.supplierName.supplierName},<!-- 取引先名 -->
             #{supplierFrom.supplierName.supplierAbbrName},<!-- 取引先名（略称） -->
             #{supplierFrom.supplierContact.ctc.zipCd.zipCd},<!-- 取引先郵便番号 -->
             #{supplierFrom.supplierContact.ctc.address1.address},<!-- 取引先住所１ -->
             #{supplierFrom.supplierContact.ctc.address2.address},<!-- 取引先住所２ -->
             #{supplierFrom.supplierContact.ctc.telNo.telNo},<!-- 取引先電話番号 -->
             #{supplierFrom.supplierContact.ctc.faxNo.faxNo},<!-- 取引先FAX番号 -->
             #{supplierFrom.subcon.subconInd},<!-- 下請法適用業者区分 -->
             #{supplierFrom.ediInd.ediInd},<!-- EDIデータ送受信方法 -->
             #{supplierFrom.vendor.vendorCd},<!-- 統一取引先コード -->
             #{complement.budgetNumber.budgetNumber},<!-- 予算番号 -->
             #{schedule.dlvEst.dlvEst.dateOfymd},<!-- 注文納期 -->
             #{complement.delivPlace.delivPlaceCompanyCd},<!-- 納入先会社コード -->
             #{complement.delivPlace.delivPlaceCd},<!-- 納入先コード -->
             #{complement.delivPlace.delivPlaceName},<!-- 納入先名 -->
             #{complement.delivPlace.contact.zipCd.zipCd},<!-- 納入先郵便番号 -->
             #{complement.delivPlace.contact.address1.address},<!-- 納入先住所１ -->
             #{complement.delivPlace.contact.address2.address},<!-- 納入先住所２ -->
             #{complement.delivPlace.delivPlaceNameInb},<!-- 構内配送先 -->
             #{complement.delivPlace.contact.telNo.telNo},<!-- 納入先電話番号 -->
             #{complement.delivPlace.contact.faxNo.faxNo},<!-- 納入先FAX番号 -->
             #{complement.delivPlace.delivPlaceCompanyName},<!-- 納入先会社名 -->
             #{complement.delivPlace.delivPlaceContactName},<!-- 納入先担当者名 -->
             #{accounting.orderAmount.amountMng.currency.currencyCd},<!-- 通貨コード -->
             #{accounting.orderAmount.amountMng.taxCalculationInd.taxInd.taxInd},<!-- 課税区分 -->
             #{accounting.orderAmount.amountMng.taxCalculationInd.consumptInd.consumptInd},<!-- 消費税区分 -->
             #{accounting.orderAmount.taxRate.taxRate},<!-- 税率 -->
             '${@fw.common.util.AppUtil@deleteComma(accounting.orderAmount.orderVolume.orderVol.vol)}',<!-- 注文数量 -->
             #{accounting.orderItem.item.unit.unitCd},<!-- 単位コード -->
             #{accounting.orderItem.item.unit.unitName},<!-- 単位名 -->
             '${@fw.common.util.AppUtil@deleteComma(accounting.orderAmount.unitPrice.amount.amount)}',<!-- 単価 -->
             '${@fw.common.util.AppUtil@deleteComma(accounting.orderAmount.orderAmount.amount)}',<!-- 注文金額 -->
             #{accounting.orderAmount.amountMng.consumptAmount.consumptAmount.amount},<!-- 消費税額 -->
             #{accounting.orderAmount.amountMng.totalAmount.totalAmount.amount},<!-- 合計金額 -->
             '',<!-- 打切取消数量 -->
             '',<!-- 打切取消金額 -->
             #{status.priceManagement.unitPriceInd},<!-- 単価区分 -->
             #{status.priceManagement.priceUndecReason.comment},<!-- 単価未定理由 -->
             #{(status.priceManagement.priceDecDate.dateOfymd},<!-- 単価決定予定日 -->
             '${@fw.security.SecurityUtil@getCurrencyCdByEscapeSql()}',<!-- 注文登録時換算通貨 -->
             #{accounting.orderCnv.orderCnvRate.rate},<!-- 注文登録時換算レート -->
             #{accounting.orderCnv.orderCnvAmount.amount},<!-- 注文登録時換算金額 -->
             '0',<!-- 納期回答フラグ -->
             CASE WHEN (#{reqInd.reqInd} = '2' AND #{condition.autoTerminateFlg.autoTerminateFlg} = '1') THEN '1' ELSE '0' END,<!-- 自動打切フラグ -->
             '0',<!-- 取引先確認フラグ -->
             PRICE_DEC_FLG,<!-- 単価確定変更フラグ -->
             #{complement.rangeByAttachFile1.attachFile.seqNo},<!-- 添付ファイルシーケンス１ -->
             #{complement.rangeByAttachFile2.attachFile.seqNo},<!-- 添付ファイルシーケンス２ -->
             #{complement.rangeByAttachFile3.attachFile.seqNo},<!-- 添付ファイルシーケンス３ -->
             #{approute.appRouteNo},<!-- 承認ルート番号 -->
             #{approute.appRouteName},<!-- 承認ルート名 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' AND SEND_IND = '2' THEN '0' ELSE #{status.dataInd.supSend.sendInd.sendInd} END,<!-- データ送信区分 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' AND PRINT_IND = '2' THEN '0' ELSE #{status.dataInd.printInd.printInd.sendInd} END,<!-- 印刷区分 -->
             CASE WHEN #{supplierFrom.fax.orderFaxInd.faxInd} = '1' THEN 
                CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '0' ELSE '2' END 
             ELSE '9' END,<!-- FAX送信区分 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '0' ELSE '2' END,<!-- 実績抽出区分 -->
             '',<!-- 受付番号 -->
             '',<!-- FAX受付番号 -->
             '0',<!-- 削除フラグ -->
             '0',<!-- 自動データ削除フラグ -->
             '',<!-- 自動データ削除日 -->
             '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 最終更新日時 -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 最終更新会社コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 最終更新部門コード -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 最終更新ユーザーID -->
             '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 登録日時 -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 登録会社コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 登録部門コード -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 登録ユーザーID -->
              ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("editExtItem.")}
        FROM T_ORDER 
        WHERE ORDER_SEQ = #{orderIdentify.preSeq}<!-- 変更前注文シーケンス番号 -->
    </insert>
    
    <!-- 注文テーブル(変更)取引先通知なしSQL -->
    <insert id="changeOrderNoSup" parameterType="fw.domain.slip.order.order.Order">
        INSERT INTO T_ORDER
            (ORDER_SEQ,<!-- 注文シーケンス番号 -->
             ORDER_NO,<!-- 注文番号 -->
             ORDER_VERSION,<!-- 注文版数 -->
             ORDER_STATUS,<!-- 注文ステータス -->
             INFO_CD,<!-- 情報区分コード -->
             REQ_TYPE_IND,<!-- 依頼区分 -->
             CORRECT_CD,<!-- 訂正コード -->
             PRE_SEQ,<!-- 変更前シーケンス番号 -->
             NEW_FLG,<!-- 最新フラグ -->
             NEW_APP_FLG,<!-- 最新承認済みフラグ -->
             PUR_REQ_DATE,<!-- 購入依頼日 -->
             ORDER_INPUT_DATE,<!-- 注文登録日 -->
             ORDER_DATE,<!-- 注文日 -->
             ORDER_FIRST_DATE,<!-- 初回注文日 -->
             PUR_REQ_NO,<!-- 購入依頼番号 -->
             QUOT_REQ_NO,<!-- 見積依頼番号 -->
             QUOT_REQ_DTL_NO,<!-- 見積依頼明細番号 -->
             REQ_COMPANY_CD,<!-- 依頼元会社コード -->
             REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
             REQ_SECTION_PLACE_CD,<!-- 依頼元事業所コード -->
             REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
             REQ_SECTION_CD,<!-- 依頼元部門コード -->
             REQ_SECTION_NAME,<!-- 依頼元部門名 -->
             REQ_USER_ID,<!-- 依頼元担当者ID -->
             REQ_USER_NAME,<!-- 依頼元担当者名 -->
             REQ_USER_EXTENSION_NO,<!-- 依頼元担当内線番号 -->
             REQ_USER_TEL_NO,<!-- 依頼元担当外線番号 -->
             REQ_USER_MAIL_ADDR,<!-- 依頼元担当メールアドレス -->
             BUYER_COMPANY_CD,<!-- 購買会社コード -->
             BUYER_COMPANY_NAME,<!-- 購買会社名 -->
             BUYER_SECTION_PLACE_CD,<!-- 購買事業所コード -->
             BUYER_SECTION_PLACE_NAME,<!-- 購買事業所名 -->
             BUYER_SECTION_CD,<!-- 購買部門コード -->
             BUYER_SECTION_NAME,<!-- 購買部門名 -->
             BUYER_USER_ID,<!-- 購買担当者ID -->
             BUYER_USER_NAME,<!-- 購買担当者名 -->
             BUYER_USER_EXTENSION_NO,<!-- 購買担当内線番号 -->
             BUYER_USER_TEL_NO,<!-- 購買担当外線番号 -->
             BUYER_USER_MAIL_ADDR,<!-- 購買担当メールアドレス -->
             BUYER_COMMENT,<!-- 発注コメント（取引先非通知） -->
             FOR_SUPPRIER_COMMENT,<!-- 取引先向けコメント -->
             TITLE_NAME,<!-- 件名 -->
             LOAD_COMPANY_CD,<!-- 負担会社コード -->
             LOAD_COMPANY_NAME,<!-- 負担会社名 -->
             LOAD_SECTION_PLACE_CD,<!-- 負担事業所コード -->
             LOAD_SECTION_PLACE_NAME,<!-- 負担事業所名 -->
             LOAD_SECTION_CD,<!-- 負担部門コード -->
             LOAD_SECTION_NAME,<!-- 負担部門名 -->
             RECIVE_COMPANY_CD,<!-- 受入会社コード -->
             RECIVE_COMPANY_NAME,<!-- 受入会社名 -->
             RECIVE_SECTION_PLACE_CD,<!-- 受入事業所コード -->
             RECIVE_SECTION_PLACE_NAME,<!-- 受入事業所名 -->
             RECIVE_SECTION_CD,<!-- 受入部門コード -->
             RECIVE_SECTION_NAME,<!-- 受入部門名 -->
             INSPECT_IND,<!-- 検査区分 -->
             ITEM_CLASS_COMPANY_CD,<!-- 品種会社コード -->
             ITEM_CLASS_L,<!-- 大分類コード -->
             ITEM_CLASS_L_NAME,<!-- 大分類名 -->
             ITEM_CLASS_M,<!-- 中分類コード -->
             ITEM_CLASS_M_NAME,<!-- 中分類名 -->
             ITEM_CLASS_S,<!-- 小分類コード -->
             ITEM_CLASS_S_NAME,<!-- 小分類名 -->
             ITEM_COMPANY_CD,<!-- 品名会社コード -->
             ITEM_CD,<!-- 品名コード -->
             ITEM_NAME,<!-- 品名 -->
             KATASHIKI,<!-- 型式 -->
             MANUFACT_CD,<!-- メーカーコード -->
             MANUFACT_NAME,<!-- メーカー名 -->
             SUBJECT_COMPANY_CD,<!-- 科目会社コード -->
             SUBJECT_CD,<!-- 科目コード  -->
             SUBJECT_NAME,<!-- 科目名 -->
             SUP_COMPANY_CD,<!-- 取引先会社コード -->
             SUP_CD,<!-- 取引先コード -->
             SUP_NAME,<!-- 取引先名 -->
             SUP_ABBR_NAME,<!-- 取引先名（略称） -->
             SUP_ZIP_CD,<!-- 取引先郵便番号 -->
             SUP_ADDRESS1,<!-- 取引先住所１ -->
             SUP_ADDRESS2,<!-- 取引先住所２ -->
             SUP_TEL_NO,<!-- 取引先電話番号 -->
             SUP_FAX_NO,<!-- 取引先FAX番号 -->
             SUBCON_IND,<!-- 下請法適用業者区分 -->
             EDI_IND,<!-- EDIデータ送受信方法 -->
             VENDOR_CD,<!-- 統一取引先コード -->
             BUDGET_NO,<!-- 予算番号 -->
             ORDER_DELIV_DATE,<!-- 注文納期 -->
             DELIV_PLACE_COMPANY_CD,<!-- 納入先会社コード -->
             DELIV_PLACE_CD,<!-- 納入先コード -->
             DELIV_PLACE_NAME,<!-- 納入先名 -->
             DELIV_PLACE_ZIP_CD,<!-- 納入先郵便番号 -->
             DELIV_PLACE_ADDRESS1,<!-- 納入先住所１ -->
             DELIV_PLACE_ADDRESS2,<!-- 納入先住所２ -->
             DELIV_PLACE_NAME_INB,<!-- 構内配送先 -->
             DELIV_PLACE_TEL_NO,<!-- 納入先電話番号 -->
             DELIV_PLACE_FAX_NO,<!-- 納入先FAX番号 -->
             DELIV_PLACE_COMPANY_NAME,<!-- 納入先会社名 -->
             DELIV_PLACE_CONTACT_NAME,<!-- 納入先担当者名 -->
             CURRENCY_CD,<!-- 通貨コード -->
             TAX_IND,<!-- 課税区分 -->
             CONSUMPT_IND,<!-- 消費税区分 -->
             TAX_RATE,<!-- 税率 -->
             ORDER_VOL,<!-- 注文数量 -->
             UNIT_CD,<!-- 単位コード -->
             UNIT_NAME,<!-- 単位名 -->
             UNIT_PRICE,<!-- 単価 -->
             ORDER_AMOUNT,<!-- 注文金額 -->
             CONSUMPT_AMOUNT,<!-- 消費税額 -->
             TOTAL_AMOUNT,<!-- 合計金額 -->
             ORDER_CANCEL_VOL,<!-- 打切取消数量 -->
             ORDER_CANCEL_AMOUNT,<!-- 打切取消金額 -->
             UNIT_PRICE_IND,<!-- 単価区分 -->
             PRICE_UNDEC_REASON,<!-- 単価未定理由 -->
             PRICE_DEC_DATE,<!-- 単価決定予定日 -->
             ORDER_CNV_CURRENCY_CD,<!-- 注文登録時換算通貨 -->
             ORDER_CNV_RATE,<!-- 注文登録時換算レート -->
             ORDER_CNV_AMOUNT,<!-- 注文登録時換算金額 -->
             EST_DELIV_FLG,<!-- 納期回答フラグ -->
             AUTO_TERMINATE_FLG,<!-- 自動打切フラグ -->
             SUP_CONFIRM_FLG,<!-- 取引先確認フラグ -->
             PRICE_DEC_FLG,<!-- 単価確定変更フラグ -->
             ATTACH_FILE_SEQ1,<!-- 添付ファイルシーケンス１ -->
             ATTACH_FILE_SEQ2,<!-- 添付ファイルシーケンス２ -->
             ATTACH_FILE_SEQ3,<!-- 添付ファイルシーケンス３ -->
             APP_ROUTE_NO,<!-- 承認ルート番号 -->
             APP_ROUTE_NAME,<!-- 承認ルート名 -->
             SEND_IND,<!-- データ送信区分 -->
             PRINT_IND,<!-- 印刷区分 -->
             FAX_SEND_IND,<!-- FAX送信区分 -->
             BI_OUT_IND,<!-- 実績抽出区分 -->
             RECEIPT_NUMBER,<!-- 受付番号 -->
             FAX_RECEIPT_NUMBER,<!-- FAX受付番号 -->
             DELETE_FLG,<!-- 削除フラグ -->
             AUTO_DELETE_FLG,<!-- 自動データ削除フラグ -->
             AUTO_DELETE_DATE,<!-- 自動データ削除日 -->
             LAST_UPD_DATE,<!-- 最終更新日時 -->
             LAST_UPD_COMPANY_CD,<!-- 最終更新会社コード -->
             LAST_UPD_SECTION_CD,<!-- 最終更新部門コード -->
             LAST_UPD_USER_ID,<!-- 最終更新ユーザーID -->
             REG_DATE,<!-- 登録日時 -->
             REG_COMPANY_CD,<!-- 登録会社コード -->
             REG_SECTION_CD,<!-- 登録部門コード -->
             REG_USER_ID,<!-- 登録ユーザーID -->
             ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()})
        SELECT
             #{orderIdentify.orderSeq},<!-- 注文シーケンス番号 -->
             #{orderNo.orderNo},<!-- 注文番号 -->
             #{historyNo.historyNo},<!-- 注文版数 -->
             #{status.orderStatus.orderStatus},<!-- 注文ステータス -->
             '0503',<!-- 情報区分コード -->
             REQ_TYPE_IND,<!-- 依頼区分 -->
             '2',<!-- 訂正コード -->
             #{orderIdentify.preSeq},<!-- 変更前シーケンス番号 -->
             '1',<!-- 最新フラグ -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '1' ELSE '0' END,<!-- 最新承認済みフラグ -->
             PUR_REQ_DATE,<!-- 購入依頼日 -->
             '${@fw.common.util.AppUtil@getSysDate()}',<!-- 注文登録日 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '${@fw.common.util.AppUtil@getSysDate()}' ELSE '' END,<!-- 注文日 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' AND #{historyNo.historyNo} = '1' THEN '${@fw.common.util.AppUtil@getSysDate()}' 
             ELSE #{schedule.orderDate.orderFirstDate.dateOfymd} END,<!-- 初回注文日 -->
             PUR_REQ_NO,<!-- 購入依頼番号 -->
             QUOT_REQ_NO,<!-- 見積依頼番号 -->
             QUOT_REQ_DTL_NO,<!-- 見積依頼明細番号 -->
             REQ_COMPANY_CD,<!-- 依頼元会社コード -->
             REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
             REQ_SECTION_PLACE_CD,<!-- 依頼元事業所コード -->
             REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
             REQ_SECTION_CD,<!-- 依頼元部門コード -->
             REQ_SECTION_NAME,<!-- 依頼元部門名 -->
             REQ_USER_ID,<!-- 依頼元担当者ID -->
             REQ_USER_NAME,<!-- 依頼元担当者名 -->
             REQ_USER_EXTENSION_NO,<!-- 依頼元担当内線番号 -->
             REQ_USER_TEL_NO,<!-- 依頼元担当外線番号 -->
             REQ_USER_MAIL_ADDR,<!-- 依頼元担当メールアドレス -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 購買会社コード -->
             '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',<!-- 購買会社名 -->
             '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',<!-- 購買事業所コード -->
             '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',<!-- 購買事業所名 -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 購買部門コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',<!-- 購買部門名 -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 購買担当者ID -->
             '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',<!-- 購買担当者名 -->
             '${@fw.security.SecurityUtil@getLoginUserExtNoByEscapeSql()}',<!-- 購買担当内線番号 -->
             '${@fw.security.SecurityUtil@getLoginUserExternalNoByEscapeSql()}',<!-- 購買担当外線番号 -->
             '${@fw.security.SecurityUtil@getLoginUserMailAddrByEscapeSql()}',<!-- 購買担当メールアドレス -->
             #{orderComment.buyerComment.comment.comment},<!-- 発注コメント（取引先非通知） -->
             #{orderComment.forSupplierComment.forSupplierComment.comment},<!-- 取引先向けコメント -->
             #{titleName.titleName},<!-- 件名 -->
             #{user.loadSection.loadSection.company.companyCd},<!-- 負担会社コード -->
             #{user.loadSection.loadSection.company.companyName},<!-- 負担会社名 -->
             #{user.loadSection.loadSection.sectionPlace.sectionPlaceCd},<!-- 負担事業所コード -->
             #{user.loadSection.loadSection.sectionPlace.sectionPlaceName},<!-- 負担事業所名 -->
             #{user.loadSection.loadSection.sectionCd},<!-- 負担部門コード -->
             #{user.loadSection.loadSection.sectionName},<!-- 負担部門名 -->
             RECIVE_COMPANY_CD,<!-- 受入会社コード -->
             RECIVE_COMPANY_NAME,<!-- 受入会社名 -->
             RECIVE_SECTION_PLACE_CD,<!-- 受入事業所コード -->
             RECIVE_SECTION_PLACE_NAME,<!-- 受入事業所名 -->
             RECIVE_SECTION_CD,<!-- 受入部門コード -->
             RECIVE_SECTION_NAME,<!-- 受入部門名 -->
             #{condition.inspectInd.inspectInd},<!-- 検査区分 -->
             #{accounting.orderItem.itemKind.itemClassCompanyCd},<!-- 品種会社コード -->
             #{accounting.orderItem.itemKind.itemClassL},<!-- 大分類コード -->
             #{accounting.orderItem.itemKind.itemClassLName},<!-- 大分類名 -->
             #{accounting.orderItem.itemKind.itemClassM},<!-- 中分類コード -->
             #{accounting.orderItem.itemKind.itemClassMName},<!-- 中分類名 -->
             #{accounting.orderItem.itemKind.itemClassS},<!-- 小分類コード -->
             #{accounting.orderItem.itemKind.itemClassSName},<!-- 小分類名 -->
             ITEM_COMPANY_CD,<!-- 品名会社コード -->
             ITEM_CD,<!-- 品名コード -->
             ITEM_NAME,<!-- 品名 -->
             KATASHIKI,<!-- 型式 -->
             MANUFACT_CD,<!-- メーカーコード -->
             MANUFACT_NAME,<!-- メーカー名 -->
             #{accounting.subject.subjectCompanyCd},<!-- 科目会社コード -->
             #{accounting.subject.subjectCd},<!-- 科目コード  -->
             #{accounting.subject.subjectName},<!-- 科目名 -->
             SUP_COMPANY_CD,<!-- 取引先会社コード -->
             SUP_CD,<!-- 取引先コード -->
             SUP_NAME,<!-- 取引先名 -->
             SUP_ABBR_NAME,<!-- 取引先名（略称） -->
             SUP_ZIP_CD,<!-- 取引先郵便番号 -->
             SUP_ADDRESS1,<!-- 取引先住所１ -->
             SUP_ADDRESS2,<!-- 取引先住所２ -->
             SUP_TEL_NO,<!-- 取引先電話番号 -->
             SUP_FAX_NO,<!-- 取引先FAX番号 -->
             SUBCON_IND,<!-- 下請法適用業者区分 -->
             EDI_IND,<!-- EDIデータ送受信方法 -->
             VENDOR_CD,<!-- 統一取引先コード -->
             #{complement.budgetNumber.budgetNumber},<!-- 予算番号 -->
             #{schedule.dlvEst.dlvEst.dateOfymd},<!-- 注文納期 -->
             #{complement.delivPlace.delivPlaceCompanyCd},<!-- 納入先会社コード -->
             #{complement.delivPlace.delivPlaceCd},<!-- 納入先コード -->
             #{complement.delivPlace.delivPlaceName},<!-- 納入先名 -->
             #{complement.delivPlace.contact.zipCd.zipCd},<!-- 納入先郵便番号 -->
             #{complement.delivPlace.contact.address1.address},<!-- 納入先住所１ -->
             #{complement.delivPlace.contact.address2.address},<!-- 納入先住所２ -->
             #{complement.delivPlace.delivPlaceNameInb},<!-- 構内配送先 -->
             #{complement.delivPlace.contact.telNo.telNo},<!-- 納入先電話番号 -->
             #{complement.delivPlace.contact.faxNo.faxNo},<!-- 納入先FAX番号 -->
             #{complement.delivPlace.delivPlaceCompanyName},<!-- 納入先会社名 -->
             #{complement.delivPlace.delivPlaceContactName},<!-- 納入先担当者名 -->
             CURRENCY_CD,<!-- 通貨コード -->
             #{accounting.orderAmount.amountMng.taxCalculationInd.taxInd.taxInd},<!-- 課税区分 -->
             CONSUMPT_IND,<!-- 消費税区分 -->
             #{accounting.orderAmount.taxRate.taxRate},<!-- 税率 -->
             '${@fw.common.util.AppUtil@deleteComma(accounting.orderAmount.orderVolume.orderVol.vol)}',<!-- 注文数量 -->
             #{accounting.orderItem.item.unit.unitCd},<!-- 単位コード -->
             #{accounting.orderItem.item.unit.unitName},<!-- 単位名 -->
             '${@fw.common.util.AppUtil@deleteComma(accounting.orderAmount.unitPrice.amount.amount)}',<!-- 単価 -->
             '${@fw.common.util.AppUtil@deleteComma(accounting.orderAmount.orderAmount.amount)}',<!-- 注文金額 -->
             #{accounting.orderAmount.amountMng.consumptAmount.consumptAmount.amount},<!-- 消費税額 -->
             #{accounting.orderAmount.amountMng.totalAmount.totalAmount.amount},<!-- 合計金額 -->
             '',<!-- 打切取消数量 -->
             '',<!-- 打切取消金額 -->
             #{status.priceManagement.unitPriceInd},<!-- 単価区分 -->
             #{status.priceManagement.priceUndecReason.comment},<!-- 単価未定理由 -->
             #{status.priceManagement.priceDecDate.dateOfymd},<!-- 単価決定予定日 -->
             '${@fw.security.SecurityUtil@getCurrencyCdByEscapeSql()}',<!-- 注文登録時換算通貨 -->
             #{accounting.orderCnv.orderCnvRate.rate},<!-- 注文登録時換算レート -->
             #{accounting.orderCnv.orderCnvAmount.amount},<!-- 注文登録時換算金額 -->
             EST_DELIV_FLG,<!-- 納期回答フラグ -->
             AUTO_TERMINATE_FLG,<!-- 自動打切フラグ -->
             '0',<!-- 取引先確認フラグ -->
             '0',<!-- 単価確定変更フラグ -->
             #{complement.rangeByAttachFile1.attachFile.seqNo},<!-- 添付ファイルシーケンス１ -->
             #{complement.rangeByAttachFile2.attachFile.seqNo},<!-- 添付ファイルシーケンス２ -->
             #{complement.rangeByAttachFile3.attachFile.seqNo},<!-- 添付ファイルシーケンス３ -->
             #{approute.appRouteNo},<!-- 承認ルート番号 -->
             #{approute.appRouteName},<!-- 承認ルート名 -->
             '9',<!-- データ送信区分 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '0' ELSE '2' END,<!-- 印刷区分 -->
             '9',<!-- FAX送信区分 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '0' ELSE '2' END,<!-- 実績抽出区分 -->
             '',<!-- 受付番号 -->
             '',<!-- FAX受付番号 -->
             '0',<!-- 削除フラグ -->
             '0',<!-- 自動データ削除フラグ -->
             '',<!-- 自動データ削除日 -->
             '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 最終更新日時 -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 最終更新会社コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 最終更新部門コード -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 最終更新ユーザーID -->
             '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 登録日時 -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 登録会社コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 登録部門コード -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 登録ユーザーID -->
              ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("editExtItem.")}
        FROM T_ORDER 
        WHERE ORDER_SEQ = #{orderIdentify.preSeq}<!-- 変更前注文シーケンス番号 -->
    </insert>
    
    <!-- 注文テーブル(変更)取引先通知ありSQL -->
    <insert id="changeOrderSup" parameterType="fw.domain.slip.order.order.Order">
        INSERT INTO T_ORDER
            (ORDER_SEQ,<!-- 注文シーケンス番号 -->
             ORDER_NO,<!-- 注文番号 -->
             ORDER_VERSION,<!-- 注文版数 -->
             ORDER_STATUS,<!-- 注文ステータス -->
             INFO_CD,<!-- 情報区分コード -->
             REQ_TYPE_IND,<!-- 依頼区分 -->
             CORRECT_CD,<!-- 訂正コード -->
             PRE_SEQ,<!-- 変更前シーケンス番号 -->
             NEW_FLG,<!-- 最新フラグ -->
             NEW_APP_FLG,<!-- 最新承認済みフラグ -->
             PUR_REQ_DATE,<!-- 購入依頼日 -->
             ORDER_INPUT_DATE,<!-- 注文登録日 -->
             ORDER_DATE,<!-- 注文日 -->
             ORDER_FIRST_DATE,<!-- 初回注文日 -->
             PUR_REQ_NO,<!-- 購入依頼番号 -->
             QUOT_REQ_NO,<!-- 見積依頼番号 -->
             QUOT_REQ_DTL_NO,<!-- 見積依頼明細番号 -->
             REQ_COMPANY_CD,<!-- 依頼元会社コード -->
             REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
             REQ_SECTION_PLACE_CD,<!-- 依頼元事業所コード -->
             REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
             REQ_SECTION_CD,<!-- 依頼元部門コード -->
             REQ_SECTION_NAME,<!-- 依頼元部門名 -->
             REQ_USER_ID,<!-- 依頼元担当者ID -->
             REQ_USER_NAME,<!-- 依頼元担当者名 -->
             REQ_USER_EXTENSION_NO,<!-- 依頼元担当内線番号 -->
             REQ_USER_TEL_NO,<!-- 依頼元担当外線番号 -->
             REQ_USER_MAIL_ADDR,<!-- 依頼元担当メールアドレス -->
             BUYER_COMPANY_CD,<!-- 購買会社コード -->
             BUYER_COMPANY_NAME,<!-- 購買会社名 -->
             BUYER_SECTION_PLACE_CD,<!-- 購買事業所コード -->
             BUYER_SECTION_PLACE_NAME,<!-- 購買事業所名 -->
             BUYER_SECTION_CD,<!-- 購買部門コード -->
             BUYER_SECTION_NAME,<!-- 購買部門名 -->
             BUYER_USER_ID,<!-- 購買担当者ID -->
             BUYER_USER_NAME,<!-- 購買担当者名 -->
             BUYER_USER_EXTENSION_NO,<!-- 購買担当内線番号 -->
             BUYER_USER_TEL_NO,<!-- 購買担当外線番号 -->
             BUYER_USER_MAIL_ADDR,<!-- 購買担当メールアドレス -->
             BUYER_COMMENT,<!-- 発注コメント（取引先非通知） -->
             FOR_SUPPRIER_COMMENT,<!-- 取引先向けコメント -->
             TITLE_NAME,<!-- 件名 -->
             LOAD_COMPANY_CD,<!-- 負担会社コード -->
             LOAD_COMPANY_NAME,<!-- 負担会社名 -->
             LOAD_SECTION_PLACE_CD,<!-- 負担事業所コード -->
             LOAD_SECTION_PLACE_NAME,<!-- 負担事業所名 -->
             LOAD_SECTION_CD,<!-- 負担部門コード -->
             LOAD_SECTION_NAME,<!-- 負担部門名 -->
             RECIVE_COMPANY_CD,<!-- 受入会社コード -->
             RECIVE_COMPANY_NAME,<!-- 受入会社名 -->
             RECIVE_SECTION_PLACE_CD,<!-- 受入事業所コード -->
             RECIVE_SECTION_PLACE_NAME,<!-- 受入事業所名 -->
             RECIVE_SECTION_CD,<!-- 受入部門コード -->
             RECIVE_SECTION_NAME,<!-- 受入部門名 -->
             INSPECT_IND,<!-- 検査区分 -->
             ITEM_CLASS_COMPANY_CD,<!-- 品種会社コード -->
             ITEM_CLASS_L,<!-- 大分類コード -->
             ITEM_CLASS_L_NAME,<!-- 大分類名 -->
             ITEM_CLASS_M,<!-- 中分類コード -->
             ITEM_CLASS_M_NAME,<!-- 中分類名 -->
             ITEM_CLASS_S,<!-- 小分類コード -->
             ITEM_CLASS_S_NAME,<!-- 小分類名 -->
             ITEM_COMPANY_CD,<!-- 品名会社コード -->
             ITEM_CD,<!-- 品名コード -->
             ITEM_NAME,<!-- 品名 -->
             KATASHIKI,<!-- 型式 -->
             MANUFACT_CD,<!-- メーカーコード -->
             MANUFACT_NAME,<!-- メーカー名 -->
             SUBJECT_COMPANY_CD,<!-- 科目会社コード -->
             SUBJECT_CD,<!-- 科目コード  -->
             SUBJECT_NAME,<!-- 科目名 -->
             SUP_COMPANY_CD,<!-- 取引先会社コード -->
             SUP_CD,<!-- 取引先コード -->
             SUP_NAME,<!-- 取引先名 -->
             SUP_ABBR_NAME,<!-- 取引先名（略称） -->
             SUP_ZIP_CD,<!-- 取引先郵便番号 -->
             SUP_ADDRESS1,<!-- 取引先住所１ -->
             SUP_ADDRESS2,<!-- 取引先住所２ -->
             SUP_TEL_NO,<!-- 取引先電話番号 -->
             SUP_FAX_NO,<!-- 取引先FAX番号 -->
             SUBCON_IND,<!-- 下請法適用業者区分 -->
             EDI_IND,<!-- EDIデータ送受信方法 -->
             VENDOR_CD,<!-- 統一取引先コード -->
             BUDGET_NO,<!-- 予算番号 -->
             ORDER_DELIV_DATE,<!-- 注文納期 -->
             DELIV_PLACE_COMPANY_CD,<!-- 納入先会社コード -->
             DELIV_PLACE_CD,<!-- 納入先コード -->
             DELIV_PLACE_NAME,<!-- 納入先名 -->
             DELIV_PLACE_ZIP_CD,<!-- 納入先郵便番号 -->
             DELIV_PLACE_ADDRESS1,<!-- 納入先住所１ -->
             DELIV_PLACE_ADDRESS2,<!-- 納入先住所２ -->
             DELIV_PLACE_NAME_INB,<!-- 構内配送先 -->
             DELIV_PLACE_TEL_NO,<!-- 納入先電話番号 -->
             DELIV_PLACE_FAX_NO,<!-- 納入先FAX番号 -->
             DELIV_PLACE_COMPANY_NAME,<!-- 納入先会社名 -->
             DELIV_PLACE_CONTACT_NAME,<!-- 納入先担当者名 -->
             CURRENCY_CD,<!-- 通貨コード -->
             TAX_IND,<!-- 課税区分 -->
             CONSUMPT_IND,<!-- 消費税区分 -->
             TAX_RATE,<!-- 税率 -->
             ORDER_VOL,<!-- 注文数量 -->
             UNIT_CD,<!-- 単位コード -->
             UNIT_NAME,<!-- 単位名 -->
             UNIT_PRICE,<!-- 単価 -->
             ORDER_AMOUNT,<!-- 注文金額 -->
             CONSUMPT_AMOUNT,<!-- 消費税額 -->
             TOTAL_AMOUNT,<!-- 合計金額 -->
             ORDER_CANCEL_VOL,<!-- 打切取消数量 -->
             ORDER_CANCEL_AMOUNT,<!-- 打切取消金額 -->
             UNIT_PRICE_IND,<!-- 単価区分 -->
             PRICE_UNDEC_REASON,<!-- 単価未定理由 -->
             PRICE_DEC_DATE,<!-- 単価決定予定日 -->
             ORDER_CNV_CURRENCY_CD,<!-- 注文登録時換算通貨 -->
             ORDER_CNV_RATE,<!-- 注文登録時換算レート -->
             ORDER_CNV_AMOUNT,<!-- 注文登録時換算金額 -->
             EST_DELIV_FLG,<!-- 納期回答フラグ -->
             AUTO_TERMINATE_FLG,<!-- 自動打切フラグ -->
             SUP_CONFIRM_FLG,<!-- 取引先確認フラグ -->
             PRICE_DEC_FLG,<!-- 単価確定変更フラグ -->
             ATTACH_FILE_SEQ1,<!-- 添付ファイルシーケンス１ -->
             ATTACH_FILE_SEQ2,<!-- 添付ファイルシーケンス２ -->
             ATTACH_FILE_SEQ3,<!-- 添付ファイルシーケンス３ -->
             APP_ROUTE_NO,<!-- 承認ルート番号 -->
             APP_ROUTE_NAME,<!-- 承認ルート名 -->
             SEND_IND,<!-- データ送信区分 -->
             PRINT_IND,<!-- 印刷区分 -->
             FAX_SEND_IND,<!-- FAX送信区分 -->
             BI_OUT_IND,<!-- 実績抽出区分 -->
             RECEIPT_NUMBER,<!-- 受付番号 -->
             FAX_RECEIPT_NUMBER,<!-- FAX受付番号 -->
             DELETE_FLG,<!-- 削除フラグ -->
             AUTO_DELETE_FLG,<!-- 自動データ削除フラグ -->
             AUTO_DELETE_DATE,<!-- 自動データ削除日 -->
             LAST_UPD_DATE,<!-- 最終更新日時 -->
             LAST_UPD_COMPANY_CD,<!-- 最終更新会社コード -->
             LAST_UPD_SECTION_CD,<!-- 最終更新部門コード -->
             LAST_UPD_USER_ID,<!-- 最終更新ユーザーID -->
             REG_DATE,<!-- 登録日時 -->
             REG_COMPANY_CD,<!-- 登録会社コード -->
             REG_SECTION_CD,<!-- 登録部門コード -->
             REG_USER_ID,<!-- 登録ユーザーID -->
             ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()})
        SELECT
             #{orderIdentify.orderSeq},<!-- 注文シーケンス番号 -->
             #{orderNo.orderNo},<!-- 注文番号 -->
             #{historyNo.historyNo},<!-- 注文版数 -->
             #{status.orderStatus.orderStatus},<!-- 注文ステータス -->
             '0503',<!-- 情報区分コード -->
             REQ_TYPE_IND,<!-- 依頼区分 -->
             '2',<!-- 訂正コード -->
             #{orderIdentify.preSeq},<!-- 変更前シーケンス番号 -->
             '1',<!-- 最新フラグ -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '1' ELSE '0' END,<!-- 最新承認済みフラグ -->
             PUR_REQ_DATE,<!-- 購入依頼日 -->
             '${@fw.common.util.AppUtil@getSysDate()}',<!-- 注文登録日 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '${@fw.common.util.AppUtil@getSysDate()}' ELSE '' END,<!-- 注文日 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' AND #{historyNo.historyNo} = '1' THEN '${@fw.common.util.AppUtil@getSysDate()}' 
             ELSE #{schedule.orderDate.orderFirstDate.dateOfymd} END,<!-- 初回注文日 -->
             PUR_REQ_NO,<!-- 購入依頼番号 -->
             QUOT_REQ_NO,<!-- 見積依頼番号 -->
             QUOT_REQ_DTL_NO,<!-- 見積依頼明細番号 -->
             REQ_COMPANY_CD,<!-- 依頼元会社コード -->
             REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
             REQ_SECTION_PLACE_CD,<!-- 依頼元事業所コード -->
             REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
             REQ_SECTION_CD,<!-- 依頼元部門コード -->
             REQ_SECTION_NAME,<!-- 依頼元部門名 -->
             REQ_USER_ID,<!-- 依頼元担当者ID -->
             REQ_USER_NAME,<!-- 依頼元担当者名 -->
             REQ_USER_EXTENSION_NO,<!-- 依頼元担当内線番号 -->
             REQ_USER_TEL_NO,<!-- 依頼元担当外線番号 -->
             REQ_USER_MAIL_ADDR,<!-- 依頼元担当メールアドレス -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 購買会社コード -->
             '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',<!-- 購買会社名 -->
             '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',<!-- 購買事業所コード -->
             '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',<!-- 購買事業所名 -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 購買部門コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',<!-- 購買部門名 -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 購買担当者ID -->
             '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',<!-- 購買担当者名 -->
             '${@fw.security.SecurityUtil@getLoginUserExtNoByEscapeSql()}',<!-- 購買担当内線番号 -->
             '${@fw.security.SecurityUtil@getLoginUserExternalNoByEscapeSql()}',<!-- 購買担当外線番号 -->
             '${@fw.security.SecurityUtil@getLoginUserMailAddrByEscapeSql()}',<!-- 購買担当メールアドレス -->
             #{orderComment.buyerComment.comment.comment},<!-- 発注コメント（取引先非通知） -->
             #{orderComment.forSupplierComment.forSupplierComment.comment},<!-- 取引先向けコメント -->
             #{titleName.titleName},<!-- 件名 -->
             #{user.loadSection.loadSection.company.companyCd},<!-- 負担会社コード -->
             #{user.loadSection.loadSection.company.companyName},<!-- 負担会社名 -->
             #{user.loadSection.loadSection.sectionPlace.sectionPlaceCd},<!-- 負担事業所コード -->
             #{user.loadSection.loadSection.sectionPlace.sectionPlaceName},<!-- 負担事業所名 -->
             #{user.loadSection.loadSection.sectionCd},<!-- 負担部門コード -->
             #{user.loadSection.loadSection.sectionName},<!-- 負担部門名 -->
             RECIVE_COMPANY_CD,<!-- 受入会社コード -->
             RECIVE_COMPANY_NAME,<!-- 受入会社名 -->
             RECIVE_SECTION_PLACE_CD,<!-- 受入事業所コード -->
             RECIVE_SECTION_PLACE_NAME,<!-- 受入事業所名 -->
             RECIVE_SECTION_CD,<!-- 受入部門コード -->
             RECIVE_SECTION_NAME,<!-- 受入部門名 -->
             #{condition.inspectInd.inspectInd},<!-- 検査区分 -->
             #{accounting.orderItem.itemKind.itemClassCompanyCd},<!-- 品種会社コード -->
             #{accounting.orderItem.itemKind.itemClassL},<!-- 大分類コード -->
             #{accounting.orderItem.itemKind.itemClassLName},<!-- 大分類名 -->
             #{accounting.orderItem.itemKind.itemClassM},<!-- 中分類コード -->
             #{accounting.orderItem.itemKind.itemClassMName},<!-- 中分類名 -->
             #{accounting.orderItem.itemKind.itemClassS},<!-- 小分類コード -->
             #{accounting.orderItem.itemKind.itemClassSName},<!-- 小分類名 -->
             ITEM_COMPANY_CD,<!-- 品名会社コード -->
             ITEM_CD,<!-- 品名コード -->
             ITEM_NAME,<!-- 品名 -->
             KATASHIKI,<!-- 型式 -->
             MANUFACT_CD,<!-- メーカーコード -->
             MANUFACT_NAME,<!-- メーカー名 -->
             #{accounting.subject.subjectCompanyCd},<!-- 科目会社コード -->
             #{accounting.subject.subjectCd},<!-- 科目コード  -->
             #{accounting.subject.subjectName},<!-- 科目名 -->
             SUP_COMPANY_CD,<!-- 取引先会社コード -->
             SUP_CD,<!-- 取引先コード -->
             SUP_NAME,<!-- 取引先名 -->
             SUP_ABBR_NAME,<!-- 取引先名（略称） -->
             SUP_ZIP_CD,<!-- 取引先郵便番号 -->
             SUP_ADDRESS1,<!-- 取引先住所１ -->
             SUP_ADDRESS2,<!-- 取引先住所２ -->
             SUP_TEL_NO,<!-- 取引先電話番号 -->
             SUP_FAX_NO,<!-- 取引先FAX番号 -->
             SUBCON_IND,<!-- 下請法適用業者区分 -->
             EDI_IND,<!-- EDIデータ送受信方法 -->
             VENDOR_CD,<!-- 統一取引先コード -->
             #{complement.budgetNumber.budgetNumber},<!-- 予算番号 -->
             #{schedule.dlvEst.dlvEst.dateOfymd},<!-- 注文納期 -->
             #{complement.delivPlace.delivPlaceCompanyCd},<!-- 納入先会社コード -->
             #{complement.delivPlace.delivPlaceCd},<!-- 納入先コード -->
             #{complement.delivPlace.delivPlaceName},<!-- 納入先名 -->
             #{complement.delivPlace.contact.zipCd.zipCd},<!-- 納入先郵便番号 -->
             #{complement.delivPlace.contact.address1.address},<!-- 納入先住所１ -->
             #{complement.delivPlace.contact.address2.address},<!-- 納入先住所２ -->
             #{complement.delivPlace.delivPlaceNameInb},<!-- 構内配送先 -->
             #{complement.delivPlace.contact.telNo.telNo},<!-- 納入先電話番号 -->
             #{complement.delivPlace.contact.faxNo.faxNo},<!-- 納入先FAX番号 -->
             #{complement.delivPlace.delivPlaceCompanyName},<!-- 納入先会社名 -->
             #{complement.delivPlace.delivPlaceContactName},<!-- 納入先担当者名 -->
             CURRENCY_CD,<!-- 通貨コード -->
             #{accounting.orderAmount.amountMng.taxCalculationInd.taxInd.taxInd},<!-- 課税区分 -->
             CONSUMPT_IND,<!-- 消費税区分 -->
             #{accounting.orderAmount.taxRate.taxRate},<!-- 税率 -->
             '${@fw.common.util.AppUtil@deleteComma(accounting.orderAmount.orderVolume.orderVol.vol)}',<!-- 注文数量 -->
             #{accounting.orderItem.item.unit.unitCd},<!-- 単位コード -->
             #{accounting.orderItem.item.unit.unitName},<!-- 単位名 -->
             '${@fw.common.util.AppUtil@deleteComma(accounting.orderAmount.unitPrice.amount.amount)}',<!-- 単価 -->
             '${@fw.common.util.AppUtil@deleteComma(accounting.orderAmount.orderAmount.amount)}',<!-- 注文金額 -->
             #{accounting.orderAmount.amountMng.consumptAmount.consumptAmount.amount},<!-- 消費税額 -->
             #{accounting.orderAmount.amountMng.totalAmount.totalAmount.amount},<!-- 合計金額 -->
             '',<!-- 打切取消数量 -->
             '',<!-- 打切取消金額 -->
             #{status.priceManagement.unitPriceInd},<!-- 単価区分 -->
             #{status.priceManagement.priceUndecReason.comment},<!-- 単価未定理由 -->
             #{status.priceManagement.priceDecDate.dateOfymd},<!-- 単価決定予定日 -->
             '${@fw.security.SecurityUtil@getCurrencyCdByEscapeSql()}',<!-- 注文登録時換算通貨 -->
             #{accounting.orderCnv.orderCnvRate.rate},<!-- 注文登録時換算レート -->
             #{accounting.orderCnv.orderCnvAmount.amount},<!-- 注文登録時換算金額 -->
             EST_DELIV_FLG,<!-- 納期回答フラグ -->
             AUTO_TERMINATE_FLG,<!-- 自動打切フラグ -->
             '0',<!-- 取引先確認フラグ -->
             #{status.priceDecFlag.priceDecFlag},<!-- 単価確定変更フラグ -->
             #{complement.rangeByAttachFile1.attachFile.seqNo},<!-- 添付ファイルシーケンス１ -->
             #{complement.rangeByAttachFile2.attachFile.seqNo},<!-- 添付ファイルシーケンス２ -->
             #{complement.rangeByAttachFile3.attachFile.seqNo},<!-- 添付ファイルシーケンス３ -->
             #{approute.appRouteNo},<!-- 承認ルート番号 -->
             #{approute.appRouteName},<!-- 承認ルート名 -->
             CASE WHEN #{supplierFrom.ediInd.ediInd} = '1' THEN 
                CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '0' ELSE '2' END 
             ELSE '9' END,<!-- データ送信区分 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '0' ELSE '2' END,<!-- 印刷区分 -->
             CASE WHEN FAX_SEND_IND = '9' THEN '9' 
             ELSE 
                CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '0' ELSE '2' END 
             END,<!-- FAX送信区分 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '0' ELSE '2' END,<!-- 実績抽出区分 -->
             '',<!-- 受付番号 -->
             '',<!-- FAX受付番号 -->
             '0',<!-- 削除フラグ -->
             '0',<!-- 自動データ削除フラグ -->
             '',<!-- 自動データ削除日 -->
             '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 最終更新日時 -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 最終更新会社コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 最終更新部門コード -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 最終更新ユーザーID -->
             '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 登録日時 -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 登録会社コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 登録部門コード -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 登録ユーザーID -->
              ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("editExtItem.")}
        FROM T_ORDER 
        WHERE ORDER_SEQ = #{orderIdentify.preSeq}<!-- 変更前注文シーケンス番号 -->
    </insert>
    
    <!-- 注文テーブル(取消／打切り)SQL -->
    <insert id="stopOrder" parameterType="fw.domain.slip.order.order.Order">
        INSERT INTO T_ORDER
            (ORDER_SEQ,<!-- 注文シーケンス番号 -->
             ORDER_NO,<!-- 注文番号 -->
             ORDER_VERSION,<!-- 注文版数 -->
             ORDER_STATUS,<!-- 注文ステータス -->
             INFO_CD,<!-- 情報区分コード -->
             REQ_TYPE_IND,<!-- 依頼区分 -->
             CORRECT_CD,<!-- 訂正コード -->
             PRE_SEQ,<!-- 変更前シーケンス番号 -->
             NEW_FLG,<!-- 最新フラグ -->
             NEW_APP_FLG,<!-- 最新承認済みフラグ -->
             PUR_REQ_DATE,<!-- 購入依頼日 -->
             ORDER_INPUT_DATE,<!-- 注文登録日 -->
             ORDER_DATE,<!-- 注文日 -->
             ORDER_FIRST_DATE,<!-- 初回注文日 -->
             PUR_REQ_NO,<!-- 購入依頼番号 -->
             QUOT_REQ_NO,<!-- 見積依頼番号 -->
             QUOT_REQ_DTL_NO,<!-- 見積依頼明細番号 -->
             REQ_COMPANY_CD,<!-- 依頼元会社コード -->
             REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
             REQ_SECTION_PLACE_CD,<!-- 依頼元事業所コード -->
             REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
             REQ_SECTION_CD,<!-- 依頼元部門コード -->
             REQ_SECTION_NAME,<!-- 依頼元部門名 -->
             REQ_USER_ID,<!-- 依頼元担当者ID -->
             REQ_USER_NAME,<!-- 依頼元担当者名 -->
             REQ_USER_EXTENSION_NO,<!-- 依頼元担当内線番号 -->
             REQ_USER_TEL_NO,<!-- 依頼元担当外線番号 -->
             REQ_USER_MAIL_ADDR,<!-- 依頼元担当メールアドレス -->
             BUYER_COMPANY_CD,<!-- 購買会社コード -->
             BUYER_COMPANY_NAME,<!-- 購買会社名 -->
             BUYER_SECTION_PLACE_CD,<!-- 購買事業所コード -->
             BUYER_SECTION_PLACE_NAME,<!-- 購買事業所名 -->
             BUYER_SECTION_CD,<!-- 購買部門コード -->
             BUYER_SECTION_NAME,<!-- 購買部門名 -->
             BUYER_USER_ID,<!-- 購買担当者ID -->
             BUYER_USER_NAME,<!-- 購買担当者名 -->
             BUYER_USER_EXTENSION_NO,<!-- 購買担当内線番号 -->
             BUYER_USER_TEL_NO,<!-- 購買担当外線番号 -->
             BUYER_USER_MAIL_ADDR,<!-- 購買担当メールアドレス -->
             BUYER_COMMENT,<!-- 発注コメント（取引先非通知） -->
             FOR_SUPPRIER_COMMENT,<!-- 取引先向けコメント -->
             TITLE_NAME,<!-- 件名 -->
             LOAD_COMPANY_CD,<!-- 負担会社コード -->
             LOAD_COMPANY_NAME,<!-- 負担会社名 -->
             LOAD_SECTION_PLACE_CD,<!-- 負担事業所コード -->
             LOAD_SECTION_PLACE_NAME,<!-- 負担事業所名 -->
             LOAD_SECTION_CD,<!-- 負担部門コード -->
             LOAD_SECTION_NAME,<!-- 負担部門名 -->
             RECIVE_COMPANY_CD,<!-- 受入会社コード -->
             RECIVE_COMPANY_NAME,<!-- 受入会社名 -->
             RECIVE_SECTION_PLACE_CD,<!-- 受入事業所コード -->
             RECIVE_SECTION_PLACE_NAME,<!-- 受入事業所名 -->
             RECIVE_SECTION_CD,<!-- 受入部門コード -->
             RECIVE_SECTION_NAME,<!-- 受入部門名 -->
             INSPECT_IND,<!-- 検査区分 -->
             ITEM_CLASS_COMPANY_CD,<!-- 品種会社コード -->
             ITEM_CLASS_L,<!-- 大分類コード -->
             ITEM_CLASS_L_NAME,<!-- 大分類名 -->
             ITEM_CLASS_M,<!-- 中分類コード -->
             ITEM_CLASS_M_NAME,<!-- 中分類名 -->
             ITEM_CLASS_S,<!-- 小分類コード -->
             ITEM_CLASS_S_NAME,<!-- 小分類名 -->
             ITEM_COMPANY_CD,<!-- 品名会社コード -->
             ITEM_CD,<!-- 品名コード -->
             ITEM_NAME,<!-- 品名 -->
             KATASHIKI,<!-- 型式 -->
             MANUFACT_CD,<!-- メーカーコード -->
             MANUFACT_NAME,<!-- メーカー名 -->
             SUBJECT_COMPANY_CD,<!-- 科目会社コード -->
             SUBJECT_CD,<!-- 科目コード  -->
             SUBJECT_NAME,<!-- 科目名 -->
             SUP_COMPANY_CD,<!-- 取引先会社コード -->
             SUP_CD,<!-- 取引先コード -->
             SUP_NAME,<!-- 取引先名 -->
             SUP_ABBR_NAME,<!-- 取引先名（略称） -->
             SUP_ZIP_CD,<!-- 取引先郵便番号 -->
             SUP_ADDRESS1,<!-- 取引先住所１ -->
             SUP_ADDRESS2,<!-- 取引先住所２ -->
             SUP_TEL_NO,<!-- 取引先電話番号 -->
             SUP_FAX_NO,<!-- 取引先FAX番号 -->
             SUBCON_IND,<!-- 下請法適用業者区分 -->
             EDI_IND,<!-- EDIデータ送受信方法 -->
             VENDOR_CD,<!-- 統一取引先コード -->
             BUDGET_NO,<!-- 予算番号 -->
             ORDER_DELIV_DATE,<!-- 注文納期 -->
             DELIV_PLACE_COMPANY_CD,<!-- 納入先会社コード -->
             DELIV_PLACE_CD,<!-- 納入先コード -->
             DELIV_PLACE_NAME,<!-- 納入先名 -->
             DELIV_PLACE_ZIP_CD,<!-- 納入先郵便番号 -->
             DELIV_PLACE_ADDRESS1,<!-- 納入先住所１ -->
             DELIV_PLACE_ADDRESS2,<!-- 納入先住所２ -->
             DELIV_PLACE_NAME_INB,<!-- 構内配送先 -->
             DELIV_PLACE_TEL_NO,<!-- 納入先電話番号 -->
             DELIV_PLACE_FAX_NO,<!-- 納入先FAX番号 -->
             DELIV_PLACE_COMPANY_NAME,<!-- 納入先会社名 -->
             DELIV_PLACE_CONTACT_NAME,<!-- 納入先担当者名 -->
             CURRENCY_CD,<!-- 通貨コード -->
             TAX_IND,<!-- 課税区分 -->
             CONSUMPT_IND,<!-- 消費税区分 -->
             TAX_RATE,<!-- 税率 -->
             ORDER_VOL,<!-- 注文数量 -->
             UNIT_CD,<!-- 単位コード -->
             UNIT_NAME,<!-- 単位名 -->
             UNIT_PRICE,<!-- 単価 -->
             ORDER_AMOUNT,<!-- 注文金額 -->
             CONSUMPT_AMOUNT,<!-- 消費税額 -->
             TOTAL_AMOUNT,<!-- 合計金額 -->
             ORDER_CANCEL_VOL,<!-- 打切取消数量 -->
             ORDER_CANCEL_AMOUNT,<!-- 打切取消金額 -->
             UNIT_PRICE_IND,<!-- 単価区分 -->
             PRICE_UNDEC_REASON,<!-- 単価未定理由 -->
             PRICE_DEC_DATE,<!-- 単価決定予定日 -->
             ORDER_CNV_CURRENCY_CD,<!-- 注文登録時換算通貨 -->
             ORDER_CNV_RATE,<!-- 注文登録時換算レート -->
             ORDER_CNV_AMOUNT,<!-- 注文登録時換算金額 -->
             EST_DELIV_FLG,<!-- 納期回答フラグ -->
             AUTO_TERMINATE_FLG,<!-- 自動打切フラグ -->
             SUP_CONFIRM_FLG,<!-- 取引先確認フラグ -->
             PRICE_DEC_FLG,<!-- 単価確定変更フラグ -->
             ATTACH_FILE_SEQ1,<!-- 添付ファイルシーケンス１ -->
             ATTACH_FILE_SEQ2,<!-- 添付ファイルシーケンス２ -->
             ATTACH_FILE_SEQ3,<!-- 添付ファイルシーケンス３ -->
             APP_ROUTE_NO,<!-- 承認ルート番号 -->
             APP_ROUTE_NAME,<!-- 承認ルート名 -->
             SEND_IND,<!-- データ送信区分 -->
             PRINT_IND,<!-- 印刷区分 -->
             FAX_SEND_IND,<!-- FAX送信区分 -->
             BI_OUT_IND,<!-- 実績抽出区分 -->
             RECEIPT_NUMBER,<!-- 受付番号 -->
             FAX_RECEIPT_NUMBER,<!-- FAX受付番号 -->
             DELETE_FLG,<!-- 削除フラグ -->
             AUTO_DELETE_FLG,<!-- 自動データ削除フラグ -->
             AUTO_DELETE_DATE,<!-- 自動データ削除日 -->
             LAST_UPD_DATE,<!-- 最終更新日時 -->
             LAST_UPD_COMPANY_CD,<!-- 最終更新会社コード -->
             LAST_UPD_SECTION_CD,<!-- 最終更新部門コード -->
             LAST_UPD_USER_ID,<!-- 最終更新ユーザーID -->
             REG_DATE,<!-- 登録日時 -->
             REG_COMPANY_CD,<!-- 登録会社コード -->
             REG_SECTION_CD,<!-- 登録部門コード -->
             REG_USER_ID,<!-- 登録ユーザーID -->
             ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()})
        SELECT
             #{orderIdentify.orderSeq},<!-- 注文シーケンス番号 -->
             #{orderNo.orderNo},<!-- 注文番号 -->
             #{historyNo.historyNo},<!-- 注文版数 -->
             #{status.orderStatus.orderStatus},<!-- 注文ステータス -->
             #{informationInd.informationInd},<!-- 情報区分コード -->
             REQ_TYPE_IND,<!-- 依頼区分 -->
             '3',<!-- 訂正コード -->
             #{orderIdentify.preSeq},<!-- 変更前シーケンス番号 -->
             '1',<!-- 最新フラグ -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '1' ELSE '0' END,<!-- 最新承認済みフラグ -->
             PUR_REQ_DATE,<!-- 購入依頼日 -->
             '${@fw.common.util.AppUtil@getSysDate()}',<!-- 注文登録日 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '${@fw.common.util.AppUtil@getSysDate()}' ELSE '' END,<!-- 注文日 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' AND #{historyNo.historyNo} = '1' THEN '${@fw.common.util.AppUtil@getSysDate()}' 
             ELSE #{schedule.orderDate.orderFirstDate.dateOfymd} END,<!-- 初回注文日 -->
             PUR_REQ_NO,<!-- 購入依頼番号 -->
             QUOT_REQ_NO,<!-- 見積依頼番号 -->
             QUOT_REQ_DTL_NO,<!-- 見積依頼明細番号 -->
             REQ_COMPANY_CD,<!-- 依頼元会社コード -->
             REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
             REQ_SECTION_PLACE_CD,<!-- 依頼元事業所コード -->
             REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
             REQ_SECTION_CD,<!-- 依頼元部門コード -->
             REQ_SECTION_NAME,<!-- 依頼元部門名 -->
             REQ_USER_ID,<!-- 依頼元担当者ID -->
             REQ_USER_NAME,<!-- 依頼元担当者名 -->
             REQ_USER_EXTENSION_NO,<!-- 依頼元担当内線番号 -->
             REQ_USER_TEL_NO,<!-- 依頼元担当外線番号 -->
             REQ_USER_MAIL_ADDR,<!-- 依頼元担当メールアドレス -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 購買会社コード -->
             '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',<!-- 購買会社名 -->
             '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',<!-- 購買事業所コード -->
             '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',<!-- 購買事業所名 -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 購買部門コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',<!-- 購買部門名 -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 購買担当者ID -->
             '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',<!-- 購買担当者名 -->
             '${@fw.security.SecurityUtil@getLoginUserExtNoByEscapeSql()}',<!-- 購買担当内線番号 -->
             '${@fw.security.SecurityUtil@getLoginUserExternalNoByEscapeSql()}',<!-- 購買担当外線番号 -->
             '${@fw.security.SecurityUtil@getLoginUserMailAddrByEscapeSql()}',<!-- 購買担当メールアドレス -->
             BUYER_COMMENT,<!-- 発注コメント（取引先非通知） -->
             FOR_SUPPRIER_COMMENT,<!-- 取引先向けコメント -->
             TITLE_NAME,<!-- 件名 -->
             LOAD_COMPANY_CD,<!-- 負担会社コード -->
             LOAD_COMPANY_NAME,<!-- 負担会社名 -->
             LOAD_SECTION_PLACE_CD,<!-- 負担事業所コード -->
             LOAD_SECTION_PLACE_NAME,<!-- 負担事業所名 -->
             LOAD_SECTION_CD,<!-- 負担部門コード -->
             LOAD_SECTION_NAME,<!-- 負担部門名 -->
             RECIVE_COMPANY_CD,<!-- 受入会社コード -->
             RECIVE_COMPANY_NAME,<!-- 受入会社名 -->
             RECIVE_SECTION_PLACE_CD,<!-- 受入事業所コード -->
             RECIVE_SECTION_PLACE_NAME,<!-- 受入事業所名 -->
             RECIVE_SECTION_CD,<!-- 受入部門コード -->
             RECIVE_SECTION_NAME,<!-- 受入部門名 -->
             INSPECT_IND,<!-- 検査区分 -->
             ITEM_CLASS_COMPANY_CD,<!-- 品種会社コード -->
             ITEM_CLASS_L,<!-- 大分類コード -->
             ITEM_CLASS_L_NAME,<!-- 大分類名 -->
             ITEM_CLASS_M,<!-- 中分類コード -->
             ITEM_CLASS_M_NAME,<!-- 中分類名 -->
             ITEM_CLASS_S,<!-- 小分類コード -->
             ITEM_CLASS_S_NAME,<!-- 小分類名 -->
             ITEM_COMPANY_CD,<!-- 品名会社コード -->
             ITEM_CD,<!-- 品名コード -->
             ITEM_NAME,<!-- 品名 -->
             KATASHIKI,<!-- 型式 -->
             MANUFACT_CD,<!-- メーカーコード -->
             MANUFACT_NAME,<!-- メーカー名 -->
             SUBJECT_COMPANY_CD,<!-- 科目会社コード -->
             SUBJECT_CD,<!-- 科目コード  -->
             SUBJECT_NAME,<!-- 科目名 -->
             SUP_COMPANY_CD,<!-- 取引先会社コード -->
             SUP_CD,<!-- 取引先コード -->
             SUP_NAME,<!-- 取引先名 -->
             SUP_ABBR_NAME,<!-- 取引先名（略称） -->
             SUP_ZIP_CD,<!-- 取引先郵便番号 -->
             SUP_ADDRESS1,<!-- 取引先住所１ -->
             SUP_ADDRESS2,<!-- 取引先住所２ -->
             SUP_TEL_NO,<!-- 取引先電話番号 -->
             SUP_FAX_NO,<!-- 取引先FAX番号 -->
             SUBCON_IND,<!-- 下請法適用業者区分 -->
             EDI_IND,<!-- EDIデータ送受信方法 -->
             VENDOR_CD,<!-- 統一取引先コード -->
             BUDGET_NO,<!-- 予算番号 -->
             ORDER_DELIV_DATE,<!-- 注文納期 -->
             DELIV_PLACE_COMPANY_CD,<!-- 納入先会社コード -->
             DELIV_PLACE_CD,<!-- 納入先コード -->
             DELIV_PLACE_NAME,<!-- 納入先名 -->
             DELIV_PLACE_ZIP_CD,<!-- 納入先郵便番号 -->
             DELIV_PLACE_ADDRESS1,<!-- 納入先住所１ -->
             DELIV_PLACE_ADDRESS2,<!-- 納入先住所２ -->
             DELIV_PLACE_NAME_INB,<!-- 構内配送先 -->
             DELIV_PLACE_TEL_NO,<!-- 納入先電話番号 -->
             DELIV_PLACE_FAX_NO,<!-- 納入先FAX番号 -->
             DELIV_PLACE_COMPANY_NAME,<!-- 納入先会社名 -->
             DELIV_PLACE_CONTACT_NAME,<!-- 納入先担当者名 -->
             CURRENCY_CD,<!-- 通貨コード -->
             TAX_IND,<!-- 課税区分 -->
             CONSUMPT_IND,<!-- 消費税区分 -->
             TAX_RATE,<!-- 税率 -->
             '${@fw.common.util.AppUtil@deleteComma(accounting.orderAmount.orderVolume.receivedVol.vol)}',<!-- 注文数量 -->
             UNIT_CD,<!-- 単位コード -->
             UNIT_NAME,<!-- 単位名 -->
             UNIT_PRICE,<!-- 単価 -->
             #{accounting.orderAmount.oldOrderAmount.amount},<!-- 注文金額 -->
             #{accounting.orderAmount.amountMng.consumptAmount.consumptAmount.amount},<!-- 消費税額 -->
             #{accounting.orderAmount.amountMng.totalAmount.totalAmount.amount},<!-- 合計金額 -->
             '${@fw.common.util.AppUtil@deleteComma(orderCancel.orderCancelVol.vol)}',<!-- 打切取消数量 -->
             #{orderCancel.orderCancelAmount.amount},<!-- 打切取消金額 -->
             UNIT_PRICE_IND,<!-- 単価区分 -->
             PRICE_UNDEC_REASON,<!-- 単価未定理由 -->
             PRICE_DEC_DATE,<!-- 単価決定予定日 -->
             ORDER_CNV_CURRENCY_CD,<!-- 注文登録時換算通貨 -->
             ORDER_CNV_RATE,<!-- 注文登録時換算レート -->
             #{accounting.orderCnv.orderCnvAmount.amount},<!-- 注文登録時換算金額 -->
             EST_DELIV_FLG,<!-- 納期回答フラグ -->
             AUTO_TERMINATE_FLG,<!-- 自動打切フラグ -->
             '0',<!-- 取引先確認フラグ -->
             '0',<!-- 単価確定変更フラグ -->
             ATTACH_FILE_SEQ1,<!-- 添付ファイルシーケンス１ -->
             ATTACH_FILE_SEQ2,<!-- 添付ファイルシーケンス２ -->
             ATTACH_FILE_SEQ3,<!-- 添付ファイルシーケンス３ -->
             #{approute.appRouteNo},<!-- 承認ルート番号 -->
             #{approute.appRouteName},<!-- 承認ルート名 -->
             CASE WHEN #{supplierFrom.ediInd.ediInd} = '1' THEN CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '0' ELSE '2' END ELSE '9' END,<!-- データ送信区分 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '0' ELSE '2' END,<!-- 印刷区分 -->
             CASE WHEN FAX_SEND_IND = '9' THEN '9' ELSE CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '0' ELSE '2' END END,<!-- FAX送信区分 -->
             CASE WHEN #{status.orderStatus.orderStatus} = '05' THEN '0' ELSE '2' END,<!-- 実績抽出区分 -->
             '',<!-- 受付番号 -->
             '',<!-- FAX受付番号 -->
             '0',<!-- 削除フラグ -->
             '0',<!-- 自動データ削除フラグ -->
             '',<!-- 自動データ削除日 -->
             '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 最終更新日時 -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 最終更新会社コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 最終更新部門コード -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 最終更新ユーザーID -->
             '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 登録日時 -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 登録会社コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 登録部門コード -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 登録ユーザーID -->
              ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("editExtItem.")}
        FROM T_ORDER 
        WHERE ORDER_SEQ = #{orderIdentify.preSeq}<!-- 変更前注文シーケンス番号 -->
    </insert>
        
    <!-- 購買マスタから自動打切フラウを取得SQL -->
    <select id="getAutoPieceFlg" resultType="String">
        SELECT 
               PIECE_FLG
        FROM M_PUR_PRICE
         WHERE M_PUR_PRICE.BUYER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
         AND M_PUR_PRICE.BUYER_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}'
         AND M_PUR_PRICE.ITEM_CD = #{itemCd}
         AND M_PUR_PRICE.SUP_CD = #{supCd}
         AND M_PUR_PRICE.VALID_START_DATE &lt;= ${@fw.common.util.AppUtil@getSysDate()}
         AND M_PUR_PRICE.VALID_END_DATE &gt;= ${@fw.common.util.AppUtil@getSysDate()}
         AND M_PUR_PRICE.TERM_FLG = '0'
    </select>
    
    <!-- 注文テーブル変更前レコードの更新SQL -->
    <update id="updateOldOrder">
        UPDATE T_ORDER 
        SET 
             NEW_FLG = '0',<!-- 最新フラグ -->
             LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 最終更新日時 -->
             LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 最終更新会社コード -->
             LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 最終更新部門コード -->
             LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'<!-- 最終更新ユーザーID -->
         WHERE ORDER_SEQ = #{orderSeq}
    </update>
    
    <!-- 注文取引先言語テーブル(新規)SQL -->
    <insert id="insertOrderSupLng" parameterType="fw.domain.slip.order.order.Order">
        INSERT INTO T_ORDER_SUP_LNG
            (ORDER_SEQ,<!-- 注文シーケンス番号 -->
             SUP_LANGUAGE_IND,<!-- 取引先言語区分 -->
             REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
             REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
             REQ_SECTION_NAME,<!-- 依頼元部門名 -->
             REQ_USER_NAME,<!-- 依頼元担当者名 -->
             BUYER_COMPANY_NAME,<!-- 購買会社名 -->
             BUYER_SECTION_PLACE_NAME,<!-- 購買事業所名 -->
             BUYER_SECTION_NAME,<!-- 購買部門名 -->
             BUYER_USER_NAME,<!-- 購買担当者名 -->
             LOAD_COMPANY_NAME,<!-- 負担会社名 -->
             LOAD_SECTION_PLACE_NAME,<!-- 負担事業所名 -->
             LOAD_SECTION_NAME,<!-- 負担部門名 -->
             ITEM_CLASS_L_NAME,<!-- 大分類名 -->
             ITEM_CLASS_M_NAME,<!-- 中分類名 -->
             ITEM_CLASS_S_NAME,<!-- 小分類名 -->
             ITEM_NAME,<!-- 品名 -->
             MANUFACT_NAME,<!-- メーカー名 -->
             SUBJECT_NAME,<!-- 科目名 -->
             SUP_NAME,<!-- 取引先名 -->
             SUP_ABBR_NAME,<!-- 取引先名（略称） -->
             DELIV_PLACE_NAME,<!-- 納入先名 -->
             DELIV_PLACE_ADDRESS1,<!-- 納入先住所１ -->
             DELIV_PLACE_ADDRESS2,<!-- 納入先住所２ -->
             DELIV_PLACE_NAME_INB,<!-- 構内配送先 -->
             DELIV_PLACE_COMPANY_NAME,<!-- 納入先会社名 -->
             DELIV_PLACE_CONTACT_NAME,<!-- 納入先担当者名 -->
             UNIT_NAME,<!-- 単位名 -->
             PAY_CONDITION_NAME,<!-- 支払条件名 -->
             AUTO_DELETE_FLG,<!-- 自動データ削除フラグ -->
             AUTO_DELETE_DATE,<!-- 自動データ削除日 -->
             LAST_UPD_DATE,<!-- 最終更新日時 -->
             LAST_UPD_COMPANY_CD,<!-- 最終更新会社コード -->
             LAST_UPD_SECTION_CD,<!-- 最終更新部門コード -->
             LAST_UPD_USER_ID,<!-- 最終更新ユーザーID -->
             REG_DATE,<!-- 登録日時 -->
             REG_COMPANY_CD,<!-- 登録会社コード -->
             REG_SECTION_CD,<!-- 登録部門コード -->
             REG_USER_ID)<!-- 登録ユーザーID -->
        VALUES
            (#{orderIdentify.orderSeq},<!-- 注文シーケンス番号 -->
             #{supplierFrom.languageInd.languageInd},<!-- 取引先言語区分 -->
             #{user.reqUser.reqUser.section.company.companyName},<!-- 依頼元会社名 -->
             #{user.reqUser.reqUser.section.sectionPlace.sectionPlaceName},<!-- 依頼元事業所名 -->
             #{user.reqUser.reqUser.section.sectionName},<!-- 依頼元部門名 -->
             #{user.reqUser.reqUser.userName},<!-- 依頼元担当者名 -->
             #{user.buyUser.buyUser.section.company.companyName},<!-- 購買会社名 -->
             #{user.buyUser.buyUser.section.sectionPlace.sectionPlaceName},<!-- 購買事業所名 -->
             #{user.buyUser.buyUser.section.sectionName},<!-- 購買部門名 -->
             #{user.buyUser.buyUser.userName},<!-- 購買担当者名 -->
             #{user.loadSection.loadSection.company.companyName},<!-- 負担会社名 -->
             #{user.loadSection.loadSection.sectionPlace.sectionPlaceName},<!-- 負担事業所名 -->
             #{user.loadSection.loadSection.sectionName},<!-- 負担部門名 -->
             #{accounting.orderItem.itemKind.itemClassLName},<!-- 大分類名 -->
             #{accounting.orderItem.itemKind.itemClassMName},<!-- 中分類名 -->
             #{accounting.orderItem.itemKind.itemClassSName},<!-- 小分類名 -->
             #{accounting.orderItem.item.itemName},<!-- 品名 -->
             #{accounting.orderItem.item.manufact.manufactName},<!-- メーカー名 -->
             #{accounting.subject.subjectName},<!-- 科目名 -->
             #{supplierFrom.supplierName.supplierName},<!-- 取引先名 -->
             #{supplierFrom.supplierName.supplierAbbrName},<!-- 取引先名（略称） -->
             #{complement.delivPlace.delivPlaceName},<!-- 納入先名 -->
             #{complement.delivPlace.contact.address1.address},<!-- 納入先住所１ -->
             #{complement.delivPlace.contact.address2.address},<!-- 納入先住所２ -->
             #{complement.delivPlace.delivPlaceNameInb},<!-- 構内配送先 -->
             #{complement.delivPlace.delivPlaceCompanyName},<!-- 納入先会社名 -->
             #{complement.delivPlace.delivPlaceContactName},<!-- 納入先担当者名 -->
             #{accounting.orderItem.item.unit.unitName},<!-- 単位名 -->
             #{payConditionItem.payConditionName},<!-- 支払条件名 -->
              '0',<!-- 自動データ削除フラグ -->
             '',<!-- 自動データ削除日 -->
             '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 最終更新日時 -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 最終更新会社コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 最終更新部門コード -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',<!-- 最終更新ユーザーID -->
             '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 登録日時 -->
             '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 登録会社コード -->
             '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 登録部門コード -->
             '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}')<!-- 登録ユーザーID -->
    </insert>
        
    <!-- 注文取引先言語テーブルの更新SQL -->
    <update id="updateOrderSupLng" parameterType="fw.domain.slip.order.order.Order">
        UPDATE T_ORDER_SUP_LNG 
        SET 
             SUP_LANGUAGE_IND = #{supplierFrom.languageInd.languageInd},<!-- 取引先言語区分 -->
             REQ_COMPANY_NAME = #{user.reqUser.reqUser.section.company.companyName},<!-- 依頼元会社名 -->
             REQ_SECTION_PLACE_NAME = #{user.reqUser.reqUser.section.sectionPlace.sectionPlaceName},<!-- 依頼元事業所名 -->
             REQ_SECTION_NAME = #{user.reqUser.reqUser.section.sectionName},<!-- 依頼元部門名 -->
             REQ_USER_NAME = #{user.reqUser.reqUser.userName},<!-- 依頼元担当者名 -->
             BUYER_COMPANY_NAME = #{user.buyUser.buyUser.section.company.companyName},<!-- 購買会社名 -->
             BUYER_SECTION_PLACE_NAME = #{user.buyUser.buyUser.section.sectionPlace.sectionPlaceName},<!-- 購買事業所名 -->
             BUYER_SECTION_NAME = #{user.buyUser.buyUser.section.sectionName},<!-- 購買部門名 -->
             BUYER_USER_NAME = #{user.buyUser.buyUser.userName},<!-- 購買担当者名 -->
             LOAD_COMPANY_NAME = #{user.loadSection.loadSection.company.companyName},<!-- 負担会社名 -->
             LOAD_SECTION_PLACE_NAME = #{user.loadSection.loadSection.sectionPlace.sectionPlaceName},<!-- 負担事業所名 -->
             LOAD_SECTION_NAME = #{user.loadSection.loadSection.sectionName},<!-- 負担部門名 -->
             ITEM_CLASS_L_NAME = #{accounting.orderItem.itemKind.itemClassLName},<!-- 大分類名 -->
             ITEM_CLASS_M_NAME = #{accounting.orderItem.itemKind.itemClassMName},<!-- 中分類名 -->
             ITEM_CLASS_S_NAME = #{accounting.orderItem.itemKind.itemClassSName},<!-- 小分類名 -->
             ITEM_NAME = #{accounting.orderItem.item.itemName},<!-- 品名 -->
             MANUFACT_NAME = #{accounting.orderItem.item.manufact.manufactName},<!-- メーカー名 -->
             SUBJECT_NAME = #{accounting.subject.subjectName},<!-- 科目名 -->
             SUP_NAME = #{supplierFrom.supplierName.supplierName},<!-- 取引先名 -->
             SUP_ABBR_NAME = #{supplierFrom.supplierName.supplierAbbrName},<!-- 取引先名（略称） -->
             DELIV_PLACE_NAME = #{complement.delivPlace.delivPlaceName},<!-- 納入先名 -->
             DELIV_PLACE_ADDRESS1 = #{complement.delivPlace.contact.address1.address},<!-- 納入先住所１ -->
             DELIV_PLACE_ADDRESS2 = #{complement.delivPlace.contact.address2.address},<!-- 納入先住所２ -->
             DELIV_PLACE_NAME_INB = #{complement.delivPlace.delivPlaceNameInb},<!-- 構内配送先 -->
             DELIV_PLACE_COMPANY_NAME = #{complement.delivPlace.delivPlaceCompanyName},<!-- 納入先会社名 -->
             DELIV_PLACE_CONTACT_NAME = #{complement.delivPlace.delivPlaceContactName},<!-- 納入先担当者名 -->
             UNIT_NAME = #{accounting.orderItem.item.unit.unitName},<!-- 単位名 -->
             PAY_CONDITION_NAME = #{payConditionItem.payConditionName},<!-- 支払条件名 -->
             AUTO_DELETE_FLG = '0',<!-- 自動データ削除フラグ -->
             AUTO_DELETE_DATE = '',<!-- 自動データ削除日 -->
             LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',<!-- 最終更新日時 -->
             LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',<!-- 最終更新会社コード -->
             LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',<!-- 最終更新部門コード -->
             LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'<!-- 最終更新ユーザーID -->
         WHERE ORDER_SEQ = #{orderIdentify.orderSeq}<!-- 注文シーケンス番号 -->
    </update>
            
    <!-- 取引先基本言語取得用SQL -->
    <select id="searchOrderSupLng" resultMap="OrderInputInit_Map">
        SELECT 
             SUP_LANGUAGE_IND,<!-- 取引先言語区分 -->
             REQ_COMPANY_NAME,<!-- 依頼元会社名 -->
             REQ_SECTION_PLACE_NAME,<!-- 依頼元事業所名 -->
             REQ_SECTION_NAME,<!-- 依頼元部門名 -->
             REQ_USER_NAME,<!-- 依頼元担当者名 -->
             BUYER_COMPANY_NAME,<!-- 購買会社名 -->
             BUYER_SECTION_PLACE_NAME,<!-- 購買事業所名 -->
             BUYER_SECTION_NAME,<!-- 購買部門名 -->
             BUYER_USER_NAME,<!-- 購買担当者名 -->
             LOAD_COMPANY_NAME,<!-- 負担会社名 -->
             LOAD_SECTION_PLACE_NAME,<!-- 負担事業所名 -->
             LOAD_SECTION_NAME,<!-- 負担部門名 -->
             ITEM_CLASS_L_NAME,<!-- 大分類名 -->
             ITEM_CLASS_M_NAME,<!-- 中分類名 -->
             ITEM_CLASS_S_NAME,<!-- 小分類名 -->
             ITEM_NAME,<!-- 品名 -->
             MANUFACT_NAME,<!-- メーカー名 -->
             SUBJECT_NAME,<!-- 科目名 -->
             SUP_NAME,<!-- 取引先名 -->
             SUP_ABBR_NAME,<!-- 取引先名（略称） -->
             DELIV_PLACE_NAME,<!-- 納入先名 -->
             DELIV_PLACE_ADDRESS1,<!-- 納入先住所１ -->
             DELIV_PLACE_ADDRESS2,<!-- 納入先住所２ -->
             DELIV_PLACE_NAME_INB,<!-- 構内配送先 -->
             DELIV_PLACE_COMPANY_NAME,<!-- 納入先会社名 -->
             DELIV_PLACE_CONTACT_NAME,<!-- 納入先担当者名 -->
             UNIT_NAME,<!-- 単位名 -->
             PAY_CONDITION_NAME<!-- 支払条件名 -->
        FROM T_ORDER_SUP_LNG
        WHERE ORDER_SEQ = #{orderSeq}<!-- 注文シーケンス番号 -->
    </select>
    
    <select id="getDelivKeyNoList" resultType="java.lang.String">
        SELECT T_RECEIVE_MNG.DELIV_KEY_NO
          FROM T_RECEIVE_MNG
         WHERE T_RECEIVE_MNG.ORDER_NO = #{orderNo}
           AND T_RECEIVE_MNG.DELETE_FLG = '0'
    </select>

    <!-- 注文番号から変更前SEQ取得SQL -->
    <select id="searchForPreOrderSeq" resultType="java.lang.String">
        SELECT 
            ORDER_SEQ
        FROM T_ORDER
        WHERE 
            ORDER_NO = #{orderNo}
            AND NEW_APP_FLG = '1'
            AND DELETE_FLG = '0'
    </select>
    
        <!-- 見積依頼取引情報取得SQL（採用された取引先が1件の場合のみ使用できます） -->
    <select id="getQuotSupLineNoRespSeq" resultMap="OrderInputInit_Map">
        SELECT 
            T_QUOT_RESPONSE.QUOT_SUP_LINE_NO,
            T_QUOT_RESPONSE.QUOT_RESP_SEQ
        FROM T_QUOT_REQ_SUP
        INNER JOIN T_QUOT_RESPONSE
            ON T_QUOT_REQ_SUP.QUOT_REQ_NO = T_QUOT_RESPONSE.QUOT_REQ_NO
            AND T_QUOT_REQ_SUP.QUOT_REQ_VERSION = T_QUOT_RESPONSE.QUOT_REQ_VERSION
            AND T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO = T_QUOT_RESPONSE.QUOT_SUP_LINE_NO
            AND T_QUOT_RESPONSE.QUOT_ADO_IND = '1'
            AND T_QUOT_RESPONSE.DELETE_FLG = '0'
        INNER JOIN T_QUOT_RESP_DTL
            ON T_QUOT_RESPONSE.QUOT_RESP_SEQ = T_QUOT_RESP_DTL.QUOT_RESP_SEQ
            AND T_QUOT_RESP_DTL.QUOT_REQ_DTL_NO = #{purReqNo}
            AND T_QUOT_RESP_DTL.DELETE_FLG = '0'
        WHERE T_QUOT_REQ_SUP.QUOT_REQ_SEQ = #{quotReqSeq}
            AND T_QUOT_REQ_SUP.DELETE_FLG = '0'
    </select>
    
    <!-- 注文シーケンス番号から単価区分取得SQL -->
    <select id="getUnitPriceInd" resultType="java.lang.String">
        SELECT 
            UNIT_PRICE_IND
        FROM T_ORDER
        WHERE 
            ORDER_SEQ = #{orderSeq}
    </select>
    
    <!-- 最終承認時の取引先確認フラグを取得する -->
    <select id="getSupConfirmFlg" resultType="java.lang.String">
        SELECT      SUP_CONFIRM_FLG
        FROM        T_ORDER
        WHERE       ORDER_NO = #{orderNo}
        AND         NEW_APP_FLG = 1
        AND         DELETE_FLG = 0
    </select>

    <!-- =============================注文入力   PSORD040 END =============================-->


    <!-- ====================== 共通 START =================== -->
    <!-- ダウンロードSQLヘッダ -->
    <sql id="downloadHeader">
       SELECT * FROM (
    </sql>
    <!-- ダウンロードSQLフッタ -->
    <sql id="downloadFooter">
        ) WHERE  ROWNUM &lt;=${@fw.common.util.PropertiesUtil@getLong("DOWNLOAD_MAXCNT")}
    </sql>
    <!-- ====================== 共通 END =================== -->

</mapper>