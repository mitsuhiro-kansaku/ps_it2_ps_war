<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ps.dataaccess.cat.catalog.CatalogMapper">

    <!--購入申請シーケンス番号の値の取得-->
    <select id="getPurAplSeq" resultType="java.lang.String">
        SELECT T_PUR_APL_SEQ.NEXTVAL
        FROM DUAL
    </select>

    <!--購入依頼シーケンス番号の値の取得-->
    <select id="getPurRequestSeq" resultType="java.lang.String">
        SELECT T_PUR_REQUEST_SEQ.NEXTVAL
        FROM DUAL
    </select>

    <!--品名分類一覧を取得する-->
    <select id="listItemClass"
            resultType="fw.domain.mst.material.itemclass.ItemClass">
        SELECT DISTINCT M_ITEM_CLASS.ITEM_CLASS_L as "itemClassL",
               M_ITEM_CLASS.ITEM_CLASS_M as "itemClassM",
               M_ITEM_CLASS.ITEM_CLASS_S as "itemClassS",
               M_ITEM_CLASS.ITEM_CLASS_IND as "itemClassInd",
               M_ITEM_CLASS_L.DSP_ORDER as DSP_ORDER_L,<!-- 大分類表示順 -->
               CASE WHEN M_ITEM_CLASS_M.DSP_ORDER IS NOT NULL
                   THEN M_ITEM_CLASS_M.DSP_ORDER
               ELSE 0 END as DSP_ORDER_M,<!-- 中分類表示順 -->
               CASE WHEN M_ITEM_CLASS_S.DSP_ORDER IS NOT NULL
                   THEN M_ITEM_CLASS_S.DSP_ORDER
               ELSE 0 END as DSP_ORDER_S <!-- 小分類表示順 -->
          FROM M_ITEM_CLASS
         INNER JOIN M_ITEM_CLASS_FILTER
                 ON M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM_CLASS_FILTER.ITEM_CLASS_L
                AND M_ITEM_CLASS.ITEM_CLASS_M = M_ITEM_CLASS_FILTER.ITEM_CLASS_M
                AND M_ITEM_CLASS.ITEM_CLASS_S = M_ITEM_CLASS_FILTER.ITEM_CLASS_S
                AND M_ITEM_CLASS.TERM_FLG = '0'
                AND (M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                 OR M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD ='ALL')
                AND (M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                 OR M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = 'ALL' )
         INNER JOIN M_ITEM_CLASS_LANG
                 ON M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM_CLASS_LANG.ITEM_CLASS_L
                AND M_ITEM_CLASS.ITEM_CLASS_M = M_ITEM_CLASS_LANG.ITEM_CLASS_M
                AND M_ITEM_CLASS.ITEM_CLASS_S = M_ITEM_CLASS_LANG.ITEM_CLASS_S
                AND M_ITEM_CLASS_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
         INNER JOIN M_ITEM
                 ON M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM.ITEM_CLASS_L
         INNER JOIN M_PUR_PRICE
                 ON M_PUR_PRICE.ITEM_CD = M_ITEM.ITEM_CD
                AND (M_PUR_PRICE.BUYER_COMPANY_CD = M_ITEM.COMPANY_CD
                 OR M_ITEM.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
                AND M_PUR_PRICE.TERM_FLG = '0'
                AND M_PUR_PRICE.CATALOG_IND = 1
                AND M_PUR_PRICE.VALID_START_DATE &lt;= ${@fw.common.util.AppUtil@getSysDate()}
                AND M_PUR_PRICE.VALID_END_DATE >= ${@fw.common.util.AppUtil@getSysDate()}
                AND M_PUR_PRICE.APP_STATUS_IND = '2'
                AND (M_PUR_PRICE.PUR_STOP_FROM > ${@fw.common.util.AppUtil@getSysDate()}
                 OR M_PUR_PRICE.PUR_STOP_TO &lt; ${@fw.common.util.AppUtil@getSysDate()}
                 OR (M_PUR_PRICE.PUR_STOP_FROM is null and M_PUR_PRICE.PUR_STOP_TO is null))
            <if test="@org.apache.commons.lang.StringUtils@isNotBlank(cataLogFlg)">
                AND M_PUR_PRICE.CATALOG_FLG = #{cataLogFlg, jdbcType=VARCHAR}
            </if>
         INNER JOIN M_PUR_PRICE_DSP_AUTH
                 ON M_PUR_PRICE.ITEM_CD = M_PUR_PRICE_DSP_AUTH.ITEM_CD
                AND M_PUR_PRICE.BUYER_COMPANY_CD = M_PUR_PRICE_DSP_AUTH.BUYER_COMPANY_CD
                AND M_PUR_PRICE.BUYER_SECTION_CD = M_PUR_PRICE_DSP_AUTH.BUYER_SECTION_CD
                AND M_PUR_PRICE.SUP_CD = M_PUR_PRICE_DSP_AUTH.SUP_CD
                AND M_PUR_PRICE.VALID_START_DATE = M_PUR_PRICE_DSP_AUTH.VALID_START_DATE
                AND M_PUR_PRICE.VALID_END_DATE = M_PUR_PRICE_DSP_AUTH.VALID_END_DATE
                AND M_PUR_PRICE_DSP_AUTH.VALID_START_DATE &lt;= ${@fw.common.util.AppUtil@getSysDate()}
                AND M_PUR_PRICE_DSP_AUTH.VALID_END_DATE >= ${@fw.common.util.AppUtil@getSysDate()}
          LEFT JOIN M_ITEM_CLASS M_ITEM_CLASS_L ON M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM_CLASS_L.ITEM_CLASS_L
                AND M_ITEM_CLASS_L.ITEM_CLASS_IND = 1
          LEFT JOIN M_ITEM_CLASS M_ITEM_CLASS_M ON M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM_CLASS_M.ITEM_CLASS_L
                AND M_ITEM_CLASS.ITEM_CLASS_M = M_ITEM_CLASS_M.ITEM_CLASS_M
                AND M_ITEM_CLASS_M.ITEM_CLASS_IND = 2
          LEFT JOIN M_ITEM_CLASS M_ITEM_CLASS_S ON M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM_CLASS_S.ITEM_CLASS_L
                AND M_ITEM_CLASS.ITEM_CLASS_M = M_ITEM_CLASS_S.ITEM_CLASS_M
                AND M_ITEM_CLASS.ITEM_CLASS_S = M_ITEM_CLASS_S.ITEM_CLASS_S
                AND M_ITEM_CLASS_S.ITEM_CLASS_IND = 3
          INNER JOIN (
            SELECT
              M_ITEM_CLASS_FILTER.ITEM_CLASS_L
            FROM
              M_ITEM_CLASS_FILTER
            WHERE
              (M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
               OR M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD ='ALL')
              AND (M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
               OR M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = 'ALL' )
              AND M_ITEM_CLASS_FILTER.ITEM_CLASS_M = ' '
              AND M_ITEM_CLASS_FILTER.ITEM_CLASS_S = ' '
              <if test="@org.apache.commons.lang.StringUtils@isNotBlank(itemClass.itemClassL)">
                  AND M_ITEM_CLASS_FILTER.ITEM_CLASS_L = #{itemClass.itemClassL, jdbcType=VARCHAR}
              </if>
          ) M_ITEM_CLASS_FILTER_L
            ON M_ITEM_CLASS_FILTER_L.ITEM_CLASS_L = M_ITEM_CLASS_FILTER.ITEM_CLASS_L
          INNER JOIN (
            SELECT
              M_ITEM_CLASS_FILTER.ITEM_CLASS_M
            FROM
              M_ITEM_CLASS_FILTER
            WHERE
              (M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
               OR M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD ='ALL')
              AND (M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
               OR M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = 'ALL' )
              AND M_ITEM_CLASS_FILTER.ITEM_CLASS_S = ' '
              <if test="@org.apache.commons.lang.StringUtils@isNotBlank(itemClass.itemClassL)">
                  AND M_ITEM_CLASS_FILTER.ITEM_CLASS_L = #{itemClass.itemClassL, jdbcType=VARCHAR}
              </if>
          ) M_ITEM_CLASS_FILTER_M
            ON M_ITEM_CLASS_FILTER_M.ITEM_CLASS_M = M_ITEM_CLASS_FILTER.ITEM_CLASS_M
        <where>
            AND (M_PUR_PRICE_DSP_AUTH.REQ_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
            OR M_PUR_PRICE_DSP_AUTH.REQ_COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}' )
            AND (M_PUR_PRICE_DSP_AUTH.REQ_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
             OR M_PUR_PRICE_DSP_AUTH.REQ_SECTION_PLACE_CD = 'ALL')
            <if test="@org.apache.commons.lang.StringUtils@isNotBlank(itemClass.itemClassL)">
            AND M_ITEM_CLASS.ITEM_CLASS_L = #{itemClass.itemClassL, jdbcType=VARCHAR}
            </if>
            <if test="@org.apache.commons.lang.StringUtils@isBlank(itemClass.itemClassL) and itemClass.itemClassInd==1 ">
            AND M_ITEM_CLASS.ITEM_CLASS_IND != '3'
            </if>
        </where>
          ORDER BY DSP_ORDER_L,
                   M_ITEM_CLASS.ITEM_CLASS_L,
                   DSP_ORDER_M,
                   M_ITEM_CLASS.ITEM_CLASS_M,
                   DSP_ORDER_S,
                   M_ITEM_CLASS.ITEM_CLASS_S
    </select>

    <select id="listItemClassTestWithName" flushCache="true"
            resultType="fw.domain.mst.material.itemclass.ItemClass">
        SELECT
            DISTINCT
            M_ITEM_CLASS.ITEM_CLASS_L as "itemClassL",
            M_ITEM_CLASS.ITEM_CLASS_M as "itemClassM",
            M_ITEM_CLASS.ITEM_CLASS_S as "itemClassS",
            M_ITEM_CLASS.ITEM_CLASS_IND as "itemClassInd",
            (
                SELECT
                    NVL(M_ITEM_CLASS_LANG_COMPANY.ITEM_CLASS_NAME, M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_NAME)
                FROM
                    M_ITEM_CLASS_LANG M_ITEM_CLASS_LANG_SYSTEM
                        LEFT OUTER JOIN M_ITEM_CLASS_LANG M_ITEM_CLASS_LANG_COMPANY ON
                    M_ITEM_CLASS_LANG_COMPANY.ITEM_CLASS_L = M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_L AND
                    M_ITEM_CLASS_LANG_COMPANY.ITEM_CLASS_M = M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_M AND
                    M_ITEM_CLASS_LANG_COMPANY.ITEM_CLASS_S = M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_S AND
                    M_ITEM_CLASS_LANG_COMPANY.LANGUAGE_IND = #{companyUseLanguageInd}
                WHERE
                    M_ITEM_CLASS_LANG_SYSTEM.LANGUAGE_IND = #{systemLanguageInd} AND
                    M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_L = M_ITEM_CLASS.ITEM_CLASS_L AND
                    M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_M = ' ' AND
                    M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_S = ' '
            ) AS itemClassNameL,
            (
                SELECT
                    NVL(M_ITEM_CLASS_LANG_COMPANY.ITEM_CLASS_NAME, M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_NAME)
                FROM
                    M_ITEM_CLASS_LANG M_ITEM_CLASS_LANG_SYSTEM
                        LEFT OUTER JOIN M_ITEM_CLASS_LANG M_ITEM_CLASS_LANG_COMPANY ON
                    M_ITEM_CLASS_LANG_COMPANY.ITEM_CLASS_L = M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_L AND
                    M_ITEM_CLASS_LANG_COMPANY.ITEM_CLASS_M = M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_M AND
                    M_ITEM_CLASS_LANG_COMPANY.ITEM_CLASS_S = M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_S AND
                    M_ITEM_CLASS_LANG_COMPANY.LANGUAGE_IND = #{companyUseLanguageInd}
                WHERE
                    M_ITEM_CLASS_LANG_SYSTEM.LANGUAGE_IND = #{systemLanguageInd} AND
                    M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_L = M_ITEM_CLASS.ITEM_CLASS_L AND
                    M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_M = M_ITEM_CLASS.ITEM_CLASS_M AND
                    M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_M != ' ' AND
                    M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_S = ' '
            ) AS itemClassNameM,
            (
                SELECT
                    NVL(M_ITEM_CLASS_LANG_COMPANY.ITEM_CLASS_NAME, M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_NAME)
                FROM
                    M_ITEM_CLASS_LANG M_ITEM_CLASS_LANG_SYSTEM
                        LEFT OUTER JOIN M_ITEM_CLASS_LANG M_ITEM_CLASS_LANG_COMPANY ON
                    M_ITEM_CLASS_LANG_COMPANY.ITEM_CLASS_L = M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_L AND
                    M_ITEM_CLASS_LANG_COMPANY.ITEM_CLASS_M = M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_M AND
                    M_ITEM_CLASS_LANG_COMPANY.ITEM_CLASS_S = M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_S AND
                    M_ITEM_CLASS_LANG_COMPANY.LANGUAGE_IND = #{companyUseLanguageInd}
                WHERE
                    M_ITEM_CLASS_LANG_SYSTEM.LANGUAGE_IND = #{systemLanguageInd} AND
                    M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_L = M_ITEM_CLASS.ITEM_CLASS_L AND
                    M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_M = M_ITEM_CLASS.ITEM_CLASS_M AND
                    M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_M != ' ' AND
                    M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_S =  M_ITEM_CLASS.ITEM_CLASS_S AND
                    M_ITEM_CLASS_LANG_SYSTEM.ITEM_CLASS_S != ' '
            ) AS itemClassNameS,
            (
                SELECT
                    M_ITEM_CLASS_L.DSP_ORDER
                FROM
                    M_ITEM_CLASS M_ITEM_CLASS_L
                WHERE
                    M_ITEM_CLASS_L.ITEM_CLASS_L = M_ITEM_CLASS.ITEM_CLASS_L AND
                    M_ITEM_CLASS_L.ITEM_CLASS_M = ' ' AND
                    M_ITEM_CLASS_L.ITEM_CLASS_S = ' '
            ) AS DSP_ORDER_L,
            NVL((
                SELECT
                    M_ITEM_CLASS_M.DSP_ORDER
                FROM
                    M_ITEM_CLASS M_ITEM_CLASS_M
                WHERE
                    M_ITEM_CLASS_M.ITEM_CLASS_L = M_ITEM_CLASS.ITEM_CLASS_L AND
                    M_ITEM_CLASS_M.ITEM_CLASS_M = M_ITEM_CLASS.ITEM_CLASS_M AND
                    M_ITEM_CLASS_M.ITEM_CLASS_M != ' ' AND
                    M_ITEM_CLASS_M.ITEM_CLASS_S = ' '
            ), -1) AS DSP_ORDER_M,
            NVL((
                SELECT
                    M_ITEM_CLASS_S.DSP_ORDER
                FROM
                    M_ITEM_CLASS M_ITEM_CLASS_S
                WHERE
                    M_ITEM_CLASS_S.ITEM_CLASS_L = M_ITEM_CLASS.ITEM_CLASS_L AND
                    M_ITEM_CLASS_S.ITEM_CLASS_M = M_ITEM_CLASS.ITEM_CLASS_M AND
                    M_ITEM_CLASS_S.ITEM_CLASS_M != ' ' AND
                    M_ITEM_CLASS_S.ITEM_CLASS_S = M_ITEM_CLASS.ITEM_CLASS_S AND
                    M_ITEM_CLASS_S.ITEM_CLASS_S != ' '
            ), -1) AS DSP_ORDER_S
        FROM
            M_ITEM_CLASS
        WHERE
            EXISTS(
                SELECT * FROM M_ITEM_CLASS_FILTER WHERE
                ITEM_CLASS_L = M_ITEM_CLASS.ITEM_CLASS_L AND
                ITEM_CLASS_M = ' ' AND
                ITEM_CLASS_S = ' ' AND
                (M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'  OR M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD='ALL') AND
            (M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}' OR M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD='ALL')
            ) AND
            EXISTS(
                SELECT * FROM M_ITEM_CLASS_FILTER WHERE
                ITEM_CLASS_L = M_ITEM_CLASS.ITEM_CLASS_L AND
                ITEM_CLASS_M = M_ITEM_CLASS.ITEM_CLASS_M AND
                ITEM_CLASS_S = ' ' AND
                (M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'  OR M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD='ALL') AND
                    (M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}' OR M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD='ALL')
            ) AND
            EXISTS(
                SELECT * FROM M_ITEM_CLASS_FILTER WHERE
                ITEM_CLASS_L = M_ITEM_CLASS.ITEM_CLASS_L AND
                ITEM_CLASS_M = M_ITEM_CLASS.ITEM_CLASS_M AND
                ITEM_CLASS_S = M_ITEM_CLASS.ITEM_CLASS_S AND
                (M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'  OR M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD='ALL') AND
                    (M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}' OR M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD='ALL')
            )
            AND M_ITEM_CLASS.TERM_FLG = '0'
            <if test="@org.apache.commons.lang.StringUtils@isNotBlank(itemClass.itemClassL)">
               AND M_ITEM_CLASS.ITEM_CLASS_L = #{itemClass.itemClassL, jdbcType=VARCHAR}
            </if>
            <if test="@org.apache.commons.lang.StringUtils@isBlank(itemClass.itemClassL) and itemClass.itemClassInd==1 ">
                AND M_ITEM_CLASS.ITEM_CLASS_IND != '3'
            </if>
        ORDER BY
            DSP_ORDER_L, M_ITEM_CLASS.ITEM_CLASS_L,
            DSP_ORDER_M, M_ITEM_CLASS.ITEM_CLASS_M,
            DSP_ORDER_S, M_ITEM_CLASS.ITEM_CLASS_S
    </select>

    <sql id="select_m_item_class">
        SELECT M_ITEM_CLASS.ITEM_CLASS_L,
               M_ITEM_CLASS.ITEM_CLASS_M,
               M_ITEM_CLASS.ITEM_CLASS_S,
               M_ITEM_CLASS.ITEM_CLASS_IND,
               lClassLang.Item_Class_Name as itemClassNameL,
               mClassLang.Item_Class_Name as itemClassNameM,
               sClassLang.Item_Class_Name as itemClassNameS
          FROM M_ITEM_CLASS
         INNER JOIN M_ITEM_CLASS_FILTER
                 ON M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM_CLASS_FILTER.ITEM_CLASS_L
                AND M_ITEM_CLASS.ITEM_CLASS_M = M_ITEM_CLASS_FILTER.ITEM_CLASS_M
                AND M_ITEM_CLASS.ITEM_CLASS_S = M_ITEM_CLASS_FILTER.ITEM_CLASS_S
                AND M_ITEM_CLASS.TERM_FLG = '0'
                AND (M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                 OR M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD ='ALL')
                AND (M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                 OR M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = 'ALL' )
         INNER JOIN M_ITEM_CLASS_LANG
                 ON M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM_CLASS_LANG.ITEM_CLASS_L
                AND M_ITEM_CLASS.ITEM_CLASS_M = M_ITEM_CLASS_LANG.ITEM_CLASS_M
                AND M_ITEM_CLASS.ITEM_CLASS_S = M_ITEM_CLASS_LANG.ITEM_CLASS_S
                AND M_ITEM_CLASS_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
          LEFT JOIN M_ITEM_CLASS lClass
                 ON lClass.Item_Class_Ind = '1'
                AND M_ITEM_CLASS.ITEM_CLASS_L = lClass.ITEM_CLASS_L
          LEFT JOIN M_ITEM_CLASS_LANG lClassLang
                 ON lClass.ITEM_CLASS_L = lClassLang.ITEM_CLASS_L
                AND lClass.ITEM_CLASS_M = lClassLang.ITEM_CLASS_M
                AND lClass.ITEM_CLASS_S = lClassLang.ITEM_CLASS_S
                AND lClassLang.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
          LEFT JOIN M_ITEM_CLASS mClass
                 ON mClass.Item_Class_Ind = '2'
                AND M_ITEM_CLASS.ITEM_CLASS_L = mClass.ITEM_CLASS_L
                AND M_ITEM_CLASS.ITEM_CLASS_M = mClass.ITEM_CLASS_M
          LEFT JOIN M_ITEM_CLASS_LANG mClassLang
                 ON mClass.ITEM_CLASS_L = mClassLang.ITEM_CLASS_L
                AND mClass.ITEM_CLASS_M = mClassLang.ITEM_CLASS_M
                AND mClass.ITEM_CLASS_S = mClassLang.ITEM_CLASS_S
                AND mClassLang.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
          LEFT JOIN M_ITEM_CLASS sClass
                 ON sClass.Item_Class_Ind = '3'
                AND M_ITEM_CLASS.ITEM_CLASS_L = sClass.ITEM_CLASS_L
                AND M_ITEM_CLASS.ITEM_CLASS_M = sClass.ITEM_CLASS_M
                AND M_ITEM_CLASS.ITEM_CLASS_S = sClass.ITEM_CLASS_S
          LEFT JOIN M_ITEM_CLASS_LANG sClassLang
                 ON sClass.ITEM_CLASS_L = sClassLang.ITEM_CLASS_L
                AND sClass.ITEM_CLASS_M = sClassLang.ITEM_CLASS_M
                AND sClass.ITEM_CLASS_S = sClassLang.ITEM_CLASS_S
                AND sClassLang.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
    </sql>

    <!--画面の大分類コード件数を取得する-->
    <select id="searchCountItemClassL" resultType="int">
        SELECT COUNT(DISTINCT M_ITEM_CLASS.ITEM_CLASS_L)
        FROM   M_ITEM_CLASS
        INNER  JOIN M_ITEM_CLASS_FILTER
        ON     M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM_CLASS_FILTER.ITEM_CLASS_L
               AND M_ITEM_CLASS.ITEM_CLASS_M = M_ITEM_CLASS_FILTER.ITEM_CLASS_M
               AND M_ITEM_CLASS.ITEM_CLASS_S = M_ITEM_CLASS_FILTER.ITEM_CLASS_S
               AND M_ITEM_CLASS.TERM_FLG = '0'
               AND (M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                   OR M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = 'ALL')
               AND (M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                   OR M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = 'ALL')
        WHERE M_ITEM_CLASS.ITEM_CLASS_IND = '1'
     </select>

    <!--画面の大分類コードより、中分類コード件数を取得する-->
     <select id="searchCountItemClassM" parameterType="fw.domain.mst.material.itemclass.ItemClass" resultType="int">
           SELECT COUNT(M_ITEM_CLASS.ITEM_CLASS_IND)
             FROM M_ITEM_CLASS
            INNER JOIN M_ITEM_CLASS_FILTER
                    ON M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM_CLASS_FILTER.ITEM_CLASS_L
                   AND M_ITEM_CLASS.ITEM_CLASS_M = M_ITEM_CLASS_FILTER.ITEM_CLASS_M
                   AND M_ITEM_CLASS.ITEM_CLASS_S = M_ITEM_CLASS_FILTER.ITEM_CLASS_S
                   AND M_ITEM_CLASS.TERM_FLG = '0'
                   AND (M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                    OR M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = 'ALL')
                   AND (M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                    OR M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = 'ALL')
        INNER  JOIN M_ITEM_CLASS_LANG
        ON     M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM_CLASS_LANG.ITEM_CLASS_L
               AND M_ITEM_CLASS.ITEM_CLASS_M = M_ITEM_CLASS_LANG.ITEM_CLASS_M
               AND M_ITEM_CLASS.ITEM_CLASS_S = M_ITEM_CLASS_LANG.ITEM_CLASS_S
               AND M_ITEM_CLASS_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
        WHERE  M_ITEM_CLASS.ITEM_CLASS_IND = '2'
               AND M_ITEM_CLASS.ITEM_CLASS_L = #{itemClassL}
        </select>

        <!--画面の大分類コード、中分類コードより、小分類コード件数を取得する-->
        <select id="searchCountItemClassS" parameterType="fw.domain.mst.material.itemclass.ItemClass" resultType="int">
           SELECT COUNT(M_ITEM_CLASS.ITEM_CLASS_IND)
        FROM   M_ITEM_CLASS
        INNER  JOIN M_ITEM_CLASS_FILTER
        ON     M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM_CLASS_FILTER.ITEM_CLASS_L
               AND M_ITEM_CLASS.ITEM_CLASS_M = M_ITEM_CLASS_FILTER.ITEM_CLASS_M
               AND M_ITEM_CLASS.ITEM_CLASS_S = M_ITEM_CLASS_FILTER.ITEM_CLASS_S
               AND M_ITEM_CLASS.TERM_FLG = '0'
               AND (M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                   OR M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = 'ALL')
               AND (M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                   OR M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = 'ALL')
        INNER  JOIN M_ITEM_CLASS_LANG
        ON     M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM_CLASS_LANG.ITEM_CLASS_L
               AND M_ITEM_CLASS.ITEM_CLASS_M = M_ITEM_CLASS_LANG.ITEM_CLASS_M
               AND M_ITEM_CLASS.ITEM_CLASS_S = M_ITEM_CLASS_LANG.ITEM_CLASS_S
               AND M_ITEM_CLASS_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
        WHERE  M_ITEM_CLASS.ITEM_CLASS_IND = '3'
               AND M_ITEM_CLASS.ITEM_CLASS_L = #{itemClassL}
               AND M_ITEM_CLASS.ITEM_CLASS_M = #{itemClassM}
        </select>

        <!--品名一覧のキーリストを取得する-->
        <select id="listKeyIdentityPriceArticle" resultType="fw.domain.mst.material.material.PriceArticleIdentify">
            SELECT M_PUR_PRICE.ITEM_CD as "itemCd",
                   M_PUR_PRICE.BUYER_COMPANY_CD as "buyerCompanyCd",
                   M_PUR_PRICE.BUYER_SECTION_CD as "buyerSectionCd",
                   M_PUR_PRICE.SUP_CD as "supCd",
                   M_PUR_PRICE.VALID_START_DATE as "validStartDate",
                   M_PUR_PRICE.VALID_END_DATE as "validEndDate"
            FROM   M_PUR_PRICE
            INNER JOIN M_PUR_PRICE_DSP_AUTH
            ON     M_PUR_PRICE.BUYER_COMPANY_CD = M_PUR_PRICE_DSP_AUTH.BUYER_COMPANY_CD
                   AND M_PUR_PRICE.BUYER_SECTION_CD = M_PUR_PRICE_DSP_AUTH.BUYER_SECTION_CD
                   AND M_PUR_PRICE.ITEM_CD = M_PUR_PRICE_DSP_AUTH.ITEM_CD
                   AND M_PUR_PRICE.SUP_CD = M_PUR_PRICE_DSP_AUTH.SUP_CD
                   AND M_PUR_PRICE.VALID_START_DATE = M_PUR_PRICE_DSP_AUTH.VALID_START_DATE
                   AND M_PUR_PRICE.VALID_END_DATE = M_PUR_PRICE_DSP_AUTH.VALID_END_DATE
                   AND (M_PUR_PRICE_DSP_AUTH.REQ_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                   OR M_PUR_PRICE_DSP_AUTH.REQ_COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}' )
                   AND (M_PUR_PRICE_DSP_AUTH.REQ_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                   OR M_PUR_PRICE_DSP_AUTH.REQ_SECTION_PLACE_CD = 'ALL')
            INNER JOIN  M_ITEM
            ON     (M_ITEM.COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
            OR     M_ITEM.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
                   AND M_ITEM.ITEM_CD = M_PUR_PRICE.ITEM_CD
            LEFT JOIN M_ITEM_LANG ON M_ITEM.ITEM_CD = M_ITEM_LANG.ITEM_CD
                  AND M_ITEM_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
                  AND M_ITEM.COMPANY_CD = M_ITEM_LANG.COMPANY_CD
            INNER JOIN M_SUPPLIER ON M_PUR_PRICE.SUP_CD = M_SUPPLIER.SUP_CD
                  AND (M_PUR_PRICE.BUYER_COMPANY_CD = M_SUPPLIER.COMPANY_CD
                   OR M_SUPPLIER.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
                  AND M_SUPPLIER.TERM_FLG = '0'
                  AND M_SUPPLIER.VALID_START_DATE &lt;= '${@fw.common.util.AppUtil@getSysDate()}'
                  AND M_SUPPLIER.VALID_END_DATE >= '${@fw.common.util.AppUtil@getSysDate()}'
            INNER JOIN M_SUPPLIER_LANG ON M_SUPPLIER.SUP_CD = M_SUPPLIER_LANG.SUP_CD
                  AND M_SUPPLIER.COMPANY_CD = M_SUPPLIER_LANG.COMPANY_CD
                  AND M_SUPPLIER_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
            LEFT JOIN M_ITEM_CLASS ON M_ITEM.ITEM_CLASS_L = M_ITEM_CLASS.ITEM_CLASS_L
                  AND M_ITEM.ITEM_CLASS_M = M_ITEM_CLASS.ITEM_CLASS_M
                  AND M_ITEM.ITEM_CLASS_S = M_ITEM_CLASS.ITEM_CLASS_S
                  AND M_ITEM_CLASS.TERM_FLG = '0'
            INNER JOIN M_ITEM_CLASS_FILTER ON M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM_CLASS_FILTER.ITEM_CLASS_L
                  AND M_ITEM_CLASS.ITEM_CLASS_M = M_ITEM_CLASS_FILTER.ITEM_CLASS_M
                  AND M_ITEM_CLASS.ITEM_CLASS_S = M_ITEM_CLASS_FILTER.ITEM_CLASS_S
                  AND (M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                      OR M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD ='ALL')
                  AND (M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                      OR M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = 'ALL' )
            INNER JOIN (
                SELECT
                  M_ITEM_CLASS_FILTER.ITEM_CLASS_L
                FROM
                  M_ITEM_CLASS_FILTER
                WHERE
                  (M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                   OR M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD ='ALL')
                  AND (M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                   OR M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = 'ALL' )
                  AND M_ITEM_CLASS_FILTER.ITEM_CLASS_M = ' '
                  AND M_ITEM_CLASS_FILTER.ITEM_CLASS_S = ' '
              ) M_ITEM_CLASS_FILTER_L
                ON M_ITEM_CLASS_FILTER_L.ITEM_CLASS_L = M_ITEM_CLASS_FILTER.ITEM_CLASS_L
                AND M_ITEM_CLASS_FILTER_L.ITEM_CLASS_L = M_ITEM_CLASS.ITEM_CLASS_L
            INNER JOIN (
                SELECT
                  M_ITEM_CLASS_FILTER.ITEM_CLASS_L,
                  M_ITEM_CLASS_FILTER.ITEM_CLASS_M
                FROM
                  M_ITEM_CLASS_FILTER
                WHERE
                  (M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                   OR M_ITEM_CLASS_FILTER.FILTER_COMPANY_CD ='ALL')
                  AND (M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                   OR M_ITEM_CLASS_FILTER.FILTER_SECTION_PLACE_CD = 'ALL' )
                  AND M_ITEM_CLASS_FILTER.ITEM_CLASS_S = ' '
              ) M_ITEM_CLASS_FILTER_M
                ON M_ITEM_CLASS_FILTER_M.ITEM_CLASS_M = M_ITEM_CLASS_FILTER.ITEM_CLASS_M
                AND M_ITEM_CLASS_FILTER_M.ITEM_CLASS_L = M_ITEM_CLASS.ITEM_CLASS_L
                AND M_ITEM_CLASS_FILTER_M.ITEM_CLASS_M = M_ITEM_CLASS.ITEM_CLASS_M
            LEFT JOIN M_ITEM_CLASS_LANG item_class_lang_l
                  ON M_ITEM_CLASS.ITEM_CLASS_L = item_class_lang_l.ITEM_CLASS_L
                  AND item_class_lang_l.ITEM_CLASS_M = ' '
                  AND item_class_lang_l.ITEM_CLASS_S = ' '
                  AND item_class_lang_l.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
            LEFT JOIN M_ITEM_CLASS_LANG item_class_lang_m
                  ON M_ITEM_CLASS.ITEM_CLASS_L = item_class_lang_m.ITEM_CLASS_L
                  AND M_ITEM_CLASS.ITEM_CLASS_M = item_class_lang_m.ITEM_CLASS_M
                  AND item_class_lang_m.ITEM_CLASS_S = ' '
                  AND item_class_lang_m.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
            LEFT JOIN M_ITEM_CLASS_LANG item_class_lang_s
                  ON M_ITEM_CLASS.ITEM_CLASS_L = item_class_lang_s.ITEM_CLASS_L
                  AND M_ITEM_CLASS.ITEM_CLASS_M = item_class_lang_s.ITEM_CLASS_M
                  AND M_ITEM_CLASS.ITEM_CLASS_S = item_class_lang_s.ITEM_CLASS_S
                  AND item_class_lang_s.ITEM_CLASS_S != ' '
                  AND item_class_lang_s.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
            LEFT JOIN M_MANUFACT ON M_ITEM.MANUFACT_CD = M_MANUFACT.MANUFACT_CD
            LEFT JOIN M_MANUFACT_LANG ON M_MANUFACT.MANUFACT_CD = M_MANUFACT_LANG.MANUFACT_CD
                  AND M_MANUFACT_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
            <where>
                   M_PUR_PRICE.TERM_FLG = '0'
                   AND M_PUR_PRICE.CATALOG_IND = '1'
                    <if test="searchPath.catalogSelectSearchCondition.outputPlace == 2">
                    AND M_PUR_PRICE.CATALOG_FLG = '1'
                    </if>
                    <if test="searchPath.catalogSelectSearchCondition.outputPlace == 0">
                    AND M_PUR_PRICE.CATALOG_FLG = '0'
                    </if>
                   AND (M_PUR_PRICE.PUR_STOP_FROM > '${@fw.common.util.AppUtil@getSysDate()}'
                       OR M_PUR_PRICE.PUR_STOP_TO &lt; '${@fw.common.util.AppUtil@getSysDate()}'
                       OR (M_PUR_PRICE.PUR_STOP_FROM is null and M_PUR_PRICE.PUR_STOP_TO is null))
                   AND M_PUR_PRICE.VALID_START_DATE &lt;= '${@fw.common.util.AppUtil@getSysDate()}'
                   AND M_PUR_PRICE.VALID_END_DATE >= '${@fw.common.util.AppUtil@getSysDate()}'
                   AND M_PUR_PRICE.APP_STATUS_IND = '2'
                   <if test="@org.apache.commons.lang.StringUtils@isNotBlank(searchPath.itemClass.itemClassL)">
                   AND M_ITEM.ITEM_CLASS_L = #{searchPath.itemClass.itemClassL}
                   </if>
                   <if test="@org.apache.commons.lang.StringUtils@isNotBlank(searchPath.itemClass.itemClassM)">
                   AND M_ITEM.ITEM_CLASS_M = #{searchPath.itemClass.itemClassM}
                   </if>
                   <if test="@org.apache.commons.lang.StringUtils@isNotBlank(searchPath.itemClass.itemClassS)">
                   AND M_ITEM.ITEM_CLASS_S = #{searchPath.itemClass.itemClassS}
                   </if>
                   <if test="searchPath.keywordFlag==1">
                   AND
                    <foreach collection="catSelectSearchCondList" item="catSelectSearchCond"  open=" (" separator=" AND " close=" )">
                        (
                        <if test="'and' == catSelectSearchCond.searchType">1 = 1</if>
                        <if test="'or' == catSelectSearchCond.searchType">1 &lt;> 1</if>
                        <foreach collection="catSelectSearchCond.keywordList" item="keyword"
                            open=" " separator=" " close=" ">
                            ${catSelectSearchCond.searchType} (
                            1 &lt;> 1
                            <if test="1 == catSelectSearchCond.itemCd">
                                OR M_ITEM.ITEM_CD ${@fw.common.util.SearchModeUtil@getSql("2","keyword")}
                            </if>
                            <if test="1 == catSelectSearchCond.itemName">
                                OR M_ITEM_LANG.ITEM_NAME ${@fw.common.util.SearchModeUtil@getSql("2","keyword")}
                            </if>
                            <if test="1 == catSelectSearchCond.supplierName">
                                OR M_SUPPLIER_LANG.SUP_ABBR_NAME ${@fw.common.util.SearchModeUtil@getSql("2","keyword")}
                            </if>
                            <if test="1 == catSelectSearchCond.katashiki">
                                OR M_ITEM.KATASHIKI ${@fw.common.util.SearchModeUtil@getSql("2","keyword")}
                            </if>
                            <if test="1 == catSelectSearchCond.manufactName">
                                OR M_MANUFACT_LANG.MANUFACT_NAME ${@fw.common.util.SearchModeUtil@getSql("2","keyword")}
                            </if>
                            <if test="1 == catSelectSearchCond.itemClassName">
                                OR ITEM_CLASS_LANG_L.ITEM_CLASS_NAME ${@fw.common.util.SearchModeUtil@getSql("2","keyword")}
                                OR ITEM_CLASS_LANG_M.ITEM_CLASS_NAME ${@fw.common.util.SearchModeUtil@getSql("2","keyword")}
                                OR ITEM_CLASS_LANG_S.ITEM_CLASS_NAME ${@fw.common.util.SearchModeUtil@getSql("2","keyword")}
                            </if>
                            )
                        </foreach>
                        )
                    </foreach>
                </if>
            </where>
            ORDER BY ${searchPath.searchCondition.columnOrder.columnOrder()}
        </select>

    <!--品名分類取得する -->
    <select id="searchItemClass" parameterType="fw.domain.mst.material.material.PriceArticleIdentify" resultType="fw.domain.mst.material.itemclass.ItemClass">
           SELECT  M_ITEM_CLASS.ITEM_CLASS_L as "itemClassL",
                   M_ITEM_CLASS.ITEM_CLASS_M as "itemClassM",
                   M_ITEM_CLASS.ITEM_CLASS_S as "itemClassS",
                   M_ITEM_CLASS.ITEM_CLASS_IND as "itemClassInd"
            FROM   M_ITEM
            INNER JOIN M_ITEM_CLASS
            ON M_ITEM_CLASS.Item_Class_l = M_ITEM.Item_Class_l
            AND M_ITEM_CLASS.Item_Class_m = M_ITEM.Item_Class_m
            AND M_ITEM_CLASS.Item_Class_s = M_ITEM.Item_Class_s
            WHERE (M_ITEM.COMPANY_CD = #{buyerCompanyCd}
               OR M_ITEM.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
            AND M_ITEM.ITEM_CD = #{itemCd}
    </select>

        <!--品名ソートする一覧のキーを取得する-->
         <select id ="listSortKeyIdentityPriceArticle" resultType="fw.domain.mst.material.material.PriceArticleIdentify">
           SELECT  M_PUR_PRICE.ITEM_CD as "itemCd",
                   M_PUR_PRICE.BUYER_COMPANY_CD as "buyerCompanyCd",
                   M_PUR_PRICE.BUYER_SECTION_CD as "buyerSectionCd",
                   M_PUR_PRICE.SUP_CD as "supCd",
                   M_PUR_PRICE.VALID_START_DATE as "validStartDate",
                   M_PUR_PRICE.VALID_END_DATE as "validEndDate"
            FROM   M_PUR_PRICE
            INNER JOIN M_SUPPLIER ON
                      M_SUPPLIER.SUP_CD = M_PUR_PRICE.SUP_CD
                  AND (M_SUPPLIER.COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
                       OR
                       M_SUPPLIER.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
                  AND M_SUPPLIER.TERM_FLG = '0'
                  AND M_SUPPLIER.VALID_START_DATE &lt;= '${@fw.common.util.AppUtil@getSysDate()}'
                  AND M_SUPPLIER.VALID_END_DATE >= '${@fw.common.util.AppUtil@getSysDate()}'
            LEFT JOIN M_PUR_PRICE_DSP_AUTH
            ON     M_PUR_PRICE.BUYER_COMPANY_CD = M_PUR_PRICE_DSP_AUTH.BUYER_COMPANY_CD
                   AND M_PUR_PRICE.BUYER_SECTION_CD = M_PUR_PRICE_DSP_AUTH.BUYER_SECTION_CD
                   AND M_PUR_PRICE.ITEM_CD = M_PUR_PRICE_DSP_AUTH.ITEM_CD
                   AND M_PUR_PRICE.SUP_CD = M_PUR_PRICE_DSP_AUTH.SUP_CD
                   AND M_PUR_PRICE.VALID_START_DATE = M_PUR_PRICE_DSP_AUTH.VALID_START_DATE
                   AND M_PUR_PRICE.VALID_END_DATE = M_PUR_PRICE_DSP_AUTH.VALID_END_DATE
                   AND (M_PUR_PRICE_DSP_AUTH.REQ_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                   OR M_PUR_PRICE_DSP_AUTH.REQ_COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}' )
                   AND (M_PUR_PRICE_DSP_AUTH.REQ_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                   OR M_PUR_PRICE_DSP_AUTH.REQ_SECTION_PLACE_CD = 'ALL')
            LEFT JOIN M_ITEM
            ON    M_ITEM.ITEM_CD = M_PUR_PRICE.ITEM_CD
                  AND (M_ITEM.COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
                   OR M_ITEM.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
            LEFT JOIN M_ITEM_LANG ON M_ITEM.ITEM_CD = M_ITEM_LANG.ITEM_CD
                  AND M_ITEM_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
                  AND M_ITEM.COMPANY_CD = M_ITEM_LANG.COMPANY_CD
            LEFT JOIN M_ITEM_CLASS
            ON    M_ITEM.ITEM_CLASS_L = M_ITEM_CLASS.ITEM_CLASS_L
                   AND M_ITEM.ITEM_CLASS_M = M_ITEM_CLASS.ITEM_CLASS_M
                   AND M_ITEM.ITEM_CLASS_S = M_ITEM_CLASS.ITEM_CLASS_S
                   AND M_ITEM_CLASS.TERM_FLG = '0'
            WHERE
             (M_PUR_PRICE.SUP_CD ,M_PUR_PRICE.ITEM_CD,M_PUR_PRICE.VALID_START_DATE,M_PUR_PRICE.VALID_END_DATE,M_PUR_PRICE.BUYER_COMPANY_CD,M_PUR_PRICE.BUYER_SECTION_CD) IN
             <foreach collection="allKeyList" item="keyList"  open="(" separator="," close=")">
                 (#{keyList.supCd},#{keyList.itemCd},#{keyList.validStartDate},#{keyList.validEndDate},#{keyList.buyerCompanyCd},#{keyList.buyerSectionCd})
            </foreach>
            ORDER BY ${searchCondition.columnOrder.columnOrder()}
        </select>

        <resultMap type="fw.domain.mst.material.material.PriceArticle" id="PriceArticle_Map">
           <result column="M_PUR_PRICE_BUYER_COMPANY_CD" property="priceArticleIdentify.buyerCompanyCd"/>
           <result column="M_PUR_PRICE_BUYER_SECTION_CD" property="priceArticleIdentify.buyerSectionCd"/>
           <result column="M_PUR_PRICE_CURRENCY_CD" property="supplierFrom.currency.currencyCd"/>
           <result column="CONSUMPT_IND" property="taxCalculationInd.consumptInd.consumptInd"/>
           <result column="VALIDSTARTDATE" property="priceArticleIdentify.validStartDate"/>
           <result column="VALIDENDDATE" property="priceArticleIdentify.validEndDate"/>
           <result column="BUYER_SECTION_CD" property="buySection.buySection.sectionCd"/>
           <result column="BUYER_COMPANY_CD" property="buySection.buySection.company.companyCd"/>
           <result column="TAX_IND" property="taxCalculationInd.taxInd.taxInd"/>
           <result column="CONSUMPT_IND" property="taxCalculationInd.consumptInd.consumptInd"/>
           <result column="SUP_NAME" property="supplierFrom.supplierName.supplierName"/>
           <result column="SUP_ABBR_NAME" property="supplierFrom.supplierName.supplierAbbrName"/>
           <result column="ORDER_LT" property="standardDelivDayCount.standardDelivDayCount.dayCount"/>
           <result column="SECTION_NAME" property="buySection.buySection.sectionName"/>
           <result column="SECTION_PLACE_CD" property="buySection.buySection.sectionPlace.sectionPlaceCd"/>
           <result column="SECTION_PLACE_NAME" property="buySection.buySection.sectionPlace.sectionPlaceName"/>
           <result column="BUYER_USER_ID" property="buyUser.buyUser.userID"/>
           <result column="INSPECT_IND" property="inspectInd.inspectInd"/>
           <result column="MIN_ORDER_VOL" property="minCustVol.minCustVol.vol"/>
        </resultMap>

        <!--品名分類タグのツリーで、品名一覧を取得する-->
        <select id ="listPageItemPriceArticle" parameterType="fw.domain.mst.searchcondition.SearchCondition" resultMap="PriceArticle_Map">
           SELECT M_PUR_PRICE.ITEM_CD as "priceArticleIdentify.itemCd",
                  M_PUR_PRICE.BUYER_COMPANY_CD as "M_PUR_PRICE_BUYER_COMPANY_CD",
                  M_PUR_PRICE.BUYER_SECTION_CD as "M_PUR_PRICE_BUYER_SECTION_CD",
                  M_PUR_PRICE.SUP_CD as "priceArticleIdentify.supCd",
                  M_PUR_PRICE.VALID_START_DATE as "VALIDSTARTDATE",
                  M_PUR_PRICE.VALID_END_DATE as "VALIDENDDATE",
                  M_ITEM.ITEM_CD as "item.itemCd",
                  M_ITEM.ITEM_CLASS_L as "item.itemClass.itemClassL",
                  M_ITEM.ITEM_CLASS_M as "item.itemClass.itemClassM",
                  M_ITEM.ITEM_CLASS_S as "item.itemClass.itemClassS",
                  M_PUR_PRICE.PRICE_REMARKS as "priceRemarks",
                  M_ITEM.KATASHIKI as "item.katashiki",
                  M_ITEM.MANUFACT_CD as "item.manufact.manufactCd",
                  M_PUR_PRICE.CURRENCY_CD as "M_PUR_PRICE_CURRENCY_CD",
                  M_PUR_PRICE.GREEN_FLG as "greenFlg",
                  M_PUR_PRICE.CONSUMPT_IND,
                  M_PUR_PRICE.BUY_PRICE as "buyPrice.amount.amount" ,
                  M_PUR_PRICE.PRICE_LIST_NO,
                  M_PUR_PRICE.REF_URL as "refUrl",
                  M_PUR_PRICE.IMG_FILE as "goodsImage.imgFileData",
                  M_PUR_PRICE.IMG_FILE_NAME as "goodsImage.imgFileName",
                  M_PUR_PRICE.BUYER_USER_ID,
                  M_PUR_PRICE.TAX_IND,
                  M_PUR_PRICE.ORDER_LT,
                  M_PUR_PRICE.INSPECT_IND,
                  M_PUR_PRICE.AUTO_ORDER_FLG as "autoOrderFlag",
                  M_PUR_PRICE.CATALOG_FLG as "catalogFlg",
                  M_PUR_PRICE.MIN_ORDER_VOL,
                  M_PUR_PRICE.BUYER_COMPANY_CD as "item.itemCompanyCd",
                  M_PUR_PRICE.BUYER_COMPANY_CD as "supplierFrom.supCompanyCd",
                  M_ITEM.UNIT_CD as "item.unit.unitCd",
                  M_UNIT_NAME_LANG.UNIT_NAME as "item.unit.unitName",
                  M_PUR_PRICE.PRICE_TYPE as "priceType"
            FROM   M_PUR_PRICE
            INNER JOIN M_SUPPLIER ON
                      M_SUPPLIER.SUP_CD = M_PUR_PRICE.SUP_CD
                  AND (M_SUPPLIER.COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
                       OR
                       M_SUPPLIER.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
                  AND M_SUPPLIER.TERM_FLG = '0'
                  AND M_SUPPLIER.VALID_START_DATE &lt;= '${@fw.common.util.AppUtil@getSysDate()}'
                  AND M_SUPPLIER.VALID_END_DATE >= '${@fw.common.util.AppUtil@getSysDate()}'
            INNER JOIN M_PUR_PRICE_DSP_AUTH
            ON     M_PUR_PRICE.BUYER_COMPANY_CD = M_PUR_PRICE_DSP_AUTH.BUYER_COMPANY_CD
                   AND M_PUR_PRICE.BUYER_SECTION_CD = M_PUR_PRICE_DSP_AUTH.BUYER_SECTION_CD
                   AND M_PUR_PRICE.ITEM_CD = M_PUR_PRICE_DSP_AUTH.ITEM_CD
                   AND M_PUR_PRICE.SUP_CD = M_PUR_PRICE_DSP_AUTH.SUP_CD
                   AND M_PUR_PRICE.VALID_START_DATE = M_PUR_PRICE_DSP_AUTH.VALID_START_DATE
                   AND M_PUR_PRICE.VALID_END_DATE = M_PUR_PRICE_DSP_AUTH.VALID_END_DATE
                   AND (M_PUR_PRICE_DSP_AUTH.REQ_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                   OR M_PUR_PRICE_DSP_AUTH.REQ_COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}' )
                   AND (M_PUR_PRICE_DSP_AUTH.REQ_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                   OR M_PUR_PRICE_DSP_AUTH.REQ_SECTION_PLACE_CD = 'ALL')
            INNER JOIN M_ITEM
            ON    M_ITEM.ITEM_CD = M_PUR_PRICE.ITEM_CD
                  AND (M_ITEM.COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
                   OR M_ITEM.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
                  AND M_ITEM.TERM_FLG = '0'
            LEFT JOIN M_ITEM_LANG ON M_ITEM.ITEM_CD = M_ITEM_LANG.ITEM_CD
                  AND M_ITEM_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
                  AND M_ITEM.COMPANY_CD = M_ITEM_LANG.COMPANY_CD
            LEFT JOIN M_UNIT_NAME_LANG ON
                      M_UNIT_NAME_LANG.UNIT_CD = M_ITEM.UNIT_CD
                  AND M_UNIT_NAME_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
            LEFT JOIN M_ITEM_CLASS ON M_ITEM.ITEM_CLASS_L = M_ITEM_CLASS.ITEM_CLASS_L
                        AND M_ITEM.ITEM_CLASS_M = M_ITEM_CLASS.ITEM_CLASS_M
                        AND M_ITEM.ITEM_CLASS_S = M_ITEM_CLASS.ITEM_CLASS_S
                        AND M_ITEM_CLASS.TERM_FLG = '0'
            WHERE
             (M_PUR_PRICE.SUP_CD ,M_PUR_PRICE.ITEM_CD,M_PUR_PRICE.VALID_START_DATE,M_PUR_PRICE.VALID_END_DATE,M_PUR_PRICE.BUYER_COMPANY_CD,M_PUR_PRICE.BUYER_SECTION_CD) IN
             <foreach collection="page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">
                 (#{keyList.supCd},#{keyList.itemCd},#{keyList.validStartDate},#{keyList.validEndDate},#{keyList.buyerCompanyCd},#{keyList.buyerSectionCd})
            </foreach>
            ORDER BY ${columnOrder.columnOrder()}
        </select>

        <resultMap type="fw.domain.slip.purreq.purreqcatalog.FavoritesTab" id="FavoritesTab_Map">
           <result column="YOURFAVORITES" property="yourFavorites.favoriteFolderName"/>
           <result column="USER_SECTION_IND" property="sectionFavorites.userSectionInd"/>
           <result column="SECTIONFAVORITES" property="sectionFavorites.favoriteFolderName"/>
        </resultMap>

        <!--お気に入りカタログリストを取得する-->
        <select id="listFavoritesCatalog" resultType="fw.domain.slip.purreq.purreqcatalog.FavoritesCatalog">
           SELECT FAVORITE_SEQ as "favoritesSeqNo",
           USER_SECTION_IND as "userSectionInd",
           FAVORITE_FOLDER_NAME as "favoriteFolderName"
           FROM
           T_FAVORITE_CAT
           WHERE USER_SECTION_IND = #{userSectionInd}
           AND REG_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
           AND REG_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}'
           <if test="userSectionInd == 1">
           AND REG_USER_ID =  '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
           </if>
           ORDER BY DSP_ORDER
        </select>

        <select id="countFavoritesCatalog" resultType="int">
           SELECT COUNT(T_FAV_CAT_DTL.ITEM_CD)
           FROM
           T_FAVORITE_CAT T_FAVORITE_CAT
           INNER JOIN T_FAV_CAT_DTL T_FAV_CAT_DTL
           ON T_FAVORITE_CAT.FAVORITE_SEQ=T_FAV_CAT_DTL.FAVORITE_SEQ
           INNER JOIN M_PUR_PRICE
                ON T_FAV_CAT_DTL.BUYER_COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
                AND T_FAV_CAT_DTL.BUYER_SECTION_CD = M_PUR_PRICE.BUYER_SECTION_CD
                AND T_FAV_CAT_DTL.ITEM_CD = M_PUR_PRICE.ITEM_CD
                AND T_FAV_CAT_DTL.SUP_CD = M_PUR_PRICE.SUP_CD
                AND M_PUR_PRICE.VALID_START_DATE &lt;= ${@fw.common.util.AppUtil@getSysDate()}
                AND M_PUR_PRICE.VALID_END_DATE >= ${@fw.common.util.AppUtil@getSysDate()}
                AND M_PUR_PRICE.TERM_FLG = '0'
           INNER JOIN M_SUPPLIER ON
                    M_SUPPLIER.SUP_CD = M_PUR_PRICE.SUP_CD
                AND (M_SUPPLIER.COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
                     OR
                     M_SUPPLIER.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
                AND M_SUPPLIER.TERM_FLG = '0'
                AND M_SUPPLIER.VALID_START_DATE &lt;= '${@fw.common.util.AppUtil@getSysDate()}'
                AND M_SUPPLIER.VALID_END_DATE >= '${@fw.common.util.AppUtil@getSysDate()}'
           WHERE T_FAVORITE_CAT.USER_SECTION_IND = #{userSectionInd}
           AND T_FAVORITE_CAT.FAVORITE_SEQ = #{favoriteSeq}
           AND T_FAVORITE_CAT.REG_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
           AND T_FAVORITE_CAT.REG_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}'
           <if test="userSectionInd == 1">
           AND T_FAVORITE_CAT.REG_USER_ID =  '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
           </if>
        </select>

        <!--お気に入りタグのツリーで、品名一覧のキーリストを取得する-->
        <select id="listKeyIdentityPriceArticleFavorite"
                parameterType="fw.domain.slip.purreq.purreqcatalog.FavoritesCatalog"
                resultType="fw.domain.mst.material.material.PriceArticleIdentify">
            SELECT M_PUR_PRICE.ITEM_CD as "itemCd",
                   M_PUR_PRICE.BUYER_COMPANY_CD as "buyerCompanyCd",
                   M_PUR_PRICE.BUYER_SECTION_CD as "buyerSectionCd",
                   M_PUR_PRICE.SUP_CD as "supCd",
                   M_PUR_PRICE.VALID_START_DATE as "validStartDate",
                   M_PUR_PRICE.VALID_END_DATE as "validEndDate"
              FROM T_FAV_CAT_DTL
              LEFT JOIN T_FAVORITE_CAT
                     ON T_FAV_CAT_DTL.FAVORITE_SEQ = T_FAVORITE_CAT.FAVORITE_SEQ
             INNER JOIN M_PUR_PRICE
                     ON M_PUR_PRICE.BUYER_COMPANY_CD = T_FAV_CAT_DTL.BUYER_COMPANY_CD
                    AND M_PUR_PRICE.BUYER_SECTION_CD = T_FAV_CAT_DTL.BUYER_SECTION_CD
                    AND M_PUR_PRICE.ITEM_CD = T_FAV_CAT_DTL.ITEM_CD
                    AND M_PUR_PRICE.SUP_CD = T_FAV_CAT_DTL.SUP_CD
                    AND M_PUR_PRICE.VALID_START_DATE &lt;= ${@fw.common.util.AppUtil@getSysDate()}
                    AND M_PUR_PRICE.VALID_END_DATE >= ${@fw.common.util.AppUtil@getSysDate()}
                    AND M_PUR_PRICE.TERM_FLG = '0'
                    AND M_PUR_PRICE.CATALOG_IND = '1'
                    AND M_PUR_PRICE.CATALOG_FLG = '0'
                    AND (M_PUR_PRICE.PUR_STOP_FROM >= ${@fw.common.util.AppUtil@getSysDate()}
                    OR M_PUR_PRICE.PUR_STOP_TO &lt;= ${@fw.common.util.AppUtil@getSysDate()}
                    OR (M_PUR_PRICE.PUR_STOP_FROM is null and M_PUR_PRICE.PUR_STOP_TO is null))
                    AND M_PUR_PRICE.VALID_START_DATE &lt;= ${@fw.common.util.AppUtil@getSysDate()}
                    AND M_PUR_PRICE.VALID_END_DATE >= ${@fw.common.util.AppUtil@getSysDate()}
              INNER JOIN M_SUPPLIER ON
                        M_SUPPLIER.SUP_CD = M_PUR_PRICE.SUP_CD
                    AND (M_SUPPLIER.COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
                         OR
                         M_SUPPLIER.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
                    AND M_SUPPLIER.TERM_FLG = '0'
                    AND M_SUPPLIER.VALID_START_DATE &lt;= '${@fw.common.util.AppUtil@getSysDate()}'
                    AND M_SUPPLIER.VALID_END_DATE >= '${@fw.common.util.AppUtil@getSysDate()}'
              INNER JOIN M_ITEM
                      ON M_PUR_PRICE.ITEM_CD = M_ITEM.ITEM_CD
                     AND (M_PUR_PRICE.BUYER_COMPANY_CD = M_ITEM.COMPANY_CD
                      OR M_ITEM.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
                     AND M_ITEM.TERM_FLG = '0'
              WHERE T_FAV_CAT_DTL.FAVORITE_SEQ = #{searchPath.itemClass.itemClassM}
              ORDER BY ${searchPath.searchCondition.columnOrder.columnOrder()}
        </select>

        <!--お気に入りタグのツリーで、品名ソートする一覧のキーを取得する-->
        <select id ="listSortKeyIdentityPriceArticleFavorite"
                  resultType="fw.domain.mst.material.material.PriceArticleIdentify">
            SELECT M_PUR_PRICE.ITEM_CD as "itemCd",
                   M_PUR_PRICE.BUYER_COMPANY_CD as "buyerCompanyCd",
                   M_PUR_PRICE.BUYER_SECTION_CD as "buyerSectionCd",
                   M_PUR_PRICE.SUP_CD as "supCd",
                   M_PUR_PRICE.VALID_START_DATE as "validStartDate",
                   M_PUR_PRICE.VALID_END_DATE as "validEndDate"
              FROM M_PUR_PRICE
              LEFT JOIN T_FAV_CAT_DTL
                     ON M_PUR_PRICE.BUYER_COMPANY_CD = T_FAV_CAT_DTL.BUYER_COMPANY_CD
                    AND M_PUR_PRICE.BUYER_SECTION_CD = T_FAV_CAT_DTL.BUYER_SECTION_CD
                    AND M_PUR_PRICE.ITEM_CD = T_FAV_CAT_DTL.ITEM_CD
                    AND M_PUR_PRICE.SUP_CD = T_FAV_CAT_DTL.SUP_CD
                    AND M_PUR_PRICE.VALID_START_DATE &lt;= ${@fw.common.util.AppUtil@getSysDate()}
                    AND M_PUR_PRICE.VALID_END_DATE >=  ${@fw.common.util.AppUtil@getSysDate()}
                    AND T_FAV_CAT_DTL.FAVORITE_SEQ = #{favoritesCatalog.favoritesSeqNo}
              INNER JOIN M_SUPPLIER ON
                        M_SUPPLIER.SUP_CD = M_PUR_PRICE.SUP_CD
                    AND (M_SUPPLIER.COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
                         OR
                         M_SUPPLIER.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
                    AND M_SUPPLIER.TERM_FLG = '0'
                    AND M_SUPPLIER.VALID_START_DATE &lt;= '${@fw.common.util.AppUtil@getSysDate()}'
                    AND M_SUPPLIER.VALID_END_DATE >= '${@fw.common.util.AppUtil@getSysDate()}'
              LEFT JOIN M_ITEM
                     ON M_ITEM.ITEM_CD = M_PUR_PRICE.ITEM_CD
                    AND (M_ITEM.COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
                     OR M_ITEM.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
              LEFT JOIN M_ITEM_LANG
                     ON M_ITEM_LANG.ITEM_CD = M_PUR_PRICE.ITEM_CD
                    AND (M_ITEM_LANG.COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
                     OR M_ITEM_LANG.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
                    AND M_ITEM_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
              LEFT JOIN M_ITEM_CLASS
                     ON M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM.ITEM_CLASS_L
                    AND M_ITEM_CLASS.ITEM_CLASS_M = M_ITEM.ITEM_CLASS_M
                    AND M_ITEM_CLASS.ITEM_CLASS_S = M_ITEM.ITEM_CLASS_S
             WHERE (M_PUR_PRICE.SUP_CD,M_PUR_PRICE.ITEM_CD,M_PUR_PRICE.VALID_START_DATE,M_PUR_PRICE.VALID_END_DATE,M_PUR_PRICE.BUYER_COMPANY_CD,M_PUR_PRICE.BUYER_SECTION_CD) IN
                <foreach collection="allKeyList" item="keyList"  open="(" separator="," close=")">
                (#{keyList.supCd},#{keyList.itemCd},#{keyList.validStartDate},#{keyList.validEndDate},#{keyList.buyerCompanyCd},#{keyList.buyerSectionCd})
                </foreach>
             ORDER BY ${searchCondition.columnOrder.columnOrder()}
        </select>
         <resultMap type="fw.domain.slip.purreq.purreqcatalog.FavoritesCatalogItem" id="FavoritesCatalogItem_Map">
           <result column="PRICEARTICLE_ITEMCD" property="priceArticle.priceArticleIdentify.itemCd"/>
           <result column="M_PUR_PRICE_BUYER_COMPANY_CD" property="priceArticle.priceArticleIdentify.buyerCompanyCd"/>
           <result column="M_PUR_PRICE_BUYER_SECTION_CD" property="priceArticle.priceArticleIdentify.buyerSectionCd"/>
           <result column="PRICEARTICLE_SUPCD" property="priceArticle.priceArticleIdentify.supCd"/>
           <result column="ITEM_CLASS_L" property="priceArticle.item.itemClass.itemClassL"/>
           <result column="ITEM_CLASS_M" property="priceArticle.item.itemClass.itemClassM"/>
           <result column="ITEM_CLASS_S" property="priceArticle.item.itemClass.itemClassS"/>
           <result column="M_ITEM_MANUFACT_CD" property="priceArticle.item.manufact.manufactCd"/>
           <result column="M_PUR_PRICE_CURRENCY_CD" property="priceArticle.supplierFrom.currency.currencyCd"/>
           <result column="CONSUMPT_IND" property="priceArticle.taxCalculationInd.consumptInd.consumptInd"/>
           <result column="BUY_PRICE" property="priceArticle.buyPrice.amount.amount"/>
           <result column="IMG_FILE" property="priceArticle.goodsImage.imgFileData"/>
           <result column="IMG_FILE_NAME" property="priceArticle.goodsImage.imgFileName"/>
           <result column="VALID_START_DATE" property="priceArticle.priceArticleIdentify.validStartDate"/>
           <result column="VALID_END_DATE" property="priceArticle.priceArticleIdentify.validEndDate"/>
           <result column="BUYER_USER_ID" property="priceArticle.buyUser.buyUser.userID"/>
           <result column="TAX_IND" property="priceArticle.taxCalculationInd.taxInd.taxInd"/>
           <result column="ORDER_LT" property="priceArticle.standardDelivDayCount.standardDelivDayCount.dayCount"/>
           <result column="INSPECT_IND" property="priceArticle.inspectInd.inspectInd"/>
           <result column="MIN_ORDER_VOL" property="priceArticle.minCustVol.minCustVol.vol"/>
           <result column="ITEM_COMPANY_CD" property="priceArticle.item.itemCompanyCd"/>
           <result column="SUP_COMPANY_CD" property="priceArticle.supplierFrom.supCompanyCd"/>
           <result column="UNIT_CD" property="priceArticle.item.unit.unitCd"/>
        </resultMap>

        <!--お気に入りタグのツリーで、品名一覧を取得する-->
        <select id ="listPageItemPriceArticleFavorite"
                parameterType="fw.domain.mst.searchcondition.SearchCondition"
                resultMap="FavoritesCatalogItem_Map">
            SELECT M_PUR_PRICE.ITEM_CD as "PRICEARTICLE_ITEMCD",
                   M_PUR_PRICE.BUYER_COMPANY_CD as "M_PUR_PRICE_BUYER_COMPANY_CD",
                   M_PUR_PRICE.BUYER_SECTION_CD as "M_PUR_PRICE_BUYER_SECTION_CD",
                   M_PUR_PRICE.SUP_CD as "PRICEARTICLE_SUPCD",
                   M_PUR_PRICE.VALID_START_DATE,
                   M_PUR_PRICE.VALID_END_DATE,
                   M_ITEM.ITEM_CD as "priceArticle.item.itemCd",
                   M_PUR_PRICE.PRICE_REMARKS as "priceArticle.priceRemarks",
                   M_ITEM.KATASHIKI as "priceArticle.item.katashiki",
                   M_ITEM.MANUFACT_CD as "M_ITEM_MANUFACT_CD",
                   M_ITEM.ITEM_CLASS_L,
                   M_ITEM.ITEM_CLASS_M,
                   M_ITEM.ITEM_CLASS_S,
                   M_PUR_PRICE.CURRENCY_CD as "M_PUR_PRICE_CURRENCY_CD",
                   M_PUR_PRICE.CONSUMPT_IND,
                   M_PUR_PRICE.BUY_PRICE,
                   M_PUR_PRICE.PRICE_LIST_NO,
                   M_PUR_PRICE.GREEN_FLG as "priceArticle.greenFlg",
                   M_PUR_PRICE.REF_URL as "priceArticle.refUrl",
                   M_PUR_PRICE.IMG_FILE,
                   M_PUR_PRICE.IMG_FILE_NAME,
                   T_FAV_CAT_DTL.FAVORITE_SEQ as "favoriteSeqNo",
                   T_FAV_CAT_DTL.DETAIL_NO as "itemNo",
                   T_FAV_CAT_DTL.REG_DATE as "regDate.dateOfymd",
                   M_PUR_PRICE.BUYER_USER_ID,
                   M_PUR_PRICE.TAX_IND,
                   M_PUR_PRICE.ORDER_LT,
                   M_PUR_PRICE.INSPECT_IND,
                   M_PUR_PRICE.AUTO_ORDER_FLG as "priceArticle.autoOrderFlag",
                   M_PUR_PRICE.CATALOG_FLG as "priceArticle.catalogFlg",
                   M_PUR_PRICE.MIN_ORDER_VOL,
                   M_PUR_PRICE.BUYER_COMPANY_CD as "ITEM_COMPANY_CD",
                   M_PUR_PRICE.BUYER_COMPANY_CD as "SUP_COMPANY_CD",
                   M_ITEM.UNIT_CD,
                   M_PUR_PRICE.PRICE_TYPE as "priceArticle.priceType"
              FROM M_PUR_PRICE
              LEFT JOIN T_FAV_CAT_DTL
                     ON M_PUR_PRICE.BUYER_COMPANY_CD = T_FAV_CAT_DTL.BUYER_COMPANY_CD
                    AND M_PUR_PRICE.BUYER_SECTION_CD = T_FAV_CAT_DTL.BUYER_SECTION_CD
                    AND M_PUR_PRICE.ITEM_CD = T_FAV_CAT_DTL.ITEM_CD
                    AND M_PUR_PRICE.SUP_CD = T_FAV_CAT_DTL.SUP_CD
                    AND M_PUR_PRICE.VALID_START_DATE &lt;= ${@fw.common.util.AppUtil@getSysDate()}
                    AND M_PUR_PRICE.VALID_END_DATE >=  ${@fw.common.util.AppUtil@getSysDate()}
                    AND T_FAV_CAT_DTL.FAVORITE_SEQ = #{favoritesCatalog.favoritesSeqNo}
              INNER JOIN M_SUPPLIER ON
                        M_SUPPLIER.SUP_CD = M_PUR_PRICE.SUP_CD
                    AND (M_SUPPLIER.COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
                         OR
                         M_SUPPLIER.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
                    AND M_SUPPLIER.TERM_FLG = '0'
                    AND M_SUPPLIER.VALID_START_DATE &lt;= '${@fw.common.util.AppUtil@getSysDate()}'
                    AND M_SUPPLIER.VALID_END_DATE >= '${@fw.common.util.AppUtil@getSysDate()}'
              INNER JOIN M_ITEM
                     ON M_ITEM.ITEM_CD = M_PUR_PRICE.ITEM_CD
                    AND (M_ITEM.COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
                     OR M_ITEM.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
                    AND M_ITEM.TERM_FLG = '0'
              LEFT JOIN M_ITEM_LANG
                     ON M_ITEM_LANG.ITEM_CD = M_PUR_PRICE.ITEM_CD
                    AND (M_ITEM_LANG.COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
                     OR M_ITEM_LANG.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
                    AND M_ITEM_LANG.LANGUAGE_IND = '${@fw.security.SecurityUtil@getCompanyUseLanguageIndByEscapeSql()}'
              LEFT JOIN M_ITEM_CLASS
                     ON M_ITEM_CLASS.ITEM_CLASS_L = M_ITEM.ITEM_CLASS_L
                    AND M_ITEM_CLASS.ITEM_CLASS_M = M_ITEM.ITEM_CLASS_M
                    AND M_ITEM_CLASS.ITEM_CLASS_S = M_ITEM.ITEM_CLASS_S
             WHERE (M_PUR_PRICE.SUP_CD,M_PUR_PRICE.ITEM_CD,M_PUR_PRICE.VALID_START_DATE,M_PUR_PRICE.VALID_END_DATE,M_PUR_PRICE.BUYER_COMPANY_CD,M_PUR_PRICE.BUYER_SECTION_CD) IN
                <foreach collection="searchCondition.page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">
                 (#{keyList.supCd},#{keyList.itemCd},#{keyList.validStartDate},#{keyList.validEndDate},#{keyList.buyerCompanyCd},#{keyList.buyerSectionCd})
                </foreach>
             ORDER BY ${searchCondition.columnOrder.columnOrder()}
        </select>

        <!--外部カタログタグのツリーで、品名一覧を取得する-->
        <select id="listPageItemPriceArticleOuterCatalog" parameterType="fw.domain.mst.searchcondition.SearchCondition" resultMap="PriceArticle_Map">
             SELECT  M_PUR_PRICE.ITEM_CD as "priceArticleIdentify.itemCd",
                     M_PUR_PRICE.SUP_CD as "priceArticleIdentify.supCd",
                     M_PUR_PRICE.SUP_CD as "supplierFrom.supCd"
            FROM    M_PUR_PRICE
            LEFT JOIN M_PUR_PRICE_DSP_AUTH
            ON     M_PUR_PRICE.BUYER_COMPANY_CD = M_PUR_PRICE_DSP_AUTH.BUYER_COMPANY_CD
                   AND M_PUR_PRICE.BUYER_SECTION_CD = M_PUR_PRICE_DSP_AUTH.BUYER_SECTION_CD
                   AND M_PUR_PRICE.ITEM_CD = M_PUR_PRICE_DSP_AUTH.ITEM_CD
                   AND M_PUR_PRICE.SUP_CD = M_PUR_PRICE_DSP_AUTH.SUP_CD
                   AND M_PUR_PRICE.VALID_START_DATE = M_PUR_PRICE_DSP_AUTH.VALID_START_DATE
                   AND M_PUR_PRICE.VALID_END_DATE = M_PUR_PRICE_DSP_AUTH.VALID_END_DATE
                   AND (M_PUR_PRICE_DSP_AUTH.REQ_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                   OR M_PUR_PRICE_DSP_AUTH.REQ_COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}' )
                   AND (M_PUR_PRICE_DSP_AUTH.REQ_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                   OR M_PUR_PRICE_DSP_AUTH.REQ_SECTION_PLACE_CD = 'ALL')
            LEFT JOIN M_ITEM
            ON    M_ITEM.ITEM_CD = M_PUR_PRICE.ITEM_CD
                  AND  M_ITEM.COMPANY_CD = M_PUR_PRICE.BUYER_COMPANY_CD
            WHERE
             (M_PUR_PRICE.SUP_CD ,M_PUR_PRICE.ITEM_CD,M_PUR_PRICE.VALID_START_DATE,M_PUR_PRICE.VALID_END_DATE,M_PUR_PRICE.BUYER_COMPANY_CD,M_PUR_PRICE.BUYER_SECTION_CD) IN
             <foreach collection="page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">
                 (#{keyList.supCd},#{keyList.itemCd},#{keyList.validStartDate},#{keyList.validEndDate},#{keyList.buyerCompanyCd},#{keyList.buyerSectionCd})
            </foreach>
            ORDER BY ${columnOrder.columnOrder()}
        </select>

    <!--商品画像を取得する-->
    <select id="searchImage" parameterType="fw.domain.mst.material.material.PriceArticleIdentify" resultType="fw.domain.mst.material.material.PriceArticle">
        SELECT
           IMG_FILE as "goodsImage.imgFileData",
           IMG_FILE_NAME "as goodsImage.imgFileName"
        FROM   M_PUR_PRICE
        <where>
                <if test="@org.apache.commons.lang.StringUtils@isNotBlank(buyerCompanyCd)">
                 AND M_PUR_PRICE.BUYER_COMPANY_CD = #{buyerCompanyCd, jdbcType=VARCHAR}
                 </if>
                 <if test="@org.apache.commons.lang.StringUtils@isNotBlank(buyerSectionCd)">
                  AND M_PUR_PRICE.BUYER_SECTION_CD = #{buyerSectionCd, jdbcType=VARCHAR}
                 </if>
                 <if test="@org.apache.commons.lang.StringUtils@isNotBlank(itemCd)">
                  AND M_PUR_PRICE.ITEM_CD = #{itemCd, jdbcType=VARCHAR}
                 </if>
                  <if test="@org.apache.commons.lang.StringUtils@isNotBlank(supCd)">
                  AND M_PUR_PRICE.SUP_CD = #{supCd, jdbcType=VARCHAR}
                 </if>
                  <if test="@org.apache.commons.lang.StringUtils@isNotBlank(validStartDate)">
                  AND M_PUR_PRICE.VALID_START_DATE = #{validStartDate, jdbcType=VARCHAR}
                 </if>
                 <if test="@org.apache.commons.lang.StringUtils@isNotBlank(validEndDate)">
                  AND M_PUR_PRICE.VALID_END_DATE = #{validEndDate, jdbcType=VARCHAR}
                 </if>
        </where>
    </select>

    <!--最大購入申請番号を取得する-->
    <select id="searchMaxPurAplNo" resultType="int">
        SELECT CASE COUNT(1)
               WHEN 0 THEN 0
               ELSE MAX(PUR_APL_NO) END
        FROM T_PUR_APL
    </select>

    <!--最大購入依頼番号を取得する-->
    <select id="searchMaxPurReqNo" resultType="int">
        SELECT CASE COUNT(1)
               WHEN 0 THEN 0
               ELSE MAX(PUR_REQ_NO) END
        FROM T_PUR_REQUEST
    </select>

    <!--購入申請テーブル申請登録SQL-->
    <insert id="insertCatalogPurReqApl" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqApl">
        INSERT INTO T_PUR_APL
        (
            PUR_APL_SEQ,
            PUR_APL_NO,
            PUR_APL_VERSION,
            PUR_APL_STATUS,
            REQ_TYPE_IND,
            CORRECT_CD,
            NEW_FLG,
            NEW_APP_FLG,
            PUR_REQ_FIRST_DATE,
            PUR_REQ_DATE,
            REQ_COMPANY_CD,
            REQ_COMPANY_NAME,
            REQ_SECTION_PLACE_CD,
            REQ_SECTION_PLACE_NAME,
            REQ_SECTION_CD,
            REQ_SECTION_NAME,
            REQ_USER_ID,
            REQ_USER_NAME,
            REQ_USER_EXTENSION_NO,
            REQ_USER_TEL_NO,
            INPUT_COMPANY_CD,
            INPUT_COMPANY_NAME,
            INPUT_SECTION_PLACE_CD,
            INPUT_SECTION_PLACE_NAME,
            INPUT_SECTION_CD,
            INPUT_SECTION_NAME,
            INPUT_USER_ID,
            INPUT_USER_NAME,
            LOAD_COMPANY_CD,
            LOAD_COMPANY_NAME,
            LOAD_SECTION_PLACE_CD,
            LOAD_SECTION_PLACE_NAME,
            LOAD_SECTION_CD,
            LOAD_SECTION_NAME,
            FOR_BOSS_COMMENT,
            FOR_SUPPRIER_COMMENT,
            URGENT_IND,
            PRICE_REQ_FLG,
            TITLE_NAME,
            BUDGET_NO,
            DELIV_PLACE_COMPANY_CD,
            DELIV_PLACE_CD,
            DELIV_PLACE_NAME,
            APP_ROUTE_NO,
            APP_ROUTE_NAME,
            LAST_APP_DATE,
            DELETE_FLG,
            AUTO_DELETE_FLG,
            LAST_UPD_DATE,
            LAST_UPD_COMPANY_CD,
            LAST_UPD_SECTION_CD,
            LAST_UPD_USER_ID,
            REG_DATE,
            REG_COMPANY_CD,
            REG_SECTION_CD,
            REG_USER_ID,
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()}
        ) VALUES (
            #{purAplManagement.catalogIdentify.purAplSeqNo, jdbcType=VARCHAR},
            #{purAplManagement.catalogIdentify.purAplNo.purAplNo, jdbcType=VARCHAR},
            '1',
                '01',
            '2',
            '1',
            '1',
                '0',
            ${@fw.common.util.AppUtil@getSysDate()},
            ${@fw.common.util.AppUtil@getSysDate()},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            #{purAplManagement.reqUser.reqUser.section.sectionCd, jdbcType=VARCHAR},
            #{purAplManagement.reqUser.reqUser.section.sectionName, jdbcType=VARCHAR},
            #{purAplManagement.reqUser.reqUser.userID, jdbcType=VARCHAR},
            #{purAplManagement.reqUser.reqUser.userName, jdbcType=VARCHAR},
            #{purAplManagement.reqUser.reqUser.extNo.extensionNo, jdbcType=VARCHAR},
            #{purAplManagement.reqUser.reqUser.externalNo.externalNo, jdbcType=VARCHAR},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            #{purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceCd, jdbcType=VARCHAR},
            #{purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceName, jdbcType=VARCHAR},
            #{purAplManagement.loadSection.loadSection.sectionCd, jdbcType=VARCHAR},
            #{purAplManagement.loadSection.loadSection.sectionName, jdbcType=VARCHAR},
            #{purAplManagement.forAppComment.forAppComment.comment, jdbcType=VARCHAR},
            #{purAplManagement.forSupplierComment.forSupplierComment.comment, jdbcType=VARCHAR},
            #{purAplManagement.urgentInd.urgentInd, jdbcType=VARCHAR},
            '0',
            #{purAplManagement.titleName.titleName, jdbcType=VARCHAR},
            #{purAplManagement.budgetNumber.budgetNumber, jdbcType=VARCHAR},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            #{purAplManagement.delivPlace.delivPlaceCd, jdbcType=VARCHAR},
            #{purAplManagement.delivPlace.delivPlaceName, jdbcType=VARCHAR},
            #{application.approute.appRouteNo, jdbcType=VARCHAR},
            #{application.approute.appRouteName, jdbcType=VARCHAR},
                NULL,
            '0',
            '0',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
             ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("purAplManagement.editExtItem.")}
        )
    </insert>

    <!--新規からの場合,購入申請テーブル一時保存登録SQL-->
    <insert id="insertCatalogPurReqAplForTempSave" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqApl">
        INSERT INTO T_PUR_APL
        (
            PUR_APL_SEQ,
            PUR_APL_NO,
            PUR_APL_VERSION,
            PUR_APL_STATUS,
            REQ_TYPE_IND,
            CORRECT_CD,
            NEW_FLG,
            NEW_APP_FLG,
            REQ_COMPANY_CD,
            REQ_COMPANY_NAME,
            REQ_SECTION_PLACE_CD,
            REQ_SECTION_PLACE_NAME,
            REQ_SECTION_CD,
            REQ_SECTION_NAME,
            REQ_USER_ID,
            REQ_USER_NAME,
            REQ_USER_EXTENSION_NO,
            REQ_USER_TEL_NO,
            INPUT_COMPANY_CD,
            INPUT_COMPANY_NAME,
            INPUT_SECTION_PLACE_CD,
            INPUT_SECTION_PLACE_NAME,
            INPUT_SECTION_CD,
            INPUT_SECTION_NAME,
            INPUT_USER_ID,
            INPUT_USER_NAME,
            LOAD_COMPANY_CD,
            LOAD_COMPANY_NAME,
            LOAD_SECTION_PLACE_CD,
            LOAD_SECTION_PLACE_NAME,
            LOAD_SECTION_CD,
            LOAD_SECTION_NAME,
            FOR_BOSS_COMMENT,
            FOR_SUPPRIER_COMMENT,
            URGENT_IND,
            PRICE_REQ_FLG,
            TITLE_NAME,
            BUDGET_NO,
            DELIV_PLACE_COMPANY_CD,
            DELIV_PLACE_CD,
            DELIV_PLACE_NAME,
            APP_ROUTE_NO,
            APP_ROUTE_NAME,
            DELETE_FLG,
            AUTO_DELETE_FLG,
            LAST_UPD_DATE,
            LAST_UPD_COMPANY_CD,
            LAST_UPD_SECTION_CD,
            LAST_UPD_USER_ID,
            REG_DATE,
            REG_COMPANY_CD,
            REG_SECTION_CD,
            REG_USER_ID,
            PUR_REQ_FIRST_DATE,
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()}
        ) VALUES (
            #{purAplManagement.catalogIdentify.purAplSeqNo, jdbcType=VARCHAR},
            #{purAplManagement.catalogIdentify.purAplNo.purAplNo, jdbcType=VARCHAR},
            '1',
            '04',
            '2',
            '1',
            '1',
            '0',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            #{purAplManagement.reqUser.reqUser.section.sectionCd, jdbcType=VARCHAR},
            #{purAplManagement.reqUser.reqUser.section.sectionName, jdbcType=VARCHAR},
            #{purAplManagement.reqUser.reqUser.userID, jdbcType=VARCHAR},
            #{purAplManagement.reqUser.reqUser.userName, jdbcType=VARCHAR},
            #{purAplManagement.reqUser.reqUser.extNo.extensionNo, jdbcType=VARCHAR},
            #{purAplManagement.reqUser.reqUser.externalNo.externalNo, jdbcType=VARCHAR},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            #{purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceCd, jdbcType=VARCHAR},
            #{purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceName, jdbcType=VARCHAR},
            #{purAplManagement.loadSection.loadSection.sectionCd, jdbcType=VARCHAR},
            #{purAplManagement.loadSection.loadSection.sectionName, jdbcType=VARCHAR},
            #{purAplManagement.forAppComment.forAppComment.comment, jdbcType=VARCHAR},
            #{purAplManagement.forSupplierComment.forSupplierComment.comment, jdbcType=VARCHAR},
            #{purAplManagement.urgentInd.urgentInd, jdbcType=VARCHAR},
            '0',
            #{purAplManagement.titleName.titleName, jdbcType=VARCHAR},
            #{purAplManagement.budgetNumber.budgetNumber, jdbcType=VARCHAR},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            #{purAplManagement.delivPlace.delivPlaceCd, jdbcType=VARCHAR},
            #{purAplManagement.delivPlace.delivPlaceName, jdbcType=VARCHAR},
            #{application.approute.appRouteNo, jdbcType=VARCHAR},
            #{application.approute.appRouteName, jdbcType=VARCHAR},
            '0',
            '0',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            '',
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("purAplManagement.editExtItem.")}
        )
    </insert>

    <!--編集からの場合,購入申請テーブル一時保存更新SQL-->
    <update id="updateCatalogPurReqAplForTempSave" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqApl">
        UPDATE T_PUR_APL
        SET
            REQ_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            REQ_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            REQ_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            REQ_SECTION_PLACE_NAME = '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            REQ_SECTION_CD = #{purAplManagement.reqUser.reqUser.section.sectionCd, jdbcType=VARCHAR},
            REQ_SECTION_NAME = #{purAplManagement.reqUser.reqUser.section.sectionName, jdbcType=VARCHAR},
            REQ_USER_ID = #{purAplManagement.reqUser.reqUser.userID, jdbcType=VARCHAR},
            REQ_USER_NAME = #{purAplManagement.reqUser.reqUser.userName, jdbcType=VARCHAR},
            REQ_USER_EXTENSION_NO = #{purAplManagement.reqUser.reqUser.extNo.extensionNo, jdbcType=VARCHAR},
            REQ_USER_TEL_NO = #{purAplManagement.reqUser.reqUser.externalNo.externalNo, jdbcType=VARCHAR},
            INPUT_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            INPUT_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            INPUT_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            INPUT_SECTION_PLACE_NAME = '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            INPUT_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            INPUT_SECTION_NAME = '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',
            INPUT_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            INPUT_USER_NAME = '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',
            LOAD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LOAD_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            LOAD_SECTION_PLACE_CD = #{purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceCd, jdbcType=VARCHAR},
            LOAD_SECTION_PLACE_NAME = #{purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceName, jdbcType=VARCHAR},
            LOAD_SECTION_CD = #{purAplManagement.loadSection.loadSection.sectionCd, jdbcType=VARCHAR},
            LOAD_SECTION_NAME = #{purAplManagement.loadSection.loadSection.sectionName, jdbcType=VARCHAR},
            FOR_BOSS_COMMENT = #{purAplManagement.forAppComment.forAppComment.comment, jdbcType=VARCHAR},
            FOR_SUPPRIER_COMMENT = #{purAplManagement.forSupplierComment.forSupplierComment.comment, jdbcType=VARCHAR},
            URGENT_IND = #{purAplManagement.urgentInd.urgentInd, jdbcType=VARCHAR},
            PRICE_REQ_FLG = '0',
            TITLE_NAME = #{purAplManagement.titleName.titleName, jdbcType=VARCHAR},
            BUDGET_NO = #{purAplManagement.budgetNumber.budgetNumber, jdbcType=VARCHAR},
            DELIV_PLACE_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            DELIV_PLACE_CD = #{purAplManagement.delivPlace.delivPlaceCd, jdbcType=VARCHAR},
            DELIV_PLACE_NAME = #{purAplManagement.delivPlace.delivPlaceName, jdbcType=VARCHAR},
            APP_ROUTE_NO = #{application.approute.appRouteNo, jdbcType=VARCHAR},
            APP_ROUTE_NAME = #{application.approute.appRouteName, jdbcType=VARCHAR},
            DELETE_FLG = '0',
            AUTO_DELETE_FLG = '0',
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            ${@ps.common.util.ItemSettingUtil@getItemSettingUpdateValueSQL("purAplManagement.editExtItem.")}
        WHERE
            PUR_APL_SEQ = #{purAplManagement.catalogIdentify.purAplSeqNo}
    </update>

    <!--購入依頼テーブル削除SQL-->
    <delete id="deleteCatalogPurReq" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReq">
        DELETE FROM T_PUR_REQUEST
        WHERE
            PUR_REQ_SEQ = #{purReqSeq}
    </delete>

    <!--購入依頼番号の取得-->
    <select id="searchDelPurReqNo" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReq" resultType="String">
        SELECT PUR_REQ_NO
        FROM   T_PUR_REQUEST
        WHERE
            PUR_REQ_SEQ = #{purReqSeq}
    </select>

    <!--購入依頼テーブル登録SQL-->
    <insert id="insertCatalogPurReq">
        INSERT INTO T_PUR_REQUEST
        (
            PUR_REQ_SEQ,
            PUR_REQ_NO,
            PUR_REQ_VERSION,
            PUR_APL_NO,
            PUR_REQ_STATUS,
            CORRECT_CD,
            NEW_FLG,
            NEW_APP_FLG,
            PUR_APL_SEQ,
            BUYER_COMPANY_CD,
            BUYER_COMPANY_NAME,
            BUYER_SECTION_PLACE_CD,
            BUYER_SECTION_PLACE_NAME,
            BUYER_SECTION_CD,
            BUYER_SECTION_NAME,
            BUYER_USER_ID,
            BUYER_USER_NAME,
            RECEIVE_COMPANY_CD,
            RECEIVE_COMPANY_NAME,
            RECEIVE_SECTION_PLACE_CD,
            RECEIVE_SECTION_PLACE_NAME,
            RECEIVE_SECTION_CD,
            RECEIVE_SECTION_NAME,
            AUTO_ORDER_FLG,
            PRICE_REG_FLG,
            INSPECT_IND,
            ITEM_CLASS_L,
            ITEM_CLASS_L_NAME,
            ITEM_CLASS_M,
            ITEM_CLASS_M_NAME,
            ITEM_CLASS_S,
            ITEM_CLASS_S_NAME,
            ITEM_COMPANY_CD,
            ITEM_CD,
            ITEM_NAME,
            KATASHIKI,
            MANUFACT_CD,
            MANUFACT_NAME,
            SUBJECT_COMPANY_CD,
            SUBJECT_CD,
            SUBJECT_NAME,
            SUP_COMPANY_CD,
            SUP_CD,
            SUP_NAME,
            SUP_ABBR_NAME,
            REQ_DELIV_DATE,
            CURRENCY_CD,
            TAX_IND,
            CONSUMPT_IND,
            TAX_RATE,
            REQ_VOL,
            UNIT_CD,
            UNIT_NAME,
            UNIT_PRICE,
            REQ_AMOUNT,
            CONSUMPT_AMOUNT,
            TOTAL_AMOUNT,
            PUR_REQ_CNV_CURRENCY_CD,
            PUR_REQ_CNV_RATE,
            PUR_REQ_CNV_AMOUNT,
            APP_ROUTE_NO,
            APP_ROUTE_NAME,
            DELETE_FLG,
            AUTO_DELETE_FLG,
            LAST_UPD_DATE,
            LAST_UPD_COMPANY_CD,
            LAST_UPD_SECTION_CD,
            LAST_UPD_USER_ID,
            REG_DATE,
            REG_COMPANY_CD,
            REG_SECTION_CD,
            REG_USER_ID,
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()}
        ) VALUES (
            #{catalogPurReq.purReqSeq},
            #{catalogPurReq.purReqNo.purReqNo, jdbcType=VARCHAR},
            '1',
            #{catalogPurReqApl.purAplManagement.catalogIdentify.purAplNo.purAplNo, jdbcType=VARCHAR},
                '01',
            #{catalogPurReq.correctCd},
            '1',
                '0',
            #{catalogPurReqApl.purAplManagement.catalogIdentify.purAplSeqNo, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.company.companyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.company.companyName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.sectionPlace.sectionPlaceCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.sectionPlace.sectionPlaceName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.sectionCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.sectionName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.userID, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.userName, jdbcType=VARCHAR},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.section.sectionCd, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.section.sectionName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.autoOrderFlag, jdbcType=VARCHAR},
            #{catalogPurReq.priceCreateFlg.priceCreateFlg, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.inspectInd.inspectInd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassL, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassNameL, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassM, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassNameM, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassS, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassNameS, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemCompanyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.katashiki, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.manufact.manufactCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.manufact.manufactName, jdbcType=VARCHAR},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            #{catalogPurReq.subject.subjectCd, jdbcType=VARCHAR},
            #{catalogPurReq.subject.subjectName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supCompanyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supplierName.supplierName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supplierName.supplierAbbrName, jdbcType=VARCHAR},
            #{catalogPurReq.hopeDlvEst.hopeDlvEst.dateOfymd, jdbcType=VARCHAR},
            #{catalogPurReq.amountMng.currency.currencyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.taxCalculationInd.taxInd.taxInd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.taxCalculationInd.consumptInd.consumptInd, jdbcType=VARCHAR},
            #{catalogPurReq.amountMng.taxRate.taxRate},
            #{catalogPurReq.hopeVol.hopeVol.vol},
            #{catalogPurReq.priceArticle.item.unit.unitCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.unit.unitName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyPrice.amount.amount},
            #{catalogPurReq.reqAmount.amount},
            #{catalogPurReq.amountMng.consumptAmount.consumptAmount.amount},
            #{catalogPurReq.amountMng.totalAmount.totalAmount.amount},
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.section.company.currency.currencyCd, jdbcType=VARCHAR},
            #{catalogPurReq.cnvAmount.rate.rate},
            #{catalogPurReq.cnvAmount.cnvAmount.amount},
            #{catalogPurReqApl.application.approute.appRouteNo, jdbcType=VARCHAR},
            #{catalogPurReqApl.application.approute.appRouteName, jdbcType=VARCHAR},
            '0',
            '0',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("catalogPurReq.editExtItem.")}
        )
    </insert>

        <!--購入依頼テーブル登録SQL-->
    <insert id="insertCatalogPurReqForAppSendBack">
        INSERT INTO T_PUR_REQUEST
        (
            PUR_REQ_SEQ,
            PUR_REQ_NO,
            PUR_REQ_VERSION,
            PUR_APL_NO,
            PUR_REQ_STATUS,
            CORRECT_CD,
            NEW_FLG,
            NEW_APP_FLG,
            PUR_APL_SEQ,
            APP_UNIT_NO,
            BUYER_COMPANY_CD,
            BUYER_COMPANY_NAME,
            BUYER_SECTION_PLACE_CD,
            BUYER_SECTION_PLACE_NAME,
            BUYER_SECTION_CD,
            BUYER_SECTION_NAME,
            BUYER_USER_ID,
            BUYER_USER_NAME,
            RECEIVE_COMPANY_CD,
            RECEIVE_COMPANY_NAME,
            RECEIVE_SECTION_PLACE_CD,
            RECEIVE_SECTION_PLACE_NAME,
            RECEIVE_SECTION_CD,
            RECEIVE_SECTION_NAME,
            AUTO_ORDER_FLG,
            PRICE_REG_FLG,
            INSPECT_IND,
            ITEM_CLASS_L,
            ITEM_CLASS_L_NAME,
            ITEM_CLASS_M,
            ITEM_CLASS_M_NAME,
            ITEM_CLASS_S,
            ITEM_CLASS_S_NAME,
            ITEM_COMPANY_CD,
            ITEM_CD,
            ITEM_NAME,
            KATASHIKI,
            MANUFACT_CD,
            MANUFACT_NAME,
            SUBJECT_COMPANY_CD,
            SUBJECT_CD,
            SUBJECT_NAME,
            SUP_COMPANY_CD,
            SUP_CD,
            SUP_NAME,
            SUP_ABBR_NAME,
            REQ_DELIV_DATE,
            CURRENCY_CD,
            TAX_IND,
            CONSUMPT_IND,
            TAX_RATE,
            REQ_VOL,
            UNIT_CD,
            UNIT_NAME,
            UNIT_PRICE,
            REQ_AMOUNT,
            CONSUMPT_AMOUNT,
            TOTAL_AMOUNT,
            PUR_REQ_CNV_CURRENCY_CD,
            PUR_REQ_CNV_RATE,
            PUR_REQ_CNV_AMOUNT,
            APP_ROUTE_NO,
            APP_ROUTE_NAME,
            DELETE_FLG,
            AUTO_DELETE_FLG,
            LAST_UPD_DATE,
            LAST_UPD_COMPANY_CD,
            LAST_UPD_SECTION_CD,
            LAST_UPD_USER_ID,
            REG_DATE,
            REG_COMPANY_CD,
            REG_SECTION_CD,
            REG_USER_ID,
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()}
        ) VALUES (
            #{catalogPurReq.purReqSeq},
            #{catalogPurReq.purReqNo.purReqNo, jdbcType=VARCHAR},
            #{catalogPurReq.historyNo.historyNo, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.catalogIdentify.purAplNo.purAplNo, jdbcType=VARCHAR},
                '01',
            #{catalogPurReq.correctCd},
            '1',
                '0',
            #{catalogPurReqApl.purAplManagement.catalogIdentify.purAplSeqNo, jdbcType=VARCHAR},
            #{catalogPurReq.appUnitNo, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.company.companyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.company.companyName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.sectionPlace.sectionPlaceCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.sectionPlace.sectionPlaceName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.sectionCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.sectionName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.userID, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.userName, jdbcType=VARCHAR},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.section.sectionCd, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.section.sectionName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.autoOrderFlag, jdbcType=VARCHAR},
            #{catalogPurReq.priceCreateFlg.priceCreateFlg, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.inspectInd.inspectInd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassL, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassNameL, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassM, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassNameM, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassS, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassNameS, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemCompanyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.katashiki, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.manufact.manufactCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.manufact.manufactName, jdbcType=VARCHAR},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            #{catalogPurReq.subject.subjectCd, jdbcType=VARCHAR},
            #{catalogPurReq.subject.subjectName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supCompanyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supplierName.supplierName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supplierName.supplierAbbrName, jdbcType=VARCHAR},
            #{catalogPurReq.hopeDlvEst.hopeDlvEst.dateOfymd, jdbcType=VARCHAR},
            #{catalogPurReq.amountMng.currency.currencyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.taxCalculationInd.taxInd.taxInd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.taxCalculationInd.consumptInd.consumptInd, jdbcType=VARCHAR},
            #{catalogPurReq.amountMng.taxRate.taxRate},
            #{catalogPurReq.hopeVol.hopeVol.vol},
            #{catalogPurReq.priceArticle.item.unit.unitCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.unit.unitName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyPrice.amount.amount},
            #{catalogPurReq.reqAmount.amount},
            #{catalogPurReq.amountMng.consumptAmount.consumptAmount.amount},
            #{catalogPurReq.amountMng.totalAmount.totalAmount.amount},
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.section.company.currency.currencyCd, jdbcType=VARCHAR},
            #{catalogPurReq.cnvAmount.rate.rate},
            #{catalogPurReq.cnvAmount.cnvAmount.amount},
            #{catalogPurReqApl.application.approute.appRouteNo, jdbcType=VARCHAR},
            #{catalogPurReqApl.application.approute.appRouteName, jdbcType=VARCHAR},
            '0',
            '0',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("catalogPurReq.editExtItem.")}
        )
    </insert>

    <!--購入依頼テーブル一時保存登録SQL-->
    <insert id="insertCatalogPurReqForTempSave">
        INSERT INTO T_PUR_REQUEST
        (
            PUR_REQ_SEQ,
            PUR_REQ_NO,
            PUR_REQ_VERSION,
            PUR_APL_NO,
            PUR_REQ_STATUS,
            CORRECT_CD,
            NEW_FLG,
            NEW_APP_FLG,
            PUR_APL_SEQ,
            BUYER_COMPANY_CD,
            BUYER_COMPANY_NAME,
            BUYER_SECTION_PLACE_CD,
            BUYER_SECTION_PLACE_NAME,
            BUYER_SECTION_CD,
            BUYER_SECTION_NAME,
            BUYER_USER_ID,
            BUYER_USER_NAME,
            RECEIVE_COMPANY_CD,
            RECEIVE_COMPANY_NAME,
            RECEIVE_SECTION_PLACE_CD,
            RECEIVE_SECTION_PLACE_NAME,
            RECEIVE_SECTION_CD,
            RECEIVE_SECTION_NAME,
            AUTO_ORDER_FLG,
            PRICE_REG_FLG,
            INSPECT_IND,
            ITEM_CLASS_L,
            ITEM_CLASS_L_NAME,
            ITEM_CLASS_M,
            ITEM_CLASS_M_NAME,
            ITEM_CLASS_S,
            ITEM_CLASS_S_NAME,
            ITEM_COMPANY_CD,
            ITEM_CD,
            ITEM_NAME,
            KATASHIKI,
            MANUFACT_CD,
            MANUFACT_NAME,
            SUBJECT_COMPANY_CD,
            SUBJECT_CD,
            SUBJECT_NAME,
            SUP_COMPANY_CD,
            SUP_CD,
            SUP_NAME,
            SUP_ABBR_NAME,
            REQ_DELIV_DATE,
            CURRENCY_CD,
            TAX_IND,
            CONSUMPT_IND,
            TAX_RATE,
            REQ_VOL,
            UNIT_CD,
            UNIT_NAME,
            UNIT_PRICE,
            REQ_AMOUNT,
            CONSUMPT_AMOUNT,
            TOTAL_AMOUNT,
            PUR_REQ_CNV_CURRENCY_CD,
            PUR_REQ_CNV_RATE,
            PUR_REQ_CNV_AMOUNT,
            APP_ROUTE_NO,
            APP_ROUTE_NAME,
            DELETE_FLG,
            AUTO_DELETE_FLG,
            LAST_UPD_DATE,
            LAST_UPD_COMPANY_CD,
            LAST_UPD_SECTION_CD,
            LAST_UPD_USER_ID,
            REG_DATE,
            REG_COMPANY_CD,
            REG_SECTION_CD,
            REG_USER_ID,
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()}
        ) VALUES (
            #{catalogPurReq.purReqSeq},
            #{catalogPurReq.purReqNo.purReqNo, jdbcType=VARCHAR},
            '1',
            #{catalogPurReqApl.purAplManagement.catalogIdentify.purAplNo.purAplNo, jdbcType=VARCHAR},
            '04',
             #{catalogPurReq.correctCd},
            '1',
            '0',
            #{catalogPurReqApl.purAplManagement.catalogIdentify.purAplSeqNo, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.company.companyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.company.companyName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.sectionPlace.sectionPlaceCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.sectionPlace.sectionPlaceName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.sectionCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.section.sectionName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.userID, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyUser.buyUser.userName, jdbcType=VARCHAR},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.section.sectionCd, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.section.sectionName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.autoOrderFlag, jdbcType=VARCHAR},
            #{catalogPurReq.priceCreateFlg.priceCreateFlg, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.inspectInd.inspectInd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassL, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassNameL, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassM, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassNameM, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassS, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassNameS, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemCompanyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.katashiki, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.manufact.manufactCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.manufact.manufactName, jdbcType=VARCHAR},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            #{catalogPurReq.subject.subjectCd, jdbcType=VARCHAR},
            #{catalogPurReq.subject.subjectName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supCompanyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supplierName.supplierName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supplierName.supplierAbbrName, jdbcType=VARCHAR},
            #{catalogPurReq.hopeDlvEst.hopeDlvEst.dateOfymd, jdbcType=VARCHAR},
            #{catalogPurReq.amountMng.currency.currencyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.taxCalculationInd.taxInd.taxInd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.taxCalculationInd.consumptInd.consumptInd, jdbcType=VARCHAR},
            #{catalogPurReq.amountMng.taxRate.taxRate},
            #{catalogPurReq.hopeVol.hopeVol.vol},
            #{catalogPurReq.priceArticle.item.unit.unitCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.unit.unitName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyPrice.amount.amount},
            #{catalogPurReq.reqAmount.amount},
            #{catalogPurReq.amountMng.consumptAmount.consumptAmount.amount},
            #{catalogPurReq.amountMng.totalAmount.totalAmount.amount},
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.section.company.currency.currencyCd, jdbcType=VARCHAR},
            #{catalogPurReq.cnvAmount.rate.rate},
            #{catalogPurReq.cnvAmount.cnvAmount.amount},
            #{catalogPurReqApl.application.approute.appRouteNo, jdbcType=VARCHAR},
            #{catalogPurReqApl.application.approute.appRouteName, jdbcType=VARCHAR},
            '0',
            '0',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("catalogPurReq.editExtItem.")}
        )
    </insert>

     <!--編集からの場合,購入依頼入力のヘッダの表示情報の取得SQL-->
    <resultMap type="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqApl" id="CatalogPurReqApl_Map">
           <result column="PUR_APL_SEQ" property="purAplManagement.catalogIdentify.purAplSeqNo"/>
           <result column="PUR_APL_NO" property="purAplManagement.catalogIdentify.purAplNo.purAplNo"/>
           <result column="PUR_REQ_DATE" property="purAplManagement.purReqDate.purReqDate.reqDate.dateOfymd"/>
           <result column="URGENT_IND" property="purAplManagement.urgentInd.urgentInd"/>
           <result column="TITLE_NAME" property="purAplManagement.titleName.titleName"/>
           <result column="REQ_COMPANY_CD" property="purAplManagement.reqUser.reqUser.section.company.companyCd"/>
           <result column="REQ_SECTION_CD" property="purAplManagement.reqUser.reqUser.section.sectionCd"/>
           <result column="REQ_SECTION_NAME" property="purAplManagement.reqUser.reqUser.section.sectionName"/>
           <result column="REQ_USER_EXTENSION_NO" property="purAplManagement.reqUser.reqUser.extNo.extensionNo"/>
           <result column="REQ_USER_TEL_NO" property="purAplManagement.reqUser.reqUser.externalNo.externalNo"/>
           <result column="REQ_USER_ID" property="purAplManagement.reqUser.reqUser.userID"/>
           <result column="REQ_USER_NAME" property="purAplManagement.reqUser.reqUser.userName"/>
           <result column="LOAD_COMPANY_CD" property="purAplManagement.loadSection.loadSection.company.companyCd"/>
           <result column="LOAD_COMPANY_NAME" property="purAplManagement.loadSection.loadSection.company.companyName"/>
           <result column="LOAD_SECTION_PLACE_CD" property="purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceCd"/>
           <result column="LOAD_SECTION_PLACE_NAME" property="purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceName"/>
           <result column="BUDGET_NO" property="purAplManagement.budgetNumber.budgetNumber"/>
           <result column="FOR_BOSS_COMMENT" property="purAplManagement.forAppComment.forAppComment.comment"/>
           <result column="FOR_SUPPRIER_COMMENT" property="purAplManagement.forSupplierComment.forSupplierComment.comment"/>
           <result column="PUR_APL_STATUS" property="purAplManagement.purReqStatus.status"/>
           <result column="INPUT_SECTION_CD" property="purAplManagement.inputUser.inputUser.section.sectionCd"/>
           <result column="INPUT_COMPANY_CD" property="purAplManagement.inputUser.inputUser.section.company.companyCd"/>
           <result column="INPUT_SECTION_NAME" property="purAplManagement.inputUser.inputUser.section.sectionName"/>
           <result column="INPUT_USER_ID" property="purAplManagement.inputUser.inputUser.userID"/>
           <result column="INPUT_USER_NAME" property="purAplManagement.inputUser.inputUser.userName"/>
           <result column="APP_ROUTE_NO" property="application.approute.appRouteNo"/>
           <result column="APP_ROUTE_NAME" property="application.approute.appRouteName"/>
           <result column="PUR_APL_STATUS" property="purAplManagement.purReqStatus.status"/>
           <result column="DELIV_PLACE_CD" property="purAplManagement.delivPlace.delivPlaceCd"/>
           <result column="DELIV_PLACE_NAME" property="purAplManagement.delivPlace.delivPlaceName"/>
           <result column="LOAD_SECTION_CD" property="purAplManagement.loadSection.loadSection.sectionCd"/>
           <result column="LOAD_SECTION_NAME" property="purAplManagement.loadSection.loadSection.sectionName"/>
           <result column="APL_AMOUNT" property="purAplManagement.aplAmount.amount"/>
           <result column="PUR_REQ_CNV_CURRENCY_CD" property="purAplManagement.reqUser.reqUser.section.company.currency.currencyCd"/>
           <result column="LAST_UPD_DATE" property="purAplManagement.catalogIdentify.lastUpdDate"/>
           <result column="BACK_APP_COMMENTS" property="purAplManagement.appManagement.backApp.backAppReason.backReason.comment"/>

        <result column="EXT_TXT_1" property="purAplManagement.editExtItem.editTextExtItem.textExtItem1.value" />
        <result column="EXT_TXT_2" property="purAplManagement.editExtItem.editTextExtItem.textExtItem2.value" />
        <result column="EXT_TXT_3" property="purAplManagement.editExtItem.editTextExtItem.textExtItem3.value" />
        <result column="EXT_TXT_4" property="purAplManagement.editExtItem.editTextExtItem.textExtItem4.value" />
        <result column="EXT_TXT_5" property="purAplManagement.editExtItem.editTextExtItem.textExtItem5.value" />
        <result column="EXT_TXT_6" property="purAplManagement.editExtItem.editTextExtItem.textExtItem6.value" />
        <result column="EXT_TXT_7" property="purAplManagement.editExtItem.editTextExtItem.textExtItem7.value" />
        <result column="EXT_TXT_8" property="purAplManagement.editExtItem.editTextExtItem.textExtItem8.value" />
        <result column="EXT_TXT_9" property="purAplManagement.editExtItem.editTextExtItem.textExtItem9.value" />
        <result column="EXT_TXT_10" property="purAplManagement.editExtItem.editTextExtItem.textExtItem10.value" />
        <result column="EXT_AREA_1" property="purAplManagement.editExtItem.editAreaExtItem.arrayExtItem1.value" />
        <result column="EXT_AREA_2" property="purAplManagement.editExtItem.editAreaExtItem.arrayExtItem2.value" />
        <result column="EXT_AREA_3" property="purAplManagement.editExtItem.editAreaExtItem.arrayExtItem3.value" />
        <result column="EXT_AREA_4" property="purAplManagement.editExtItem.editAreaExtItem.arrayExtItem4.value" />
        <result column="EXT_AREA_5" property="purAplManagement.editExtItem.editAreaExtItem.arrayExtItem5.value" />
        <result column="EXT_DATE_1" property="purAplManagement.editExtItem.editDateExtItem.dateExtItem1.dateType.dateOfymd" />
        <result column="EXT_DATE_2" property="purAplManagement.editExtItem.editDateExtItem.dateExtItem2.dateType.dateOfymd" />
        <result column="EXT_DATE_3" property="purAplManagement.editExtItem.editDateExtItem.dateExtItem3.dateType.dateOfymd" />
        <result column="EXT_DATE_4" property="purAplManagement.editExtItem.editDateExtItem.dateExtItem4.dateType.dateOfymd" />
        <result column="EXT_DATE_5" property="purAplManagement.editExtItem.editDateExtItem.dateExtItem5.dateType.dateOfymd" />
        <result column="EXT_INT_1" property="purAplManagement.editExtItem.editIntExtItem.intExtItem1.value" />
        <result column="EXT_INT_2" property="purAplManagement.editExtItem.editIntExtItem.intExtItem2.value" />
        <result column="EXT_INT_3" property="purAplManagement.editExtItem.editIntExtItem.intExtItem3.value" />
        <result column="EXT_INT_4" property="purAplManagement.editExtItem.editIntExtItem.intExtItem4.value" />
        <result column="EXT_INT_5" property="purAplManagement.editExtItem.editIntExtItem.intExtItem5.value" />
        <result column="EXT_INT_6" property="purAplManagement.editExtItem.editIntExtItem.intExtItem6.value" />
        <result column="EXT_INT_7" property="purAplManagement.editExtItem.editIntExtItem.intExtItem7.value" />
        <result column="EXT_INT_8" property="purAplManagement.editExtItem.editIntExtItem.intExtItem8.value" />
        <result column="EXT_INT_9" property="purAplManagement.editExtItem.editIntExtItem.intExtItem9.value" />
        <result column="EXT_INT_10" property="purAplManagement.editExtItem.editIntExtItem.intExtItem10.value" />
        <result column="EXT_DEC_1" property="purAplManagement.editExtItem.editDecExtItem.decExtItem1.value" />
        <result column="EXT_DEC_2" property="purAplManagement.editExtItem.editDecExtItem.decExtItem2.value" />
        <result column="EXT_DEC_3" property="purAplManagement.editExtItem.editDecExtItem.decExtItem3.value" />
        <result column="EXT_DEC_4" property="purAplManagement.editExtItem.editDecExtItem.decExtItem4.value" />
        <result column="EXT_DEC_5" property="purAplManagement.editExtItem.editDecExtItem.decExtItem5.value" />
        <result column="EXT_SEL_1" property="purAplManagement.editExtItem.editSelExtItem.selExtItem1.value" />
        <result column="EXT_SEL_2" property="purAplManagement.editExtItem.editSelExtItem.selExtItem2.value" />
        <result column="EXT_SEL_3" property="purAplManagement.editExtItem.editSelExtItem.selExtItem3.value" />
        <result column="EXT_SEL_4" property="purAplManagement.editExtItem.editSelExtItem.selExtItem4.value" />
        <result column="EXT_SEL_5" property="purAplManagement.editExtItem.editSelExtItem.selExtItem5.value" />
        <result column="EXT_SEL_6" property="purAplManagement.editExtItem.editSelExtItem.selExtItem6.value" />
        <result column="EXT_SEL_7" property="purAplManagement.editExtItem.editSelExtItem.selExtItem7.value" />
        <result column="EXT_SEL_8" property="purAplManagement.editExtItem.editSelExtItem.selExtItem8.value" />
        <result column="EXT_SEL_9" property="purAplManagement.editExtItem.editSelExtItem.selExtItem9.value" />
        <result column="EXT_SEL_10" property="purAplManagement.editExtItem.editSelExtItem.selExtItem10.value" />
        <result column="EXT_CHK_1" property="purAplManagement.editExtItem.editChkExtItem.chkExtItem1.value" />
        <result column="EXT_CHK_2" property="purAplManagement.editExtItem.editChkExtItem.chkExtItem2.value" />
        <result column="EXT_CHK_3" property="purAplManagement.editExtItem.editChkExtItem.chkExtItem3.value" />
        <result column="EXT_CHK_4" property="purAplManagement.editExtItem.editChkExtItem.chkExtItem4.value" />
        <result column="EXT_CHK_5" property="purAplManagement.editExtItem.editChkExtItem.chkExtItem5.value" />
        <result column="EXT_FILE_1" property="purAplManagement.editExtItem.editFileExtItem.fileExtItem1.fileName" />
        <result column="EXT_FILE_2" property="purAplManagement.editExtItem.editFileExtItem.fileExtItem2.fileName" />
        <result column="EXT_FILE_3" property="purAplManagement.editExtItem.editFileExtItem.fileExtItem3.fileName" />
        <result column="EXT_FILE_BINARY_1" property="purAplManagement.editExtItem.editFileExtItem.fileExtItem1.binary"/>
        <result column="EXT_FILE_BINARY_2" property="purAplManagement.editExtItem.editFileExtItem.fileExtItem2.binary"/>
        <result column="EXT_FILE_BINARY_3" property="purAplManagement.editExtItem.editFileExtItem.fileExtItem3.binary"/>
        <result column="EXT_MST_1" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem1.mstKey" />
        <result column="EXT_MST_2" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem2.mstKey" />
        <result column="EXT_MST_3" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem3.mstKey" />
        <result column="EXT_MST_4" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem4.mstKey" />
        <result column="EXT_MST_5" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem5.mstKey" />
        <result column="EXT_MST_6" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem6.mstKey" />
        <result column="EXT_MST_7" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem7.mstKey" />
        <result column="EXT_MST_8" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem8.mstKey" />
        <result column="EXT_MST_NAME_1" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem1.mstName"/>
        <result column="EXT_MST_NAME_2" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem2.mstName"/>
        <result column="EXT_MST_NAME_3" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem3.mstName"/>
        <result column="EXT_MST_NAME_4" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem4.mstName"/>
        <result column="EXT_MST_NAME_5" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem5.mstName"/>
        <result column="EXT_MST_NAME_6" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem6.mstName"/>
        <result column="EXT_MST_NAME_7" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem7.mstName"/>
        <result column="EXT_MST_NAME_8" property="purAplManagement.editExtItem.editMstExtItem.mstExtItem8.mstName"/>
    </resultMap>
    <select id="searchCatalogPurReqHeadForUpdate" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogIdentify" resultMap="CatalogPurReqApl_Map">
        SELECT
             T_PUR_APL.PUR_APL_SEQ,
             T_PUR_APL.PUR_APL_NO,
             T_PUR_APL.PUR_REQ_DATE,
             T_PUR_APL.URGENT_IND,
             T_PUR_APL.TITLE_NAME,
             T_PUR_APL.REQ_COMPANY_CD,
             T_PUR_APL.REQ_SECTION_CD,
             T_PUR_APL.REQ_SECTION_NAME,
             T_PUR_APL.REQ_USER_EXTENSION_NO,
             T_PUR_APL.REQ_USER_TEL_NO,
             T_PUR_APL.REQ_USER_ID,
             T_PUR_APL.REQ_USER_NAME,
             T_PUR_APL.LOAD_COMPANY_CD,
             T_PUR_APL.LOAD_COMPANY_NAME,
             T_PUR_APL.LOAD_SECTION_PLACE_CD,
             T_PUR_APL.LOAD_SECTION_PLACE_NAME,
             T_PUR_APL.LOAD_SECTION_CD,
             T_PUR_APL.LOAD_SECTION_NAME,
             T_PUR_APL.DELIV_PLACE_CD,
             T_PUR_APL.DELIV_PLACE_NAME,
             T_PUR_APL.BUDGET_NO,
             T_PUR_APL.FOR_BOSS_COMMENT,
             T_PUR_APL.FOR_SUPPRIER_COMMENT,
             T_PUR_REQUEST_SUM.PUR_REQ_CNV_CURRENCY_CD,
             T_PUR_APL.APP_ROUTE_NO,
             T_PUR_APL.LAST_UPD_DATE,
             T_PUR_REQUEST_SUM.APL_AMOUNT,
             ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_PUR_APL")}
        FROM T_PUR_APL
        LEFT JOIN
             (SELECT PUR_APL_SEQ, PUR_REQ_CNV_CURRENCY_CD, SUM(PUR_REQ_CNV_AMOUNT) AS APL_AMOUNT FROM T_PUR_REQUEST
             WHERE DELETE_FLG='0' AND NEW_FLG='1' AND CORRECT_CD!='3' GROUP BY PUR_APL_SEQ, PUR_REQ_CNV_CURRENCY_CD) T_PUR_REQUEST_SUM
        ON   (T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST_SUM.PUR_APL_SEQ)
        WHERE T_PUR_APL.PUR_APL_SEQ = #{purAplSeqNo}
        AND   T_PUR_APL.DELETE_FLG = '0'
    </select>

    <!--カタログ購入依頼入力のヘッダ情報を取得する（再申請の場合）-->
    <select id="searchCatalogPurReqHeadForApplyAgain" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogIdentify" resultMap="CatalogPurReqApl_Map">
        SELECT
             T_PUR_APL.PUR_APL_SEQ,
             T_PUR_APL.PUR_APL_NO,
             T_PUR_APL.PUR_REQ_DATE,
             T_PUR_APL.URGENT_IND,
             T_PUR_APL.TITLE_NAME,
             T_PUR_APL.REQ_COMPANY_CD,
             T_PUR_APL.REQ_USER_EXTENSION_NO,
             T_PUR_APL.REQ_USER_TEL_NO,
             T_PUR_APL.REQ_SECTION_CD,
             T_PUR_APL.REQ_SECTION_NAME,
             T_PUR_APL.REQ_USER_ID,
             T_PUR_APL.REQ_USER_NAME,
             T_PUR_APL.FOR_BUYER_COMMENT,
             T_PUR_APL.LOAD_COMPANY_CD,
             T_PUR_APL.LOAD_COMPANY_NAME,
             T_PUR_APL.LOAD_SECTION_PLACE_CD,
             T_PUR_APL.LOAD_SECTION_PLACE_NAME,
             T_PUR_APL.LOAD_SECTION_CD,
             T_PUR_APL.LOAD_SECTION_NAME,
             T_PUR_APL.DELIV_PLACE_CD,
             T_PUR_APL.DELIV_PLACE_NAME,
             T_PUR_APL.BUDGET_NO,
             T_PUR_APL.FOR_BOSS_COMMENT,
             T_PUR_APL.FOR_SUPPRIER_COMMENT,
             T_PUR_APL.PUR_APL_STATUS,
             T_PUR_REQUEST_SUM.PUR_REQ_CNV_CURRENCY_CD,
             T_PUR_APL.APP_ROUTE_NO,
             T_PUR_APL.LAST_UPD_DATE,
             ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_PUR_APL")}
        FROM T_PUR_APL
        LEFT JOIN
             (SELECT PUR_APL_SEQ, PUR_REQ_CNV_CURRENCY_CD FROM T_PUR_REQUEST
             WHERE DELETE_FLG='0' AND NEW_FLG='1' AND CORRECT_CD!='3' GROUP BY PUR_APL_SEQ, PUR_REQ_CNV_CURRENCY_CD) T_PUR_REQUEST_SUM
        ON   (T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST_SUM.PUR_APL_SEQ)
        WHERE T_PUR_APL.PUR_APL_SEQ = #{purAplSeqNo}
        AND   T_PUR_APL.DELETE_FLG = '0'
    </select>

    <!--編集からの場合,購入依頼入力の明細の表示情報の取得SQL-->
        <resultMap type="fw.domain.slip.purreq.purreqcatalog.CatalogPurReq" id="CatalogPurReq_Map">
           <result column="PUR_REQ_VERSION" property="historyNo.historyNo"/>
           <result column="ITEM_COMPANY_CD" property="priceArticle.item.itemCompanyCd"/>
           <result column="ITEM_CLASS_L_NAME" property="priceArticle.item.itemClass.itemClassNameL"/>
           <result column="ITEM_CLASS_M_NAME" property="priceArticle.item.itemClass.itemClassNameM"/>
           <result column="ITEM_CLASS_S_NAME" property="priceArticle.item.itemClass.itemClassNameS"/>
           <result column="ITEM_CLASS_L" property="priceArticle.item.itemClass.itemClassL"/>
           <result column="ITEM_CLASS_M" property="priceArticle.item.itemClass.itemClassM"/>
           <result column="ITEM_CLASS_S" property="priceArticle.item.itemClass.itemClassS"/>
           <result column="SUP_CD" property="priceArticle.supplierFrom.supCd"/>
           <result column="SUP_NAME" property="priceArticle.supplierFrom.supplierName.supplierName"/>
           <result column="SUP_ABBR_NAME" property="priceArticle.supplierFrom.supplierName.supplierAbbrName"/>
           <result column="MANUFACT_CD" property="priceArticle.item.manufact.manufactCd"/>
           <result column="MANUFACT_NAME" property="priceArticle.item.manufact.manufactName"/>
           <result column="INSPECT_IND" property="priceArticle.inspectInd.inspectInd"/>
           <result column="UNIT_PRICE" property="priceArticle.buyPrice.amount.amount"/>
           <result column="UNIT_NAME" property="priceArticle.item.unit.unitName"/>
           <result column="BUYER_COMPANY_CD" property="priceArticle.buyUser.buyUser.section.company.companyCd"/>
           <result column="BUYER_COMPANY_NAME" property="priceArticle.buyUser.buyUser.section.company.companyName"/>
           <result column="BUYER_SECTION_PLACE_CD" property="priceArticle.buyUser.buyUser.section.sectionPlace.sectionPlaceCd"/>
           <result column="BUYER_SECTION_PLACE_NAME" property="priceArticle.buyUser.buyUser.section.sectionPlace.sectionPlaceName"/>
           <result column="BUYER_SECTION_CD" property="priceArticle.buyUser.buyUser.section.sectionCd"/>
           <result column="BUYER_SECTION_NAME" property="priceArticle.buyUser.buyUser.section.sectionName"/>
           <result column="BUYER_USER_ID" property="priceArticle.buyUser.buyUser.userID"/>
           <result column="BUYER_USER_NAME" property="priceArticle.buyUser.buyUser.userName"/>
           <result column="BUYER_BACK_USER_COMMENTS" property="purReturnUser.backReason.backReason.comment"/>
           <result column="PRICE_REG_FLG" property="priceCreateFlg.priceCreateFlg"/>
           <result column="INSPECT_IND" property="priceArticle.inspectInd.inspectInd"/>
           <result column="SUBJECT_COMPANY_CD" property="priceArticle.buySection.buySection.company.companyCd"/>
           <result column="SUP_COMPANY_CD" property="priceArticle.supplierFrom.supCompanyCd"/>
           <result column="TAX_IND" property="priceArticle.taxCalculationInd.taxInd.taxInd"/>
           <result column="CONSUMPT_AMOUNT" property="amountMng.consumptAmount.consumptAmount.amount"/>
           <result column="TOTAL_AMOUNT" property="amountMng.totalAmount.totalAmount.amount"/>

           <result column="SUBCON_IND" property="priceArticle.supplierFrom.subcon.subconInd"/>
           <result column="ZIP_CD" property="priceArticle.supplierFrom.supplierContact.ctc.zipCd.zipCd"/>
           <result column="ADDRESS1" property="priceArticle.supplierFrom.supplierContact.ctc.address1.address"/>
           <result column="ADDRESS2" property="priceArticle.supplierFrom.supplierContact.ctc.address2.address"/>
           <result column="CTCTEL_NO" property="priceArticle.supplierFrom.supplierContact.ctc.telNo.telNo"/>
           <result column="FAX_NO" property="priceArticle.supplierFrom.supplierContact.ctc.faxNo.faxNo"/>
           <result column="KATASHIKI" property="priceArticle.item.katashiki"/>
           <result column="REQ_DELIV_DATE" property="hopeDlvEst.hopeDlvEst.dateOfymd"/>
           <result column="SUBJECT_COMPANY_CD" property="subject.subjectCompanyCd"/>
           <result column="SUBJECT_CD" property="subject.subjectCd"/>
           <result column="SUBJECT_NAME" property="subject.subjectName"/>
           <result column="REQ_VOL" property="hopeVol.hopeVol.vol"/>
           <result column="REQ_AMOUNT" property="reqAmount.amount"/>
           <result column="EXTENSION_NO" property="purReturnUser.user.extNo.extensionNo"/>
           <result column="TEL_NO" property="purReturnUser.user.externalNo.externalNo"/>
           <result column="BUY_USRE_EXTENSION_NO" property="priceArticle.buyUser.buyUser.extNo.extensionNo"/>
           <result column="BUY_USRE_TEL_NO" property="priceArticle.buyUser.buyUser.externalNo.externalNo"/>
           <result column="MAIL_ADDR" property="purReturnUser.user.mailAddr.mail"/>
           <result column="PUR_APL_NO" property="catalogIdentify.purAplNo.purAplNo"/>
           <result column="T_PUR_REQUEST_UNIT_PRICE" property="unitPrice.amount.amount"/>
           <result column="T_REQ_AMOUNT" property="amountMng.noTaxAmount.noTaxAmount.amount"/>
           <result column="CURRENCY_CD" property="priceArticle.supplierFrom.currency.currencyCd"/>
           <result column="CURRENCY_CD" property="amountMng.currency.currencyCd"/>
           <result column="PUR_REQ_NO" property="purReqNo.purReqNo"/>
           <result column="PUR_REQ_STATUS" property="purReqStatus.status"/>

           <result column="SLIP_NO" property="exclusiveSlipId.slipNo"/>
           <result column="SLIP_LAST_UPD_DATE" property="exclusiveSlipId.lastUpdDate"/>

           <result column="EXT_TXT_1" property="editExtItem.editTextExtItem.textExtItem1.value" />
           <result column="EXT_TXT_2" property="editExtItem.editTextExtItem.textExtItem2.value" />
           <result column="EXT_TXT_3" property="editExtItem.editTextExtItem.textExtItem3.value" />
           <result column="EXT_TXT_4" property="editExtItem.editTextExtItem.textExtItem4.value" />
           <result column="EXT_TXT_5" property="editExtItem.editTextExtItem.textExtItem5.value" />
           <result column="EXT_TXT_6" property="editExtItem.editTextExtItem.textExtItem6.value" />
           <result column="EXT_TXT_7" property="editExtItem.editTextExtItem.textExtItem7.value" />
           <result column="EXT_TXT_8" property="editExtItem.editTextExtItem.textExtItem8.value" />
           <result column="EXT_TXT_9" property="editExtItem.editTextExtItem.textExtItem9.value" />
           <result column="EXT_TXT_10" property="editExtItem.editTextExtItem.textExtItem10.value" />
           <result column="EXT_AREA_1" property="editExtItem.editAreaExtItem.arrayExtItem1.value" />
           <result column="EXT_AREA_2" property="editExtItem.editAreaExtItem.arrayExtItem2.value" />
           <result column="EXT_AREA_3" property="editExtItem.editAreaExtItem.arrayExtItem3.value" />
           <result column="EXT_AREA_4" property="editExtItem.editAreaExtItem.arrayExtItem4.value" />
           <result column="EXT_AREA_5" property="editExtItem.editAreaExtItem.arrayExtItem5.value" />
           <result column="EXT_DATE_1" property="editExtItem.editDateExtItem.dateExtItem1.dateType.dateOfymd" />
           <result column="EXT_DATE_2" property="editExtItem.editDateExtItem.dateExtItem2.dateType.dateOfymd" />
           <result column="EXT_DATE_3" property="editExtItem.editDateExtItem.dateExtItem3.dateType.dateOfymd" />
           <result column="EXT_DATE_4" property="editExtItem.editDateExtItem.dateExtItem4.dateType.dateOfymd" />
           <result column="EXT_DATE_5" property="editExtItem.editDateExtItem.dateExtItem5.dateType.dateOfymd" />
           <result column="EXT_INT_1" property="editExtItem.editIntExtItem.intExtItem1.value" />
           <result column="EXT_INT_2" property="editExtItem.editIntExtItem.intExtItem2.value" />
           <result column="EXT_INT_3" property="editExtItem.editIntExtItem.intExtItem3.value" />
           <result column="EXT_INT_4" property="editExtItem.editIntExtItem.intExtItem4.value" />
           <result column="EXT_INT_5" property="editExtItem.editIntExtItem.intExtItem5.value" />
           <result column="EXT_INT_6" property="editExtItem.editIntExtItem.intExtItem6.value" />
           <result column="EXT_INT_7" property="editExtItem.editIntExtItem.intExtItem7.value" />
           <result column="EXT_INT_8" property="editExtItem.editIntExtItem.intExtItem8.value" />
           <result column="EXT_INT_9" property="editExtItem.editIntExtItem.intExtItem9.value" />
           <result column="EXT_INT_10" property="editExtItem.editIntExtItem.intExtItem10.value" />
           <result column="EXT_DEC_1" property="editExtItem.editDecExtItem.decExtItem1.value" />
           <result column="EXT_DEC_2" property="editExtItem.editDecExtItem.decExtItem2.value" />
           <result column="EXT_DEC_3" property="editExtItem.editDecExtItem.decExtItem3.value" />
           <result column="EXT_DEC_4" property="editExtItem.editDecExtItem.decExtItem4.value" />
           <result column="EXT_DEC_5" property="editExtItem.editDecExtItem.decExtItem5.value" />
           <result column="EXT_SEL_1" property="editExtItem.editSelExtItem.selExtItem1.value" />
           <result column="EXT_SEL_2" property="editExtItem.editSelExtItem.selExtItem2.value" />
           <result column="EXT_SEL_3" property="editExtItem.editSelExtItem.selExtItem3.value" />
           <result column="EXT_SEL_4" property="editExtItem.editSelExtItem.selExtItem4.value" />
           <result column="EXT_SEL_5" property="editExtItem.editSelExtItem.selExtItem5.value" />
           <result column="EXT_SEL_6" property="editExtItem.editSelExtItem.selExtItem6.value" />
           <result column="EXT_SEL_7" property="editExtItem.editSelExtItem.selExtItem7.value" />
           <result column="EXT_SEL_8" property="editExtItem.editSelExtItem.selExtItem8.value" />
           <result column="EXT_SEL_9" property="editExtItem.editSelExtItem.selExtItem9.value" />
           <result column="EXT_SEL_10" property="editExtItem.editSelExtItem.selExtItem10.value" />
           <result column="EXT_CHK_1" property="editExtItem.editChkExtItem.chkExtItem1.value" />
           <result column="EXT_CHK_2" property="editExtItem.editChkExtItem.chkExtItem2.value" />
           <result column="EXT_CHK_3" property="editExtItem.editChkExtItem.chkExtItem3.value" />
           <result column="EXT_CHK_4" property="editExtItem.editChkExtItem.chkExtItem4.value" />
           <result column="EXT_CHK_5" property="editExtItem.editChkExtItem.chkExtItem5.value" />
           <result column="EXT_FILE_1" property="editExtItem.editFileExtItem.fileExtItem1.fileName" />
           <result column="EXT_FILE_2" property="editExtItem.editFileExtItem.fileExtItem2.fileName" />
           <result column="EXT_FILE_3" property="editExtItem.editFileExtItem.fileExtItem3.fileName" />
           <result column="EXT_FILE_BINARY_1" property="editExtItem.editFileExtItem.fileExtItem1.binary"/>
           <result column="EXT_FILE_BINARY_2" property="editExtItem.editFileExtItem.fileExtItem2.binary"/>
           <result column="EXT_FILE_BINARY_3" property="editExtItem.editFileExtItem.fileExtItem3.binary"/>
           <result column="EXT_MST_1" property="editExtItem.editMstExtItem.mstExtItem1.mstKey" />
           <result column="EXT_MST_2" property="editExtItem.editMstExtItem.mstExtItem2.mstKey" />
           <result column="EXT_MST_3" property="editExtItem.editMstExtItem.mstExtItem3.mstKey" />
           <result column="EXT_MST_4" property="editExtItem.editMstExtItem.mstExtItem4.mstKey" />
           <result column="EXT_MST_5" property="editExtItem.editMstExtItem.mstExtItem5.mstKey" />
           <result column="EXT_MST_6" property="editExtItem.editMstExtItem.mstExtItem6.mstKey" />
           <result column="EXT_MST_7" property="editExtItem.editMstExtItem.mstExtItem7.mstKey" />
           <result column="EXT_MST_8" property="editExtItem.editMstExtItem.mstExtItem8.mstKey" />
           <result column="EXT_MST_NAME_1" property="editExtItem.editMstExtItem.mstExtItem1.mstName"/>
           <result column="EXT_MST_NAME_2" property="editExtItem.editMstExtItem.mstExtItem2.mstName"/>
           <result column="EXT_MST_NAME_3" property="editExtItem.editMstExtItem.mstExtItem3.mstName"/>
           <result column="EXT_MST_NAME_4" property="editExtItem.editMstExtItem.mstExtItem4.mstName"/>
           <result column="EXT_MST_NAME_5" property="editExtItem.editMstExtItem.mstExtItem5.mstName"/>
           <result column="EXT_MST_NAME_6" property="editExtItem.editMstExtItem.mstExtItem6.mstName"/>
           <result column="EXT_MST_NAME_7" property="editExtItem.editMstExtItem.mstExtItem7.mstName"/>
           <result column="EXT_MST_NAME_8" property="editExtItem.editMstExtItem.mstExtItem8.mstName"/>
           <!--詳細画面用-->
           <result column="EXT_TXT_1" property="detailExtItem.extendTxt.extendTxt1" />
           <result column="EXT_TXT_2" property="detailExtItem.extendTxt.extendTxt2" />
           <result column="EXT_TXT_3" property="detailExtItem.extendTxt.extendTxt3" />
           <result column="EXT_TXT_4" property="detailExtItem.extendTxt.extendTxt4" />
           <result column="EXT_TXT_5" property="detailExtItem.extendTxt.extendTxt5" />
           <result column="EXT_TXT_6" property="detailExtItem.extendTxt.extendTxt6" />
           <result column="EXT_TXT_7" property="detailExtItem.extendTxt.extendTxt7" />
           <result column="EXT_TXT_8" property="detailExtItem.extendTxt.extendTxt8" />
           <result column="EXT_TXT_9" property="detailExtItem.extendTxt.extendTxt9" />
           <result column="EXT_TXT_10" property="detailExtItem.extendTxt.extendTxt10" />
           <result column="EXT_AREA_1" property="detailExtItem.extendArea.extendArea1" />
           <result column="EXT_AREA_2" property="detailExtItem.extendArea.extendArea2" />
           <result column="EXT_AREA_3" property="detailExtItem.extendArea.extendArea3" />
           <result column="EXT_AREA_4" property="detailExtItem.extendArea.extendArea4" />
           <result column="EXT_AREA_5" property="detailExtItem.extendArea.extendArea5" />
           <result column="EXT_DATE_1" property="detailExtItem.extendDate.extendDate1.dateOfymd" />
           <result column="EXT_DATE_2" property="detailExtItem.extendDate.extendDate2.dateOfymd" />
           <result column="EXT_DATE_3" property="detailExtItem.extendDate.extendDate3.dateOfymd" />
           <result column="EXT_DATE_4" property="detailExtItem.extendDate.extendDate4.dateOfymd" />
           <result column="EXT_DATE_5" property="detailExtItem.extendDate.extendDate5.dateOfymd" />
           <result column="EXT_INT_1" property="detailExtItem.extendInt.extendInt1.value" />
           <result column="EXT_INT_2" property="detailExtItem.extendInt.extendInt2.value" />
           <result column="EXT_INT_3" property="detailExtItem.extendInt.extendInt3.value" />
           <result column="EXT_INT_4" property="detailExtItem.extendInt.extendInt4.value" />
           <result column="EXT_INT_5" property="detailExtItem.extendInt.extendInt5.value" />
           <result column="EXT_INT_6" property="detailExtItem.extendInt.extendInt6.value" />
           <result column="EXT_INT_7" property="detailExtItem.extendInt.extendInt7.value" />
           <result column="EXT_INT_8" property="detailExtItem.extendInt.extendInt8.value" />
           <result column="EXT_INT_9" property="detailExtItem.extendInt.extendInt9.value" />
           <result column="EXT_INT_10" property="detailExtItem.extendInt.extendInt10.value" />
           <result column="EXT_DEC_1" property="detailExtItem.extendDec.extendDec1.value" />
           <result column="EXT_DEC_2" property="detailExtItem.extendDec.extendDec2.value" />
           <result column="EXT_DEC_3" property="detailExtItem.extendDec.extendDec3.value" />
           <result column="EXT_DEC_4" property="detailExtItem.extendDec.extendDec4.value" />
           <result column="EXT_DEC_5" property="detailExtItem.extendDec.extendDec5.value" />
           <result column="EXT_SEL_1" property="detailExtItem.extendSel.extendSel1" />
           <result column="EXT_SEL_2" property="detailExtItem.extendSel.extendSel2" />
           <result column="EXT_SEL_3" property="detailExtItem.extendSel.extendSel3" />
           <result column="EXT_SEL_4" property="detailExtItem.extendSel.extendSel4" />
           <result column="EXT_SEL_5" property="detailExtItem.extendSel.extendSel5" />
           <result column="EXT_SEL_6" property="detailExtItem.extendSel.extendSel6" />
           <result column="EXT_SEL_7" property="detailExtItem.extendSel.extendSel7" />
           <result column="EXT_SEL_8" property="detailExtItem.extendSel.extendSel8" />
           <result column="EXT_SEL_9" property="detailExtItem.extendSel.extendSel9" />
           <result column="EXT_SEL_10" property="detailExtItem.extendSel.extendSel10" />
           <result column="EXT_CHK_1" property="detailExtItem.extendChk.extendChk1" />
           <result column="EXT_CHK_2" property="detailExtItem.extendChk.extendChk2" />
           <result column="EXT_CHK_3" property="detailExtItem.extendChk.extendChk3" />
           <result column="EXT_CHK_4" property="detailExtItem.extendChk.extendChk4" />
           <result column="EXT_CHK_5" property="detailExtItem.extendChk.extendChk5" />
           <result column="EXT_FILE_1" property="detailExtItem.extendFile.extendFile1.fileName" />
           <result column="EXT_FILE_2" property="detailExtItem.extendFile.extendFile2.fileName" />
           <result column="EXT_FILE_3" property="detailExtItem.extendFile.extendFile3.fileName" />
           <result column="EXT_FILE_BINARY_1" property="detailExtItem.extendFile.extendFile1.binary"/>
           <result column="EXT_FILE_BINARY_2" property="detailExtItem.extendFile.extendFile2.binary"/>
           <result column="EXT_FILE_BINARY_3" property="detailExtItem.extendFile.extendFile3.binary"/>
           <result column="EXT_MST_1" property="detailExtItem.extendMst.extendMst1.mstKey" />
           <result column="EXT_MST_2" property="detailExtItem.extendMst.extendMst2.mstKey" />
           <result column="EXT_MST_3" property="detailExtItem.extendMst.extendMst3.mstKey" />
           <result column="EXT_MST_4" property="detailExtItem.extendMst.extendMst4.mstKey" />
           <result column="EXT_MST_5" property="detailExtItem.extendMst.extendMst5.mstKey" />
           <result column="EXT_MST_6" property="detailExtItem.extendMst.extendMst6.mstKey" />
           <result column="EXT_MST_7" property="detailExtItem.extendMst.extendMst7.mstKey" />
           <result column="EXT_MST_8" property="detailExtItem.extendMst.extendMst8.mstKey" />
           <result column="EXT_MST_NAME_1" property="detailExtItem.extendMst.extendMst1.mstName"/>
           <result column="EXT_MST_NAME_2" property="detailExtItem.extendMst.extendMst2.mstName"/>
           <result column="EXT_MST_NAME_3" property="detailExtItem.extendMst.extendMst3.mstName"/>
           <result column="EXT_MST_NAME_4" property="detailExtItem.extendMst.extendMst4.mstName"/>
           <result column="EXT_MST_NAME_5" property="detailExtItem.extendMst.extendMst5.mstName"/>
           <result column="EXT_MST_NAME_6" property="detailExtItem.extendMst.extendMst6.mstName"/>
           <result column="EXT_MST_NAME_7" property="detailExtItem.extendMst.extendMst7.mstName"/>
           <result column="EXT_MST_NAME_8" property="detailExtItem.extendMst.extendMst8.mstName"/>
    </resultMap>
    <select id="listCatalogPurReq" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogIdentify" resultMap="CatalogPurReq_Map">
        SELECT
                T_PUR_REQUEST.PUR_REQ_NO,
                T_PUR_REQUEST.PUR_REQ_SEQ as "purReqSeq",
                T_PUR_REQUEST.APP_UNIT_NO as "appUnitNo",
                T_PUR_REQUEST.PUR_REQ_VERSION,
                T_PUR_REQUEST.BUYER_COMPANY_CD,
                T_PUR_REQUEST.BUYER_COMPANY_NAME,
                T_PUR_REQUEST.BUYER_SECTION_PLACE_CD,
                T_PUR_REQUEST.BUYER_SECTION_PLACE_NAME,
                T_PUR_REQUEST.BUYER_SECTION_CD,
                T_PUR_REQUEST.BUYER_SECTION_NAME,
                T_PUR_REQUEST.BUYER_USER_ID,
                T_PUR_REQUEST.BUYER_USER_NAME,
                T_PUR_REQUEST.BUYER_BACK_USER_COMMENTS,
                T_PUR_REQUEST.AUTO_ORDER_FLG as "priceArticle.autoOrderFlag",
                T_PUR_REQUEST.PRICE_REG_FLG,
                T_PUR_REQUEST.SUBJECT_COMPANY_CD,
                T_PUR_REQUEST.SUP_COMPANY_CD,
                T_PUR_REQUEST.TAX_IND,
                T_PUR_REQUEST.TAX_RATE as "amountMng.taxRate.taxRate",
                T_PUR_REQUEST.CONSUMPT_AMOUNT,
                T_PUR_REQUEST.TOTAL_AMOUNT,
                T_PUR_REQUEST.PUR_REQ_CNV_RATE as "cnvAmount.rate.rate",
                T_PUR_REQUEST.ITEM_CLASS_L_NAME,
                T_PUR_REQUEST.ITEM_CLASS_M_NAME,
                T_PUR_REQUEST.ITEM_CLASS_S_NAME,
                T_PUR_REQUEST.ITEM_CLASS_L,
                T_PUR_REQUEST.ITEM_CLASS_M,
                T_PUR_REQUEST.ITEM_CLASS_S,
                T_PUR_REQUEST.ITEM_COMPANY_CD,
                T_PUR_REQUEST.ITEM_CD as "priceArticle.item.itemCd",
                T_PUR_REQUEST.ITEM_NAME as "priceArticle.item.itemName",
                T_PUR_REQUEST.SUP_CD,
                T_PUR_REQUEST.SUP_NAME,
                T_PUR_REQUEST.SUP_ABBR_NAME,
                T_PUR_REQUEST.KATASHIKI as "priceArticle.item.katashiki",
                T_PUR_REQUEST.MANUFACT_CD,
                T_PUR_REQUEST.MANUFACT_NAME,
                T_PUR_REQUEST.REQ_DELIV_DATE,
                T_PUR_REQUEST.SUBJECT_CD as "subject.subjectCd",
                T_PUR_REQUEST.SUBJECT_NAME as "subject.subjectName",
                T_PUR_REQUEST.UNIT_PRICE,
                T_PUR_REQUEST.REQ_VOL as "hopeVol.hopeVol.vol",
                T_PUR_REQUEST.UNIT_NAME,
                T_PUR_REQUEST.UNIT_CD as "priceArticle.item.unit.unitCd",
                T_PUR_REQUEST.REQ_AMOUNT as "reqAmount.amount",
                T_PUR_REQUEST.REQ_AMOUNT as "T_REQ_AMOUNT",
                T_PUR_REQUEST.PUR_REQ_CNV_AMOUNT as "cnvAmount.cnvAmount.amount",
                T_PUR_REQUEST.INSPECT_IND,
                T_PUR_REQUEST.CURRENCY_CD,
                T_PUR_REQUEST.UNIT_PRICE as "T_PUR_REQUEST_UNIT_PRICE",
                T_PUR_REQUEST.PUR_REQ_STATUS,
                T_SLIP_MNG.SLIP_NO,
                T_SLIP_MNG.LAST_UPD_DATE as "SLIP_LAST_UPD_DATE",
                ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_PUR_REQUEST")}
        FROM
                T_PUR_REQUEST INNER JOIN T_SLIP_MNG ON
                    T_PUR_REQUEST.PUR_REQ_NO =  T_SLIP_MNG.SLIP_NO
        WHERE   T_PUR_REQUEST.PUR_APL_SEQ = #{purAplSeqNo}
                <if test="@org.apache.commons.lang.StringUtils@isNotBlank(purReqNo.purReqNo)">
                    AND T_PUR_REQUEST.PUR_REQ_NO = #{purReqNo.purReqNo}
                </if>
                <if test="@org.apache.commons.lang.StringUtils@isNotBlank(appUnitNo)">
                    AND T_PUR_REQUEST.APP_UNIT_NO = #{appUnitNo}
                </if>
        AND     T_PUR_REQUEST.DELETE_FLG = '0'
        ORDER BY T_PUR_REQUEST.PUR_REQ_NO ASC
    </select>

    <!--一時保存からの場合,購入申請テーブル申請更新SQL-->
    <update id="updateCatalogPurReqAplForApply" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqApl">
        UPDATE T_PUR_APL
        SET
                PUR_APL_STATUS = '01',
                NEW_APP_FLG = '0',
            PUR_REQ_DATE = ${@fw.common.util.AppUtil@getSysDate()},
            REQ_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            REQ_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            REQ_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            REQ_SECTION_PLACE_NAME = '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            REQ_SECTION_CD = #{purAplManagement.reqUser.reqUser.section.sectionCd,jdbcType=VARCHAR},
            REQ_SECTION_NAME = #{purAplManagement.reqUser.reqUser.section.sectionName,jdbcType=VARCHAR},
            REQ_USER_ID = #{purAplManagement.reqUser.reqUser.userID,jdbcType=VARCHAR},
            REQ_USER_NAME = #{purAplManagement.reqUser.reqUser.userName,jdbcType=VARCHAR},
            REQ_USER_EXTENSION_NO = #{purAplManagement.reqUser.reqUser.extNo.extensionNo,jdbcType=VARCHAR},
            REQ_USER_TEL_NO = #{purAplManagement.reqUser.reqUser.externalNo.externalNo,jdbcType=VARCHAR},
            INPUT_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            INPUT_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            INPUT_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            INPUT_SECTION_PLACE_NAME = '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            INPUT_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            INPUT_SECTION_NAME = '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',
            INPUT_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            INPUT_USER_NAME = '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',
            LOAD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LOAD_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            LOAD_SECTION_PLACE_CD = #{purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceCd, jdbcType=VARCHAR},
            LOAD_SECTION_PLACE_NAME = #{purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceName, jdbcType=VARCHAR},
            LOAD_SECTION_CD = #{purAplManagement.loadSection.loadSection.sectionCd, jdbcType=VARCHAR},
            LOAD_SECTION_NAME = #{purAplManagement.loadSection.loadSection.sectionName, jdbcType=VARCHAR},
            FOR_BOSS_COMMENT = #{purAplManagement.forAppComment.forAppComment.comment, jdbcType=VARCHAR},
            FOR_SUPPRIER_COMMENT = #{purAplManagement.forSupplierComment.forSupplierComment.comment, jdbcType=VARCHAR},
            URGENT_IND = #{purAplManagement.urgentInd.urgentInd, jdbcType=VARCHAR},
            PRICE_REQ_FLG = '0',
            TITLE_NAME = #{purAplManagement.titleName.titleName, jdbcType=VARCHAR},
            BUDGET_NO = #{purAplManagement.budgetNumber.budgetNumber, jdbcType=VARCHAR},
            DELIV_PLACE_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            DELIV_PLACE_CD = #{purAplManagement.delivPlace.delivPlaceCd, jdbcType=VARCHAR},
            DELIV_PLACE_NAME = #{purAplManagement.delivPlace.delivPlaceName, jdbcType=VARCHAR},
            APP_ROUTE_NO = #{application.approute.appRouteNo, jdbcType=VARCHAR},
            APP_ROUTE_NAME = #{application.approute.appRouteName, jdbcType=VARCHAR},
                LAST_APP_DATE = NULL,
            DELETE_FLG = '0',
            AUTO_DELETE_FLG = '0',
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            ${@ps.common.util.ItemSettingUtil@getItemSettingUpdateValueSQL("purAplManagement.editExtItem.")}
        WHERE
            PUR_APL_SEQ = #{purAplManagement.catalogIdentify.purAplSeqNo}
    </update>

    <!--再申請からの場合,購入申請テーブル再申請更新SQL(依頼元未承認)-->
    <update id="updateCatalogPurReqAplForApplyAgainNoApp" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqApl">
        UPDATE T_PUR_APL
        SET
                PUR_APL_STATUS = '01',
                NEW_APP_FLG = '0',
            PUR_REQ_DATE = ${@fw.common.util.AppUtil@getSysDate()},
            REQ_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            REQ_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            REQ_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            REQ_SECTION_PLACE_NAME = '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            REQ_SECTION_CD = #{purAplManagement.reqUser.reqUser.section.sectionCd, jdbcType=VARCHAR},
            REQ_SECTION_NAME = #{purAplManagement.reqUser.reqUser.section.sectionName, jdbcType=VARCHAR},
            REQ_USER_ID = #{purAplManagement.reqUser.reqUser.userID, jdbcType=VARCHAR},
            REQ_USER_NAME = #{purAplManagement.reqUser.reqUser.userName, jdbcType=VARCHAR},
            REQ_USER_EXTENSION_NO = #{purAplManagement.reqUser.reqUser.extNo.extensionNo, jdbcType=VARCHAR},
            REQ_USER_TEL_NO = #{purAplManagement.reqUser.reqUser.externalNo.externalNo, jdbcType=VARCHAR},
            INPUT_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            INPUT_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            INPUT_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            INPUT_SECTION_PLACE_NAME = '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            INPUT_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            INPUT_SECTION_NAME = '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',
            INPUT_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            INPUT_USER_NAME = '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',
            LOAD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LOAD_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            LOAD_SECTION_PLACE_CD = #{purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceCd, jdbcType=VARCHAR},
            LOAD_SECTION_PLACE_NAME = #{purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceName, jdbcType=VARCHAR},
            LOAD_SECTION_CD = #{purAplManagement.loadSection.loadSection.sectionCd, jdbcType=VARCHAR},
            LOAD_SECTION_NAME = #{purAplManagement.loadSection.loadSection.sectionName, jdbcType=VARCHAR},
            FOR_BOSS_COMMENT = #{purAplManagement.forAppComment.forAppComment.comment, jdbcType=VARCHAR},
            FOR_SUPPRIER_COMMENT = #{purAplManagement.forSupplierComment.forSupplierComment.comment, jdbcType=VARCHAR},
            URGENT_IND = #{purAplManagement.urgentInd.urgentInd, jdbcType=VARCHAR},
            PRICE_REQ_FLG = '0',
            TITLE_NAME = #{purAplManagement.titleName.titleName, jdbcType=VARCHAR},
            BUDGET_NO = #{purAplManagement.budgetNumber.budgetNumber, jdbcType=VARCHAR},
            DELIV_PLACE_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            DELIV_PLACE_CD = #{purAplManagement.delivPlace.delivPlaceCd, jdbcType=VARCHAR},
            DELIV_PLACE_NAME = #{purAplManagement.delivPlace.delivPlaceName, jdbcType=VARCHAR},
            APP_ROUTE_NO = #{application.approute.appRouteNo, jdbcType=VARCHAR},
            APP_ROUTE_NAME = #{application.approute.appRouteName, jdbcType=VARCHAR},
                LAST_APP_DATE = NULL,
            DELETE_FLG = '0',
            AUTO_DELETE_FLG = '0',
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            ${@ps.common.util.ItemSettingUtil@getItemSettingUpdateValueSQL("purAplManagement.editExtItem.")}
        WHERE
            PUR_APL_SEQ = #{purAplManagement.catalogIdentify.purAplSeqNo}
    </update>

    <!--再申請からの場合,購入申請テーブル再申請更新SQL(承認者差戻し、または購買担当差戻し)-->
    <update id="updateCatalogPurReqAplForApplyAgainAppError" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqApl">
        UPDATE T_PUR_APL
        SET
            NEW_FLG = '0',
            DELETE_FLG = '1',
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
        WHERE
            PUR_APL_SEQ = #{purAplManagement.catalogIdentify.purAplSeqNo}
    </update>

    <!--再申請からの場合,購入依頼テーブル再申請更新SQL(承認者差戻し)-->
    <update id="updateCatalogPurReqForApplyAgain" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReq">
        UPDATE T_PUR_REQUEST
        SET
            NEW_FLG = '0',
            DELETE_FLG = '1',
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
        WHERE
            PUR_APL_SEQ = #{purAplManagement.catalogIdentify.purAplSeqNo}
    </update>

    <!--再申請からの場合,購入依頼テーブル再申請更新SQL(購買担当差戻し)-->
    <update id="updateCatalogPurReqForApplyAgainAppError" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReq">
        UPDATE T_PUR_REQUEST
        SET
            NEW_FLG = '0',
            DELETE_FLG = '1',
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
        WHERE
            PUR_REQ_SEQ = #{purReqSeq}
    </update>

    <!--再申請からの場合,購入申請テーブル再申請登録SQL(承認者差戻し、または購買担当差戻し)-->
    <insert id="insertCatalogPurReqAplForApplyAgainAppError" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqApl">
        INSERT INTO T_PUR_APL
        (
            PUR_APL_SEQ,
            PUR_APL_NO,
            PUR_APL_VERSION,
            PUR_APL_STATUS,
            REQ_TYPE_IND,
            CORRECT_CD,
            NEW_FLG,
            NEW_APP_FLG,
            PUR_REQ_FIRST_DATE,
            PUR_REQ_DATE,
            REQ_COMPANY_CD,
            REQ_COMPANY_NAME,
            REQ_SECTION_PLACE_CD,
            REQ_SECTION_PLACE_NAME,
            REQ_SECTION_CD,
            REQ_SECTION_NAME,
            REQ_USER_ID,
            REQ_USER_NAME,
            REQ_USER_EXTENSION_NO,
            REQ_USER_TEL_NO,
            INPUT_COMPANY_CD,
            INPUT_COMPANY_NAME,
            INPUT_SECTION_PLACE_CD,
            INPUT_SECTION_PLACE_NAME,
            INPUT_SECTION_CD,
            INPUT_SECTION_NAME,
            INPUT_USER_ID,
            INPUT_USER_NAME,
            LOAD_COMPANY_CD,
            LOAD_COMPANY_NAME,
            LOAD_SECTION_PLACE_CD,
            LOAD_SECTION_PLACE_NAME,
            LOAD_SECTION_CD,
            LOAD_SECTION_NAME,
            FOR_BOSS_COMMENT,
            FOR_SUPPRIER_COMMENT,
            URGENT_IND,
            PRICE_REQ_FLG,
            TITLE_NAME,
            BUDGET_NO,
            DELIV_PLACE_COMPANY_CD,
            DELIV_PLACE_CD,
            DELIV_PLACE_NAME,
            APP_ROUTE_NO,
            APP_ROUTE_NAME,
            LAST_APP_DATE,
            DELETE_FLG,
            AUTO_DELETE_FLG,
            LAST_UPD_DATE,
            LAST_UPD_COMPANY_CD,
            LAST_UPD_SECTION_CD,
            LAST_UPD_USER_ID,
            REG_DATE,
            REG_COMPANY_CD,
            REG_SECTION_CD,
            REG_USER_ID,
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()}
        )
       VALUES (
            #{curAplSeqNo, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.catalogIdentify.purAplNo.purAplNo, jdbcType=VARCHAR},
            (SELECT PUR_APL_VERSION + 1
             FROM   T_PUR_APL
             WHERE  PUR_APL_SEQ = #{catalogPurReqApl.purAplManagement.catalogIdentify.purAplSeqNo}),
                '01',
            '2',
            '2',
            '1',
                '0',
            (SELECT PUR_REQ_FIRST_DATE
             FROM   T_PUR_APL
             WHERE  PUR_APL_SEQ = #{catalogPurReqApl.purAplManagement.catalogIdentify.purAplSeqNo}),
            ${@fw.common.util.AppUtil@getSysDate()},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.section.sectionCd, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.section.sectionName, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.userID, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.userName, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.extNo.extensionNo, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.externalNo.externalNo, jdbcType=VARCHAR},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            #{catalogPurReqApl.purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceCd, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceName, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.loadSection.loadSection.sectionCd, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.loadSection.loadSection.sectionName, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.forAppComment.forAppComment.comment, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.forSupplierComment.forSupplierComment.comment, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.urgentInd.urgentInd, jdbcType=VARCHAR},
            '0',
            #{catalogPurReqApl.purAplManagement.titleName.titleName, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.budgetNumber.budgetNumber, jdbcType=VARCHAR},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            #{catalogPurReqApl.purAplManagement.delivPlace.delivPlaceCd, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.delivPlace.delivPlaceName, jdbcType=VARCHAR},
            #{catalogPurReqApl.application.approute.appRouteNo, jdbcType=VARCHAR},
            #{catalogPurReqApl.application.approute.appRouteName, jdbcType=VARCHAR},
                NULL,
            '0',
            '0',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("catalogPurReqApl.purAplManagement.editExtItem.")}
        )
    </insert>

    <!--再申請からの場合,購入依頼テーブル再申請登録SQL(承認者差戻し、または購買担当差戻し)-->
    <insert id="insertCatalogPurReqForApplyAgainAppError">
       INSERT INTO T_PUR_REQUEST
        (
            PUR_REQ_SEQ,
            PUR_REQ_NO,
            PUR_REQ_VERSION,
            PUR_APL_NO,
            PUR_REQ_STATUS,
            CORRECT_CD,
            NEW_FLG,
            NEW_APP_FLG,
            PUR_APL_SEQ,
            APP_UNIT_NO,
            BUYER_COMPANY_CD,
            BUYER_COMPANY_NAME,
            BUYER_SECTION_PLACE_CD,
            BUYER_SECTION_PLACE_NAME,
            BUYER_SECTION_CD,
            BUYER_SECTION_NAME,
            BUYER_USER_ID,
            BUYER_USER_NAME,
            RECEIVE_COMPANY_CD,
            RECEIVE_COMPANY_NAME,
            RECEIVE_SECTION_PLACE_CD,
            RECEIVE_SECTION_PLACE_NAME,
            RECEIVE_SECTION_CD,
            RECEIVE_SECTION_NAME,
            AUTO_ORDER_FLG,
            PRICE_REG_FLG,
            INSPECT_IND,
            ITEM_CLASS_L,
            ITEM_CLASS_L_NAME,
            ITEM_CLASS_M,
            ITEM_CLASS_M_NAME,
            ITEM_CLASS_S,
            ITEM_CLASS_S_NAME,
            ITEM_COMPANY_CD,
            ITEM_CD,
            ITEM_NAME,
            KATASHIKI,
            MANUFACT_CD,
            MANUFACT_NAME,
            SUBJECT_COMPANY_CD,
            SUBJECT_CD,
            SUBJECT_NAME,
            SUP_COMPANY_CD,
            SUP_CD,
            SUP_NAME,
            SUP_ABBR_NAME,
            REQ_DELIV_DATE,
            CURRENCY_CD,
            TAX_IND,
            CONSUMPT_IND,
            TAX_RATE,
            REQ_VOL,
            UNIT_CD,
            UNIT_NAME,
            UNIT_PRICE,
            REQ_AMOUNT,
            CONSUMPT_AMOUNT,
            TOTAL_AMOUNT,
            PUR_REQ_CNV_CURRENCY_CD,
            PUR_REQ_CNV_RATE,
            PUR_REQ_CNV_AMOUNT,
            APP_ROUTE_NO,
            APP_ROUTE_NAME,
            DELETE_FLG,
            AUTO_DELETE_FLG,
            LAST_UPD_DATE,
            LAST_UPD_COMPANY_CD,
            LAST_UPD_SECTION_CD,
            LAST_UPD_USER_ID,
            REG_DATE,
            REG_COMPANY_CD,
            REG_SECTION_CD,
            REG_USER_ID,
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()}
        )
        SELECT
            #{curSeqNo},
            PUR_REQ_NO,
            PUR_REQ_VERSION + 1,
            PUR_APL_NO,
                '01',
            '2',
            '1',
                '0',
            #{curAplSeqNo, jdbcType=VARCHAR},
            #{catalogPurReq.appUnitNo, jdbcType=VARCHAR},
            BUYER_COMPANY_CD,
            BUYER_COMPANY_NAME,
            BUYER_SECTION_PLACE_CD,
            BUYER_SECTION_PLACE_NAME,
            BUYER_SECTION_CD,
            BUYER_SECTION_NAME,
            BUYER_USER_ID,
            BUYER_USER_NAME,
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.section.sectionCd, jdbcType=VARCHAR},
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.section.sectionName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.autoOrderFlag, jdbcType=VARCHAR},
            #{catalogPurReq.priceCreateFlg.priceCreateFlg, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.inspectInd.inspectInd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassL, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassNameL, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassM, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassNameM, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassS, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemClass.itemClassNameS, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemCompanyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.itemName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.katashiki, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.manufact.manufactCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.manufact.manufactName, jdbcType=VARCHAR},
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            #{catalogPurReq.subject.subjectCd, jdbcType=VARCHAR},
            #{catalogPurReq.subject.subjectName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supCompanyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supplierName.supplierName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.supplierFrom.supplierName.supplierAbbrName, jdbcType=VARCHAR},
            #{catalogPurReq.hopeDlvEst.hopeDlvEst.dateOfymd, jdbcType=VARCHAR},
            #{catalogPurReq.amountMng.currency.currencyCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.taxCalculationInd.taxInd.taxInd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.taxCalculationInd.consumptInd.consumptInd, jdbcType=VARCHAR},
            #{catalogPurReq.amountMng.taxRate.taxRate},
            #{catalogPurReq.hopeVol.hopeVol.vol},
            #{catalogPurReq.priceArticle.item.unit.unitCd, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.item.unit.unitName, jdbcType=VARCHAR},
            #{catalogPurReq.priceArticle.buyPrice.amount.amount},
            #{catalogPurReq.reqAmount.amount},
            #{catalogPurReq.amountMng.consumptAmount.consumptAmount.amount},
            #{catalogPurReq.amountMng.totalAmount.totalAmount.amount},
            #{catalogPurReqApl.purAplManagement.reqUser.reqUser.section.company.currency.currencyCd, jdbcType=VARCHAR},
            #{catalogPurReq.cnvAmount.rate.rate},
            #{catalogPurReq.cnvAmount.cnvAmount.amount},
            #{catalogPurReqApl.application.approute.appRouteNo, jdbcType=VARCHAR},
            #{catalogPurReqApl.application.approute.appRouteName, jdbcType=VARCHAR},
            '0',
            '0',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
            ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("catalogPurReq.editExtItem.")}
        FROM
             T_PUR_REQUEST
        WHERE
             PUR_APL_SEQ = #{catalogPurReqApl.purAplManagement.catalogIdentify.purAplSeqNo}
        AND  PUR_REQ_SEQ = #{catalogPurReq.purReqSeq}
    </insert>

    <!--カタログ購入依頼一覧のキーを取得する-->
    <select id="listKeyIdentity" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqSearchCondition" resultType="fw.domain.slip.purreq.purreqcatalog.CatalogIdentify">
        SELECT    T_PUR_APL.PUR_APL_SEQ AS "purAplSeqNo",
                  T_PUR_APL_IDENTIFY.APP_UNIT_NO AS "appUnitNo"
        FROM      T_PUR_APL,
                  (SELECT DISTINCT   T_PUR_APL.PUR_APL_SEQ,
                                     T_PUR_REQUEST.APP_UNIT_NO
                   FROM   T_PUR_APL,
                          T_PUR_REQUEST
                   WHERE         T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST.PUR_APL_SEQ
                             AND T_PUR_APL.INPUT_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                             AND T_PUR_APL.INPUT_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                             AND T_PUR_APL.INPUT_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}'
                             <if test="@org.apache.commons.lang.StringUtils@isNotBlank(issueVousher)">
                             AND T_PUR_APL.INPUT_USER_ID=#{issueVousher}
                             </if>
                             AND T_PUR_APL.REQ_TYPE_IND = '2'
                             <if test="status == 'ALL'" >
                             AND   (T_PUR_REQUEST.PUR_REQ_STATUS = '01'
                                    OR T_PUR_REQUEST.PUR_REQ_STATUS = '02'
                                    OR T_PUR_REQUEST.PUR_REQ_STATUS = '03'
                                    <if test="issueVousher == loginUserId" >
                                        OR T_PUR_REQUEST.PUR_REQ_STATUS = '04'
                                    </if>
                                    )
                             </if>
                             <if test="status != 'ALL'">
                             AND T_PUR_REQUEST.PUR_REQ_STATUS = #{status}
                             </if>
                             AND T_PUR_APL.DELETE_FLG = '0'
                             AND T_PUR_APL.NEW_FLG = '1'
                             AND T_PUR_REQUEST.DELETE_FLG = '0'
                    ) T_PUR_APL_IDENTIFY
        WHERE T_PUR_APL.PUR_APL_SEQ = T_PUR_APL_IDENTIFY.PUR_APL_SEQ
        ORDER BY  ${searchCondition.columnOrder.columnOrder()}
    </select>

    <!-- カタログ購入依頼クイックリンク件数取得 -->
    <select id="listKeyIdentityCount" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqSearchCondition" resultType="java.lang.Integer">
        SELECT COUNT(*)
        FROM      T_PUR_APL,
                  (SELECT DISTINCT   T_PUR_APL.PUR_APL_SEQ,
                                     T_PUR_REQUEST.APP_UNIT_NO
                   FROM   T_PUR_APL,
                          T_PUR_REQUEST
                   WHERE         T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST.PUR_APL_SEQ
                             AND T_PUR_APL.INPUT_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                             AND T_PUR_APL.INPUT_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                             AND T_PUR_APL.INPUT_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}'
                             <if test="@org.apache.commons.lang.StringUtils@isNotBlank(issueVousher)">
                                 AND T_PUR_APL.INPUT_USER_ID=#{issueVousher}
                             </if>
                                 AND T_PUR_APL.REQ_TYPE_IND = '2'
                             <if test="status == 'ALL'" >
                                 AND T_PUR_REQUEST.PUR_REQ_STATUS IN ('01', '02', '03', '04')
                             </if>
                             <if test="status != 'ALL'">
                                 AND T_PUR_REQUEST.PUR_REQ_STATUS = #{status}
                             </if>
                             AND T_PUR_APL.DELETE_FLG = '0'
                             AND T_PUR_APL.NEW_FLG = '1'
                             AND T_PUR_REQUEST.DELETE_FLG = '0'
                    ) T_PUR_APL_IDENTIFY
        WHERE T_PUR_APL.PUR_APL_SEQ = T_PUR_APL_IDENTIFY.PUR_APL_SEQ
    </select>

    <resultMap type="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqListItem" id="CatalogPurReqListItemMap">
        <result column="exclusiveSlipNo" property="catalogIdentify.exclusiveSlipId.slipNo"/>
        <result column="exclusiveSliplastUpdDate" property="catalogIdentify.exclusiveSlipId.lastUpdDate"/>
    </resultMap>
    <!--カタログ購入依頼一覧を取得する-->
    <select id="listPageItemCatalogPurReqApl" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqSearchCondition"
        resultMap="CatalogPurReqListItemMap">
        SELECT      T_PUR_APL.PUR_APL_NO AS "purAplNo",
                    T_PUR_APL.URGENT_IND AS "urgentInd",
                    T_PUR_APL.INPUT_USER_NAME AS "issueVousherName",
                    T_PUR_APL.PUR_APL_STATUS AS "status",
                    T_PUR_APL.PUR_REQ_DATE AS "reqDate.dateOfymd",
                    T_PUR_APL.TITLE_NAME AS "titleName",
                    T_PUR_APL.REQ_SECTION_CD AS "reqSectionCd",
                    T_PUR_APL.REQ_SECTION_NAME AS "reqSectionName",
                    T_PUR_APL.REQ_USER_ID AS "reqUserCd",
                    T_PUR_APL.REQ_USER_NAME AS "reqUserName",
                    T_PUR_APL.PUR_APL_SEQ AS "catalogIdentify.purAplSeqNo",
                    T_PUR_APL.LAST_UPD_DATE AS "catalogIdentify.lastUpdDate",
                    T_PUR_APL_IDENTIFY.APP_UNIT_NO AS "catalogIdentify.appUnitNo",
                    T_SLIP_MNG.SLIP_NO AS "exclusiveSlipNo",
                    T_SLIP_MNG.LAST_UPD_DATE as "exclusiveSliplastUpdDate",
                    ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQLDomainAliasNonBinary("T_PUR_APL","searchResExtItem")}
        FROM      T_PUR_APL,
                  (SELECT DISTINCT   T_PUR_APL.PUR_APL_SEQ,
                                     T_PUR_REQUEST.APP_UNIT_NO,
                                     MIN(T_PUR_REQUEST.PUR_REQ_NO) as PUR_REQ_NO
                   FROM   T_PUR_APL,
                          T_PUR_REQUEST
                   WHERE         T_PUR_APL.PUR_APL_SEQ = T_PUR_REQUEST.PUR_APL_SEQ
                             AND T_PUR_APL.INPUT_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                             AND T_PUR_APL.INPUT_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}'
                             AND T_PUR_APL.INPUT_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}'
                             <if test="@org.apache.commons.lang.StringUtils@isNotBlank(issueVousher)">
                             AND T_PUR_APL.INPUT_USER_ID=#{issueVousher}
                             </if>
                             AND T_PUR_APL.REQ_TYPE_IND = '2'
                             <if test="status == 'ALL'" >
                             AND   (T_PUR_REQUEST.PUR_REQ_STATUS = '01'
                             OR     T_PUR_REQUEST.PUR_REQ_STATUS = '02'
                             OR     T_PUR_REQUEST.PUR_REQ_STATUS = '03'
                             OR     T_PUR_REQUEST.PUR_REQ_STATUS = '04')
                             </if>
                             <if test="status != 'ALL'">
                             AND T_PUR_REQUEST.PUR_REQ_STATUS = #{status}
                             </if>
                             AND T_PUR_APL.DELETE_FLG = '0'
                             AND T_PUR_APL.NEW_FLG = '1'
                             AND T_PUR_REQUEST.DELETE_FLG = '0'
                         GROUP BY
                             T_PUR_APL.PUR_APL_SEQ,
                             T_PUR_REQUEST.APP_UNIT_NO
                    ) T_PUR_APL_IDENTIFY,
                      T_SLIP_MNG
         WHERE       T_PUR_APL.PUR_APL_SEQ = T_PUR_APL_IDENTIFY.PUR_APL_SEQ
                     AND
                     T_PUR_APL.PUR_APL_SEQ   IN
                        <foreach collection="searchCondition.page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">
                            (#{keyList.purAplSeqNo})
                        </foreach>
                     AND
                     (T_PUR_APL_IDENTIFY.APP_UNIT_NO is null OR T_PUR_APL_IDENTIFY.APP_UNIT_NO IN
                        <foreach collection="searchCondition.page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">
                            (#{keyList.appUnitNo})
                        </foreach>
                     )
                     AND T_PUR_APL_IDENTIFY.PUR_REQ_NO = T_SLIP_MNG.SLIP_NO
        ORDER BY     ${searchCondition.columnOrder.columnOrder()}
    </select>
    <select id = "listPageItemCatalogPurReqAplForAmount" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqSearchCondition" resultType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqListItem">
        SELECT  T_PUR_REQUEST.PUR_APL_SEQ AS "catalogIdentify.purAplSeqNo",
                T_PUR_REQUEST.APP_UNIT_NO AS "catalogIdentify.appUnitNo",
                T_PUR_REQUEST.CURRENCY_CD AS "currencyCd",
                T_PUR_REQUEST.PUR_REQ_STATUS AS "status",
                SUM(T_PUR_REQUEST.REQ_AMOUNT) AS "totalAmount.amount",
                MIN(T_PUR_REQUEST.REQ_DELIV_DATE) AS "delivDate.dateOfymd"
        FROM    T_PUR_REQUEST
        WHERE   T_PUR_REQUEST.PUR_APL_SEQ  IN
                <foreach collection="searchCondition.page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">
                     (#{keyList.purAplSeqNo})
                </foreach>
                AND
                (T_PUR_REQUEST.APP_UNIT_NO is null OR T_PUR_REQUEST.APP_UNIT_NO IN
                <foreach collection="searchCondition.page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">
                     (#{keyList.appUnitNo})
                </foreach>
                )
                <if test="status == 'ALL'" >
                             AND   (T_PUR_REQUEST.PUR_REQ_STATUS = '01'
                             OR     T_PUR_REQUEST.PUR_REQ_STATUS = '02'
                             OR     T_PUR_REQUEST.PUR_REQ_STATUS = '03'
                             OR     T_PUR_REQUEST.PUR_REQ_STATUS = '04')
                </if>
                <if test="status != 'ALL'">
                             AND T_PUR_REQUEST.PUR_REQ_STATUS = #{status}
                </if>
                AND T_PUR_REQUEST.DELETE_FLG = '0'
        GROUP BY T_PUR_REQUEST.PUR_APL_SEQ,T_PUR_REQUEST.APP_UNIT_NO,T_PUR_REQUEST.CURRENCY_CD,T_PUR_REQUEST.PUR_REQ_STATUS


    </select>

    <select id = "listPageItemCatalogPurReqAplForUnitNo" parameterType="fw.domain.mst.searchcondition.SearchCondition" resultType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqListItem">
        SELECT T_PUR_REQUEST.PUR_APL_SEQ AS "catalogIdentify.purAplSeqNo",
                T_PUR_REQUEST.APP_UNIT_NO AS "catalogIdentify.appUnitNo",
                T_PUR_REQUEST.PUR_REQ_STATUS AS "status"
        FROM T_PUR_REQUEST
        WHERE T_PUR_REQUEST.PUR_APL_SEQ  IN
                <foreach collection="page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">
                                     (#{keyList.purAplSeqNo})
                </foreach>
                AND T_PUR_REQUEST.APP_UNIT_NO IN
                <foreach collection="page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">
                                     (#{keyList.appUnitNo})
                </foreach>
    </select>
    <select id = "searchCount" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqApl" resultType="String">
        SELECT COUNT(1)
        FROM T_PUR_REQUEST
        WHERE T_PUR_REQUEST.PUR_APL_SEQ = #{purAplSeqNo}
                AND T_PUR_REQUEST.DELETE_FLG = '0'
                AND T_PUR_REQUEST.NEW_FLG = '1'
    </select>

    <!--カタログ購入申請を削除する-->
    <update id="updateCatalogPurAplForDelete" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogIdentify">
        UPDATE T_PUR_APL
        SET
            DELETE_FLG = '1',
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
        WHERE
            PUR_APL_SEQ = #{purAplSeqNo}
    </update>

    <!--カタログ購入依頼を削除する-->
    <update id="updateCatalogPurReqForDelete" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogIdentify">
        UPDATE T_PUR_REQUEST
        SET
            DELETE_FLG = '1',
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
        WHERE
            PUR_APL_SEQ = #{purAplSeqNo}
            <if test="@org.apache.commons.lang.StringUtils@isNotBlank(appUnitNo)">
            AND   T_PUR_REQUEST.APP_UNIT_NO = #{appUnitNo}
            </if>

    </update>

    <!--購入依頼テーブル削除SQL-->
    <delete id="deleteCatalogPurReqByPurAplSeq" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogIdentify">
        DELETE FROM T_PUR_REQUEST
        WHERE
            PUR_APL_SEQ = #{purAplSeqNo}
    </delete>
    <resultMap type="fw.domain.slip.purreq.purreqcatalog.CatalogPurReqApl" id="CatalogPurReqApl_Detail_Map">
        <result column="PUR_APL_SEQ" property="purAplManagement.catalogIdentify.purAplSeqNo"/>
        <result column="PUR_APL_NO" property="purAplManagement.catalogIdentify.purAplNo.purAplNo"/>
        <result column="PUR_REQ_DATE" property="purAplManagement.purReqDate.purReqDate.reqDate.dateOfymd"/>
        <result column="URGENT_IND" property="purAplManagement.urgentInd.urgentInd"/>
        <result column="TITLE_NAME" property="purAplManagement.titleName.titleName"/>
        <result column="REQ_COMPANY_CD" property="purAplManagement.reqUser.reqUser.section.company.companyCd"/>
        <result column="REQ_SECTION_CD" property="purAplManagement.reqUser.reqUser.section.sectionCd"/>
        <result column="REQ_SECTION_NAME" property="purAplManagement.reqUser.reqUser.section.sectionName"/>
        <result column="REQ_USER_EXTENSION_NO" property="purAplManagement.reqUser.reqUser.extNo.extensionNo"/>
        <result column="REQ_USER_TEL_NO" property="purAplManagement.reqUser.reqUser.externalNo.externalNo"/>
        <result column="REQ_USER_ID" property="purAplManagement.reqUser.reqUser.userID"/>
        <result column="REQ_USER_NAME" property="purAplManagement.reqUser.reqUser.userName"/>
        <result column="LOAD_COMPANY_CD" property="purAplManagement.loadSection.loadSection.company.companyCd"/>
        <result column="LOAD_COMPANY_NAME" property="purAplManagement.loadSection.loadSection.company.companyName"/>
        <result column="LOAD_SECTION_PLACE_CD" property="purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceCd"/>
        <result column="LOAD_SECTION_PLACE_NAME" property="purAplManagement.loadSection.loadSection.sectionPlace.sectionPlaceName"/>
        <result column="BUDGET_NO" property="purAplManagement.budgetNumber.budgetNumber"/>
        <result column="BUDGET_NAME" property="purAplManagement.budgetNumber.titleName.titleName" />
        <result column="FOR_BOSS_COMMENT" property="purAplManagement.forAppComment.forAppComment.comment"/>
        <result column="FOR_SUPPRIER_COMMENT" property="purAplManagement.forSupplierComment.forSupplierComment.comment"/>
        <result column="PUR_APL_STATUS" property="purAplManagement.purReqStatus.status"/>
        <result column="INPUT_SECTION_CD" property="purAplManagement.inputUser.inputUser.section.sectionCd"/>
        <result column="INPUT_COMPANY_CD" property="purAplManagement.inputUser.inputUser.section.company.companyCd"/>
        <result column="INPUT_SECTION_NAME" property="purAplManagement.inputUser.inputUser.section.sectionName"/>
        <result column="INPUT_USER_ID" property="purAplManagement.inputUser.inputUser.userID"/>
        <result column="INPUT_USER_NAME" property="purAplManagement.inputUser.inputUser.userName"/>
        <result column="APP_ROUTE_NO" property="application.approute.appRouteNo"/>
        <result column="APP_ROUTE_NAME" property="application.approute.appRouteName"/>
        <result column="DELIV_PLACE_CD" property="purAplManagement.delivPlace.delivPlaceCd"/>
        <result column="DELIV_PLACE_NAME" property="purAplManagement.delivPlace.delivPlaceName"/>
        <result column="LOAD_SECTION_CD" property="purAplManagement.loadSection.loadSection.sectionCd"/>
        <result column="LOAD_SECTION_NAME" property="purAplManagement.loadSection.loadSection.sectionName"/>
        <result column="APL_AMOUNT" property="purAplManagement.aplAmount.amount"/>
        <result column="PUR_REQ_CNV_CURRENCY_CD" property="purAplManagement.reqUser.reqUser.section.company.currency.currencyCd"/>
        <result column="LAST_UPD_DATE" property="purAplManagement.catalogIdentify.lastUpdDate"/>
        <result column="BACK_APP_COMMENTS" property="purAplManagement.appManagement.backApp.backAppReason.backReason.comment"/>

        <result column="EXT_TXT_1" property="purAplManagement.detailExtItem.extendTxt.extendTxt1" />
        <result column="EXT_TXT_2" property="purAplManagement.detailExtItem.extendTxt.extendTxt2" />
        <result column="EXT_TXT_3" property="purAplManagement.detailExtItem.extendTxt.extendTxt3" />
        <result column="EXT_TXT_4" property="purAplManagement.detailExtItem.extendTxt.extendTxt4" />
        <result column="EXT_TXT_5" property="purAplManagement.detailExtItem.extendTxt.extendTxt5" />
        <result column="EXT_TXT_6" property="purAplManagement.detailExtItem.extendTxt.extendTxt6" />
        <result column="EXT_TXT_7" property="purAplManagement.detailExtItem.extendTxt.extendTxt7" />
        <result column="EXT_TXT_8" property="purAplManagement.detailExtItem.extendTxt.extendTxt8" />
        <result column="EXT_TXT_9" property="purAplManagement.detailExtItem.extendTxt.extendTxt9" />
        <result column="EXT_TXT_10" property="purAplManagement.detailExtItem.extendTxt.extendTxt10" />
        <result column="EXT_AREA_1" property="purAplManagement.detailExtItem.extendArea.extendArea1" />
        <result column="EXT_AREA_2" property="purAplManagement.detailExtItem.extendArea.extendArea2" />
        <result column="EXT_AREA_3" property="purAplManagement.detailExtItem.extendArea.extendArea3" />
        <result column="EXT_AREA_4" property="purAplManagement.detailExtItem.extendArea.extendArea4" />
        <result column="EXT_AREA_5" property="purAplManagement.detailExtItem.extendArea.extendArea5" />
        <result column="EXT_DATE_1" property="purAplManagement.detailExtItem.extendDate.extendDate1.dateOfymd" />
        <result column="EXT_DATE_2" property="purAplManagement.detailExtItem.extendDate.extendDate2.dateOfymd" />
        <result column="EXT_DATE_3" property="purAplManagement.detailExtItem.extendDate.extendDate3.dateOfymd" />
        <result column="EXT_DATE_4" property="purAplManagement.detailExtItem.extendDate.extendDate4.dateOfymd" />
        <result column="EXT_DATE_5" property="purAplManagement.detailExtItem.extendDate.extendDate5.dateOfymd" />
        <result column="EXT_INT_1" property="purAplManagement.detailExtItem.extendInt.extendInt1.value" />
        <result column="EXT_INT_2" property="purAplManagement.detailExtItem.extendInt.extendInt2.value" />
        <result column="EXT_INT_3" property="purAplManagement.detailExtItem.extendInt.extendInt3.value" />
        <result column="EXT_INT_4" property="purAplManagement.detailExtItem.extendInt.extendInt4.value" />
        <result column="EXT_INT_5" property="purAplManagement.detailExtItem.extendInt.extendInt5.value" />
        <result column="EXT_INT_6" property="purAplManagement.detailExtItem.extendInt.extendInt6.value" />
        <result column="EXT_INT_7" property="purAplManagement.detailExtItem.extendInt.extendInt7.value" />
        <result column="EXT_INT_8" property="purAplManagement.detailExtItem.extendInt.extendInt8.value" />
        <result column="EXT_INT_9" property="purAplManagement.detailExtItem.extendInt.extendInt9.value" />
        <result column="EXT_INT_10" property="purAplManagement.detailExtItem.extendInt.extendInt10.value" />
        <result column="EXT_DEC_1" property="purAplManagement.detailExtItem.extendDec.extendDec1.value" />
        <result column="EXT_DEC_2" property="purAplManagement.detailExtItem.extendDec.extendDec2.value" />
        <result column="EXT_DEC_3" property="purAplManagement.detailExtItem.extendDec.extendDec3.value" />
        <result column="EXT_DEC_4" property="purAplManagement.detailExtItem.extendDec.extendDec4.value" />
        <result column="EXT_DEC_5" property="purAplManagement.detailExtItem.extendDec.extendDec5.value" />
        <result column="EXT_SEL_1" property="purAplManagement.detailExtItem.extendSel.extendSel1" />
        <result column="EXT_SEL_2" property="purAplManagement.detailExtItem.extendSel.extendSel2" />
        <result column="EXT_SEL_3" property="purAplManagement.detailExtItem.extendSel.extendSel3" />
        <result column="EXT_SEL_4" property="purAplManagement.detailExtItem.extendSel.extendSel4" />
        <result column="EXT_SEL_5" property="purAplManagement.detailExtItem.extendSel.extendSel5" />
        <result column="EXT_SEL_6" property="purAplManagement.detailExtItem.extendSel.extendSel6" />
        <result column="EXT_SEL_7" property="purAplManagement.detailExtItem.extendSel.extendSel7" />
        <result column="EXT_SEL_8" property="purAplManagement.detailExtItem.extendSel.extendSel8" />
        <result column="EXT_SEL_9" property="purAplManagement.detailExtItem.extendSel.extendSel9" />
        <result column="EXT_SEL_10" property="purAplManagement.detailExtItem.extendSel.extendSel10" />
        <result column="EXT_CHK_1" property="purAplManagement.detailExtItem.extendChk.extendChk1" />
        <result column="EXT_CHK_2" property="purAplManagement.detailExtItem.extendChk.extendChk2" />
        <result column="EXT_CHK_3" property="purAplManagement.detailExtItem.extendChk.extendChk3" />
        <result column="EXT_CHK_4" property="purAplManagement.detailExtItem.extendChk.extendChk4" />
        <result column="EXT_CHK_5" property="purAplManagement.detailExtItem.extendChk.extendChk5" />
        <result column="EXT_FILE_1" property="purAplManagement.detailExtItem.extendFile.extendFile1.fileName" />
        <result column="EXT_FILE_2" property="purAplManagement.detailExtItem.extendFile.extendFile2.fileName" />
        <result column="EXT_FILE_3" property="purAplManagement.detailExtItem.extendFile.extendFile3.fileName" />
        <result column="EXT_FILE_BINARY_1" property="purAplManagement.detailExtItem.extendFile.extendFile1.binary"/>
        <result column="EXT_FILE_BINARY_2" property="purAplManagement.detailExtItem.extendFile.extendFile2.binary"/>
        <result column="EXT_FILE_BINARY_3" property="purAplManagement.detailExtItem.extendFile.extendFile3.binary"/>
        <result column="EXT_MST_1" property="purAplManagement.detailExtItem.extendMst.extendMst1.mstKey" />
        <result column="EXT_MST_2" property="purAplManagement.detailExtItem.extendMst.extendMst2.mstKey" />
        <result column="EXT_MST_3" property="purAplManagement.detailExtItem.extendMst.extendMst3.mstKey" />
        <result column="EXT_MST_4" property="purAplManagement.detailExtItem.extendMst.extendMst4.mstKey" />
        <result column="EXT_MST_5" property="purAplManagement.detailExtItem.extendMst.extendMst5.mstKey" />
        <result column="EXT_MST_6" property="purAplManagement.detailExtItem.extendMst.extendMst6.mstKey" />
        <result column="EXT_MST_7" property="purAplManagement.detailExtItem.extendMst.extendMst7.mstKey" />
        <result column="EXT_MST_8" property="purAplManagement.detailExtItem.extendMst.extendMst8.mstKey" />
        <result column="EXT_MST_NAME_1" property="purAplManagement.detailExtItem.extendMst.extendMst1.mstName"/>
        <result column="EXT_MST_NAME_2" property="purAplManagement.detailExtItem.extendMst.extendMst2.mstName"/>
        <result column="EXT_MST_NAME_3" property="purAplManagement.detailExtItem.extendMst.extendMst3.mstName"/>
        <result column="EXT_MST_NAME_4" property="purAplManagement.detailExtItem.extendMst.extendMst4.mstName"/>
        <result column="EXT_MST_NAME_5" property="purAplManagement.detailExtItem.extendMst.extendMst5.mstName"/>
        <result column="EXT_MST_NAME_6" property="purAplManagement.detailExtItem.extendMst.extendMst6.mstName"/>
        <result column="EXT_MST_NAME_7" property="purAplManagement.detailExtItem.extendMst.extendMst7.mstName"/>
        <result column="EXT_MST_NAME_8" property="purAplManagement.detailExtItem.extendMst.extendMst8.mstName"/>
    </resultMap>
    <!--詳細画面のカタログ購入依頼詳細を取得する-->
    <select id="searchCatalogPurReqAplForDetail" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogIdentify" resultMap="CatalogPurReqApl_Detail_Map">
        SELECT
             T_PUR_APL.PUR_APL_NO,
             T_PUR_APL.URGENT_IND,
             T_PUR_APL.PUR_APL_STATUS,
             T_PUR_APL.PUR_REQ_DATE,
             T_PUR_APL.TITLE_NAME,
             T_PUR_APL.INPUT_SECTION_CD,
             T_PUR_APL.INPUT_COMPANY_CD,
             T_PUR_APL.INPUT_SECTION_NAME,
             T_PUR_APL.INPUT_USER_ID,
             T_PUR_APL.INPUT_USER_NAME,
             T_PUR_APL.REQ_SECTION_CD,
             T_PUR_APL.REQ_COMPANY_CD,
             T_PUR_APL.REQ_SECTION_NAME,
             T_PUR_APL.REQ_USER_EXTENSION_NO,
             T_PUR_APL.REQ_USER_TEL_NO,
             T_PUR_APL.REQ_USER_ID,
             T_PUR_APL.REQ_USER_NAME,
             T_PUR_APL.LOAD_SECTION_CD,
             T_PUR_APL.LOAD_SECTION_NAME,
             T_PUR_APL.DELIV_PLACE_CD,
             T_PUR_APL.DELIV_PLACE_NAME,
             T_PUR_APL.BUDGET_NO,
             T_RINGI_BUDGET_DTL.BUDGET_NAME,
             T_PUR_APL.FOR_BOSS_COMMENT,
             T_PUR_APL.FOR_SUPPRIER_COMMENT,
             T_PUR_APL.APP_ROUTE_NO,
             T_PUR_APL.APP_ROUTE_NAME,
             ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_PUR_APL")}
        FROM T_PUR_APL
        LEFT JOIN T_RINGI_BUDGET_DTL
             ON T_RINGI_BUDGET_DTL.COMPANY_CD = T_PUR_APL.LOAD_COMPANY_CD
             AND T_RINGI_BUDGET_DTL.SECTION_PLACE_CD = T_PUR_APL.LOAD_SECTION_PLACE_CD
             AND T_RINGI_BUDGET_DTL.BUDGET_DTL_NO = T_PUR_APL.BUDGET_NO
        WHERE T_PUR_APL.PUR_APL_SEQ = #{purAplSeqNo}
             AND T_PUR_APL.NEW_FLG = '1'
             AND T_PUR_APL.DELETE_FLG = '0'
    </select>

    <!--詳細画面の依頼金額合計を取得する-->
   <select id = "searchReqAmount" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogIdentify" resultType="String" >
        SELECT  CASE WHEN SUM(T_PUR_REQUEST.REQ_AMOUNT)IS NULL
                THEN 0
                ELSE SUM(T_PUR_REQUEST.REQ_AMOUNT) END "REQ_AMOUNT"
        FROM    T_PUR_REQUEST
         WHERE  T_PUR_REQUEST.PUR_APL_SEQ = #{purAplSeqNo}
                <if test="@org.apache.commons.lang.StringUtils@isNotBlank(appUnitNo)">
                  AND T_PUR_REQUEST.APP_UNIT_NO = #{appUnitNo, jdbcType=VARCHAR}
                 </if>
                AND T_PUR_REQUEST.DELETE_FLG = '0'
         GROUP BY T_PUR_REQUEST.PUR_APL_SEQ
    </select>

    <!--承認単位番号を取得する-->
    <select id = "searchAppUnitCd" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogPurReq" resultType="String">
        SELECT T_PUR_REQUEST.APP_UNIT_NO
        FROM   T_PUR_REQUEST
        WHERE  PUR_REQ_SEQ = #{purReqSeq}
        AND    T_PUR_REQUEST.DELETE_FLG = '0'
        <if test="@org.apache.commons.lang.StringUtils@isNotBlank(appUnitNo)">
            AND   T_PUR_REQUEST.APP_UNIT_NO = #{appUnitNo}
        </if>
    </select>

    <!--購入申請シーケンス番号より購入依頼レーコド数を取得する-->
    <select id = "searchCountOfRequest" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogIdentify" resultType="int">
        SELECT COUNT(1)
        FROM T_PUR_REQUEST
        WHERE T_PUR_REQUEST.PUR_APL_SEQ = #{purAplSeqNo}
             AND T_PUR_REQUEST.DELETE_FLG='0'
    </select>

    <select id = "searchCountOfRequestValidData" parameterType="fw.domain.slip.purreq.purreqcatalog.CatalogIdentify" resultType="int">
        SELECT COUNT(1)
        FROM T_PUR_REQUEST
        WHERE T_PUR_REQUEST.PUR_APL_SEQ = #{purAplSeqNo}
             AND T_PUR_REQUEST.DELETE_FLG='0'
             AND T_PUR_REQUEST.NEW_FLG='1'
    </select>

    <!-- 所属する会社の通貨コードに換算可能なレートのレコード数を取得する -->
    <select id="searchCountOfRateMaster" resultType="int" >
        SELECT COUNT(1)
        FROM M_RATE
        WHERE M_RATE.ORG_CURRENCY_CD = #{currencyCd}
               AND (M_RATE.COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
                OR M_RATE.COMPANY_CD = '${@fw.common.constant.ApplicationConstant@COMPANY_CD_ALL}')
               AND M_RATE.CNV_CURRENCY_CD = '${@fw.security.SecurityUtil@getCurrencyCdByEscapeSql()}'
               AND M_RATE.RATE_START_DATE &lt;= ${@fw.common.util.AppUtil@getSysDate()}
               AND M_RATE.RATE_END_DATE &gt;= ${@fw.common.util.AppUtil@getSysDate()}
    </select>
</mapper>