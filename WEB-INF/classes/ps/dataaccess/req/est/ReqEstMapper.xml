<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ps.dataaccess.req.est.ReqEstMapper">
    <!-- ====================== PSREQ060 見積取得依頼  Start=================== -->
    <sql id="listKeyIdentityWhereCondition">
        ${@ps.common.util.ItemSettingUtil@getItemSettingWhereSQL('1')}
        <if test="@org.apache.commons.lang.StringUtils@isNotBlank(reqUserId)">
            <choose>
                <when test="!@org.apache.commons.lang.StringUtils@equals(reqUserId,@fw.security.SecurityUtil@getUserId())">
                    AND T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS != '04'
                </when>
            </choose>
        </if>
        AND T_QUOT_ACQ_APL.DELETE_FLG = '0'
        AND T_QUOT_ACQ_APL.NEW_FLG = '1'
        AND T_QUOT_ACQ_APL.REQ_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
        AND T_QUOT_ACQ_APL.REQ_SECTION_CD IN (${@fw.common.util.AppUtil@getSectionViewRegion()})
        <if test="@org.apache.commons.lang.StringUtils@equals('0',linkFlg)">
            <if test="@org.apache.commons.lang.StringUtils@isNotBlank(reqUserId)">
                AND T_QUOT_ACQ_APL.REQ_USER_ID = #{reqUserId}
            </if>
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotReqStatusListForSql) 
            || @org.apache.commons.collections.CollectionUtils@isNotEmpty(quotAcqAplStatusList)">
            AND (
        </if>
        <if test="@org.springframework.util.CollectionUtils@contains(quotReqStatusListForSql.listIterator(),'05')">
            (T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS = '11' AND ( T_SLIP_MNG.SLIP_STATUS IN ('0211','0212') OR T_QUOT_REQUEST.QUOT_REQ_STATUS IN ('01','02','03','04','05')))
            <if test="@org.apache.commons.collections.CollectionUtils@size(quotReqStatusListForSql) &gt; 1">
                OR
            </if>
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotReqStatusListForSql) 
            &amp;&amp; @org.apache.commons.collections.CollectionUtils@size(quotReqStatusListForSql) &gt;= 1">
            <if test="@org.springframework.util.CollectionUtils@contains(quotReqStatusListForSql.listIterator(),'06') 
                || @org.springframework.util.CollectionUtils@contains(quotReqStatusListForSql.listIterator(),'07') 
                || @org.springframework.util.CollectionUtils@contains(quotReqStatusListForSql.listIterator(),'21')">
                T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS = '11'
                AND T_SLIP_MNG.SLIP_STATUS NOT IN ('0211','0212')
                AND T_QUOT_REQUEST.QUOT_REQ_STATUS IN
                <foreach collection="quotReqStatusListForSql" item="reqStatus" open="(" separator="," close=")">
                    #{reqStatus, jdbcType=VARCHAR}
                </foreach>
                AND T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS != '07'
            </if>
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotReqStatusListForSql) 
            &amp;&amp; @org.apache.commons.collections.CollectionUtils@isNotEmpty(quotAcqAplStatusList)">
            OR
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotAcqAplStatusList)">
            <foreach collection="quotAcqAplStatusList" item="aplStatus" open="" separator="or" close="">                        
                <if test="!@org.apache.commons.lang.StringUtils@equals(aplStatus,'04')">
                    (T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS = #{aplStatus})
                </if>
                <if test="@org.apache.commons.lang.StringUtils@equals(aplStatus,'04')">
                    (T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS = '04'
                    AND T_QUOT_ACQ_APL.INPUT_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}')
                </if>
            </foreach>
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isEmpty(quotAcqAplStatusList)">
            AND (T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS != '04' OR T_QUOT_ACQ_APL.INPUT_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}')
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotReqStatusListForSql) 
            || @org.apache.commons.collections.CollectionUtils@isNotEmpty(quotAcqAplStatusList)">
            )
        </if>
        <if test="@org.apache.commons.lang.StringUtils@isNotBlank(urgentInd)">
            AND T_QUOT_ACQ_APL.URGENT_IND = '1'
        </if>
        AND EXISTS (
            SELECT T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
            FROM T_QUOT_ACQ_REQUEST
            WHERE
                T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_NO 
            AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
            <if test="@org.apache.commons.lang.StringUtils@isNotBlank(priceReqFlg)">
                AND T_QUOT_ACQ_APL.PRICE_REQ_FLG = '1'
            </if>
            ${@ps.common.util.ItemSettingUtil@getItemSettingWhereSQL('2')}
        )
        <if test="@org.apache.commons.lang.StringUtils@isBlank(purAplDisplayFlg)" >
            AND T_PUR_APL.PUR_APL_SEQ IS NULL
        </if>
    </sql>
    
    <!-- 一覧検索のFROM句 -->
    <sql id="listFrom">
        FROM
            T_QUOT_ACQ_APL
        INNER JOIN (
            SELECT
                QUOT_ACQ_APL_SEQ,
                MIN(QUOT_ACQ_APL_DTL_NO) as QUOT_ACQ_APL_DTL_NO
            FROM
                T_QUOT_ACQ_REQUEST
            GROUP BY 
                QUOT_ACQ_APL_SEQ
        ) T_QUOT_ACQ_REQUEST 
        ON
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        INNER JOIN 
            T_SLIP_MNG ON
                T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO = T_SLIP_MNG.SLIP_NO
        LEFT JOIN 
            T_QUOT_REQUEST
        ON 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = T_QUOT_REQUEST.QUOT_ACQ_APL_NO
        AND T_QUOT_REQUEST.DELETE_FLG = '0'
        AND T_QUOT_REQUEST.NEW_FLG = '1'
        LEFT JOIN 
            T_PUR_APL
        ON 
            T_QUOT_REQUEST.QUOT_REQ_NO = T_PUR_APL.QUOT_REQ_NO
        AND T_PUR_APL.DELETE_FLG = '0'
        AND T_PUR_APL.NEW_FLG = '1'
        LEFT JOIN (
            SELECT 
                T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ AS "ACQ_APL_SEQ",
                MAX(T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE) as "REQ_DELIV_DATE"
            FROM 
                T_QUOT_ACQ_REQUEST 
            WHERE
                T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
            GROUP BY 
                T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        ) T_QUOT_ACQ_REQUEST
        ON
            T_QUOT_ACQ_REQUEST.ACQ_APL_SEQ = T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ
    </sql>
    
    <select id="listKeyIdentity" parameterType="fw.domain.slip.quot.quotstatus.quotreqstatuslist.quotstatuslist.QuotReqStatusSearchCondition" resultType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify">
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ as "quotAcqAplSeqNo"
        <include refid="listFrom" />
        <where> 
            <include refid="listKeyIdentityWhereCondition"/>
        </where>
        ORDER BY ${searchCondition.columnOrder.columnOrder()}
    </select>

    <resultMap type="fw.domain.slip.quot.quotstatus.quotreqstatuslist.quotstatuslist.QuotReqStatusItem"
        id="QuotReqStatusItem_Map">
        <id column="QUOT_ACQ_APL_SEQ" property="quotAcqReqIdentify.quotAcqAplSeqNo" />
        <id column="QUOT_ACQ_APL_NO" property="quotAcqReqIdentify.quotAcqAplNo.quotAcqAplNo" />
        <id column="QUOT_ACQ_APL_VERSION" property="quotAcqReqIdentify.historyNo.historyNo" />
        <id column="T_QUOT_REQUEST.QUOT_REQ_SEQ" property="quotReqIdentify.quotReqSeqNo.seqNumber" />
        <id column="QUOT_REQ_NO" property="quotReqIdentify.quotReqNo.quotReqNo"/>
        <result column="SLIP_NO" property="quotAcqReqIdentify.exclusiveSlipId.slipNo"/>
        <result column="SLIP_LAST_UPD_DATE" property="quotAcqReqIdentify.exclusiveSlipId.lastUpdDate"/>
    </resultMap>
    <select id="listPageItem" parameterType="fw.domain.slip.quot.quotstatus.quotreqstatuslist.quotstatuslist.QuotReqStatusSearchCondition" resultMap="QuotReqStatusItem_Map">
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ ,
            T_QUOT_ACQ_APL.PRE_SEQ as "quotAcqReqIdentify.preSeq" ,
            T_QUOT_ACQ_APL.LAST_UPD_DATE as "quotAcqReqIdentify.lastUpdDate",
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO ,
            T_QUOT_ACQ_APL.URGENT_IND as "urgentInd",
            T_QUOT_ACQ_APL.REQ_DATE as "reqDate.dateOfymd",
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS as "quotAcqAplStatus",
            T_QUOT_ACQ_APL.TITLE_NAME as "titleName",
            T_QUOT_ACQ_APL.SUP_CD as "supCd",
            T_QUOT_ACQ_APL.SUP_ABBR_NAME as "supName",
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME as "itemClassNameL",
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME as "itemClassNameM",
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME as "itemClassNameS",
            T_QUOT_ACQ_APL.DELIV_PLACE_CD as "delivPlaceCd",
            T_QUOT_ACQ_APL.DELIV_PLACE_NAME as "delivPlaceName",
            T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE as "quotReqRespLimitDate.dateOfymd",
            T_QUOT_ACQ_APL.REQ_SECTION_CD as "reqSectionCd",
            T_QUOT_ACQ_APL.REQ_SECTION_NAME as "reqSectionName",
            T_QUOT_ACQ_APL.REQ_USER_ID as "reqUserId",
            T_QUOT_ACQ_APL.REQ_USER_NAME as "reqUserName",
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_VERSION ,
            T_QUOT_REQUEST.QUOT_REQ_STATUS as "quotReqStatus",
            T_QUOT_REQUEST.QUOT_REQ_SEQ as "T_QUOT_REQUEST.QUOT_REQ_SEQ",
            T_QUOT_REQUEST.LAST_UPD_DATE as "quotReqIdentify.lastUpdDate",
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQLDomainAliasNonBinary("T_QUOT_ACQ_APL","quotAcqAplExtItem")},
            T_QUOT_REQUEST.QUOT_REQ_NO,
            T_PUR_APL.PUR_APL_SEQ as "purAplSeq",
            T_SLIP_MNG.SLIP_NO,
            T_SLIP_MNG.LAST_UPD_DATE as SLIP_LAST_UPD_DATE,
            T_SLIP_MNG.SLIP_STATUS as "slipStatus"
        <include refid="listFrom" />
        <where> 
            <include refid="listKeyIdentityWhereCondition"/>
            AND T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ IN 
            <foreach collection="searchCondition.page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">  
                #{keyList.quotAcqAplSeqNo} 
            </foreach>
            
        </where>
        ORDER BY ${searchCondition.columnOrder.columnOrder()}
    </select>

    <resultMap type="fw.domain.slip.quot.quotstatus.quotreqstatuslist.quotstatuslist.QuotAcqReqItem"
        id="QuotAcqReqItem_Map">
        <id column="QUOT_ACQ_APL_SEQ" property="quotAcqReqIdentify.quotAcqAplSeqNo" />
    </resultMap>
    <select id="listPageDtlItem" parameterType="fw.domain.mst.searchcondition.SearchCondition" 
        resultMap="QuotAcqReqItem_Map">
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ ,
            T_QUOT_ACQ_REQUEST.ITEM_CD as "itemCd",
            T_QUOT_ACQ_REQUEST.ITEM_NAME as "itemName",
            T_QUOT_ACQ_REQUEST.REQ_VOL as "reqVol.vol",
            T_QUOT_ACQ_REQUEST.UNIT_CD as "unitCd",
            T_QUOT_ACQ_REQUEST.UNIT_NAME as "unitName",
            T_QUOT_ACQ_REQUEST.CURRENCY_CD as "currencyCd",
            T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE as "reqDelivDate.dateOfymd",
            T_QUOT_ACQ_REQUEST.UNIT_PRICE as "unitPrice.amount",
            T_QUOT_ACQ_REQUEST.REQ_AMOUNT as "reqAmount.amount"
        FROM T_QUOT_ACQ_APL
        LEFT JOIN T_QUOT_ACQ_REQUEST
            ON T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        WHERE T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ IN
            <foreach collection="page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">  
                #{keyList.quotAcqAplSeqNo} 
            </foreach>
        ORDER BY T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ
    </select>

    <!-- ダウンロードのFROM句 -->
    <sql id="downloadFrom">
        FROM 
            T_QUOT_ACQ_APL 
        INNER JOIN (
            SELECT
                QUOT_ACQ_APL_SEQ,
                MIN(QUOT_ACQ_APL_DTL_NO) as QUOT_ACQ_APL_DTL_NO
            FROM
                T_QUOT_ACQ_REQUEST
            GROUP BY 
                QUOT_ACQ_APL_SEQ
        ) T_QUOT_ACQ_REQUEST_SLIP 
        ON
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST_SLIP.QUOT_ACQ_APL_SEQ
        INNER JOIN 
            T_SLIP_MNG 
        ON
            T_QUOT_ACQ_REQUEST_SLIP.QUOT_ACQ_APL_DTL_NO = T_SLIP_MNG.SLIP_NO
        LEFT JOIN 
            T_QUOT_ACQ_REQUEST 
        ON
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
        LEFT JOIN 
            T_QUOT_REQUEST
        ON 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = T_QUOT_REQUEST.QUOT_ACQ_APL_NO
        AND T_QUOT_REQUEST.DELETE_FLG = '0'
        AND T_QUOT_REQUEST.NEW_FLG = '1'
        LEFT JOIN 
            T_PUR_APL
        ON 
            T_QUOT_REQUEST.QUOT_REQ_NO = T_PUR_APL.QUOT_REQ_NO
        AND T_PUR_APL.DELETE_FLG = '0'
        AND T_PUR_APL.NEW_FLG = '1'
    </sql>

    <!-- ダウンロード件数を取得 -->
    <select id="downloadCount" parameterType="fw.domain.slip.quot.quotstatus.quotreqstatuslist.quotstatuslist.QuotReqStatusSearchCondition" resultType="java.lang.Long">
        SELECT
            COUNT(1)
        <include refid="downloadFrom"/>
        <where> 
            <include refid="listKeyIdentityWhereCondition"/>
        </where>
    </select>

    <!-- 見積依頼一覧（依頼元）のダウンロード -->
    <resultMap type="fw.domain.slip.quot.quotstatus.quotreqstatuslist.quotstatuslist.QuotReqStatusDownloadItem" id="QuotReqStatusDownloadItem_Map">
        <id column="QUOT_ACQ_APL_SEQ" property="quotReqStatusItem.quotAcqReqIdentify.quotAcqAplSeqNo" />
        <id column="PRE_SEQ" property="quotReqStatusItem.quotAcqReqIdentify.preSeq" />
        <id column="ACQ_REQ_LAST_UPD_DATE" property="quotReqStatusItem.quotAcqReqIdentify.lastUpdDate" />
        <id column="QUOT_ACQ_APL_NO" property="quotReqStatusItem.quotAcqReqIdentify.quotAcqAplNo.quotAcqAplNo" />
        <id column="URGENT_IND" property="quotReqStatusItem.urgentInd" />
        <id column="REQ_DATE" property="quotReqStatusItem.reqDate.dateOfymd" />
        <id column="QUOT_ACQ_APL_STATUS" property="quotReqStatusItem.quotAcqAplStatus" />
        <id column="TITLE_NAME" property="quotReqStatusItem.titleName" />
        <id column="SUP_CD" property="quotReqStatusItem.supCd" />
        <id column="SUP_ABBR_NAME" property="quotReqStatusItem.supName" />
        <id column="ITEM_CLASS_L_NAME" property="quotReqStatusItem.itemClassNameL" />
        <id column="ITEM_CLASS_M_NAME" property="quotReqStatusItem.itemClassNameM" />
        <id column="ITEM_CLASS_S_NAME" property="quotReqStatusItem.itemClassNameS" />
        <id column="DELIV_PLACE_CD" property="quotReqStatusItem.delivPlaceCd" />
        <id column="DELIV_PLACE_NAME" property="quotReqStatusItem.delivPlaceName" />
        <id column="QUOT_REQ_RESP_LIMIT_DATE" property="quotReqStatusItem.quotReqRespLimitDate.dateOfymd" />
        <id column="REQ_SECTION_CD" property="quotReqStatusItem.reqSectionCd" />
        <id column="REQ_SECTION_NAME" property="quotReqStatusItem.reqSectionName" />
        <id column="REQ_USER_ID" property="quotReqStatusItem.reqUserId" />
        <id column="REQ_USER_NAME" property="quotReqStatusItem.reqUserName" />
        <id column="QUOT_ACQ_APL_VERSION" property="quotReqStatusItem.quotAcqReqIdentify.historyNo.historyNo" />
        <id column="QUOT_REQ_STATUS" property="quotReqStatusItem.quotReqStatus" />
        <id column="QUOT_REQ_LAST_UPD_DATE" property="quotReqStatusItem.quotReqIdentify.lastUpdDate" />
        <id column="ITEM_CD" property="quotReqStatusItem.itemCd" />
        <id column="ITEM_NAME" property="quotReqStatusItem.itemName" />
        <id column="REQ_VOL" property="quotReqStatusItem.reqVol.vol" />
        <id column="UNIT_NAME" property="quotReqStatusItem.unitName" />
        <id column="CURRENCY_CD" property="quotReqStatusItem.currencyCd" />
        <id column="REQ_DELIV_DATE" property="quotReqStatusItem.reqDelivDate.dateOfymd" />
        <id column="UNIT_PRICE" property="quotReqStatusItem.unitPrice.amount" />
        <id column="REQ_AMOUNT" property="quotReqStatusItem.reqAmount.amount" />
        <id column="QUOT_REQ_SEQ" property="quotReqStatusItem.quotReqIdentify.quotReqSeqNo.seqNumber" />
        <id column="PUR_APL_SEQ" property="quotReqStatusItem.purAplSeq" />
        <id column="SLIP_STATUS" property="quotReqStatusItem.slipStatus" />
        <id column="QUOT_REQ_NO" property="quotReqStatusItem.quotReqIdentify.quotReqNo.quotReqNo"/>
    </resultMap>
    <select id="download"  parameterType="fw.domain.slip.quot.quotstatus.quotreqstatuslist.quotstatuslist.QuotReqStatusSearchCondition"  resultMap="QuotReqStatusDownloadItem_Map">
        <include refid="downloadHeader"/>
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ ,
            T_QUOT_ACQ_APL.PRE_SEQ,
            T_QUOT_ACQ_APL.LAST_UPD_DATE AS "ACQ_REQ_LAST_UPD_DATE",
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO,
            T_QUOT_ACQ_APL.URGENT_IND,
            T_QUOT_ACQ_APL.REQ_DATE,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS,
            T_QUOT_ACQ_APL.TITLE_NAME,
            T_QUOT_ACQ_APL.SUP_CD,
            T_QUOT_ACQ_APL.SUP_ABBR_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME,
            T_QUOT_ACQ_APL.DELIV_PLACE_CD,
            T_QUOT_ACQ_APL.DELIV_PLACE_NAME,
            T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE,
            T_QUOT_ACQ_APL.REQ_SECTION_CD,
            T_QUOT_ACQ_APL.REQ_SECTION_NAME,
            T_QUOT_ACQ_APL.REQ_USER_ID,
            T_QUOT_ACQ_APL.REQ_USER_NAME,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_VERSION ,
            T_QUOT_REQUEST.QUOT_REQ_STATUS,
            T_QUOT_REQUEST.QUOT_REQ_SEQ,
            T_QUOT_REQUEST.LAST_UPD_DATE AS "QUOT_REQ_LAST_UPD_DATE",
            T_QUOT_ACQ_REQUEST.ITEM_CD,
            T_QUOT_ACQ_REQUEST.ITEM_NAME,
            T_QUOT_ACQ_REQUEST.REQ_VOL,
            T_QUOT_ACQ_REQUEST.UNIT_CD,
            T_QUOT_ACQ_REQUEST.UNIT_NAME,
            T_QUOT_ACQ_REQUEST.CURRENCY_CD,
            T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE,
            T_QUOT_ACQ_REQUEST.UNIT_PRICE,
            T_QUOT_ACQ_REQUEST.REQ_AMOUNT,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQLDomainAliasNonBinary("T_QUOT_ACQ_APL","item.quotAcqAplExtItem")},
            T_QUOT_REQUEST.QUOT_REQ_NO,
            T_PUR_APL.PUR_APL_SEQ,
            T_SLIP_MNG.SLIP_STATUS
        <include refid="downloadFrom"/>
        <where> 
            <include refid="listKeyIdentityWhereCondition"/>
        </where>
        ORDER BY ${searchCondition.columnOrder.columnOrder()}
        <include refid="downloadFooter"/>
    </select>

    <update id="updateForRequest" parameterType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify">
        UPDATE T_QUOT_ACQ_REQUEST
        SET DELETE_FLG = '1',
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
        WHERE
            QUOT_ACQ_APL_SEQ = #{quotAcqAplSeqNo}
    </update> 

    <update id="updateForDelete" parameterType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify">
        UPDATE T_QUOT_ACQ_APL 
        SET DELETE_FLG = '1' ,
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
        WHERE QUOT_ACQ_APL_SEQ = #{quotAcqAplSeqNo}
    </update>
    <!-- ====================== PSREQ060 見積取得依頼  End=================== -->

    <!-- ====================== PSREQ031 見積取得依頼一覧  Start=================== -->
    <sql id="listKeyIdentityListWhereCondition">
            AND INPUT_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
            AND INPUT_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}'
            <choose>
                <when test="@org.apache.commons.lang.StringUtils@isNotBlank(reqUser.reqUser.userID)">
                    AND INPUT_USER_ID = #{reqUser.reqUser.userID}
                    <if test="!@org.apache.commons.lang.StringUtils@equals(reqUser.reqUser.userID,@fw.security.SecurityUtil@getUserId())">
                        AND QUOT_ACQ_APL_STATUS &lt;> '04'
                    </if>
                </when>
                <otherwise>
                    <if test="@org.apache.commons.lang.StringUtils@isBlank(status)">
                        AND (QUOT_ACQ_APL_STATUS IN ('01','02','03','04')
                        AND INPUT_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
                        OR QUOT_ACQ_APL_STATUS IN ('01','02','03')) 
                    </if>
                </otherwise>
            </choose>
            
            <choose>
                <when test="@org.apache.commons.lang.StringUtils@isBlank(status)">
                    AND QUOT_ACQ_APL_STATUS IN ('01','02','03','04')
                </when>
                <otherwise>
                    AND QUOT_ACQ_APL_STATUS = #{status}
                    <if test="status == '04'">
                        AND INPUT_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
                    </if>
                </otherwise>
            </choose>
            AND REQ_TYPE_IND = '1'
            AND NEW_FLG = '1'
            AND T_QUOT_ACQ_APL.DELETE_FLG = '0'
    </sql>
    <select id="listKeyIdentityList" 
        parameterType="fw.domain.slip.quot.quotacqreq.quotacqreqmng.QuotAcqReqSearchCondition"
        resultType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify">
        SELECT 
            QUOT_ACQ_APL_SEQ as "quotAcqAplSeqNo"
        FROM T_QUOT_ACQ_APL 
        <where>
            <include refid="listKeyIdentityListWhereCondition"/>
        </where> 
        ORDER BY ${searchCondition.columnOrder.columnOrder()}
    </select>

    <resultMap type="fw.domain.slip.quot.quotacqreq.quotacqreqmng.QuotAcqReqQuickLinkItem"
        id="QuotAcqReqLinkItem_Map">
        <id column="QUOT_ACQ_APL_SEQ" property="quotAcqReqIdentify.quotAcqAplSeqNo" />
        <id column="QUOT_ACQ_APL_NO" property="quotAcqReqIdentify.quotAcqAplNo.quotAcqAplNo" />
        <id column="QUOT_ACQ_APL_VERSION" property="quotAcqReqIdentify.historyNo.historyNo" />
        <result column="SLIP_NO" property="quotAcqReqIdentify.exclusiveSlipId.slipNo"/>
        <result column="SLIP_LAST_UPD_DATE" property="quotAcqReqIdentify.exclusiveSlipId.lastUpdDate"/>
    </resultMap>
    <select id="listPageItemList" parameterType="fw.domain.slip.quot.quotacqreq.quotacqreqmng.QuotAcqReqSearchCondition"
        resultMap="QuotAcqReqLinkItem_Map">
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ ,
            T_QUOT_ACQ_APL.PRE_SEQ as "quotAcqReqIdentify.preSeq" ,
            T_QUOT_ACQ_APL.LAST_UPD_DATE as "quotAcqReqIdentify.lastUpdDate" ,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_VERSION ,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO ,
            T_QUOT_ACQ_APL.URGENT_IND as "urgentInd" ,
            T_QUOT_ACQ_APL.INPUT_USER_NAME as "issueVousherName" ,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS as "status" ,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS as "statusId" ,
            T_QUOT_ACQ_APL.REQ_DATE as "reqDate.dateOfymd" ,
            T_QUOT_ACQ_APL.TITLE_NAME as "titleName" ,
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME as "itemClassLarge" , 
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME as "itemClassMedium" ,
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME as "itemClassSmall" ,
            T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE as "quotMarkLimit.dateOfymd" ,
            T_QUOT_ACQ_APL.REQ_SECTION_CD as "reqSectionCd" ,
            T_QUOT_ACQ_APL.REQ_SECTION_NAME as "reqSectionName" ,
            T_QUOT_ACQ_APL.REQ_USER_ID as "reqUserCd" ,
            T_QUOT_ACQ_APL.REQ_USER_NAME as "reqUserName" ,
            T_SLIP_MNG.SLIP_NO,
            T_SLIP_MNG.LAST_UPD_DATE as SLIP_LAST_UPD_DATE,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQLDomainAliasNonBinary("T_QUOT_ACQ_APL","quotAcqAplExtItem")}
        FROM T_QUOT_ACQ_APL INNER JOIN (
            SELECT
                QUOT_ACQ_APL_SEQ,
                MIN(QUOT_ACQ_APL_DTL_NO) as QUOT_ACQ_APL_DTL_NO
            FROM
                T_QUOT_ACQ_REQUEST
            GROUP BY QUOT_ACQ_APL_SEQ
           ) T_QUOT_ACQ_REQUEST ON
           T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
           INNER JOIN T_SLIP_MNG ON
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO = T_SLIP_MNG.SLIP_NO
        <where> 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ IN
            <foreach collection="searchCondition.page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">  
                #{keyList.quotAcqAplSeqNo} 
            </foreach>
            <include refid="listKeyIdentityListWhereCondition"/>
        </where>
        ORDER BY ${searchCondition.columnOrder.columnOrder()}
    </select>

    <update id="updateForCancelAndDelete" parameterType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify">
        UPDATE T_QUOT_ACQ_APL 
        SET DELETE_FLG = '1' ,
            NEW_FLG = '0' ,
            NEW_APP_FLG = '0' ,
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
        WHERE QUOT_ACQ_APL_SEQ = #{quotAcqAplSeqNo}
    </update>

    <update id="updateForCancelAndDeletePre" parameterType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify">
        UPDATE T_QUOT_ACQ_APL 
        SET DELETE_FLG = '0' ,
            NEW_FLG = '1' ,
            NEW_APP_FLG = '1' ,
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
        WHERE QUOT_ACQ_APL_SEQ = #{preSeq}
    </update>

    <update id="updateForRequestList" parameterType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify">
        UPDATE T_QUOT_ACQ_REQUEST
        SET DELETE_FLG = '0',
            LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
            LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
            LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
            LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
        WHERE
            QUOT_ACQ_APL_SEQ = #{preSeq}
    </update> 
    <!-- ====================== PSREQ031 見積取得依頼一覧  End=================== -->

    <!-- ====================== PSREQ040 見積取得依頼詳細  Start =================== -->
    <resultMap type="fw.domain.slip.quot.quotacqreq.QuotAcqReq" id="QuotAcqReqAplItem_Map">
        <id column="QUOT_ACQ_APL_NO" property="quotAcqReqIdentify.quotAcqAplNo.quotAcqAplNo" />
        <id column="URGENT_IND" property="urgentInd.urgentInd" />
        <id column="QUOT_ACQ_APL_STATUS" property="quotAcqAplStatus.quotAcqAplStatus" />
        <id column="BUYER_BACK_USER_COMMENTS" property="purReturn.backReason.backReason.comment" />
        <id column="REQ_DATE" property="quotAcqReqDate.reqDate.reqDate.dateOfymd" />
        <id column="TITLE_NAME" property="titleName.titleName" />

        <id column="INPUT_SECTION_CD" property="inputUser.inputUser.section.sectionCd" />
        <id column="INPUT_SECTION_NAME" property="inputUser.inputUser.section.sectionName" />
        <id column="INPUT_USER_ID" property="inputUser.inputUser.userID" />
        <id column="INPUT_USER_NAME" property="inputUser.inputUser.userName" />
        <id column="INPUT_COMPANY_CD" property="inputUser.inputUser.section.company.companyCd" />

        <id column="REQ_SECTION_CD" property="reqUser.reqUser.section.sectionCd" />
        <id column="REQ_SECTION_NAME" property="reqUser.reqUser.section.sectionName" />
        <id column="REQ_USER_EXTENSION_NO" property="reqUser.reqUser.extNo.extensionNo" />
        <id column="REQ_USER_TEL_NO" property="reqUser.reqUser.externalNo.externalNo" />
        <id column="REQ_USER_ID" property="reqUser.reqUser.userID" />
        <id column="REQ_USER_NAME" property="reqUser.reqUser.userName" />
        <id column="REQ_COMPANY_CD" property="reqUser.reqUser.section.company.companyCd" />

        <id column="DELIV_PLACE_CD" property="delivPlace.delivPlaceCd" />
        <id column="DELIV_PLACE_NAME" property="delivPlace.delivPlaceName" />
        <id column="SUP_CD" property="hopeSupplier.hopeSupplier.supCd" />
        <id column="SUP_ABBR_NAME" property="hopeSupplier.hopeSupplier.supplierName.supplierAbbrName" />
        <id column="SUP_COMPANY_CD" property="hopeSupplier.hopeSupplier.supCompanyCd" />

        <id column="ITEM_CLASS_L_NAME" property="itemKind.itemClassLName" />
        <id column="ITEM_CLASS_M_NAME" property="itemKind.itemClassMName" />
        <id column="ITEM_CLASS_S_NAME" property="itemKind.itemClassSName" />

        <id column="QUOT_REQ_RESP_LIMIT_DATE" property="quotMarkLimit.dateOfymd" />
        <id column="A_ATTACH_FILE_SEQ" property="rangeByAttachFile1.attachFile.seqNo" />
        <id column="A_ATTACH_FILE_NAME" property="rangeByAttachFile1.attachFile.fileName" />
        <id column="A_ATTACH_SCOPE" property="rangeByAttachFile1.attachRange.attachRange" />
        <id column="B_ATTACH_FILE_SEQ" property="rangeByAttachFile2.attachFile.seqNo" />
        <id column="B_ATTACH_FILE_NAME" property="rangeByAttachFile2.attachFile.fileName" />
        <id column="B_ATTACH_SCOPE" property="rangeByAttachFile2.attachRange.attachRange" />

        <id column="PRICE_REQ_FLG" property="priceRegisterFlg.priceRegisterFlg" />
        <id column="FOR_BOSS_COMMENT" property="forAppComment.forAppComment.comment" />
        <id column="FOR_BUYER_COMMENT" property="forBuyerComment.forBuyerComment.comment" />
        <id column="FOR_SUPPRIER_COMMENT" property="forSupplierComment.forSupplierComment.comment" />

        <id column="BUYER_SECTION_CD" property="itemKind.buyUser.buyUser.section.sectionCd" />
        <id column="BUYER_SECTION_NAME" property="itemKind.buyUser.buyUser.section.sectionName" />
        <id column="BUYER_USER_ID" property="itemKind.buyUser.buyUser.userID" />
        <id column="BUYER_USER_NAME" property="itemKind.buyUser.buyUser.userName" />
        <id column="BUYER_COMPANY_CD" property="itemKind.buyUser.buyUser.section.company.companyCd" />

        <id column="APP_ROUTE_NO" property="approute.appRouteNo" />
        <id column="APP_ROUTE_NAME" property="approute.appRouteName" />
        
        <id column="EXT_TXT_1" property="detailExtItem.extendTxt.extendTxt1"/>
        <id column="EXT_TXT_2" property="detailExtItem.extendTxt.extendTxt2"/>
        <id column="EXT_TXT_3" property="detailExtItem.extendTxt.extendTxt3"/>
        <id column="EXT_TXT_4" property="detailExtItem.extendTxt.extendTxt4"/>
        <id column="EXT_TXT_5" property="detailExtItem.extendTxt.extendTxt5"/>
        <id column="EXT_TXT_6" property="detailExtItem.extendTxt.extendTxt6"/>
        <id column="EXT_TXT_7" property="detailExtItem.extendTxt.extendTxt7"/>
        <id column="EXT_TXT_8" property="detailExtItem.extendTxt.extendTxt8"/>
        <id column="EXT_TXT_9" property="detailExtItem.extendTxt.extendTxt9"/>
        <id column="EXT_TXT_10" property="detailExtItem.extendTxt.extendTxt10"/>
        <id column="EXT_AREA_1" property="detailExtItem.extendArea.extendArea1"/>
        <id column="EXT_AREA_2" property="detailExtItem.extendArea.extendArea2"/>
        <id column="EXT_AREA_3" property="detailExtItem.extendArea.extendArea3"/>
        <id column="EXT_AREA_4" property="detailExtItem.extendArea.extendArea4"/>
        <id column="EXT_AREA_5" property="detailExtItem.extendArea.extendArea5"/>
        <id column="EXT_DATE_1" property="detailExtItem.extendDate.extendDate1.dateOfymd"/>
        <id column="EXT_DATE_2" property="detailExtItem.extendDate.extendDate2.dateOfymd"/>
        <id column="EXT_DATE_3" property="detailExtItem.extendDate.extendDate3.dateOfymd"/>
        <id column="EXT_DATE_4" property="detailExtItem.extendDate.extendDate4.dateOfymd"/>
        <id column="EXT_DATE_5" property="detailExtItem.extendDate.extendDate5.dateOfymd"/>
        <id column="EXT_INT_1" property="detailExtItem.extendInt.extendInt1.value"/>
        <id column="EXT_INT_2" property="detailExtItem.extendInt.extendInt2.value"/>
        <id column="EXT_INT_3" property="detailExtItem.extendInt.extendInt3.value"/>
        <id column="EXT_INT_4" property="detailExtItem.extendInt.extendInt4.value"/>
        <id column="EXT_INT_5" property="detailExtItem.extendInt.extendInt5.value"/>
        <id column="EXT_INT_6" property="detailExtItem.extendInt.extendInt6.value"/>
        <id column="EXT_INT_7" property="detailExtItem.extendInt.extendInt7.value"/>
        <id column="EXT_INT_8" property="detailExtItem.extendInt.extendInt8.value"/>
        <id column="EXT_INT_9" property="detailExtItem.extendInt.extendInt9.value"/>
        <id column="EXT_INT_10" property="detailExtItem.extendInt.extendInt10.value"/>
        <id column="EXT_DEC_1" property="detailExtItem.extendDec.extendDec1.value"/>
        <id column="EXT_DEC_2" property="detailExtItem.extendDec.extendDec2.value"/>
        <id column="EXT_DEC_3" property="detailExtItem.extendDec.extendDec3.value"/>
        <id column="EXT_DEC_4" property="detailExtItem.extendDec.extendDec4.value"/>
        <id column="EXT_DEC_5" property="detailExtItem.extendDec.extendDec5.value"/>
        <id column="EXT_SEL_1" property="detailExtItem.extendSel.extendSel1"/>
        <id column="EXT_SEL_2" property="detailExtItem.extendSel.extendSel2"/>
        <id column="EXT_SEL_3" property="detailExtItem.extendSel.extendSel3"/>
        <id column="EXT_SEL_4" property="detailExtItem.extendSel.extendSel4"/>
        <id column="EXT_SEL_5" property="detailExtItem.extendSel.extendSel5"/>
        <id column="EXT_SEL_6" property="detailExtItem.extendSel.extendSel6"/>
        <id column="EXT_SEL_7" property="detailExtItem.extendSel.extendSel7"/>
        <id column="EXT_SEL_8" property="detailExtItem.extendSel.extendSel8"/>
        <id column="EXT_SEL_9" property="detailExtItem.extendSel.extendSel9"/>
        <id column="EXT_SEL_10" property="detailExtItem.extendSel.extendSel10"/>
        <id column="EXT_CHK_1" property="detailExtItem.extendChk.extendChk1"/>
        <id column="EXT_CHK_2" property="detailExtItem.extendChk.extendChk2"/>
        <id column="EXT_CHK_3" property="detailExtItem.extendChk.extendChk3"/>
        <id column="EXT_CHK_4" property="detailExtItem.extendChk.extendChk4"/>
        <id column="EXT_CHK_5" property="detailExtItem.extendChk.extendChk5"/>
        <id column="EXT_FILE_1" property="detailExtItem.extendFile.extendFile1.fileName"/>
        <id column="EXT_FILE_2" property="detailExtItem.extendFile.extendFile2.fileName"/>
        <id column="EXT_FILE_3" property="detailExtItem.extendFile.extendFile3.fileName"/>
        <id column="EXT_FILE_BINARY_1" property="detailExtItem.extendFile.extendFile1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="detailExtItem.extendFile.extendFile2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="detailExtItem.extendFile.extendFile3.binary"/>
        <id column="EXT_MST_1" property="detailExtItem.extendMst.extendMst1.mstKey"/>
        <id column="EXT_MST_2" property="detailExtItem.extendMst.extendMst2.mstKey"/>
        <id column="EXT_MST_3" property="detailExtItem.extendMst.extendMst3.mstKey"/>
        <id column="EXT_MST_4" property="detailExtItem.extendMst.extendMst4.mstKey"/>
        <id column="EXT_MST_5" property="detailExtItem.extendMst.extendMst5.mstKey"/>
        <id column="EXT_MST_6" property="detailExtItem.extendMst.extendMst6.mstKey"/>
        <id column="EXT_MST_7" property="detailExtItem.extendMst.extendMst7.mstKey"/>
        <id column="EXT_MST_8" property="detailExtItem.extendMst.extendMst8.mstKey"/>
        <id column="EXT_MST_NAME_1" property="detailExtItem.extendMst.extendMst1.mstName"/>
        <id column="EXT_MST_NAME_2" property="detailExtItem.extendMst.extendMst2.mstName"/>
        <id column="EXT_MST_NAME_3" property="detailExtItem.extendMst.extendMst3.mstName"/>
        <id column="EXT_MST_NAME_4" property="detailExtItem.extendMst.extendMst4.mstName"/>
        <id column="EXT_MST_NAME_5" property="detailExtItem.extendMst.extendMst5.mstName"/>
        <id column="EXT_MST_NAME_6" property="detailExtItem.extendMst.extendMst6.mstName"/>
        <id column="EXT_MST_NAME_7" property="detailExtItem.extendMst.extendMst7.mstName"/>
        <id column="EXT_MST_NAME_8" property="detailExtItem.extendMst.extendMst8.mstName"/>
        
    </resultMap>

    <select id="listDetail" parameterType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify" 
        resultMap="QuotAcqReqAplItem_Map">
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO ,
            T_QUOT_ACQ_APL.URGENT_IND, 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS,
            T_QUOT_ACQ_APL.REQ_DATE, 
            T_QUOT_ACQ_APL.TITLE_NAME, 
            T_QUOT_ACQ_APL.INPUT_SECTION_CD, 
            T_QUOT_ACQ_APL.INPUT_SECTION_NAME, 
            T_QUOT_ACQ_APL.INPUT_USER_ID,  
            T_QUOT_ACQ_APL.INPUT_USER_NAME,
            T_QUOT_ACQ_APL.INPUT_COMPANY_CD ,
            T_QUOT_ACQ_APL.REQ_SECTION_CD, 
            T_QUOT_ACQ_APL.REQ_SECTION_NAME, 
            T_QUOT_ACQ_APL.REQ_USER_EXTENSION_NO, 
            T_QUOT_ACQ_APL.REQ_USER_TEL_NO,
            T_QUOT_ACQ_APL.REQ_USER_ID,
            T_QUOT_ACQ_APL.REQ_USER_NAME, 
            T_QUOT_ACQ_APL.REQ_COMPANY_CD ,
            T_QUOT_ACQ_APL.DELIV_PLACE_CD, 
            T_QUOT_ACQ_APL.DELIV_PLACE_NAME, 
            T_QUOT_ACQ_APL.SUP_CD, 
            T_QUOT_ACQ_APL.SUP_ABBR_NAME, 
            T_QUOT_ACQ_APL.SUP_COMPANY_CD ,
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME, 
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME, 
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME, 
            T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE, 
            T_ATTACH_MNG_A.ATTACH_FILE_SEQ as "A_ATTACH_FILE_SEQ", 
            T_ATTACH_MNG_A.ATTACH_FILE_NAME as "A_ATTACH_FILE_NAME",
            T_ATTACH_MNG_A.ATTACH_SCOPE as "A_ATTACH_SCOPE", 
            T_ATTACH_MNG_B.ATTACH_FILE_SEQ as "B_ATTACH_FILE_SEQ", 
            T_ATTACH_MNG_B.ATTACH_FILE_NAME as "B_ATTACH_FILE_NAME", 
            T_ATTACH_MNG_B.ATTACH_SCOPE as "B_ATTACH_SCOPE", 
            T_QUOT_ACQ_APL.PRICE_REQ_FLG,  
            T_QUOT_ACQ_APL.FOR_BOSS_COMMENT, 
            T_QUOT_ACQ_APL.FOR_BUYER_COMMENT, 
            T_QUOT_ACQ_APL.FOR_SUPPRIER_COMMENT, 
            T_QUOT_ACQ_APL.BUYER_SECTION_CD, 
            T_QUOT_ACQ_APL.BUYER_SECTION_NAME, 
            T_QUOT_ACQ_APL.BUYER_USER_ID, 
            T_QUOT_ACQ_APL.BUYER_USER_NAME,
            T_QUOT_ACQ_APL.BUYER_COMPANY_CD ,
            T_QUOT_ACQ_APL.APP_ROUTE_NO, 
            T_QUOT_ACQ_APL.APP_ROUTE_NAME,
            T_QUOT_ACQ_APL.BUYER_BACK_USER_COMMENTS,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_APL")}
        FROM T_QUOT_ACQ_APL 
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_A
            ON T_QUOT_ACQ_APL.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ 
            AND T_ATTACH_MNG_A.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_B
            ON T_QUOT_ACQ_APL.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ 
            AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        <where>
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeqNo}
            AND T_QUOT_ACQ_APL.NEW_FLG='1'
            AND T_QUOT_ACQ_APL.DELETE_FLG='0'
        </where>
    </select>

    <resultMap type="fw.domain.slip.quot.quotacqreq.QuotAcqReqItem" id="QuotAcqReqDetail_Map">
        <id column="QUOT_ACQ_APL_DTL_NO" property="quotAcqAplItemNo.quotAcqAplItemNo" />
        <id column="ITEM_CD" property="productRegistration.item.itemCd" />
        <id column="ITEM_NAME" property="productRegistration.item.itemName" />
        <id column="KATASHIKI" property="productRegistration.item.katashiki" />
        <id column="MANUFACT_CD" property="productRegistration.item.manufact.manufactCd" />
        <id column="MANUFACT_NAME" property="productRegistration.item.manufact.manufactName" />
        <id column="REQ_VOL" property="hopeVol.hopeVol.vol" />
        <id column="UNIT_NAME" property="productRegistration.item.unit.unitName" />
        <id column="CURRENCY_CD" property="currency.currencyCd" />
        <id column="CURRENCY_NAME" property="currency.currencyName" />
        <id column="UNIT_PRICE" property="hopePrice.hopePrice.amount" /><!-- 2013/04/26 ADD DAIKO_KANEKO -->
        <id column="REQ_AMOUNT" property="hopeAmount.hopeAmount.amount" />
        <id column="CURRENCY_MARK" property="currency.currencyMark" />
        <id column="REQ_DELIV_DATE" property="hopeDlvEst.hopeDlvEst.dateOfymd" />
        <id column="ATTACH_FILE_SEQ" property="rangeByAttachFile.attachFile.seqNo" />
        <id column="ATTACH_FILE_NAME" property="rangeByAttachFile.attachFile.fileName" />
        <id column="ATTACH_SCOPE" property="rangeByAttachFile.attachRange.attachRange" />
        <id column="EXT_TXT_1" property="detailExtItem.extendTxt.extendTxt1" />
        <id column="EXT_TXT_2" property="detailExtItem.extendTxt.extendTxt2" />
        <id column="EXT_TXT_3" property="detailExtItem.extendTxt.extendTxt3" />
        <id column="EXT_TXT_4" property="detailExtItem.extendTxt.extendTxt4" />
        <id column="EXT_TXT_5" property="detailExtItem.extendTxt.extendTxt5" />
        <id column="EXT_TXT_6" property="detailExtItem.extendTxt.extendTxt6" />
        <id column="EXT_TXT_7" property="detailExtItem.extendTxt.extendTxt7" />
        <id column="EXT_TXT_8" property="detailExtItem.extendTxt.extendTxt8" />
        <id column="EXT_TXT_9" property="detailExtItem.extendTxt.extendTxt9" />
        <id column="EXT_TXT_10" property="detailExtItem.extendTxt.extendTxt10" />
        <id column="EXT_AREA_1" property="detailExtItem.extendArea.extendArea1" />
        <id column="EXT_AREA_2" property="detailExtItem.extendArea.extendArea2" />
        <id column="EXT_AREA_3" property="detailExtItem.extendArea.extendArea3" />
        <id column="EXT_AREA_4" property="detailExtItem.extendArea.extendArea4" />
        <id column="EXT_AREA_5" property="detailExtItem.extendArea.extendArea5" />
        <id column="EXT_DATE_1" property="detailExtItem.extendDate.extendDate1.dateOfymd" />
        <id column="EXT_DATE_2" property="detailExtItem.extendDate.extendDate2.dateOfymd" />
        <id column="EXT_DATE_3" property="detailExtItem.extendDate.extendDate3.dateOfymd" />
        <id column="EXT_DATE_4" property="detailExtItem.extendDate.extendDate4.dateOfymd" />
        <id column="EXT_DATE_5" property="detailExtItem.extendDate.extendDate5.dateOfymd" />
        <id column="EXT_INT_1" property="detailExtItem.extendInt.extendInt1.value" />
        <id column="EXT_INT_2" property="detailExtItem.extendInt.extendInt2.value" />
        <id column="EXT_INT_3" property="detailExtItem.extendInt.extendInt3.value" />
        <id column="EXT_INT_4" property="detailExtItem.extendInt.extendInt4.value" />
        <id column="EXT_INT_5" property="detailExtItem.extendInt.extendInt5.value" />
        <id column="EXT_INT_6" property="detailExtItem.extendInt.extendInt6.value" />
        <id column="EXT_INT_7" property="detailExtItem.extendInt.extendInt7.value" />
        <id column="EXT_INT_8" property="detailExtItem.extendInt.extendInt8.value" />
        <id column="EXT_INT_9" property="detailExtItem.extendInt.extendInt9.value" />
        <id column="EXT_INT_10" property="detailExtItem.extendInt.extendInt10.value" />
        <id column="EXT_DEC_1" property="detailExtItem.extendDec.extendDec1.value" />
        <id column="EXT_DEC_2" property="detailExtItem.extendDec.extendDec2.value" />
        <id column="EXT_DEC_3" property="detailExtItem.extendDec.extendDec3.value" />
        <id column="EXT_DEC_4" property="detailExtItem.extendDec.extendDec4.value" />
        <id column="EXT_DEC_5" property="detailExtItem.extendDec.extendDec5.value" />
        <id column="EXT_SEL_1" property="detailExtItem.extendSel.extendSel1" />
        <id column="EXT_SEL_2" property="detailExtItem.extendSel.extendSel2" />
        <id column="EXT_SEL_3" property="detailExtItem.extendSel.extendSel3" />
        <id column="EXT_SEL_4" property="detailExtItem.extendSel.extendSel4" />
        <id column="EXT_SEL_5" property="detailExtItem.extendSel.extendSel5" />
        <id column="EXT_SEL_6" property="detailExtItem.extendSel.extendSel6" />
        <id column="EXT_SEL_7" property="detailExtItem.extendSel.extendSel7" />
        <id column="EXT_SEL_8" property="detailExtItem.extendSel.extendSel8" />
        <id column="EXT_SEL_9" property="detailExtItem.extendSel.extendSel9" />
        <id column="EXT_SEL_10" property="detailExtItem.extendSel.extendSel10" />
        <id column="EXT_CHK_1" property="detailExtItem.extendChk.extendChk1" />
        <id column="EXT_CHK_2" property="detailExtItem.extendChk.extendChk2" />
        <id column="EXT_CHK_3" property="detailExtItem.extendChk.extendChk3" />
        <id column="EXT_CHK_4" property="detailExtItem.extendChk.extendChk4" />
        <id column="EXT_CHK_5" property="detailExtItem.extendChk.extendChk5" />
        <id column="EXT_FILE_1" property="detailExtItem.extendFile.extendFile1.fileName" />
        <id column="EXT_FILE_2" property="detailExtItem.extendFile.extendFile2.fileName" />
        <id column="EXT_FILE_3" property="detailExtItem.extendFile.extendFile3.fileName" />
        <id column="EXT_FILE_BINARY_1" property="detailExtItem.extendFile.extendFile1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="detailExtItem.extendFile.extendFile2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="detailExtItem.extendFile.extendFile3.binary"/>
        <id column="EXT_MST_1" property="detailExtItem.extendMst.extendMst1.mstKey" />
        <id column="EXT_MST_2" property="detailExtItem.extendMst.extendMst2.mstKey" />
        <id column="EXT_MST_3" property="detailExtItem.extendMst.extendMst3.mstKey" />
        <id column="EXT_MST_4" property="detailExtItem.extendMst.extendMst4.mstKey" />
        <id column="EXT_MST_5" property="detailExtItem.extendMst.extendMst5.mstKey" />
        <id column="EXT_MST_6" property="detailExtItem.extendMst.extendMst6.mstKey" />
        <id column="EXT_MST_7" property="detailExtItem.extendMst.extendMst7.mstKey" />
        <id column="EXT_MST_8" property="detailExtItem.extendMst.extendMst8.mstKey" />    
        <id column="EXT_MST_NAME_1" property="detailExtItem.extendMst.extendMst1.mstName"/>
        <id column="EXT_MST_NAME_2" property="detailExtItem.extendMst.extendMst2.mstName"/>
        <id column="EXT_MST_NAME_3" property="detailExtItem.extendMst.extendMst3.mstName"/>
        <id column="EXT_MST_NAME_4" property="detailExtItem.extendMst.extendMst4.mstName"/>
        <id column="EXT_MST_NAME_5" property="detailExtItem.extendMst.extendMst5.mstName"/>
        <id column="EXT_MST_NAME_6" property="detailExtItem.extendMst.extendMst6.mstName"/>
        <id column="EXT_MST_NAME_7" property="detailExtItem.extendMst.extendMst7.mstName"/>
        <id column="EXT_MST_NAME_8" property="detailExtItem.extendMst.extendMst8.mstName"/>
    </resultMap>
    <select id="listDetailList" parameterType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify" 
        resultMap="QuotAcqReqDetail_Map">
        SELECT
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO,
            T_QUOT_ACQ_REQUEST.ITEM_CD,
            T_QUOT_ACQ_REQUEST.ITEM_NAME,
            T_QUOT_ACQ_REQUEST.KATASHIKI,
            T_QUOT_ACQ_REQUEST.MANUFACT_CD,
            T_QUOT_ACQ_REQUEST.MANUFACT_NAME,
            T_QUOT_ACQ_REQUEST.REQ_VOL,
            T_QUOT_ACQ_REQUEST.UNIT_NAME,
            T_QUOT_ACQ_REQUEST.CURRENCY_CD,
            T_QUOT_ACQ_REQUEST.UNIT_PRICE,
            T_QUOT_ACQ_REQUEST.REQ_AMOUNT, 
            T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE,
            T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ,
            T_ATTACH_MNG.ATTACH_FILE_NAME,
            T_ATTACH_MNG.ATTACH_SCOPE,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_REQUEST")}
        FROM T_QUOT_ACQ_REQUEST 
        LEFT JOIN T_ATTACH_MNG
            ON T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ = T_ATTACH_MNG.ATTACH_FILE_SEQ 
            AND T_ATTACH_MNG.DELETE_FLG = '0'
        <where>
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeqNo}
            AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
        </where> 
        ORDER BY T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO 
    </select>
    <!-- ====================== PSREQ040 見積取得依頼詳細  End =================== -->
    <!-- ====================== 見積取得依頼履歴一覧 PSREQ050 Start =================== -->
    <sql id="listKeyIdentityHistoryWhereCondition">
            ${@ps.common.util.ItemSettingUtil@getItemSettingWhereSQL('1')}
            AND T_QUOT_ACQ_APL.DELETE_FLG = '0'
            AND T_QUOT_ACQ_APL.NEW_FLG = '1'
            AND T_QUOT_ACQ_APL.REQ_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
            AND T_QUOT_ACQ_APL.REQ_SECTION_CD in (${@fw.common.util.AppUtil@getSectionViewRegion()})
            AND EXISTS (
                SELECT T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
                FROM T_QUOT_ACQ_REQUEST
                WHERE T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ 
                AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
                ${@ps.common.util.ItemSettingUtil@getItemSettingWhereSQL('2')}
            )
            AND T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS &lt;> '04' 
    </sql>
    <select id="listKeyIdentityHistory" 
        parameterType="fw.domain.slip.quot.quotacqreq.quotacqreqmng.QuotAcqReqHistorySearchCondition"
        resultType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify">
        SELECT T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ as "quotAcqAplSeqNo"
        FROM T_QUOT_ACQ_APL
        <where>
            <include refid="listKeyIdentityHistoryWhereCondition"/>
        </where>
        ORDER BY ${searchCondition.columnOrder.columnOrder()}
    </select>

    <resultMap type="fw.domain.slip.quot.quotacqreq.quotacqreqmng.QuotAcqReqHistoryItem"
        id="QuotAcqReqHistoryItem_Map">
        <id column="QUOT_ACQ_APL_SEQ" property="quotAcqReqIdentify.quotAcqAplSeqNo" />
        <id column="QUOT_ACQ_APL_NO" property="quotAcqReqIdentify.quotAcqAplNo.quotAcqAplNo" />
        <id column="QUOT_ACQ_APL_VERSION" property="quotAcqReqIdentify.historyNo.historyNo" />
    </resultMap>
    <select id="listPageItemHistory" parameterType="fw.domain.slip.quot.quotacqreq.quotacqreqmng.QuotAcqReqHistorySearchCondition"
        resultMap="QuotAcqReqHistoryItem_Map">
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ ,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO ,
            T_QUOT_ACQ_APL.LAST_UPD_DATE as "quotAcqReqIdentify.lastUpdDate",
            T_QUOT_ACQ_APL.INPUT_USER_NAME as "inputUserName",
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS as "quotAcqAplStatus",
            T_QUOT_ACQ_APL.TITLE_NAME as "titleName",
            T_QUOT_ACQ_APL.REQ_DATE as "reqDate.dateOfymd",
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME as "itemClassNameL",
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME as "itemClassNameM",
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME as "itemClassNameS",
            T_QUOT_ACQ_APL.SUP_CD as "supCd",
            T_QUOT_ACQ_APL.SUP_ABBR_NAME as "supName",
            T_QUOT_ACQ_APL.DELIV_PLACE_CD as "delivPlaceCd",
            T_QUOT_ACQ_APL.DELIV_PLACE_NAME as "delivPlaceName",
            T_QUOT_ACQ_APL.REQ_SECTION_CD as "reqSectionCd",
            T_QUOT_ACQ_APL.REQ_SECTION_NAME as "reqSectionName",
            T_QUOT_ACQ_APL.REQ_USER_ID as "reqUserId",
            T_QUOT_ACQ_APL.REQ_USER_NAME as "reqUserName",
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQLDomainAliasNonBinary("T_QUOT_ACQ_APL","quotAcqAplExtItem")}
        FROM T_QUOT_ACQ_APL 
        <where>
            <include refid="listKeyIdentityHistoryWhereCondition"/>
            AND T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ IN 
            <foreach collection="searchCondition.page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">  
                #{keyList.quotAcqAplSeqNo} 
            </foreach>
         </where>
        ORDER BY ${searchCondition.columnOrder.columnOrder()}
    </select>
    <!-- ====================== 見積取得依頼履歴一覧 PSREQ050 End =================== -->

    <!-- ============================= PSREQ062  見積状況 ==========================-->
    <!-- 見積取得申請情報取得SQL -->
    <resultMap type="fw.domain.slip.quot.quotstatus.quotreqstatuslist.QuoStatus" id="QuotAcqApl_Map">
        <id column="QUOT_ACQ_APL_NO" property="quotAcqReqSummary.quotAcqAplNo"/>
        <id column="URGENT_IND" property="quotAcqReqSummary.urgentInd"/>
        <id column="QUOT_ACQ_APL_STATUS" property="quotAcqReqSummary.quotAcqReqStatus"/> 
        <id column="REQ_COMPANY_CD" property="quotAcqReqSummary.reqUser.reqUser.section.company.companyCd"/>
        <id column="REQ_SECTION_CD" property="quotAcqReqSummary.reqUser.reqUser.section.sectionCd"/>
        <id column="REQ_SECTION_NAME" property="quotAcqReqSummary.reqUser.reqUser.section.sectionName"/>
        <id column="REQ_USER_EXTENSION_NO" property="quotAcqReqSummary.reqUser.reqUser.extNo.extensionNo"/>
        <id column="REQ_USER_TEL_NO" property="quotAcqReqSummary.reqUser.reqUser.externalNo.externalNo"/>
        <id column="MAIL_ADDR" property="quotAcqReqSummary.reqUser.reqUser.mailAddr.mail"/>
        <id column="REQ_USER_ID" property="quotAcqReqSummary.reqUser.reqUser.userID"/>
        <id column="REQ_USER_NAME" property="quotAcqReqSummary.reqUser.reqUser.userName"/>
        <id column="REQ_DATE" property="quotAcqReqSummary.reqDate.dateOfymd"/>
        <id column="QUOT_REQ_RESP_LIMIT_DATE" property="quotAcqReqSummary.respLimitDate.dateOfymd"/>
        <id column="DELIV_PLACE_CD" property="quotAcqReqSummary.delivPlace.delivPlaceCd"/>
        <id column="DELIV_PLACE_NAME" property="quotAcqReqSummary.delivPlace.delivPlaceName"/>
        <id column="ITEM_CLASS_L_NAME" property="quotAcqReqInfo.itemKind.itemClassLName"/>
        <id column="ITEM_CLASS_M_NAME" property="quotAcqReqInfo.itemKind.itemClassMName"/>
        <id column="ITEM_CLASS_S_NAME" property="quotAcqReqInfo.itemKind.itemClassSName"/>
        <id column="TITLE_NAME" property="quotAcqReqInfo.titleName"/>
        <id column="SUP_COMPANY_CD" property="quotAcqReqInfo.hopeSupplier.hopeSupplier.supCompanyCd"/>
        <id column="SUP_CD" property="quotAcqReqInfo.hopeSupplier.hopeSupplier.supCd"/>
        <id column="SUP_NAME" property="quotAcqReqInfo.hopeSupplier.hopeSupplier.supplierName.supplierName"/>
        <id column="SUP_ABBR_NAME" property="quotAcqReqInfo.hopeSupplier.hopeSupplier.supplierName.supplierAbbrName"/>
        <id column="SUBCON_IND" property="quotAcqReqInfo.hopeSupplier.hopeSupplier.subcon.subconInd"/>
        <id column="FOR_BUYER_COMMENT" property="quotAcqReqInfo.forBuyerComment"/> 
        <id column="FOR_SUPPRIER_COMMENT" property="quotAcqReqInfo.forSupplderComment"/>
        <id column="ATTACH_FILE_SEQ1" property="quotAcqReqInfo.rangeByAttachFile1.attachFile.seqNo"/>
        <id column="ATTACH_FILE_SEQ2" property="quotAcqReqInfo.rangeByAttachFile2.attachFile.seqNo"/> 
        <id column="ATTACH_FILE_NAME1" property="quotAcqReqInfo.rangeByAttachFile1.attachFile.fileName"/>
        <id column="ATTACH_FILE_NAME2" property="quotAcqReqInfo.rangeByAttachFile2.attachFile.fileName"/>
        <id column="ATTACH_SCOPE1" property="quotAcqReqInfo.rangeByAttachFile1.attachRange.attachRange"/>
        <id column="ATTACH_SCOPE2" property="quotAcqReqInfo.rangeByAttachFile2.attachRange.attachRange"/>
        <id column="REQ_AMOUNT_TOTAL" property="quotAcqReqInfo.hopeAmount.amount"/>
        <id column="CURRENCY_CD" property="quotAcqReqInfo.currency.currencyCd"/>
        <id column="CURRENCY_MARK" property="quotAcqReqInfo.currency.currencyMark"/>
        <id column="QUOT_REQ_SEQ" property="quotAcqReqSummary.quotReqSeqNo.seqNumber"/>
        <id column="QUOT_REQ_NO" property="quotAcqReqSummary.quotReqNo"/>
        <id column="QUOT_REQ_STATUS" property="quotAcqReqSummary.quotReqStatus"/>
        <id column="QUOT_ADO_STATUS" property="quotAcqReqSummary.quotAdoStatus"/>
        <id column="LAST_UPD_DATE" property="quotAcqReqSummary.lastUpdDate"/>
        <id column="REQ_LAST_UPD_DATE" property="lastUpdDate"/>
        <id column="PRICE_REQ_FLG" property="quotAcqReqInfo.priceRegisterFlg.priceRegisterFlg"/>

        <id column="EXT_TXT_1" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt1"/>
        <id column="EXT_TXT_2" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt2"/>
        <id column="EXT_TXT_3" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt3"/>
        <id column="EXT_TXT_4" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt4"/>
        <id column="EXT_TXT_5" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt5"/>
        <id column="EXT_TXT_6" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt6"/>
        <id column="EXT_TXT_7" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt7"/>
        <id column="EXT_TXT_8" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt8"/>
        <id column="EXT_TXT_9" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt9"/>
        <id column="EXT_TXT_10" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt10"/>
        <id column="EXT_AREA_1" property="quotAcqReqInfo.detailExtItem.extendArea.extendArea1"/>
        <id column="EXT_AREA_2" property="quotAcqReqInfo.detailExtItem.extendArea.extendArea2"/>
        <id column="EXT_AREA_3" property="quotAcqReqInfo.detailExtItem.extendArea.extendArea3"/>
        <id column="EXT_AREA_4" property="quotAcqReqInfo.detailExtItem.extendArea.extendArea4"/>
        <id column="EXT_AREA_5" property="quotAcqReqInfo.detailExtItem.extendArea.extendArea5"/>
        <id column="EXT_DATE_1" property="quotAcqReqInfo.detailExtItem.extendDate.extendDate1.dateOfymd"/>
        <id column="EXT_DATE_2" property="quotAcqReqInfo.detailExtItem.extendDate.extendDate2.dateOfymd"/>
        <id column="EXT_DATE_3" property="quotAcqReqInfo.detailExtItem.extendDate.extendDate3.dateOfymd"/>
        <id column="EXT_DATE_4" property="quotAcqReqInfo.detailExtItem.extendDate.extendDate4.dateOfymd"/>
        <id column="EXT_DATE_5" property="quotAcqReqInfo.detailExtItem.extendDate.extendDate5.dateOfymd"/>
        <id column="EXT_INT_1" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt1.value"/>
        <id column="EXT_INT_2" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt2.value"/>
        <id column="EXT_INT_3" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt3.value"/>
        <id column="EXT_INT_4" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt4.value"/>
        <id column="EXT_INT_5" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt5.value"/>
        <id column="EXT_INT_6" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt6.value"/>
        <id column="EXT_INT_7" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt7.value"/>
        <id column="EXT_INT_8" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt8.value"/>
        <id column="EXT_INT_9" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt9.value"/>
        <id column="EXT_INT_10" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt10.value"/>
        <id column="EXT_DEC_1" property="quotAcqReqInfo.detailExtItem.extendDec.extendDec1.value"/>
        <id column="EXT_DEC_2" property="quotAcqReqInfo.detailExtItem.extendDec.extendDec2.value"/>
        <id column="EXT_DEC_3" property="quotAcqReqInfo.detailExtItem.extendDec.extendDec3.value"/>
        <id column="EXT_DEC_4" property="quotAcqReqInfo.detailExtItem.extendDec.extendDec4.value"/>
        <id column="EXT_DEC_5" property="quotAcqReqInfo.detailExtItem.extendDec.extendDec5.value"/>
        <id column="EXT_SEL_1" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel1"/>
        <id column="EXT_SEL_2" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel2"/>
        <id column="EXT_SEL_3" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel3"/>
        <id column="EXT_SEL_4" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel4"/>
        <id column="EXT_SEL_5" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel5"/>
        <id column="EXT_SEL_6" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel6"/>
        <id column="EXT_SEL_7" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel7"/>
        <id column="EXT_SEL_8" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel8"/>
        <id column="EXT_SEL_9" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel9"/>
        <id column="EXT_SEL_10" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel10"/>
        <id column="EXT_CHK_1" property="quotAcqReqInfo.detailExtItem.extendChk.extendChk1"/>
        <id column="EXT_CHK_2" property="quotAcqReqInfo.detailExtItem.extendChk.extendChk2"/>
        <id column="EXT_CHK_3" property="quotAcqReqInfo.detailExtItem.extendChk.extendChk3"/>
        <id column="EXT_CHK_4" property="quotAcqReqInfo.detailExtItem.extendChk.extendChk4"/>
        <id column="EXT_CHK_5" property="quotAcqReqInfo.detailExtItem.extendChk.extendChk5"/>
        <id column="EXT_FILE_1" property="quotAcqReqInfo.detailExtItem.extendFile.extendFile1.fileName"/>
        <id column="EXT_FILE_2" property="quotAcqReqInfo.detailExtItem.extendFile.extendFile2.fileName"/>
        <id column="EXT_FILE_3" property="quotAcqReqInfo.detailExtItem.extendFile.extendFile3.fileName"/>
        <id column="EXT_FILE_BINARY_1" property="quotAcqReqInfo.detailExtItem.extendFile.extendFile1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="quotAcqReqInfo.detailExtItem.extendFile.extendFile2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="quotAcqReqInfo.detailExtItem.extendFile.extendFile3.binary"/>
        <id column="EXT_MST_1" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst1.mstKey"/>
        <id column="EXT_MST_2" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst2.mstKey"/>
        <id column="EXT_MST_3" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst3.mstKey"/>
        <id column="EXT_MST_4" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst4.mstKey"/>
        <id column="EXT_MST_5" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst5.mstKey"/>
        <id column="EXT_MST_6" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst6.mstKey"/>
        <id column="EXT_MST_7" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst7.mstKey"/>
        <id column="EXT_MST_8" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst8.mstKey"/>
        <id column="EXT_MST_NAME_1" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst1.mstName"/>
        <id column="EXT_MST_NAME_2" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst2.mstName"/>
        <id column="EXT_MST_NAME_3" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst3.mstName"/>
        <id column="EXT_MST_NAME_4" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst4.mstName"/>
        <id column="EXT_MST_NAME_5" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst5.mstName"/>
        <id column="EXT_MST_NAME_6" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst6.mstName"/>
        <id column="EXT_MST_NAME_7" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst7.mstName"/>
        <id column="EXT_MST_NAME_8" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst8.mstName"/>
    </resultMap>
    <select id="searchQuotAcqApl" resultMap="QuotAcqApl_Map">
        SELECT T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO,
                T_QUOT_ACQ_APL.URGENT_IND,
                T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS,
                T_QUOT_ACQ_APL.REQ_COMPANY_CD,
                T_QUOT_ACQ_APL.REQ_SECTION_CD,
                T_QUOT_ACQ_APL.REQ_SECTION_NAME,
                T_QUOT_ACQ_APL.REQ_USER_EXTENSION_NO,
                T_QUOT_ACQ_APL.REQ_USER_TEL_NO,
                T_QUOT_ACQ_APL.REQ_USER_ID,
                T_QUOT_ACQ_APL.REQ_USER_NAME,
                T_QUOT_ACQ_APL.REQ_DATE,
                T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE,
                T_QUOT_ACQ_APL.DELIV_PLACE_CD,
                T_QUOT_ACQ_APL.DELIV_PLACE_NAME,
                T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME,
                T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME,
                T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME,
                T_QUOT_ACQ_APL.TITLE_NAME,
                T_QUOT_ACQ_APL.SUP_COMPANY_CD,
                T_QUOT_ACQ_APL.SUP_CD,
                T_QUOT_ACQ_APL.SUP_NAME,
                T_QUOT_ACQ_APL.SUP_ABBR_NAME,
                T_QUOT_ACQ_APL.FOR_BUYER_COMMENT,
                T_QUOT_ACQ_APL.FOR_SUPPRIER_COMMENT,
                T_QUOT_ACQ_APL.ATTACH_FILE_SEQ1,
                T_QUOT_ACQ_APL.ATTACH_FILE_SEQ2,
                T_QUOT_ACQ_APL.LAST_UPD_DATE,
                T_ATTACH_MNG_A.ATTACH_FILE_NAME AS ATTACH_FILE_NAME1,
                T_ATTACH_MNG_B.ATTACH_FILE_NAME AS ATTACH_FILE_NAME2,
                T_ATTACH_MNG_A.ATTACH_SCOPE AS ATTACH_SCOPE1,
                T_ATTACH_MNG_B.ATTACH_SCOPE AS ATTACH_SCOPE2,
                T_QUOT_REQUEST.QUOT_REQ_NO,
                T_QUOT_REQUEST.QUOT_REQ_SEQ,
                T_QUOT_REQUEST.QUOT_REQ_STATUS,
                T_QUOT_REQUEST.QUOT_ADO_STATUS,
                T_QUOT_REQUEST.LAST_UPD_DATE AS REQ_LAST_UPD_DATE,
                T_QUOT_ACQ_REQUEST_TOTAL.REQ_AMOUNT_TOTAL,
                T_QUOT_ACQ_APL.PRICE_REQ_FLG,
                ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_APL")}
        FROM T_QUOT_ACQ_APL
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_A
            ON T_QUOT_ACQ_APL.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_A.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_B
            ON T_QUOT_ACQ_APL.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        LEFT JOIN T_QUOT_REQUEST
            ON T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = T_QUOT_REQUEST.QUOT_ACQ_APL_NO
            AND T_QUOT_REQUEST.NEW_FLG = '1'
            AND T_QUOT_REQUEST.DELETE_FLG = '0'
        LEFT JOIN (SELECT SUM(T_QUOT_ACQ_REQUEST.REQ_AMOUNT) AS REQ_AMOUNT_TOTAL,
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ  
            FROM T_QUOT_ACQ_REQUEST 
            WHERE T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq} 
            GROUP BY T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ) T_QUOT_ACQ_REQUEST_TOTAL 
         ON T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST_TOTAL.QUOT_ACQ_APL_SEQ
        WHERE T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
    </select>
    
    <!-- 見積取得依頼情報取得SQL -->
    <resultMap type="fw.domain.slip.quot.quotstatus.quotreqstatuslist.QuotAcqReqInfoItem" id="QuotAcqRequest_Map">
        <id column="ITEM_CD" property="itemCd"/>
        <id column="ITEM_NAME" property="itemName"/>
        <id column="KATASHIKI" property="katashiki"/>
        <id column="MANUFACT_CD" property="manufact.manufactCd"/>
        <id column="MANUFACT_NAME" property="manufact.manufactName"/>
        <id column="CURRENCY_CD" property="currency.currencyCd"/>
        <id column="REQ_VOL" property="hopeVol.hopeVol.vol"/>
        <id column="UNIT_NAME" property="unitName"/> 
        <id column="UNIT_PRICE" property="hopePrice.hopePrice.amount"/>
        <id column="REQ_AMOUNT" property="hopeAmount.hopeAmount.amount"/>
        <id column="REQ_DELIV_DATE" property="hopeDlvEst.hopeDlvEst.dateOfymd"/>
        <id column="ATTACH_FILE_SEQ" property="rangeByAttachFile.attachFile.seqNo"/>
        <id column="ATTACH_FILE_NAME" property="rangeByAttachFile.attachFile.fileName"/>
        <id column="ATTACH_SCOPE" property="rangeByAttachFile.attachRange.attachRange"/>

        <id column="EXT_TXT_1" property="detailExtItem.extendTxt.extendTxt1" />
        <id column="EXT_TXT_2" property="detailExtItem.extendTxt.extendTxt2" />
        <id column="EXT_TXT_3" property="detailExtItem.extendTxt.extendTxt3" />
        <id column="EXT_TXT_4" property="detailExtItem.extendTxt.extendTxt4" />
        <id column="EXT_TXT_5" property="detailExtItem.extendTxt.extendTxt5" />
        <id column="EXT_TXT_6" property="detailExtItem.extendTxt.extendTxt6" />
        <id column="EXT_TXT_7" property="detailExtItem.extendTxt.extendTxt7" />
        <id column="EXT_TXT_8" property="detailExtItem.extendTxt.extendTxt8" />
        <id column="EXT_TXT_9" property="detailExtItem.extendTxt.extendTxt9" />
        <id column="EXT_TXT_10" property="detailExtItem.extendTxt.extendTxt10" />
        <id column="EXT_AREA_1" property="detailExtItem.extendArea.extendArea1" />
        <id column="EXT_AREA_2" property="detailExtItem.extendArea.extendArea2" />
        <id column="EXT_AREA_3" property="detailExtItem.extendArea.extendArea3" />
        <id column="EXT_AREA_4" property="detailExtItem.extendArea.extendArea4" />
        <id column="EXT_AREA_5" property="detailExtItem.extendArea.extendArea5" />
        <id column="EXT_DATE_1" property="detailExtItem.extendDate.extendDate1.dateOfymd" />
        <id column="EXT_DATE_2" property="detailExtItem.extendDate.extendDate2.dateOfymd" />
        <id column="EXT_DATE_3" property="detailExtItem.extendDate.extendDate3.dateOfymd" />
        <id column="EXT_DATE_4" property="detailExtItem.extendDate.extendDate4.dateOfymd" />
        <id column="EXT_DATE_5" property="detailExtItem.extendDate.extendDate5.dateOfymd" />
        <id column="EXT_INT_1" property="detailExtItem.extendInt.extendInt1.value" />
        <id column="EXT_INT_2" property="detailExtItem.extendInt.extendInt2.value" />
        <id column="EXT_INT_3" property="detailExtItem.extendInt.extendInt3.value" />
        <id column="EXT_INT_4" property="detailExtItem.extendInt.extendInt4.value" />
        <id column="EXT_INT_5" property="detailExtItem.extendInt.extendInt5.value" />
        <id column="EXT_INT_6" property="detailExtItem.extendInt.extendInt6.value" />
        <id column="EXT_INT_7" property="detailExtItem.extendInt.extendInt7.value" />
        <id column="EXT_INT_8" property="detailExtItem.extendInt.extendInt8.value" />
        <id column="EXT_INT_9" property="detailExtItem.extendInt.extendInt9.value" />
        <id column="EXT_INT_10" property="detailExtItem.extendInt.extendInt10.value" />
        <id column="EXT_DEC_1" property="detailExtItem.extendDec.extendDec1.value" />
        <id column="EXT_DEC_2" property="detailExtItem.extendDec.extendDec2.value" />
        <id column="EXT_DEC_3" property="detailExtItem.extendDec.extendDec3.value" />
        <id column="EXT_DEC_4" property="detailExtItem.extendDec.extendDec4.value" />
        <id column="EXT_DEC_5" property="detailExtItem.extendDec.extendDec5.value" />
        <id column="EXT_SEL_1" property="detailExtItem.extendSel.extendSel1" />
        <id column="EXT_SEL_2" property="detailExtItem.extendSel.extendSel2" />
        <id column="EXT_SEL_3" property="detailExtItem.extendSel.extendSel3" />
        <id column="EXT_SEL_4" property="detailExtItem.extendSel.extendSel4" />
        <id column="EXT_SEL_5" property="detailExtItem.extendSel.extendSel5" />
        <id column="EXT_SEL_6" property="detailExtItem.extendSel.extendSel6" />
        <id column="EXT_SEL_7" property="detailExtItem.extendSel.extendSel7" />
        <id column="EXT_SEL_8" property="detailExtItem.extendSel.extendSel8" />
        <id column="EXT_SEL_9" property="detailExtItem.extendSel.extendSel9" />
        <id column="EXT_SEL_10" property="detailExtItem.extendSel.extendSel10" />
        <id column="EXT_CHK_1" property="detailExtItem.extendChk.extendChk1" />
        <id column="EXT_CHK_2" property="detailExtItem.extendChk.extendChk2" />
        <id column="EXT_CHK_3" property="detailExtItem.extendChk.extendChk3" />
        <id column="EXT_CHK_4" property="detailExtItem.extendChk.extendChk4" />
        <id column="EXT_CHK_5" property="detailExtItem.extendChk.extendChk5" />
        <id column="EXT_FILE_1" property="detailExtItem.extendFile.extendFile1.fileName" />
        <id column="EXT_FILE_2" property="detailExtItem.extendFile.extendFile2.fileName" />
        <id column="EXT_FILE_3" property="detailExtItem.extendFile.extendFile3.fileName" />
        <id column="EXT_FILE_BINARY_1" property="detailExtItem.extendFile.extendFile1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="detailExtItem.extendFile.extendFile2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="detailExtItem.extendFile.extendFile3.binary"/>
        <id column="EXT_MST_1" property="detailExtItem.extendMst.extendMst1.mstKey" />
        <id column="EXT_MST_2" property="detailExtItem.extendMst.extendMst2.mstKey" />
        <id column="EXT_MST_3" property="detailExtItem.extendMst.extendMst3.mstKey" />
        <id column="EXT_MST_4" property="detailExtItem.extendMst.extendMst4.mstKey" />
        <id column="EXT_MST_5" property="detailExtItem.extendMst.extendMst5.mstKey" />
        <id column="EXT_MST_6" property="detailExtItem.extendMst.extendMst6.mstKey" />
        <id column="EXT_MST_7" property="detailExtItem.extendMst.extendMst7.mstKey" />
        <id column="EXT_MST_8" property="detailExtItem.extendMst.extendMst8.mstKey" />    
        <id column="EXT_MST_NAME_1" property="detailExtItem.extendMst.extendMst1.mstName"/>
        <id column="EXT_MST_NAME_2" property="detailExtItem.extendMst.extendMst2.mstName"/>
        <id column="EXT_MST_NAME_3" property="detailExtItem.extendMst.extendMst3.mstName"/>
        <id column="EXT_MST_NAME_4" property="detailExtItem.extendMst.extendMst4.mstName"/>
        <id column="EXT_MST_NAME_5" property="detailExtItem.extendMst.extendMst5.mstName"/>
        <id column="EXT_MST_NAME_6" property="detailExtItem.extendMst.extendMst6.mstName"/>
        <id column="EXT_MST_NAME_7" property="detailExtItem.extendMst.extendMst7.mstName"/>
        <id column="EXT_MST_NAME_8" property="detailExtItem.extendMst.extendMst8.mstName"/>

        <result column="SLIP_NO" property="exclusiveSlipId.slipNo"/>
        <result column="LAST_UPD_DATE" property="exclusiveSlipId.lastUpdDate"/>
    </resultMap>
    <select id="searchQuotAcqRequest" resultMap="QuotAcqRequest_Map">
        SELECT T_QUOT_ACQ_REQUEST.ITEM_CD,
                T_QUOT_ACQ_REQUEST.ITEM_NAME,
                T_QUOT_ACQ_REQUEST.KATASHIKI,
                T_QUOT_ACQ_REQUEST.MANUFACT_CD,
                T_QUOT_ACQ_REQUEST.MANUFACT_NAME,
                T_QUOT_ACQ_REQUEST.CURRENCY_CD,
                T_QUOT_ACQ_REQUEST.REQ_VOL,
                T_QUOT_ACQ_REQUEST.UNIT_NAME,
                T_QUOT_ACQ_REQUEST.UNIT_PRICE,
                T_QUOT_ACQ_REQUEST.REQ_AMOUNT,
                T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE,
                T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ,
                T_ATTACH_MNG.ATTACH_FILE_NAME,
                T_ATTACH_MNG.ATTACH_SCOPE,
                T_SLIP_MNG.SLIP_NO,
                T_SLIP_MNG.LAST_UPD_DATE,
                ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_REQUEST")}
        FROM T_QUOT_ACQ_APL
        LEFT JOIN T_QUOT_ACQ_REQUEST
            ON T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        INNER JOIN T_SLIP_MNG ON
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO = T_SLIP_MNG.SLIP_NO
        LEFT JOIN T_ATTACH_MNG
            ON T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ = T_ATTACH_MNG.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG.DELETE_FLG = '0'
        WHERE T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
            AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
        ORDER BY T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO
    </select>
    
    <!-- 見積回答情報取得SQL -->
    <resultMap type="fw.domain.slip.quot.quotresp.quotrespdetail.QuotSupplierResp" id="QuotReqSup_Map">
        <id column="QUOT_RESP_SEQ" property="quotRespSeqNo"/>
        <id column="QUOT_WITHDRAW_ID" property="status"/>
        <id column="RESP_CONF_FLG" property="respConfFlg"/>
        <id column="QUOT_ADO_IND" property="ado"/>
        <id column="RESP_OPEN_FLG" property="respOpen"/>
        <id column="QUOT_RESP_END_DATE" property="quotEndDate.dateOfymd"/>
        <id column="QUOT_RESP_DATE" property="respDate.dateOfymd"/>
        <id column="QUOT_RESP_COMMENT" property="respComments"/>
        <id column="QUOT_SUP_LINE_NO" property="quotSupplierLineNo"/>
        <id column="QUOT_SUP_STATUS" property="quotReqSupplierStatus"/>
        <id column="CORRECT_CD" property="correctCd"/>
        <id column="EDI_IND" property="ediInd"/>
        <id column="QUOT_REQ_SEND_IND" property="dataInd.quotReqSendInd.sendInd"/>
        <id column="SUP_CD" property="supplier.supCd"/>
        <id column="SUP_ABBR_NAME" property="supplier.supplierName.supplierAbbrName"/>
        <id column="SUP_NAME" property="supplier.supplierName.supplierName"/>
        <id column="SUBCON_IND" property="supplier.subcon.subconInd"/>
        <id column="QUOT_REQ_DATE" property="quotReqDate.dateOfymd"/>
        <id column="QUOT_RESP_AMOUNT_TOTAL" property="respAmount.amount"/> 
        <id column="CURRENCY_CD" property="currency.currencyCd"/>
        <id column="CURRENCY_MARK" property="currency.currencyMark"/>
        <id column="RESP_LAST_UPD_DATE" property="lastUpdDate"/>
        <id column="SUP_LAST_UPD_DATE" property="supLastUpdDate"/>
    </resultMap>
    <select id="searchQuotReqSupList" resultMap="QuotReqSup_Map">
        SELECT T_QUOT_RESPONSE.QUOT_RESP_SEQ,
           T_QUOT_RESPONSE.QUOT_WITHDRAW_ID,
           T_QUOT_RESPONSE.RESP_CONF_FLG,
           T_QUOT_RESPONSE.QUOT_ADO_IND,
           T_QUOT_RESPONSE.RESP_OPEN_FLG,
           T_QUOT_RESPONSE.QUOT_RESP_END_DATE,
           T_QUOT_RESPONSE.QUOT_RESP_DATE,
           T_QUOT_RESPONSE.QUOT_RESP_COMMENT,
           T_QUOT_RESPONSE.LAST_UPD_DATE AS RESP_LAST_UPD_DATE,
           T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO,
           T_QUOT_REQ_SUP.QUOT_SUP_STATUS,
           T_QUOT_REQ_SUP.CORRECT_CD,
           T_QUOT_REQ_SUP.EDI_IND,
           T_QUOT_REQ_SUP.QUOT_REQ_SEND_IND,
           T_QUOT_REQ_SUP.SUP_CD,
           T_QUOT_REQ_SUP.SUP_NAME,
           T_QUOT_REQ_SUP.SUP_ABBR_NAME,
           T_QUOT_REQ_SUP.SUBCON_IND,
           T_QUOT_REQ_SUP.QUOT_REQ_DATE,
           T_QUOT_REQ_SUP.LAST_UPD_DATE AS SUP_LAST_UPD_DATE,
           T_QUOT_RESP_DTL_TOTAL.QUOT_RESP_AMOUNT_TOTAL
      FROM T_QUOT_REQ_SUP
      LEFT JOIN T_QUOT_RESPONSE ON T_QUOT_REQ_SUP.QUOT_REQ_NO =
                                   T_QUOT_RESPONSE.QUOT_REQ_NO
                               AND T_QUOT_REQ_SUP.QUOT_REQ_VERSION =
                                   T_QUOT_RESPONSE.QUOT_REQ_VERSION
                               AND T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO =
                                   T_QUOT_RESPONSE.QUOT_SUP_LINE_NO
                               AND T_QUOT_RESPONSE.DELETE_FLG = '0'
      LEFT JOIN (SELECT SUM(T_QUOT_RESP_DTL.QUOT_RESP_AMOUNT) AS QUOT_RESP_AMOUNT_TOTAL,
         T_QUOT_RESP_DTL.QUOT_RESP_SEQ  
         FROM T_QUOT_RESP_DTL 
         GROUP BY T_QUOT_RESP_DTL.QUOT_RESP_SEQ) T_QUOT_RESP_DTL_TOTAL 
         ON T_QUOT_RESPONSE.QUOT_RESP_SEQ = T_QUOT_RESP_DTL_TOTAL.QUOT_RESP_SEQ
     WHERE T_QUOT_REQ_SUP.QUOT_REQ_SEQ = #{quotReqSeq}
       AND T_QUOT_REQ_SUP.DELETE_FLG = '0'
       AND T_QUOT_RESPONSE.RESP_OPEN_FLG = '1'
     ORDER BY T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO
    </select>
    <!-- 見積取得申請テーブル更新SQL（取消） -->
    <update id="updateQuotAcqAplCancel">
        UPDATE T_QUOT_ACQ_APL
            SET QUOT_ACQ_APL_STATUS = '07',
                CORRECT_CD = '3',
                LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
                LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}', 
                LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}', 
                LAST_UPD_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}'
          WHERE QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
    </update>
    
   <select id="searchPurAplCount" resultType="int">
        SELECT COUNT(T_PUR_APL.PUR_APL_SEQ)
          FROM T_PUR_APL 
          LEFT JOIN T_QUOT_REQUEST
          ON T_PUR_APL.PUR_APL_NO = T_QUOT_REQUEST.QUOT_REQ_NO
         WHERE T_QUOT_REQUEST.QUOT_REQ_SEQ = #{quotReqSeq} 
           AND T_PUR_APL.DELETE_FLG = '0' 
    </select>
    <!-- ============================= PSREQ062  見積状況 ==========================-->

   <!-- ============================= RSREQ010 見積取得依頼入力 BEGIN==========================-->
    <resultMap type="fw.domain.slip.quot.quotacqreq.QuotAcqReq" id="QuotAcqReqApl_Map">
        <id column="QUOT_ACQ_APL_SEQ" property="quotAcqReqIdentify.quotAcqAplSeqNo" />
        <id column="QUOT_ACQ_APL_NO" property="quotAcqReqIdentify.quotAcqAplNo.quotAcqAplNo" />
        <id column="QUOT_ACQ_APL_VERSION" property="quotAcqReqIdentify.historyNo.historyNo" />
        <id column="PRE_SEQ" property="quotAcqReqIdentify.preSeq" />
        <id column="URGENT_IND" property="urgentInd.urgentInd" />
        <id column="REQ_FIRST_DATE" property="quotAcqReqDate.firstReqDate.reqDate.dateOfymd" />
        <id column="REQ_DATE" property="quotAcqReqDate.reqDate.reqDate.dateOfymd" />
        <id column="TITLE_NAME" property="titleName.titleName" />
        <id column="REQ_COMPANY_CD" property="reqUser.reqUser.section.company.companyCd"/>
        <id column="REQ_COMPANY_NAME" property="reqUser.reqUser.section.company.companyName"/>
        <id column="REQ_SECTION_PLACE_CD" property="reqUser.reqUser.section.sectionPlace.sectionPlaceCd"/>
        <id column="REQ_SECTION_PLACE_NAME" property="reqUser.reqUser.section.sectionPlace.sectionPlaceName"/>
        <id column="REQ_SECTION_CD" property="reqUser.reqUser.section.sectionCd"/>
        <id column="REQ_SECTION_NAME" property="reqUser.reqUser.section.sectionName"/>
        <id column="REQ_USER_EXTENSION_NO" property="reqUser.reqUser.extNo.extensionNo"/>        
        <id column="REQ_USER_TEL_NO" property="reqUser.reqUser.externalNo.externalNo"/>
        <id column="REQ_USER_ID" property="reqUser.reqUser.userID"/>        
        <id column="REQ_USER_NAME" property="reqUser.reqUser.userName"/>
        <id column="APP_ROUTE_NO" property="approute.appRouteNo"/>
        <id column="APP_ROUTE_NAME" property="approute.appRouteName"/>
        <id column="PRICE_REQ_FLG" property="priceRegisterFlg.priceRegisterFlg"/>
        
        <id column="QUOT_REQ_RESP_LIMIT_DATE" property="quotMarkLimit.dateOfymd" />
        <id column="FOR_BOSS_COMMENT" property="forAppComment.forAppComment.comment" />
        <id column="FOR_BUYER_COMMENT" property="forBuyerComment.forBuyerComment.comment" />
        <id column="FOR_SUPPRIER_COMMENT" property="forSupplierComment.forSupplierComment.comment" />
        <id column="DELIV_PLACE_CD" property="delivPlace.delivPlaceCd" />
        <id column="DELIV_PLACE_NAME" property="delivPlace.delivPlaceName" />
        <id column="SUP_CD" property="hopeSupplier.hopeSupplier.supCd" />
        <id column="SUP_NAME" property="hopeSupplier.hopeSupplier.supplierName.supplierName" />   
        <id column="SUP_ABBR_NAME" property="hopeSupplier.hopeSupplier.supplierName.supplierAbbrName" />   
        <id column="ATTACH_FILE_SEQ1" property="rangeByAttachFile1.attachFile.seqNo" />
        <id column="ATTACH_FILE_NAME1" property="rangeByAttachFile1.attachFile.fileName" />
        <id column="ATTACH_SCOPE1" property="rangeByAttachFile1.attachRange.attachRange" />
        <id column="ATTACH_FILE_SEQ2" property="rangeByAttachFile2.attachFile.seqNo" />
        <id column="ATTACH_FILE_NAME2" property="rangeByAttachFile2.attachFile.fileName" />  
        <id column="ATTACH_SCOPE2" property="rangeByAttachFile2.attachRange.attachRange" />
        <id column="BUYER_COMPANY_CD" property="itemKind.buyUser.buyUser.section.company.companyCd" />      
        <id column="BUYER_COMPANY_NAME" property="itemKind.buyUser.buyUser.section.company.companyAbbrName" />     
        <id column="BUYER_SECTION_PLACE_CD" property="itemKind.buyUser.buyUser.section.sectionPlace.sectionPlaceCd" />     
        <id column="BUYER_SECTION_PLACE_NAME" property="itemKind.buyUser.buyUser.section.sectionPlace.sectionPlaceName" />        
        <id column="BUYER_SECTION_CD" property="itemKind.buyUser.buyUser.section.sectionCd" />    
        <id column="BUYER_SECTION_NAME" property="itemKind.buyUser.buyUser.section.sectionName" />      
        <id column="BUYER_USER_ID" property="itemKind.buyUser.buyUser.userID" />      
        <id column="BUYER_USER_NAME" property="itemKind.buyUser.buyUser.userName" /> 
        <id column="ITEM_CLASS_L" property="itemKind.itemClassL" />
        <id column="ITEM_CLASS_L_NAME" property="itemKind.itemClassLName" />
        <id column="ITEM_CLASS_M" property="itemKind.itemClassM" />
        <id column="ITEM_CLASS_M_NAME" property="itemKind.itemClassMName" />
        <id column="ITEM_CLASS_S" property="itemKind.itemClassS" />
        <id column="ITEM_CLASS_S_NAME" property="itemKind.itemClassSName" />
        <id column="LAST_UPD_DATE" property="quotAcqReqIdentify.lastUpdDate" /> 
         <id column="EXT_TXT_1" property="editExtItem.editTextExtItem.textExtItem1.value" />
         <id column="EXT_TXT_2" property="editExtItem.editTextExtItem.textExtItem2.value" />
         <id column="EXT_TXT_3" property="editExtItem.editTextExtItem.textExtItem3.value" />
         <id column="EXT_TXT_4" property="editExtItem.editTextExtItem.textExtItem4.value" />
         <id column="EXT_TXT_5" property="editExtItem.editTextExtItem.textExtItem5.value" />
         <id column="EXT_TXT_6" property="editExtItem.editTextExtItem.textExtItem6.value" />
         <id column="EXT_TXT_7" property="editExtItem.editTextExtItem.textExtItem7.value" />
         <id column="EXT_TXT_8" property="editExtItem.editTextExtItem.textExtItem8.value" />
         <id column="EXT_TXT_9" property="editExtItem.editTextExtItem.textExtItem9.value" />
         <id column="EXT_TXT_10" property="editExtItem.editTextExtItem.textExtItem10.value" />
         <id column="EXT_AREA_1" property="editExtItem.editAreaExtItem.arrayExtItem1.value" />
         <id column="EXT_AREA_2" property="editExtItem.editAreaExtItem.arrayExtItem2.value" />
         <id column="EXT_AREA_3" property="editExtItem.editAreaExtItem.arrayExtItem3.value" />
         <id column="EXT_AREA_4" property="editExtItem.editAreaExtItem.arrayExtItem4.value" />
         <id column="EXT_AREA_5" property="editExtItem.editAreaExtItem.arrayExtItem5.value" />
         <id column="EXT_DATE_1" property="editExtItem.editDateExtItem.dateExtItem1.dateType.dateOfymd" />
         <id column="EXT_DATE_2" property="editExtItem.editDateExtItem.dateExtItem2.dateType.dateOfymd" />
         <id column="EXT_DATE_3" property="editExtItem.editDateExtItem.dateExtItem3.dateType.dateOfymd" />
         <id column="EXT_DATE_4" property="editExtItem.editDateExtItem.dateExtItem4.dateType.dateOfymd" />
         <id column="EXT_DATE_5" property="editExtItem.editDateExtItem.dateExtItem5.dateType.dateOfymd" />
         <id column="EXT_INT_1" property="editExtItem.editIntExtItem.intExtItem1.value" />
         <id column="EXT_INT_2" property="editExtItem.editIntExtItem.intExtItem2.value" />
         <id column="EXT_INT_3" property="editExtItem.editIntExtItem.intExtItem3.value" />
         <id column="EXT_INT_4" property="editExtItem.editIntExtItem.intExtItem4.value" />
         <id column="EXT_INT_5" property="editExtItem.editIntExtItem.intExtItem5.value" />
         <id column="EXT_INT_6" property="editExtItem.editIntExtItem.intExtItem6.value" />
         <id column="EXT_INT_7" property="editExtItem.editIntExtItem.intExtItem7.value" />
         <id column="EXT_INT_8" property="editExtItem.editIntExtItem.intExtItem8.value" />
         <id column="EXT_INT_9" property="editExtItem.editIntExtItem.intExtItem9.value" />
         <id column="EXT_INT_10" property="editExtItem.editIntExtItem.intExtItem10.value" />
         <id column="EXT_DEC_1" property="editExtItem.editDecExtItem.decExtItem1.value" />
         <id column="EXT_DEC_2" property="editExtItem.editDecExtItem.decExtItem2.value" />
         <id column="EXT_DEC_3" property="editExtItem.editDecExtItem.decExtItem3.value" />
         <id column="EXT_DEC_4" property="editExtItem.editDecExtItem.decExtItem4.value" />
         <id column="EXT_DEC_5" property="editExtItem.editDecExtItem.decExtItem5.value" />
         <id column="EXT_SEL_1" property="editExtItem.editSelExtItem.selExtItem1.value" />
         <id column="EXT_SEL_2" property="editExtItem.editSelExtItem.selExtItem2.value" />
         <id column="EXT_SEL_3" property="editExtItem.editSelExtItem.selExtItem3.value" />
         <id column="EXT_SEL_4" property="editExtItem.editSelExtItem.selExtItem4.value" />
         <id column="EXT_SEL_5" property="editExtItem.editSelExtItem.selExtItem5.value" />
         <id column="EXT_SEL_6" property="editExtItem.editSelExtItem.selExtItem6.value" />
         <id column="EXT_SEL_7" property="editExtItem.editSelExtItem.selExtItem7.value" />
         <id column="EXT_SEL_8" property="editExtItem.editSelExtItem.selExtItem8.value" />
         <id column="EXT_SEL_9" property="editExtItem.editSelExtItem.selExtItem9.value" />
         <id column="EXT_SEL_10" property="editExtItem.editSelExtItem.selExtItem10.value" />
         <id column="EXT_CHK_1" property="editExtItem.editChkExtItem.chkExtItem1.value" />
         <id column="EXT_CHK_2" property="editExtItem.editChkExtItem.chkExtItem2.value" />
         <id column="EXT_CHK_3" property="editExtItem.editChkExtItem.chkExtItem3.value" />
         <id column="EXT_CHK_4" property="editExtItem.editChkExtItem.chkExtItem4.value" />
         <id column="EXT_CHK_5" property="editExtItem.editChkExtItem.chkExtItem5.value" />
         <id column="EXT_FILE_1" property="editExtItem.editFileExtItem.fileExtItem1.fileName" />
         <id column="EXT_FILE_2" property="editExtItem.editFileExtItem.fileExtItem2.fileName" />
         <id column="EXT_FILE_3" property="editExtItem.editFileExtItem.fileExtItem3.fileName" />
         <id column="EXT_FILE_BINARY_1" property="editExtItem.editFileExtItem.fileExtItem1.binary"/>
         <id column="EXT_FILE_BINARY_2" property="editExtItem.editFileExtItem.fileExtItem2.binary"/>
         <id column="EXT_FILE_BINARY_3" property="editExtItem.editFileExtItem.fileExtItem3.binary"/>
         <id column="EXT_MST_1" property="editExtItem.editMstExtItem.mstExtItem1.mstKey" />
         <id column="EXT_MST_2" property="editExtItem.editMstExtItem.mstExtItem2.mstKey" />
         <id column="EXT_MST_3" property="editExtItem.editMstExtItem.mstExtItem3.mstKey" />
         <id column="EXT_MST_4" property="editExtItem.editMstExtItem.mstExtItem4.mstKey" />
         <id column="EXT_MST_5" property="editExtItem.editMstExtItem.mstExtItem5.mstKey" />
         <id column="EXT_MST_6" property="editExtItem.editMstExtItem.mstExtItem6.mstKey" />
         <id column="EXT_MST_7" property="editExtItem.editMstExtItem.mstExtItem7.mstKey" />
         <id column="EXT_MST_8" property="editExtItem.editMstExtItem.mstExtItem8.mstKey" />    
         <id column="EXT_MST_NAME_1" property="editExtItem.editMstExtItem.mstExtItem1.mstName"/>
         <id column="EXT_MST_NAME_2" property="editExtItem.editMstExtItem.mstExtItem2.mstName"/>
         <id column="EXT_MST_NAME_3" property="editExtItem.editMstExtItem.mstExtItem3.mstName"/>
         <id column="EXT_MST_NAME_4" property="editExtItem.editMstExtItem.mstExtItem4.mstName"/>
         <id column="EXT_MST_NAME_5" property="editExtItem.editMstExtItem.mstExtItem5.mstName"/>
         <id column="EXT_MST_NAME_6" property="editExtItem.editMstExtItem.mstExtItem6.mstName"/>
         <id column="EXT_MST_NAME_7" property="editExtItem.editMstExtItem.mstExtItem7.mstName"/>
         <id column="EXT_MST_NAME_8" property="editExtItem.editMstExtItem.mstExtItem8.mstName"/>
         <id column="NEW_APP_FLG" property="newAppFlg.newAppFlg"/>
           
    </resultMap>
    
    <select id="searchQuotAcqAplFromHis" parameterType="String" resultMap="QuotAcqReqApl_Map">
       SELECT  
            '' as QUOT_ACQ_APL_SEQ,
            '' as QUOT_ACQ_APL_NO,
            '' as   URGENT_IND,
            T_QUOT_ACQ_APL.REQ_DATE,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_VERSION,
            T_QUOT_ACQ_APL.REQ_FIRST_DATE,
            T_QUOT_ACQ_APL.TITLE_NAME, 
            T_QUOT_ACQ_APL.REQ_COMPANY_CD, 
            T_QUOT_ACQ_APL.REQ_COMPANY_NAME,            
            T_QUOT_ACQ_APL.REQ_SECTION_CD, 
            T_QUOT_ACQ_APL.REQ_SECTION_NAME,   
            T_QUOT_ACQ_APL.REQ_USER_EXTENSION_NO,  
            T_QUOT_ACQ_APL.REQ_USER_TEL_NO,
            T_QUOT_ACQ_APL.REQ_USER_ID,
            T_QUOT_ACQ_APL.REQ_USER_NAME, 
            T_QUOT_ACQ_APL.APP_ROUTE_NO,  
            T_QUOT_ACQ_APL.APP_ROUTE_NAME, 
            T_QUOT_ACQ_APL.FOR_BOSS_COMMENT,   
            T_QUOT_ACQ_APL.FOR_BUYER_COMMENT,  
            T_QUOT_ACQ_APL.FOR_SUPPRIER_COMMENT,   
            T_QUOT_ACQ_APL.DELIV_PLACE_CD, 
            T_QUOT_ACQ_APL.DELIV_PLACE_NAME,   
            T_QUOT_ACQ_APL.SUP_CD, 
            T_QUOT_ACQ_APL.SUP_NAME, 
            T_QUOT_ACQ_APL.SUP_ABBR_NAME, 
            '' as ATTACH_FILE_SEQ1,
            '' as ATTACH_FILE_NAME1,
            '' as ATTACH_SCOPE1,
            '' as ATTACH_FILE_SEQ2,
            '' as ATTACH_FILE_NAME2,
            '' as ATTACH_SCOPE2,
            T_QUOT_ACQ_APL.BUYER_COMPANY_CD,        
            T_QUOT_ACQ_APL.ITEM_CLASS_L, 
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME,  
            T_QUOT_ACQ_APL.ITEM_CLASS_M,
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME, 
            T_QUOT_ACQ_APL.ITEM_CLASS_S,
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME,  
            T_QUOT_ACQ_APL.LAST_UPD_DATE,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_APL")}     
        FROM                        
            T_QUOT_ACQ_APL  
        WHERE                       
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ= #{quotAcqAplSeq}
            AND T_QUOT_ACQ_APL.DELETE_FLG = '0'
    </select> 
    
    <select id="searchQuotAcqAplFromSave" parameterType="String" resultMap="QuotAcqReqApl_Map">
         SELECT  
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO,  
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_VERSION, 
            T_QUOT_ACQ_APL.PRE_SEQ, 
            T_QUOT_ACQ_APL.REQ_DATE,
            T_QUOT_ACQ_APL.REQ_FIRST_DATE,
            T_QUOT_ACQ_APL.TITLE_NAME, 
            T_QUOT_ACQ_APL.URGENT_IND,
            T_QUOT_ACQ_APL.PRICE_REQ_FLG,
            T_QUOT_ACQ_APL.REQ_COMPANY_CD, 
            T_QUOT_ACQ_APL.REQ_COMPANY_NAME,        
            T_QUOT_ACQ_APL.REQ_SECTION_CD, 
            T_QUOT_ACQ_APL.REQ_SECTION_NAME,   
            T_QUOT_ACQ_APL.REQ_USER_EXTENSION_NO,  
            T_QUOT_ACQ_APL.REQ_USER_TEL_NO,
            T_QUOT_ACQ_APL.REQ_USER_ID,
            T_QUOT_ACQ_APL.REQ_USER_NAME, 
            T_QUOT_ACQ_APL.APP_ROUTE_NO,  
            T_QUOT_ACQ_APL.APP_ROUTE_NAME, 
            T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE,   
            T_QUOT_ACQ_APL.FOR_BOSS_COMMENT,   
            T_QUOT_ACQ_APL.FOR_BUYER_COMMENT,  
            T_QUOT_ACQ_APL.FOR_SUPPRIER_COMMENT,   
            T_QUOT_ACQ_APL.DELIV_PLACE_CD, 
            T_QUOT_ACQ_APL.DELIV_PLACE_NAME,   
            T_QUOT_ACQ_APL.SUP_CD, 
            T_QUOT_ACQ_APL.SUP_NAME, 
            T_QUOT_ACQ_APL.SUP_ABBR_NAME, 
            T_QUOT_ACQ_APL.ATTACH_FILE_SEQ1,
            T_ATTACH_MNG_A.ATTACH_FILE_NAME AS ATTACH_FILE_NAME1,
            T_ATTACH_MNG_A.ATTACH_SCOPE AS ATTACH_SCOPE1,
            T_QUOT_ACQ_APL.ATTACH_FILE_SEQ2,
            T_ATTACH_MNG_B.ATTACH_FILE_NAME AS ATTACH_FILE_NAME2,
            T_ATTACH_MNG_B.ATTACH_SCOPE AS ATTACH_SCOPE2,
            T_QUOT_ACQ_APL.BUYER_COMPANY_CD,        
            T_QUOT_ACQ_APL.BUYER_COMPANY_NAME,     
            T_QUOT_ACQ_APL.BUYER_SECTION_PLACE_CD,     
            T_QUOT_ACQ_APL.BUYER_SECTION_PLACE_NAME,        
            T_QUOT_ACQ_APL.BUYER_SECTION_CD,      
            T_QUOT_ACQ_APL.BUYER_SECTION_NAME,      
            T_QUOT_ACQ_APL.BUYER_USER_ID,       
            T_QUOT_ACQ_APL.BUYER_USER_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_L, 
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME,  
            T_QUOT_ACQ_APL.ITEM_CLASS_M,
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME, 
            T_QUOT_ACQ_APL.ITEM_CLASS_S,
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME,  
            T_QUOT_ACQ_APL.LAST_UPD_DATE,
            T_QUOT_ACQ_APL.NEW_APP_FLG,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_APL")}       
        FROM                        
            T_QUOT_ACQ_APL  
       LEFT JOIN 
            T_ATTACH_MNG  T_ATTACH_MNG_A 
         ON  T_QUOT_ACQ_APL.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ 
         AND T_ATTACH_MNG_A.DELETE_FLG = '0'                                          
       LEFT JOIN
            T_ATTACH_MNG  T_ATTACH_MNG_B 
         ON T_QUOT_ACQ_APL.ATTACH_FILE_SEQ2  = T_ATTACH_MNG_B.ATTACH_FILE_SEQ
         AND T_ATTACH_MNG_B.DELETE_FLG = '0'    
        WHERE                       
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ= #{quotAcqAplSeq}
            AND T_QUOT_ACQ_APL.DELETE_FLG = '0'
    </select> 
    
     <resultMap type="fw.domain.slip.quot.quotacqreq.QuotAcqReqItem" id="QuotAcqReqItemDetail_Map">
        <id column="QUOT_ACQ_APL_DTL_NO" property="quotAcqAplItemNo.quotAcqAplItemNo" />
        <id column="ITEM_CD" property="productRegistration.item.itemCd" />
        <id column="ITEM_NAME" property="productRegistration.item.itemName" />
        <id column="KATASHIKI" property="productRegistration.item.katashiki" />
        <id column="MANUFACT_CD" property="productRegistration.item.manufact.manufactCd" />
        <id column="MANUFACT_NAME" property="productRegistration.item.manufact.manufactName" />
        <id column="REQ_VOL" property="hopeVol.hopeVol.vol" />
        <id column="UNIT_NAME" property="productRegistration.item.unit.unitName" />
        <id column="UNIT_CD" property="productRegistration.item.unit.unitCd" />
        <id column="CURRENCY_CD" property="currency.currencyCd" />
        <id column="CURRENCY_NAME" property="currency.currencyName" />
        <id column="UNIT_PRICE" property="hopePrice.hopePrice.amount" /> <!-- 2013/04/26 ADD DAIKO_KANEKO -->
        <id column="REQ_AMOUNT" property="hopeAmount.hopeAmount.amount" />
        <id column="CURRENCY_MARK" property="currency.currencyMark" />
        <id column="REQ_DELIV_DATE" property="hopeDlvEst.hopeDlvEst.dateOfymd" />
        <id column="ATTACH_FILE_SEQ" property="rangeByAttachFile.attachFile.seqNo" />
        <id column="ATTACH_FILE_NAME" property="rangeByAttachFile.attachFile.fileName" />
        <id column="ATTACH_SCOPE" property="rangeByAttachFile.attachRange.attachRange" />
        <id column="EXT_TXT_1" property="editExtItem.editTextExtItem.textExtItem1.value"/>
        <id column="EXT_TXT_2" property="editExtItem.editTextExtItem.textExtItem2.value"/>
        <id column="EXT_TXT_3" property="editExtItem.editTextExtItem.textExtItem3.value"/>
        <id column="EXT_TXT_4" property="editExtItem.editTextExtItem.textExtItem4.value"/>
        <id column="EXT_TXT_5" property="editExtItem.editTextExtItem.textExtItem5.value"/>
        <id column="EXT_TXT_6" property="editExtItem.editTextExtItem.textExtItem6.value"/>
        <id column="EXT_TXT_7" property="editExtItem.editTextExtItem.textExtItem7.value"/>
        <id column="EXT_TXT_8" property="editExtItem.editTextExtItem.textExtItem8.value"/>
        <id column="EXT_TXT_9" property="editExtItem.editTextExtItem.textExtItem9.value"/>
        <id column="EXT_TXT_10" property="editExtItem.editTextExtItem.textExtItem10.value"/>
        <id column="EXT_AREA_1" property="editExtItem.editAreaExtItem.arrayExtItem1.value"/>
        <id column="EXT_AREA_2" property="editExtItem.editAreaExtItem.arrayExtItem2.value"/>
        <id column="EXT_AREA_3" property="editExtItem.editAreaExtItem.arrayExtItem3.value"/>
        <id column="EXT_AREA_4" property="editExtItem.editAreaExtItem.arrayExtItem4.value"/>
        <id column="EXT_AREA_5" property="editExtItem.editAreaExtItem.arrayExtItem5.value"/>
        <id column="EXT_DATE_1" property="editExtItem.editDateExtItem.dateExtItem1.dateType.dateOfymd"/>
        <id column="EXT_DATE_2" property="editExtItem.editDateExtItem.dateExtItem2.dateType.dateOfymd"/>
        <id column="EXT_DATE_3" property="editExtItem.editDateExtItem.dateExtItem3.dateType.dateOfymd"/>
        <id column="EXT_DATE_4" property="editExtItem.editDateExtItem.dateExtItem4.dateType.dateOfymd"/>
        <id column="EXT_DATE_5" property="editExtItem.editDateExtItem.dateExtItem5.dateType.dateOfymd"/>
        <id column="EXT_INT_1" property="editExtItem.editIntExtItem.intExtItem1.value"/>
        <id column="EXT_INT_2" property="editExtItem.editIntExtItem.intExtItem2.value"/>
        <id column="EXT_INT_3" property="editExtItem.editIntExtItem.intExtItem3.value"/>
        <id column="EXT_INT_4" property="editExtItem.editIntExtItem.intExtItem4.value"/>
        <id column="EXT_INT_5" property="editExtItem.editIntExtItem.intExtItem5.value"/>
        <id column="EXT_INT_6" property="editExtItem.editIntExtItem.intExtItem6.value"/>
        <id column="EXT_INT_7" property="editExtItem.editIntExtItem.intExtItem7.value"/>
        <id column="EXT_INT_8" property="editExtItem.editIntExtItem.intExtItem8.value"/>
        <id column="EXT_INT_9" property="editExtItem.editIntExtItem.intExtItem9.value"/>
        <id column="EXT_INT_10" property="editExtItem.editIntExtItem.intExtItem10.value"/>
        <id column="EXT_DEC_1" property="editExtItem.editDecExtItem.decExtItem1.value"/>
        <id column="EXT_DEC_2" property="editExtItem.editDecExtItem.decExtItem2.value"/>
        <id column="EXT_DEC_3" property="editExtItem.editDecExtItem.decExtItem3.value"/>
        <id column="EXT_DEC_4" property="editExtItem.editDecExtItem.decExtItem4.value"/>
        <id column="EXT_DEC_5" property="editExtItem.editDecExtItem.decExtItem5.value"/>
        <id column="EXT_SEL_1" property="editExtItem.editSelExtItem.selExtItem1.value"/>
        <id column="EXT_SEL_2" property="editExtItem.editSelExtItem.selExtItem2.value"/>
        <id column="EXT_SEL_3" property="editExtItem.editSelExtItem.selExtItem3.value"/>
        <id column="EXT_SEL_4" property="editExtItem.editSelExtItem.selExtItem4.value"/>
        <id column="EXT_SEL_5" property="editExtItem.editSelExtItem.selExtItem5.value"/>
        <id column="EXT_SEL_6" property="editExtItem.editSelExtItem.selExtItem6.value"/>
        <id column="EXT_SEL_7" property="editExtItem.editSelExtItem.selExtItem7.value"/>
        <id column="EXT_SEL_8" property="editExtItem.editSelExtItem.selExtItem8.value"/>
        <id column="EXT_SEL_9" property="editExtItem.editSelExtItem.selExtItem9.value"/>
        <id column="EXT_SEL_10" property="editExtItem.editSelExtItem.selExtItem10.value"/>
        <id column="EXT_CHK_1" property="editExtItem.editChkExtItem.chkExtItem1.value"/>
        <id column="EXT_CHK_2" property="editExtItem.editChkExtItem.chkExtItem2.value"/>
        <id column="EXT_CHK_3" property="editExtItem.editChkExtItem.chkExtItem3.value"/>
        <id column="EXT_CHK_4" property="editExtItem.editChkExtItem.chkExtItem4.value"/>
        <id column="EXT_CHK_5" property="editExtItem.editChkExtItem.chkExtItem5.value"/>
        <id column="EXT_FILE_1" property="editExtItem.editFileExtItem.fileExtItem1.fileName"/>
        <id column="EXT_FILE_2" property="editExtItem.editFileExtItem.fileExtItem2.fileName"/>
        <id column="EXT_FILE_3" property="editExtItem.editFileExtItem.fileExtItem3.fileName"/>
        <id column="EXT_FILE_BINARY_1" property="editExtItem.editFileExtItem.fileExtItem1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="editExtItem.editFileExtItem.fileExtItem2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="editExtItem.editFileExtItem.fileExtItem3.binary"/>
        <id column="EXT_MST_1" property="editExtItem.editMstExtItem.mstExtItem1.mstKey"/>
        <id column="EXT_MST_2" property="editExtItem.editMstExtItem.mstExtItem2.mstKey"/>
        <id column="EXT_MST_3" property="editExtItem.editMstExtItem.mstExtItem3.mstKey"/>
        <id column="EXT_MST_4" property="editExtItem.editMstExtItem.mstExtItem4.mstKey"/>
        <id column="EXT_MST_5" property="editExtItem.editMstExtItem.mstExtItem5.mstKey"/>
        <id column="EXT_MST_6" property="editExtItem.editMstExtItem.mstExtItem6.mstKey"/>
        <id column="EXT_MST_7" property="editExtItem.editMstExtItem.mstExtItem7.mstKey"/>
        <id column="EXT_MST_8" property="editExtItem.editMstExtItem.mstExtItem8.mstKey"/>
        <id column="EXT_MST_NAME_1" property="editExtItem.editMstExtItem.mstExtItem1.mstName"/>
        <id column="EXT_MST_NAME_2" property="editExtItem.editMstExtItem.mstExtItem2.mstName"/>
        <id column="EXT_MST_NAME_3" property="editExtItem.editMstExtItem.mstExtItem3.mstName"/>
        <id column="EXT_MST_NAME_4" property="editExtItem.editMstExtItem.mstExtItem4.mstName"/>
        <id column="EXT_MST_NAME_5" property="editExtItem.editMstExtItem.mstExtItem5.mstName"/>
        <id column="EXT_MST_NAME_6" property="editExtItem.editMstExtItem.mstExtItem6.mstName"/>
        <id column="EXT_MST_NAME_7" property="editExtItem.editMstExtItem.mstExtItem7.mstName"/>
        <id column="EXT_MST_NAME_8" property="editExtItem.editMstExtItem.mstExtItem8.mstName"/>
        <result column="SLIP_NO" property="exclusiveSlipId.slipNo"/>
        <result column="SLIP_LAST_UPD_DATE" property="exclusiveSlipId.lastUpdDate"/>
    </resultMap>
    
   <select id="searchQuotAcqDetailList" parameterType="String"  resultMap="QuotAcqReqItemDetail_Map">
        SELECT
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO,
            T_QUOT_ACQ_REQUEST.ITEM_CD,
            T_QUOT_ACQ_REQUEST.ITEM_NAME,
            T_QUOT_ACQ_REQUEST.KATASHIKI,
            T_QUOT_ACQ_REQUEST.MANUFACT_CD,
            T_QUOT_ACQ_REQUEST.MANUFACT_NAME,
            T_QUOT_ACQ_REQUEST.REQ_VOL,
            T_QUOT_ACQ_REQUEST.UNIT_NAME,
            T_QUOT_ACQ_REQUEST.UNIT_CD,
            T_QUOT_ACQ_REQUEST.CURRENCY_CD,
            '' as CURRENCY_NAME, 
            T_QUOT_ACQ_REQUEST.UNIT_PRICE,
            T_QUOT_ACQ_REQUEST.REQ_AMOUNT, 
            T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE,
            T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ,
            T_ATTACH_MNG.ATTACH_FILE_NAME,
            T_ATTACH_MNG.ATTACH_SCOPE,
            T_SLIP_MNG.SLIP_NO,
            T_SLIP_MNG.LAST_UPD_DATE as SLIP_LAST_UPD_DATE,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_REQUEST")}
        FROM T_QUOT_ACQ_REQUEST 
        INNER JOIN T_SLIP_MNG ON
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO = T_SLIP_MNG.SLIP_NO
        LEFT JOIN T_ATTACH_MNG
            ON T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ = T_ATTACH_MNG.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG.DELETE_FLG = '0'
        WHERE
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
            AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
        ORDER BY T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO 
    </select>
    <select id="searchQuotAcqDetailListFromHis" parameterType="String"  resultMap="QuotAcqReqItemDetail_Map">
        SELECT
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO,
            T_QUOT_ACQ_REQUEST.ITEM_CD,
            T_QUOT_ACQ_REQUEST.ITEM_NAME,
            T_QUOT_ACQ_REQUEST.KATASHIKI,
            T_QUOT_ACQ_REQUEST.MANUFACT_CD,
            T_QUOT_ACQ_REQUEST.MANUFACT_NAME,
            T_QUOT_ACQ_REQUEST.REQ_VOL,
            T_QUOT_ACQ_REQUEST.UNIT_NAME,
            T_QUOT_ACQ_REQUEST.UNIT_CD,
            T_QUOT_ACQ_REQUEST.CURRENCY_CD,
            '' as CURRENCY_NAME, 
            T_QUOT_ACQ_REQUEST.UNIT_PRICE,
            T_QUOT_ACQ_REQUEST.REQ_AMOUNT, 
            '' as ATTACH_FILE_SEQ,
            '' as ATTACH_FILE_NAME,
            '' as ATTACH_SCOPE,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_REQUEST")}
        FROM T_QUOT_ACQ_REQUEST 
        WHERE
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
            AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
        ORDER BY T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO 
    </select>
   
  <select id="getQuotAcqAmount" parameterType="String" resultType="String">
        SELECT 
           SUM（T_QUOT_ACQ_REQUEST.REQ_AMOUNT）                                     
        FROM
            T_QUOT_ACQ_REQUEST                                      
        WHERE 
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
   </select>
  <insert id="insertQuotAcqForApl" >
     INSERT INTO T_QUOT_ACQ_APL(       
        QUOT_ACQ_APL_SEQ,      
        QUOT_ACQ_APL_NO,     
        QUOT_ACQ_APL_VERSION,        
        QUOT_ACQ_APL_STATUS,     
        REQ_TYPE_IND,        
        CORRECT_CD,      
        PRE_SEQ,     
        NEW_FLG,     
        NEW_APP_FLG,     
        REQ_FIRST_DATE,      
        REQ_DATE,        
        QUOT_REQ_RESP_LIMIT_DATE,        
        REQ_COMPANY_CD,      
        REQ_COMPANY_NAME,        
        REQ_SECTION_PLACE_CD,        
        REQ_SECTION_PLACE_NAME,      
        REQ_SECTION_CD,      
        REQ_SECTION_NAME,        
        REQ_USER_ID,     
        REQ_USER_NAME,       
        REQ_USER_EXTENSION_NO,       
        REQ_USER_TEL_NO,     
        INPUT_COMPANY_CD,        
        INPUT_COMPANY_NAME,      
        INPUT_SECTION_PLACE_CD,      
        INPUT_SECTION_PLACE_NAME,        
        INPUT_SECTION_CD,        
        INPUT_SECTION_NAME,      
        INPUT_USER_ID,       
        INPUT_USER_NAME,     
        BUYER_COMPANY_CD,        
        BUYER_COMPANY_NAME,      
        BUYER_SECTION_PLACE_CD,      
        BUYER_SECTION_PLACE_NAME,        
        BUYER_SECTION_CD,        
        BUYER_SECTION_NAME,      
        BUYER_USER_ID,       
        BUYER_USER_NAME,     
        FOR_BOSS_COMMENT,        
        FOR_BUYER_COMMENT,       
        FOR_SUPPRIER_COMMENT,        
        URGENT_IND,      
        TITLE_NAME,      
        DELIV_PLACE_COMPANY_CD,      
        DELIV_PLACE_CD,      
        DELIV_PLACE_NAME,        
        ITEM_CLASS_COMPANY_CD,       
        ITEM_CLASS_L,        
        ITEM_CLASS_L_NAME,       
        ITEM_CLASS_M,        
        ITEM_CLASS_M_NAME,       
        ITEM_CLASS_S,        
        ITEM_CLASS_S_NAME,       
        PRICE_REQ_FLG,       
        SUP_COMPANY_CD,      
        SUP_CD,      
        SUP_NAME,        
        SUP_ABBR_NAME,       
        ATTACH_FILE_SEQ1,        
        ATTACH_FILE_SEQ2,        
        BUYER_BACK_COMPANY_CD,       
        BUYER_BACK_COMPANY_NAME,     
        BUYER_BACK_SECTION_CD,       
        BUYER_BACK_SECTION_NAME,     
        BUYER_BACK_USER_ID,      
        BUYER_BACK_USER_NAME,        
        BUYER_BACK_USER_COMMENTS,        
        APP_ROUTE_NO,        
        APP_ROUTE_NAME,      
        DELETE_FLG,      
        AUTO_DELETE_FLG,     
        AUTO_DELETE_DATE,        
        LAST_UPD_DATE,       
        LAST_UPD_COMPANY_CD,     
        LAST_UPD_SECTION_CD,     
        LAST_UPD_USER_ID,        
        REG_DATE,        
        REG_COMPANY_CD,      
        REG_SECTION_CD,      
        REG_USER_ID,
        ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()})         
    VALUES (        
       #{quotAcqAplSeq},
       #{quotAcqAplno},
       '1',
       #{status},
       '1',
       '1',
       '',
       '1',
       #{newAppFlg},
       '${@fw.common.util.AppUtil@getSysDate()}',
       '${@fw.common.util.AppUtil@getSysDate()}',
       #{quotAcqReq.quotMarkLimit.dateOfymd},
       '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
       '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
        #{quotAcqReq.reqUser.reqUser.section.sectionCd, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.section.sectionName, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.userID, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.userName, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.extNo.extensionNo, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.externalNo.externalNo, jdbcType=VARCHAR},
       '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
       '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}', 
       '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',
       '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',
       #{quotAcqReq.itemKind.buyUser.buyUser.section.company.companyCd, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.company.companyName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionPlace.sectionPlaceCd, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionPlace.sectionPlaceName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionCd, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.userID, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.userName, jdbcType=VARCHAR},
       #{quotAcqReq.forAppComment.forAppComment.comment, jdbcType=VARCHAR},
       #{quotAcqReq.forBuyerComment.forBuyerComment.comment, jdbcType=VARCHAR},
       #{quotAcqReq.forSupplierComment.forSupplierComment.comment, jdbcType=VARCHAR},
       #{quotAcqReq.urgentInd.urgentInd, jdbcType=VARCHAR},
       #{quotAcqReq.titleName.titleName, jdbcType=VARCHAR},
       #{quotAcqReq.delivPlace.delivPlaceCompanyCd, jdbcType=VARCHAR},
       #{quotAcqReq.delivPlace.delivPlaceCd, jdbcType=VARCHAR},
       #{quotAcqReq.delivPlace.delivPlaceName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassCompanyCd, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassL, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassLName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassM, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassMName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassS, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassSName, jdbcType=VARCHAR},
       #{quotAcqReq.priceRegisterFlg.priceRegisterFlg, jdbcType=VARCHAR},       
       #{quotAcqReq.hopeSupplier.hopeSupplier.supCompanyCd, jdbcType=VARCHAR},
       #{quotAcqReq.hopeSupplier.hopeSupplier.supCd, jdbcType=VARCHAR},
       #{quotAcqReq.hopeSupplier.hopeSupplier.supplierName.supplierName, jdbcType=VARCHAR},
       #{quotAcqReq.hopeSupplier.hopeSupplier.supplierName.supplierAbbrName, jdbcType=VARCHAR},
       #{attachMngSeq1},
       #{attachMngSeq2},
       '',
       '',
       '',
       '',
       '',
       '',
       '',
      #{quotAcqReq.approute.appRouteNo},
      #{quotAcqReq.approute.appRouteName, jdbcType=VARCHAR},
      '0',
      '0',
      '',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
       ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("quotAcqReq.editExtItem.")})         
    </insert>
    
    <insert id="insertQuotAcqForTempSave" >
     INSERT INTO T_QUOT_ACQ_APL(       
        QUOT_ACQ_APL_SEQ,      
        QUOT_ACQ_APL_NO,     
        QUOT_ACQ_APL_VERSION,        
        QUOT_ACQ_APL_STATUS,     
        REQ_TYPE_IND,        
        CORRECT_CD,      
        PRE_SEQ,     
        NEW_FLG,     
        NEW_APP_FLG,     
        REQ_FIRST_DATE,      
        REQ_DATE,        
        QUOT_REQ_RESP_LIMIT_DATE,        
        REQ_COMPANY_CD,      
        REQ_COMPANY_NAME,        
        REQ_SECTION_PLACE_CD,        
        REQ_SECTION_PLACE_NAME,      
        REQ_SECTION_CD,      
        REQ_SECTION_NAME,        
        REQ_USER_ID,     
        REQ_USER_NAME,       
        REQ_USER_EXTENSION_NO,       
        REQ_USER_TEL_NO,     
        INPUT_COMPANY_CD,        
        INPUT_COMPANY_NAME,      
        INPUT_SECTION_PLACE_CD,      
        INPUT_SECTION_PLACE_NAME,        
        INPUT_SECTION_CD,        
        INPUT_SECTION_NAME,      
        INPUT_USER_ID,       
        INPUT_USER_NAME,     
        BUYER_COMPANY_CD,        
        BUYER_COMPANY_NAME,      
        BUYER_SECTION_PLACE_CD,      
        BUYER_SECTION_PLACE_NAME,        
        BUYER_SECTION_CD,        
        BUYER_SECTION_NAME,      
        BUYER_USER_ID,       
        BUYER_USER_NAME,     
        FOR_BOSS_COMMENT,        
        FOR_BUYER_COMMENT,       
        FOR_SUPPRIER_COMMENT,        
        URGENT_IND,      
        TITLE_NAME,      
        DELIV_PLACE_COMPANY_CD,      
        DELIV_PLACE_CD,      
        DELIV_PLACE_NAME,        
        ITEM_CLASS_COMPANY_CD,       
        ITEM_CLASS_L,        
        ITEM_CLASS_L_NAME,       
        ITEM_CLASS_M,        
        ITEM_CLASS_M_NAME,       
        ITEM_CLASS_S,        
        ITEM_CLASS_S_NAME,       
        PRICE_REQ_FLG,       
        SUP_COMPANY_CD,      
        SUP_CD,      
        SUP_NAME,        
        SUP_ABBR_NAME,       
        ATTACH_FILE_SEQ1,        
        ATTACH_FILE_SEQ2,        
        BUYER_BACK_COMPANY_CD,       
        BUYER_BACK_COMPANY_NAME,     
        BUYER_BACK_SECTION_CD,       
        BUYER_BACK_SECTION_NAME,     
        BUYER_BACK_USER_ID,      
        BUYER_BACK_USER_NAME,        
        BUYER_BACK_USER_COMMENTS,        
        APP_ROUTE_NO,        
        APP_ROUTE_NAME,      
        DELETE_FLG,      
        AUTO_DELETE_FLG,     
        AUTO_DELETE_DATE,        
        LAST_UPD_DATE,       
        LAST_UPD_COMPANY_CD,     
        LAST_UPD_SECTION_CD,     
        LAST_UPD_USER_ID,        
        REG_DATE,        
        REG_COMPANY_CD,      
        REG_SECTION_CD,      
        REG_USER_ID,     
       ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()})     
    VALUES (        
       #{quotAcqAplSeq},
       #{quotAcqAplno},
       '1',
       '04',
       '1',
       '1',
       '',
       '1',
       '0',
       '${@fw.common.util.AppUtil@getSysDate()}',
       '${@fw.common.util.AppUtil@getSysDate()}',
       #{quotAcqReq.quotMarkLimit.dateOfymd},
       '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
       '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
        #{quotAcqReq.reqUser.reqUser.section.sectionCd, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.section.sectionName, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.userID, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.userName, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.extNo.extensionNo, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.externalNo.externalNo, jdbcType=VARCHAR},
       '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
       '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}', 
       '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',
       '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',
       #{quotAcqReq.itemKind.buyUser.buyUser.section.company.companyCd, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.company.companyName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionPlace.sectionPlaceCd, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionPlace.sectionPlaceName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionCd, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.userID, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.userName, jdbcType=VARCHAR},
       #{quotAcqReq.forAppComment.forAppComment.comment, jdbcType=VARCHAR},
       #{quotAcqReq.forBuyerComment.forBuyerComment.comment, jdbcType=VARCHAR},
       #{quotAcqReq.forSupplierComment.forSupplierComment.comment, jdbcType=VARCHAR},
       #{quotAcqReq.urgentInd.urgentInd, jdbcType=VARCHAR},
       #{quotAcqReq.titleName.titleName, jdbcType=VARCHAR},
       #{quotAcqReq.delivPlace.delivPlaceCompanyCd, jdbcType=VARCHAR},
       #{quotAcqReq.delivPlace.delivPlaceCd, jdbcType=VARCHAR},
       #{quotAcqReq.delivPlace.delivPlaceName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassCompanyCd, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassL, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassLName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassM, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassMName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassS, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassSName, jdbcType=VARCHAR},
       #{quotAcqReq.priceRegisterFlg.priceRegisterFlg, jdbcType=VARCHAR},       
       #{quotAcqReq.hopeSupplier.hopeSupplier.supCompanyCd, jdbcType=VARCHAR},
       #{quotAcqReq.hopeSupplier.hopeSupplier.supCd, jdbcType=VARCHAR},
       #{quotAcqReq.hopeSupplier.hopeSupplier.supplierName.supplierName, jdbcType=VARCHAR},
       #{quotAcqReq.hopeSupplier.hopeSupplier.supplierName.supplierAbbrName, jdbcType=VARCHAR},
       #{attachMngSeq1},
       #{attachMngSeq2},
       '',
       '',
       '',
       '',
       '',
       '',
       '',
      #{quotAcqReq.approute.appRouteNo},
      #{quotAcqReq.approute.appRouteName, jdbcType=VARCHAR},
      '0',
      '0',
      '',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
       ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("quotAcqReq.editExtItem.")})         
    </insert>
    
    <insert id="insertQuotAcqForReturn" >
     INSERT INTO T_QUOT_ACQ_APL(       
        QUOT_ACQ_APL_SEQ,      
        QUOT_ACQ_APL_NO,     
        QUOT_ACQ_APL_VERSION,        
        QUOT_ACQ_APL_STATUS,     
        REQ_TYPE_IND,        
        CORRECT_CD,      
        PRE_SEQ,     
        NEW_FLG,     
        NEW_APP_FLG,     
        REQ_FIRST_DATE,      
        REQ_DATE,        
        QUOT_REQ_RESP_LIMIT_DATE,        
        REQ_COMPANY_CD,      
        REQ_COMPANY_NAME,        
        REQ_SECTION_PLACE_CD,        
        REQ_SECTION_PLACE_NAME,      
        REQ_SECTION_CD,      
        REQ_SECTION_NAME,        
        REQ_USER_ID,     
        REQ_USER_NAME,       
        REQ_USER_EXTENSION_NO,       
        REQ_USER_TEL_NO,     
        INPUT_COMPANY_CD,        
        INPUT_COMPANY_NAME,      
        INPUT_SECTION_PLACE_CD,      
        INPUT_SECTION_PLACE_NAME,        
        INPUT_SECTION_CD,        
        INPUT_SECTION_NAME,      
        INPUT_USER_ID,       
        INPUT_USER_NAME,     
        BUYER_COMPANY_CD,        
        BUYER_COMPANY_NAME,      
        BUYER_SECTION_PLACE_CD,      
        BUYER_SECTION_PLACE_NAME,        
        BUYER_SECTION_CD,        
        BUYER_SECTION_NAME,      
        BUYER_USER_ID,       
        BUYER_USER_NAME,     
        FOR_BOSS_COMMENT,        
        FOR_BUYER_COMMENT,       
        FOR_SUPPRIER_COMMENT,        
        URGENT_IND,      
        TITLE_NAME,      
        DELIV_PLACE_COMPANY_CD,      
        DELIV_PLACE_CD,      
        DELIV_PLACE_NAME,        
        ITEM_CLASS_COMPANY_CD,       
        ITEM_CLASS_L,        
        ITEM_CLASS_L_NAME,       
        ITEM_CLASS_M,        
        ITEM_CLASS_M_NAME,       
        ITEM_CLASS_S,        
        ITEM_CLASS_S_NAME,       
        PRICE_REQ_FLG,       
        SUP_COMPANY_CD,      
        SUP_CD,      
        SUP_NAME,        
        SUP_ABBR_NAME,       
        ATTACH_FILE_SEQ1,        
        ATTACH_FILE_SEQ2,        
        BUYER_BACK_COMPANY_CD,       
        BUYER_BACK_COMPANY_NAME,     
        BUYER_BACK_SECTION_CD,       
        BUYER_BACK_SECTION_NAME,     
        BUYER_BACK_USER_ID,      
        BUYER_BACK_USER_NAME,        
        BUYER_BACK_USER_COMMENTS,        
        APP_ROUTE_NO,        
        APP_ROUTE_NAME,      
        DELETE_FLG,      
        AUTO_DELETE_FLG,     
        AUTO_DELETE_DATE,        
        LAST_UPD_DATE,       
        LAST_UPD_COMPANY_CD,     
        LAST_UPD_SECTION_CD,     
        LAST_UPD_USER_ID,        
        REG_DATE,        
        REG_COMPANY_CD,      
        REG_SECTION_CD,      
        REG_USER_ID,
        ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()})
    VALUES (        
       #{quotAcqAplSeq},
       #{quotAcqAplno},
       #{version},
       #{status},
       '1',
       '2',
       #{oldQoutAplSeq},
       '1',
       #{newAppFlg},
       '${@fw.common.util.AppUtil@getSysDate()}',
       '${@fw.common.util.AppUtil@getSysDate()}',
       #{quotAcqReq.quotMarkLimit.dateOfymd},
       '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
       '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',
        #{quotAcqReq.reqUser.reqUser.section.sectionCd, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.section.sectionName, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.userID, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.userName, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.extNo.extensionNo, jdbcType=VARCHAR},
        #{quotAcqReq.reqUser.reqUser.externalNo.externalNo, jdbcType=VARCHAR},
       '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',
       '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}', 
       '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',
       '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
       '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',
       #{quotAcqReq.itemKind.buyUser.buyUser.section.company.companyCd, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.company.companyName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionPlace.sectionPlaceCd, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionPlace.sectionPlaceName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionCd, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.userID, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.buyUser.buyUser.userName, jdbcType=VARCHAR},
       #{quotAcqReq.forAppComment.forAppComment.comment, jdbcType=VARCHAR},
       #{quotAcqReq.forBuyerComment.forBuyerComment.comment, jdbcType=VARCHAR},
       #{quotAcqReq.forSupplierComment.forSupplierComment.comment, jdbcType=VARCHAR},
       #{quotAcqReq.urgentInd.urgentInd, jdbcType=VARCHAR},
       #{quotAcqReq.titleName.titleName, jdbcType=VARCHAR},
       #{quotAcqReq.delivPlace.delivPlaceCompanyCd, jdbcType=VARCHAR},
       #{quotAcqReq.delivPlace.delivPlaceCd, jdbcType=VARCHAR},
       #{quotAcqReq.delivPlace.delivPlaceName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassCompanyCd, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassL, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassLName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassM, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassMName, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassS, jdbcType=VARCHAR},
       #{quotAcqReq.itemKind.itemClassSName, jdbcType=VARCHAR},
       #{quotAcqReq.priceRegisterFlg.priceRegisterFlg, jdbcType=VARCHAR},       
       #{quotAcqReq.hopeSupplier.hopeSupplier.supCompanyCd, jdbcType=VARCHAR},
       #{quotAcqReq.hopeSupplier.hopeSupplier.supCd, jdbcType=VARCHAR},
       #{quotAcqReq.hopeSupplier.hopeSupplier.supplierName.supplierName, jdbcType=VARCHAR},
       #{quotAcqReq.hopeSupplier.hopeSupplier.supplierName.supplierAbbrName, jdbcType=VARCHAR},
       #{attachMngSeq1},
       #{attachMngSeq2},
       '',
       '',
       '',
       '',
       '',
       '',
       '',
       #{quotAcqReq.approute.appRouteNo},
       #{quotAcqReq.approute.appRouteName, jdbcType=VARCHAR},
      '0',
      '0',
      '',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
       ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("quotAcqReq.editExtItem.")})         
    </insert>
    
     <insert id="insertQuotAcqDetail" >
     INSERT INTO T_QUOT_ACQ_REQUEST( 
          QUOT_ACQ_APL_SEQ,
          QUOT_ACQ_APL_DTL_NO,
          QUOT_ACQ_APL_NO,
          QUOT_ACQ_APL_VERSION, 
          ITEM_COMPANY_CD,
          ITEM_CD,
          ITEM_NAME,
          KATASHIKI,
          MANUFACT_CD,
          MANUFACT_NAME,
          REQ_DELIV_DATE, 
          CURRENCY_CD, 
          REQ_VOL,
          UNIT_CD, 
          UNIT_NAME,
          UNIT_PRICE,
          REQ_AMOUNT, 
          ATTACH_FILE_SEQ,
          DELETE_FLG, 
          AUTO_DELETE_FLG,
          AUTO_DELETE_DATE, 
          LAST_UPD_DATE,
          LAST_UPD_COMPANY_CD, 
          LAST_UPD_SECTION_CD,
          LAST_UPD_USER_ID, 
          REG_DATE,
          REG_COMPANY_CD,
          REG_SECTION_CD,
          REG_USER_ID,
          ${@ps.common.util.ItemSettingUtil@getItemSettingInsertSQL()})
    VALUES (        
       #{quotAcqAplSeq},
       #{detailedNumber},
       #{quotAcqAplno},
       #{version},
       '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
       #{quotAcqReqItem.productRegistration.item.itemCd, jdbcType=VARCHAR},
       #{quotAcqReqItem.productRegistration.item.itemName, jdbcType=VARCHAR},
       #{quotAcqReqItem.productRegistration.item.katashiki, jdbcType=VARCHAR},
       #{quotAcqReqItem.productRegistration.item.manufact.manufactCd, jdbcType=VARCHAR},
       #{quotAcqReqItem.productRegistration.item.manufact.manufactName, jdbcType=VARCHAR},
       #{quotAcqReqItem.hopeDlvEst.hopeDlvEst.dateOfymd},
       #{quotAcqReqItem.currency.currencyCd},
       #{quotAcqReqItem.hopeVol.hopeVol.vol},
       #{quotAcqReqItem.productRegistration.item.unit.unitCd, jdbcType=VARCHAR},
       #{quotAcqReqItem.productRegistration.item.unit.unitName, jdbcType=VARCHAR},
       #{quotAcqReqItem.hopePrice.hopePrice.amount},
       #{quotAcqReqItem.hopeAmount.hopeAmount.amount},
       #{attachMngSeq},
       '0',
       '0',
       '',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
      '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
      '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
      '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
       ${@ps.common.util.ItemSettingUtil@getItemSettingInsertValueSQL("quotAcqReqItem.editExtItem.")})
    </insert>
    
    <delete id="deleteQuotAcqDetail" >
        DELETE T_QUOT_ACQ_REQUEST 
        WHERE 
          QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
          AND DELETE_FLG = '0'
     </delete>
     
     <update id="updateOldQuotAcqDetail" >
        UPDATE T_QUOT_ACQ_REQUEST 
        SET 
          DELETE_FLG = '1', 
          LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
          LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
          LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
          LAST_UPD_USER_ID =  '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}' 
        WHERE 
         QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
         AND DELETE_FLG = '0'     
     </update>
     
     <update id="updateOldQuotAcqApl" >
        UPDATE T_QUOT_ACQ_APL 
        SET   
          NEW_APP_FLG = #{newAppFlg},
          NEW_FLG = '0',     
          LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
          LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
          LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
          LAST_UPD_USER_ID =  '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}' 
        WHERE 
         QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
         AND DELETE_FLG = '0'     
     </update>
     
      <update id="updateReQuotAcqApl" >
        UPDATE T_QUOT_ACQ_APL 
        SET 
          NEW_FLG = '0',     
          LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
          LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
          LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
          LAST_UPD_USER_ID =  '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}' 
        WHERE 
         QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
         AND DELETE_FLG = '0'     
     </update>
     
    <update id="updateQuotAcqForApl" >
     UPDATE T_QUOT_ACQ_APL 
     SET         
        QUOT_ACQ_APL_STATUS =  #{status},
        CORRECT_CD = '2',      
        NEW_APP_FLG = #{newAppFlg},
        REQ_FIRST_DATE = #{quotAcqReq.quotAcqReqDate.firstReqDate.reqDate.dateOfymd},    
        REQ_DATE = '${@fw.common.util.AppUtil@getSysDate()}',       
        QUOT_REQ_RESP_LIMIT_DATE = #{quotAcqReq.quotMarkLimit.dateOfymd}, 
        REQ_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',      
        REQ_COMPANY_NAME =  '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',        
        REQ_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',        
        REQ_SECTION_PLACE_NAME = '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',     
        REQ_SECTION_CD = #{quotAcqReq.reqUser.reqUser.section.sectionCd, jdbcType=VARCHAR},     
        REQ_SECTION_NAME = #{quotAcqReq.reqUser.reqUser.section.sectionName, jdbcType=VARCHAR},       
        REQ_USER_ID = #{quotAcqReq.reqUser.reqUser.userID, jdbcType=VARCHAR},     
        REQ_USER_NAME =  #{quotAcqReq.reqUser.reqUser.userName, jdbcType=VARCHAR},      
        REQ_USER_EXTENSION_NO = #{quotAcqReq.reqUser.reqUser.extNo.extensionNo, jdbcType=VARCHAR},      
        REQ_USER_TEL_NO = #{quotAcqReq.reqUser.reqUser.externalNo.externalNo, jdbcType=VARCHAR},  
        INPUT_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',      
        INPUT_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',      
        INPUT_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',      
        INPUT_SECTION_PLACE_NAME = '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',      
        INPUT_SECTION_CD =  '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',       
        INPUT_SECTION_NAME = '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',      
        INPUT_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',       
        INPUT_USER_NAME = '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',    
        BUYER_COMPANY_CD = #{quotAcqReq.itemKind.buyUser.buyUser.section.company.companyCd, jdbcType=VARCHAR},        
        BUYER_COMPANY_NAME =  #{quotAcqReq.itemKind.buyUser.buyUser.section.company.companyName, jdbcType=VARCHAR},     
        BUYER_SECTION_PLACE_CD =  #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionPlace.sectionPlaceCd, jdbcType=VARCHAR},     
        BUYER_SECTION_PLACE_NAME = #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionPlace.sectionPlaceName, jdbcType=VARCHAR},        
        BUYER_SECTION_CD = #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionCd, jdbcType=VARCHAR},      
        BUYER_SECTION_NAME = #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionName, jdbcType=VARCHAR},      
        BUYER_USER_ID = #{quotAcqReq.itemKind.buyUser.buyUser.userID, jdbcType=VARCHAR},       
        BUYER_USER_NAME = #{quotAcqReq.itemKind.buyUser.buyUser.userName, jdbcType=VARCHAR},     
        FOR_BOSS_COMMENT = #{quotAcqReq.forAppComment.forAppComment.comment, jdbcType=VARCHAR},       
        FOR_BUYER_COMMENT = #{quotAcqReq.forBuyerComment.forBuyerComment.comment, jdbcType=VARCHAR},        
        FOR_SUPPRIER_COMMENT = #{quotAcqReq.forSupplierComment.forSupplierComment.comment, jdbcType=VARCHAR},       
        URGENT_IND = #{quotAcqReq.urgentInd.urgentInd, jdbcType=VARCHAR},     
        TITLE_NAME = #{quotAcqReq.titleName.titleName, jdbcType=VARCHAR},      
        DELIV_PLACE_COMPANY_CD = #{quotAcqReq.delivPlace.delivPlaceCompanyCd, jdbcType=VARCHAR},    
        DELIV_PLACE_CD = #{quotAcqReq.delivPlace.delivPlaceCd, jdbcType=VARCHAR},      
        DELIV_PLACE_NAME = #{quotAcqReq.delivPlace.delivPlaceName, jdbcType=VARCHAR},      
        ITEM_CLASS_COMPANY_CD =#{quotAcqReq.itemKind.itemClassCompanyCd, jdbcType=VARCHAR},      
        ITEM_CLASS_L = #{quotAcqReq.itemKind.itemClassL, jdbcType=VARCHAR},         
        ITEM_CLASS_L_NAME = #{quotAcqReq.itemKind.itemClassLName, jdbcType=VARCHAR},      
        ITEM_CLASS_M = #{quotAcqReq.itemKind.itemClassM, jdbcType=VARCHAR},        
        ITEM_CLASS_M_NAME = #{quotAcqReq.itemKind.itemClassMName, jdbcType=VARCHAR},       
        ITEM_CLASS_S = #{quotAcqReq.itemKind.itemClassS, jdbcType=VARCHAR},         
        ITEM_CLASS_S_NAME = #{quotAcqReq.itemKind.itemClassSName, jdbcType=VARCHAR},        
        PRICE_REQ_FLG = #{quotAcqReq.priceRegisterFlg.priceRegisterFlg, jdbcType=VARCHAR},         
        SUP_COMPANY_CD = #{quotAcqReq.hopeSupplier.hopeSupplier.supCompanyCd, jdbcType=VARCHAR},     
        SUP_CD = #{quotAcqReq.hopeSupplier.hopeSupplier.supCd, jdbcType=VARCHAR},      
        SUP_NAME = #{quotAcqReq.hopeSupplier.hopeSupplier.supplierName.supplierName, jdbcType=VARCHAR},         
        SUP_ABBR_NAME = #{quotAcqReq.hopeSupplier.hopeSupplier.supplierName.supplierAbbrName, jdbcType=VARCHAR},       
        ATTACH_FILE_SEQ1 = #{attachMngSeq1},       
        ATTACH_FILE_SEQ2 = #{attachMngSeq2},      
        BUYER_BACK_COMPANY_CD = '',      
        BUYER_BACK_COMPANY_NAME =  '',     
        BUYER_BACK_SECTION_CD =  '',       
        BUYER_BACK_SECTION_NAME =  '',     
        BUYER_BACK_USER_ID  =  '',      
        BUYER_BACK_USER_NAME =  '',        
        BUYER_BACK_USER_COMMENTS =  '',       
        APP_ROUTE_NO = #{quotAcqReq.approute.appRouteNo},        
        APP_ROUTE_NAME = #{quotAcqReq.approute.appRouteName, jdbcType=VARCHAR},
        DELETE_FLG = '0',    
        AUTO_DELETE_FLG =  '0',     
        AUTO_DELETE_DATE = '',       
        LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
        LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
        LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
        LAST_UPD_USER_ID =  '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',   
        REG_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
        ${@ps.common.util.ItemSettingUtil@getItemSettingUpdateValueSQL("quotAcqReq.editExtItem.")}   
     WHERE
        QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
        AND DELETE_FLG = '0'    
    </update>
    <update id="updateQuotAcqForTempSave" >
     UPDATE T_QUOT_ACQ_APL  
     SET         
        REQ_DATE = '${@fw.common.util.AppUtil@getSysDate()}',
        QUOT_ACQ_APL_STATUS = '04',             
        QUOT_REQ_RESP_LIMIT_DATE = #{quotAcqReq.quotMarkLimit.dateOfymd}, 
        REQ_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',      
        REQ_COMPANY_NAME =  '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',        
        REQ_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',        
        REQ_SECTION_PLACE_NAME = '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',     
        REQ_SECTION_CD = #{quotAcqReq.reqUser.reqUser.section.sectionCd, jdbcType=VARCHAR},     
        REQ_SECTION_NAME = #{quotAcqReq.reqUser.reqUser.section.sectionName, jdbcType=VARCHAR},       
        REQ_USER_ID = #{quotAcqReq.reqUser.reqUser.userID, jdbcType=VARCHAR},     
        REQ_USER_NAME =  #{quotAcqReq.reqUser.reqUser.userName, jdbcType=VARCHAR},      
        REQ_USER_EXTENSION_NO = #{quotAcqReq.reqUser.reqUser.extNo.extensionNo, jdbcType=VARCHAR},      
        REQ_USER_TEL_NO = #{quotAcqReq.reqUser.reqUser.externalNo.externalNo, jdbcType=VARCHAR},  
        INPUT_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',      
        INPUT_COMPANY_NAME = '${@fw.security.SecurityUtil@getCompanyNameByEscapeSql()}',      
        INPUT_SECTION_PLACE_CD = '${@fw.security.SecurityUtil@getSectionPlaceCdByEscapeSql()}',      
        INPUT_SECTION_PLACE_NAME = '${@fw.security.SecurityUtil@getSectionPlaceNameByEscapeSql()}',      
        INPUT_SECTION_CD =  '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',       
        INPUT_SECTION_NAME = '${@fw.security.SecurityUtil@getDefaultSectionNameByEscapeSql()}',      
        INPUT_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',       
        INPUT_USER_NAME = '${@fw.security.SecurityUtil@getUserNameByEscapeSql()}',    
        BUYER_COMPANY_CD = #{quotAcqReq.itemKind.buyUser.buyUser.section.company.companyCd, jdbcType=VARCHAR},        
        BUYER_COMPANY_NAME =  #{quotAcqReq.itemKind.buyUser.buyUser.section.company.companyName, jdbcType=VARCHAR},     
        BUYER_SECTION_PLACE_CD =  #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionPlace.sectionPlaceCd, jdbcType=VARCHAR},     
        BUYER_SECTION_PLACE_NAME = #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionPlace.sectionPlaceName, jdbcType=VARCHAR},        
        BUYER_SECTION_CD = #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionCd, jdbcType=VARCHAR},      
        BUYER_SECTION_NAME = #{quotAcqReq.itemKind.buyUser.buyUser.section.sectionName, jdbcType=VARCHAR},      
        BUYER_USER_ID = #{quotAcqReq.itemKind.buyUser.buyUser.userID, jdbcType=VARCHAR},       
        BUYER_USER_NAME = #{quotAcqReq.itemKind.buyUser.buyUser.userName, jdbcType=VARCHAR},     
        FOR_BOSS_COMMENT = #{quotAcqReq.forAppComment.forAppComment.comment, jdbcType=VARCHAR},       
        FOR_BUYER_COMMENT = #{quotAcqReq.forBuyerComment.forBuyerComment.comment, jdbcType=VARCHAR},        
        FOR_SUPPRIER_COMMENT = #{quotAcqReq.forSupplierComment.forSupplierComment.comment, jdbcType=VARCHAR},       
        URGENT_IND = #{quotAcqReq.urgentInd.urgentInd, jdbcType=VARCHAR},     
        TITLE_NAME = #{quotAcqReq.titleName.titleName, jdbcType=VARCHAR},      
        DELIV_PLACE_COMPANY_CD = #{quotAcqReq.delivPlace.delivPlaceCompanyCd, jdbcType=VARCHAR},    
        DELIV_PLACE_CD = #{quotAcqReq.delivPlace.delivPlaceCd, jdbcType=VARCHAR},      
        DELIV_PLACE_NAME = #{quotAcqReq.delivPlace.delivPlaceName, jdbcType=VARCHAR},      
        ITEM_CLASS_COMPANY_CD =#{quotAcqReq.itemKind.itemClassCompanyCd, jdbcType=VARCHAR},      
        ITEM_CLASS_L = #{quotAcqReq.itemKind.itemClassL, jdbcType=VARCHAR},         
        ITEM_CLASS_L_NAME = #{quotAcqReq.itemKind.itemClassLName, jdbcType=VARCHAR},      
        ITEM_CLASS_M = #{quotAcqReq.itemKind.itemClassM, jdbcType=VARCHAR},        
        ITEM_CLASS_M_NAME = #{quotAcqReq.itemKind.itemClassMName, jdbcType=VARCHAR},       
        ITEM_CLASS_S = #{quotAcqReq.itemKind.itemClassS, jdbcType=VARCHAR},         
        ITEM_CLASS_S_NAME = #{quotAcqReq.itemKind.itemClassSName, jdbcType=VARCHAR},        
        PRICE_REQ_FLG = #{quotAcqReq.priceRegisterFlg.priceRegisterFlg, jdbcType=VARCHAR},         
        SUP_COMPANY_CD = #{quotAcqReq.hopeSupplier.hopeSupplier.supCompanyCd, jdbcType=VARCHAR},     
        SUP_CD = #{quotAcqReq.hopeSupplier.hopeSupplier.supCd, jdbcType=VARCHAR},      
        SUP_NAME = #{quotAcqReq.hopeSupplier.hopeSupplier.supplierName.supplierName, jdbcType=VARCHAR},          
        SUP_ABBR_NAME = #{quotAcqReq.hopeSupplier.hopeSupplier.supplierName.supplierAbbrName, jdbcType=VARCHAR},       
        ATTACH_FILE_SEQ1 = #{attachMngSeq1},       
        ATTACH_FILE_SEQ2 = #{attachMngSeq2},      
        BUYER_BACK_COMPANY_CD = '',      
        BUYER_BACK_COMPANY_NAME =  '',     
        BUYER_BACK_SECTION_CD =  '',       
        BUYER_BACK_SECTION_NAME =  '',     
        BUYER_BACK_USER_ID  =  '',      
        BUYER_BACK_USER_NAME =  '',        
        BUYER_BACK_USER_COMMENTS =  '',       
        APP_ROUTE_NO = #{quotAcqReq.approute.appRouteNo},
        APP_ROUTE_NAME = #{quotAcqReq.approute.appRouteName, jdbcType=VARCHAR}, 
        DELETE_FLG = '0',    
        AUTO_DELETE_FLG =  '0',     
        AUTO_DELETE_DATE = '',       
        LAST_UPD_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',
        LAST_UPD_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
        LAST_UPD_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',
        LAST_UPD_USER_ID =  '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',   
        REG_DATE = '${@fw.common.util.AppUtil@getSysDateYyyyMMddHHmmssSSS()}',        
        REG_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}',
        REG_SECTION_CD = '${@fw.security.SecurityUtil@getDefaultSectionCdByEscapeSql()}',      
        REG_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}',
        ${@ps.common.util.ItemSettingUtil@getItemSettingUpdateValueSQL("quotAcqReq.editExtItem.")}
     WHERE
        QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
        AND DELETE_FLG = '0'    
    </update>

    <!-- 見積取得申請番号から変更前SEQを取得するSQL -->
    <select id="searchForPreAcqAplSeq" resultType="java.lang.String">
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ
        FROM T_QUOT_ACQ_APL
        INNER JOIN ( SELECT QUOT_ACQ_APL_NO,MAX( QUOT_ACQ_APL_VERSION ) AS QUOT_ACQ_APL_VERSION 
            FROM T_QUOT_ACQ_APL 
            WHERE QUOT_ACQ_APL_NO = #{quotAcqAplNo}
            AND NEW_APP_FLG = '1'
            AND DELETE_FLG = '0' 
            GROUP BY QUOT_ACQ_APL_NO ) A 
            ON T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = A.QUOT_ACQ_APL_NO
            AND T_QUOT_ACQ_APL.QUOT_ACQ_APL_VERSION = A.QUOT_ACQ_APL_VERSION 
        WHERE 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = #{quotAcqAplNo}
            AND T_QUOT_ACQ_APL.NEW_APP_FLG = '1'
            AND T_QUOT_ACQ_APL.DELETE_FLG = '0'
    </select>


    <!-- ====================== 共通 START =================== -->
    <!-- ダウンロードSQLヘッダ -->
    <sql id="downloadHeader">
       SELECT * FROM (
    </sql>
    <!-- ダウンロードSQLフッタ -->
    <sql id="downloadFooter">
        ) WHERE  ROWNUM &lt;=${@fw.common.util.PropertiesUtil@getLong("DOWNLOAD_MAXCNT")}
    </sql>
    <!-- ====================== 共通 END =================== -->

</mapper>