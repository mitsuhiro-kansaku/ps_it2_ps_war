<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ps.dataaccess.req.est.ReqEstAllMapper">
    <sql id="listKeyIdentityWhereCondition">
        ${@ps.common.util.ItemSettingUtil@getItemSettingWhereSQL('1')}
        <if test="@org.apache.commons.lang.StringUtils@isNotBlank(reqUserId)">
            <choose>
                <when test="!@org.apache.commons.lang.StringUtils@equals(reqUserId,@fw.security.SecurityUtil@getUserId())">
                    AND T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS != '04'
                </when>
            </choose>
        </if>
        AND T_QUOT_ACQ_APL.DELETE_FLG = '0'
        AND T_QUOT_ACQ_APL.NEW_FLG = '1'
        AND T_QUOT_ACQ_APL.REQ_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
        AND T_QUOT_ACQ_APL.REQ_SECTION_CD IN (${@fw.common.util.AppUtil@getSectionViewRegion()})
        <if test="@org.apache.commons.lang.StringUtils@equals('0',linkFlg)">
            <if test="@org.apache.commons.lang.StringUtils@isNotBlank(reqUserId)">
                AND T_QUOT_ACQ_APL.REQ_USER_ID = #{reqUserId}
            </if>
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotReqStatusListForSql) 
            || @org.apache.commons.collections.CollectionUtils@isNotEmpty(quotAcqAplStatusList)">
            AND (
        </if>
        <if test="@org.springframework.util.CollectionUtils@contains(quotReqStatusListForSql.listIterator(),'05')">
            (T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS = '11' AND ( T_SLIP_MNG.SLIP_STATUS IN ('0211','0212') OR T_QUOT_REQUEST.QUOT_REQ_STATUS IN ('01','02','03','04','05')))
            <if test="@org.apache.commons.collections.CollectionUtils@size(quotReqStatusListForSql) &gt; 1">
                OR
            </if>
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotReqStatusListForSql) 
            &amp;&amp; @org.apache.commons.collections.CollectionUtils@size(quotReqStatusListForSql) &gt;= 1">
            <if test="@org.springframework.util.CollectionUtils@contains(quotReqStatusListForSql.listIterator(),'06') 
                || @org.springframework.util.CollectionUtils@contains(quotReqStatusListForSql.listIterator(),'07') 
                || @org.springframework.util.CollectionUtils@contains(quotReqStatusListForSql.listIterator(),'21')">
                T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS = '11'
                AND T_SLIP_MNG.SLIP_STATUS NOT IN ('0211','0212')
                AND T_QUOT_REQUEST.QUOT_REQ_STATUS IN
                <foreach collection="quotReqStatusListForSql" item="reqStatus" open="(" separator="," close=")">
                    #{reqStatus, jdbcType=VARCHAR}
                </foreach>
                AND T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS != '07'
            </if>
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotReqStatusListForSql) 
            &amp;&amp; @org.apache.commons.collections.CollectionUtils@isNotEmpty(quotAcqAplStatusList)">
            OR
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotAcqAplStatusList)">
            <foreach collection="quotAcqAplStatusList" item="aplStatus" open="" separator="or" close="">                        
                <if test="!@org.apache.commons.lang.StringUtils@equals(aplStatus,'04')">
                    (T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS = #{aplStatus})
                </if>
                <if test="@org.apache.commons.lang.StringUtils@equals(aplStatus,'04')">
                    (T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS = '04'
                    AND T_QUOT_ACQ_APL.INPUT_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}')
                </if>
            </foreach>
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isEmpty(quotAcqAplStatusList)">
            AND (T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS != '04' OR T_QUOT_ACQ_APL.INPUT_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}')
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotReqStatusListForSql) 
            || @org.apache.commons.collections.CollectionUtils@isNotEmpty(quotAcqAplStatusList)">
            )
        </if>
        <if test="@org.apache.commons.lang.StringUtils@isNotBlank(urgentInd)">
            AND T_QUOT_ACQ_APL.URGENT_IND = '1'
        </if>
        AND EXISTS (
            SELECT T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
            FROM T_QUOT_ACQ_REQUEST
            WHERE
                T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_NO 
            AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
            <if test="@org.apache.commons.lang.StringUtils@isNotBlank(priceReqFlg)">
                AND T_QUOT_ACQ_APL.PRICE_REQ_FLG = '1'
            </if>
            ${@ps.common.util.ItemSettingUtil@getItemSettingWhereSQL('2')}
        )
        <if test="@org.apache.commons.lang.StringUtils@isBlank(purAplDisplayFlg)" >
            AND T_PUR_APL.PUR_APL_SEQ IS NULL
        </if>
    </sql>

    <sql id="listKeyIdentityAllWhereCondition">
        ${@ps.common.util.ItemSettingUtil@getItemSettingWhereSQL('1')}
        <if test="@org.apache.commons.lang.StringUtils@isNotBlank(reqUserId)">
            <choose>
                <when test="!@org.apache.commons.lang.StringUtils@equals(reqUserId,@fw.security.SecurityUtil@getUserId())">
                    AND T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS != '04'
                </when>
            </choose>
        </if>
        AND T_QUOT_ACQ_APL.DELETE_FLG = '0'
        AND T_QUOT_ACQ_APL.NEW_FLG = '1'
        AND T_QUOT_ACQ_APL.REQ_COMPANY_CD = '${@fw.security.SecurityUtil@getCompanyCdByEscapeSql()}'
        AND T_QUOT_ACQ_APL.REQ_SECTION_CD IN (${@fw.common.util.AppUtil@getSectionViewRegion()})
        <if test="@org.apache.commons.lang.StringUtils@equals('0',linkFlg)">
            <if test="@org.apache.commons.lang.StringUtils@isNotBlank(reqUserId)">
                AND T_QUOT_ACQ_APL.REQ_USER_ID = #{reqUserId}
            </if>
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotReqStatusListForSql) 
            || @org.apache.commons.collections.CollectionUtils@isNotEmpty(quotAcqAplStatusList)">
            AND (
        </if>
        <if test="@org.springframework.util.CollectionUtils@contains(quotReqStatusListForSql.listIterator(),'05')">
            (T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS = '11' AND ( T_SLIP_MNG.SLIP_STATUS IN ('0211','0212') OR T_QUOT_REQUEST.QUOT_REQ_STATUS IN ('01','02','03','04','05')))
            <if test="@org.apache.commons.collections.CollectionUtils@size(quotReqStatusListForSql) &gt; 1">
                OR
            </if>
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotReqStatusListForSql) 
            &amp;&amp; @org.apache.commons.collections.CollectionUtils@size(quotReqStatusListForSql) &gt;= 1">
            <if test="@org.springframework.util.CollectionUtils@contains(quotReqStatusListForSql.listIterator(),'06') 
                || @org.springframework.util.CollectionUtils@contains(quotReqStatusListForSql.listIterator(),'07') 
                || @org.springframework.util.CollectionUtils@contains(quotReqStatusListForSql.listIterator(),'21')">
                T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS = '11'
                AND T_SLIP_MNG.SLIP_STATUS NOT IN ('0211','0212')
                AND T_QUOT_REQUEST.QUOT_REQ_STATUS IN
                <foreach collection="quotReqStatusListForSql" item="reqStatus" open="(" separator="," close=")">
                    #{reqStatus, jdbcType=VARCHAR}
                </foreach>
                AND T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS != '07'
            </if>
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotReqStatusListForSql) 
            &amp;&amp; @org.apache.commons.collections.CollectionUtils@isNotEmpty(quotAcqAplStatusList)">
            OR
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotAcqAplStatusList)">
            <foreach collection="quotAcqAplStatusList" item="aplStatus" open="" separator="or" close="">                        
                <if test="!@org.apache.commons.lang.StringUtils@equals(aplStatus,'04')">
                    (T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS = #{aplStatus})
                </if>
                <if test="@org.apache.commons.lang.StringUtils@equals(aplStatus,'04')">
                    (T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS = '04'
                    AND T_QUOT_ACQ_APL.INPUT_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}')
                </if>
            </foreach>
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isEmpty(quotAcqAplStatusList)">
            AND (T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS != '04' OR T_QUOT_ACQ_APL.INPUT_USER_ID = '${@fw.security.SecurityUtil@getUserIdByEscapeSql()}')
        </if>
        <if test="@org.apache.commons.collections.CollectionUtils@isNotEmpty(quotReqStatusListForSql) 
            || @org.apache.commons.collections.CollectionUtils@isNotEmpty(quotAcqAplStatusList)">
            )
        </if>
        <if test="@org.apache.commons.lang.StringUtils@isNotBlank(urgentInd)">
            AND T_QUOT_ACQ_APL.URGENT_IND = '1'
        </if>
        AND EXISTS (
            SELECT T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
            FROM H_QUOT_ACQ_REQUEST T_QUOT_ACQ_REQUEST
            WHERE
                T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_NO 
            AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
            <if test="@org.apache.commons.lang.StringUtils@isNotBlank(priceReqFlg)">
                AND T_QUOT_ACQ_APL.PRICE_REQ_FLG = '1'
            </if>
            ${@ps.common.util.ItemSettingUtil@getItemSettingWhereSQL('2')}
        )
        <if test="@org.apache.commons.lang.StringUtils@isBlank(purAplDisplayFlg)" >
            AND T_PUR_APL.PUR_APL_SEQ IS NULL
        </if>
    </sql>

    <!-- 一覧検索のFROM句 -->
    <sql id="listFrom">
        FROM
            T_QUOT_ACQ_APL
        INNER JOIN (
            SELECT
                QUOT_ACQ_APL_SEQ,
                MIN(QUOT_ACQ_APL_DTL_NO) as QUOT_ACQ_APL_DTL_NO
            FROM
                T_QUOT_ACQ_REQUEST
            GROUP BY 
                QUOT_ACQ_APL_SEQ
        ) T_QUOT_ACQ_REQUEST 
        ON
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        INNER JOIN 
            T_SLIP_MNG ON
                T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO = T_SLIP_MNG.SLIP_NO
        LEFT JOIN 
            T_QUOT_REQUEST
        ON 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = T_QUOT_REQUEST.QUOT_ACQ_APL_NO
        AND T_QUOT_REQUEST.DELETE_FLG = '0'
        AND T_QUOT_REQUEST.NEW_FLG = '1'
        LEFT JOIN 
            T_PUR_APL
        ON 
            T_QUOT_REQUEST.QUOT_REQ_NO = T_PUR_APL.QUOT_REQ_NO
        AND T_PUR_APL.DELETE_FLG = '0'
        AND T_PUR_APL.NEW_FLG = '1'
        LEFT JOIN (
            SELECT 
                T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ AS "ACQ_APL_SEQ",
                MAX(T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE) as "REQ_DELIV_DATE"
            FROM 
                T_QUOT_ACQ_REQUEST 
            WHERE
                T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
            GROUP BY 
                T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        ) T_QUOT_ACQ_REQUEST
        ON
            T_QUOT_ACQ_REQUEST.ACQ_APL_SEQ = T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ
    </sql>

    <sql id="listFromAll">
        FROM
            H_QUOT_ACQ_APL T_QUOT_ACQ_APL
        INNER JOIN (
            SELECT
                QUOT_ACQ_APL_SEQ,
                MIN(QUOT_ACQ_APL_DTL_NO) as QUOT_ACQ_APL_DTL_NO
            FROM
                H_QUOT_ACQ_REQUEST T_QUOT_ACQ_REQUEST
            GROUP BY 
                QUOT_ACQ_APL_SEQ
        ) T_QUOT_ACQ_REQUEST 
        ON
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        INNER JOIN 
            H_SLIP_MNG T_SLIP_MNG ON
                T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO = T_SLIP_MNG.SLIP_NO
        LEFT JOIN 
            H_QUOT_REQUEST T_QUOT_REQUEST
        ON 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = T_QUOT_REQUEST.QUOT_ACQ_APL_NO
        AND T_QUOT_REQUEST.DELETE_FLG = '0'
        AND T_QUOT_REQUEST.NEW_FLG = '1'
        LEFT JOIN 
            H_PUR_APL T_PUR_APL
        ON 
            T_QUOT_REQUEST.QUOT_REQ_NO = T_PUR_APL.QUOT_REQ_NO
        AND T_PUR_APL.DELETE_FLG = '0'
        AND T_PUR_APL.NEW_FLG = '1'
        LEFT JOIN (
            SELECT 
                T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ AS "ACQ_APL_SEQ",
                MAX(T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE) as "REQ_DELIV_DATE"
            FROM 
                H_QUOT_ACQ_REQUEST T_QUOT_ACQ_REQUEST
            WHERE
                T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
            GROUP BY 
                T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        ) T_QUOT_ACQ_REQUEST
        ON
            T_QUOT_ACQ_REQUEST.ACQ_APL_SEQ = T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ
    </sql>

    <select id="listKeyIdentity" parameterType="fw.domain.slip.quot.quotstatus.quotreqstatuslist.quotstatuslist.QuotReqStatusAllSearchCondition" resultType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify">
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ as "quotAcqAplSeqNo"
        FROM (
            SELECT
                T_QUOT_ACQ_APL.*
        <include refid="listFrom" />
        <where> 
            <include refid="listKeyIdentityWhereCondition"/>
        </where>
        UNION ALL 
        SELECT
            T_QUOT_ACQ_APL.*
        <include refid="listFromAll" />
        <where> 
            <include refid="listKeyIdentityAllWhereCondition"/>
        </where>
        ) T_QUOT_ACQ_APL 
        ORDER BY ${searchCondition.columnOrder.columnOrder()}
    </select>

    <resultMap type="fw.domain.slip.quot.quotstatus.quotreqstatuslist.quotstatuslist.QuotReqStatusItem" id="QuotReqStatusItem_Map">
        <id column="QUOT_ACQ_APL_SEQ" property="quotAcqReqIdentify.quotAcqAplSeqNo" />
        <id column="QUOT_ACQ_APL_NO" property="quotAcqReqIdentify.quotAcqAplNo.quotAcqAplNo" />
        <id column="QUOT_ACQ_APL_VERSION" property="quotAcqReqIdentify.historyNo.historyNo" />
        <id column="T_QUOT_REQUEST.QUOT_REQ_SEQ" property="quotReqIdentify.quotReqSeqNo.seqNumber" />
        <id column="QUOT_REQ_NO" property="quotReqIdentify.quotReqNo.quotReqNo"/>
        <result column="SLIP_NO" property="quotAcqReqIdentify.exclusiveSlipId.slipNo"/>
        <result column="SLIP_LAST_UPD_DATE" property="quotAcqReqIdentify.exclusiveSlipId.lastUpdDate"/>
    </resultMap>
    <select id="listPageItem" parameterType="fw.domain.slip.quot.quotstatus.quotreqstatuslist.quotstatuslist.QuotReqStatusAllSearchCondition" resultMap="QuotReqStatusItem_Map">
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ ,
            T_QUOT_ACQ_APL.PRE_SEQ as "quotAcqReqIdentify.preSeq" ,
            T_QUOT_ACQ_APL.LAST_UPD_DATE as "quotAcqReqIdentify.lastUpdDate",
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO ,
            T_QUOT_ACQ_APL.URGENT_IND as "urgentInd",
            T_QUOT_ACQ_APL.REQ_DATE as "reqDate.dateOfymd",
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS as "quotAcqAplStatus",
            T_QUOT_ACQ_APL.TITLE_NAME as "titleName",
            T_QUOT_ACQ_APL.SUP_CD as "supCd",
            T_QUOT_ACQ_APL.SUP_ABBR_NAME as "supName",
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME as "itemClassNameL",
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME as "itemClassNameM",
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME as "itemClassNameS",
            T_QUOT_ACQ_APL.DELIV_PLACE_CD as "delivPlaceCd",
            T_QUOT_ACQ_APL.DELIV_PLACE_NAME as "delivPlaceName",
            T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE as "quotReqRespLimitDate.dateOfymd",
            T_QUOT_ACQ_APL.REQ_SECTION_CD as "reqSectionCd",
            T_QUOT_ACQ_APL.REQ_SECTION_NAME as "reqSectionName",
            T_QUOT_ACQ_APL.REQ_USER_ID as "reqUserId",
            T_QUOT_ACQ_APL.REQ_USER_NAME as "reqUserName",
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_VERSION ,
            T_QUOT_REQUEST_QUOT_REQ_STATUS as "quotReqStatus",
            T_QUOT_REQUEST_QUOT_REQ_SEQ as "T_QUOT_REQUEST.QUOT_REQ_SEQ",
            T_QUOT_REQUEST_LAST_UPD_DATE as "quotReqIdentify.lastUpdDate",
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQLDomainAliasNonBinary("T_QUOT_ACQ_APL","quotAcqAplExtItem")},
            T_QUOT_REQUEST_QUOT_REQ_NO as QUOT_REQ_NO,
            T_PUR_APL_PUR_APL_SEQ as "purAplSeq",
            T_SLIP_MNG_SLIP_NO as SLIP_NO,
            T_SLIP_MNG_LAST_UPD_DATE as SLIP_LAST_UPD_DATE,
            T_SLIP_MNG_SLIP_STATUS as "slipStatus"
            FROM (
                SELECT
                T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ
                , T_QUOT_ACQ_APL.PRE_SEQ
                , T_QUOT_ACQ_APL.LAST_UPD_DATE
                , T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO
                , T_QUOT_ACQ_APL.URGENT_IND
                , T_QUOT_ACQ_APL.REQ_DATE
                , T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS
                , T_QUOT_ACQ_APL.TITLE_NAME
                , T_QUOT_ACQ_APL.SUP_CD
                , T_QUOT_ACQ_APL.SUP_ABBR_NAME
                , T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME
                , T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME
                , T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME
                , T_QUOT_ACQ_APL.DELIV_PLACE_CD
                , T_QUOT_ACQ_APL.DELIV_PLACE_NAME
                , T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE
                , T_QUOT_ACQ_APL.REQ_SECTION_CD
                , T_QUOT_ACQ_APL.REQ_SECTION_NAME
                , T_QUOT_ACQ_APL.REQ_USER_ID
                , T_QUOT_ACQ_APL.REQ_USER_NAME
                , T_QUOT_ACQ_APL.QUOT_ACQ_APL_VERSION
                , T_QUOT_REQUEST.QUOT_REQ_STATUS AS T_QUOT_REQUEST_QUOT_REQ_STATUS
                , T_QUOT_REQUEST.QUOT_REQ_SEQ AS T_QUOT_REQUEST_QUOT_REQ_SEQ
                , T_QUOT_REQUEST.LAST_UPD_DATE AS T_QUOT_REQUEST_LAST_UPD_DATE
                , T_QUOT_REQUEST.QUOT_REQ_NO AS T_QUOT_REQUEST_QUOT_REQ_NO
                , T_PUR_APL.PUR_APL_SEQ AS T_PUR_APL_PUR_APL_SEQ
                , T_SLIP_MNG.SLIP_NO AS T_SLIP_MNG_SLIP_NO
                , T_SLIP_MNG.LAST_UPD_DATE AS T_SLIP_MNG_LAST_UPD_DATE
                , T_SLIP_MNG.SLIP_STATUS AS T_SLIP_MNG_SLIP_STATUS
                    , T_QUOT_ACQ_APL.EXT_TXT_1
                    , T_QUOT_ACQ_APL.EXT_TXT_2
                    , T_QUOT_ACQ_APL.EXT_TXT_3
                    , T_QUOT_ACQ_APL.EXT_TXT_4
                    , T_QUOT_ACQ_APL.EXT_TXT_5
                    , T_QUOT_ACQ_APL.EXT_TXT_6
                    , T_QUOT_ACQ_APL.EXT_TXT_7
                    , T_QUOT_ACQ_APL.EXT_TXT_8
                    , T_QUOT_ACQ_APL.EXT_TXT_9
                    , T_QUOT_ACQ_APL.EXT_TXT_10
                    , T_QUOT_ACQ_APL.EXT_AREA_1
                    , T_QUOT_ACQ_APL.EXT_AREA_2
                    , T_QUOT_ACQ_APL.EXT_AREA_3
                    , T_QUOT_ACQ_APL.EXT_AREA_4
                    , T_QUOT_ACQ_APL.EXT_AREA_5
                    , T_QUOT_ACQ_APL.EXT_DATE_1
                    , T_QUOT_ACQ_APL.EXT_DATE_2
                    , T_QUOT_ACQ_APL.EXT_DATE_3
                    , T_QUOT_ACQ_APL.EXT_DATE_4
                    , T_QUOT_ACQ_APL.EXT_DATE_5
                    , T_QUOT_ACQ_APL.EXT_INT_1
                    , T_QUOT_ACQ_APL.EXT_INT_2
                    , T_QUOT_ACQ_APL.EXT_INT_3
                    , T_QUOT_ACQ_APL.EXT_INT_4
                    , T_QUOT_ACQ_APL.EXT_INT_5
                    , T_QUOT_ACQ_APL.EXT_INT_6
                    , T_QUOT_ACQ_APL.EXT_INT_7
                    , T_QUOT_ACQ_APL.EXT_INT_8
                    , T_QUOT_ACQ_APL.EXT_INT_9
                    , T_QUOT_ACQ_APL.EXT_INT_10
                    , T_QUOT_ACQ_APL.EXT_DEC_1
                    , T_QUOT_ACQ_APL.EXT_DEC_2
                    , T_QUOT_ACQ_APL.EXT_DEC_3
                    , T_QUOT_ACQ_APL.EXT_DEC_4
                    , T_QUOT_ACQ_APL.EXT_DEC_5
                    , T_QUOT_ACQ_APL.EXT_SEL_1
                    , T_QUOT_ACQ_APL.EXT_SEL_2
                    , T_QUOT_ACQ_APL.EXT_SEL_3
                    , T_QUOT_ACQ_APL.EXT_SEL_4
                    , T_QUOT_ACQ_APL.EXT_SEL_5
                    , T_QUOT_ACQ_APL.EXT_SEL_6
                    , T_QUOT_ACQ_APL.EXT_SEL_7
                    , T_QUOT_ACQ_APL.EXT_SEL_8
                    , T_QUOT_ACQ_APL.EXT_SEL_9
                    , T_QUOT_ACQ_APL.EXT_SEL_10
                    , T_QUOT_ACQ_APL.EXT_CHK_1
                    , T_QUOT_ACQ_APL.EXT_CHK_2
                    , T_QUOT_ACQ_APL.EXT_CHK_3
                    , T_QUOT_ACQ_APL.EXT_CHK_4
                    , T_QUOT_ACQ_APL.EXT_CHK_5
                    , T_QUOT_ACQ_APL.EXT_FILE_1
                    , T_QUOT_ACQ_APL.EXT_FILE_2
                    , T_QUOT_ACQ_APL.EXT_FILE_3
                    , T_QUOT_ACQ_APL.EXT_MST_1
                    , T_QUOT_ACQ_APL.EXT_MST_2
                    , T_QUOT_ACQ_APL.EXT_MST_3
                    , T_QUOT_ACQ_APL.EXT_MST_4
                    , T_QUOT_ACQ_APL.EXT_MST_5
                    , T_QUOT_ACQ_APL.EXT_MST_6
                    , T_QUOT_ACQ_APL.EXT_MST_7
                    , T_QUOT_ACQ_APL.EXT_MST_8
                    , T_QUOT_ACQ_APL.EXT_MST_NAME_1
                    , T_QUOT_ACQ_APL.EXT_MST_NAME_2
                    , T_QUOT_ACQ_APL.EXT_MST_NAME_3
                    , T_QUOT_ACQ_APL.EXT_MST_NAME_4
                    , T_QUOT_ACQ_APL.EXT_MST_NAME_5
                    , T_QUOT_ACQ_APL.EXT_MST_NAME_6
                    , T_QUOT_ACQ_APL.EXT_MST_NAME_7
                    , T_QUOT_ACQ_APL.EXT_MST_NAME_8
                <include refid="listFrom" />
                <where> 
                    <include refid="listKeyIdentityWhereCondition"/>
                    AND T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ IN 
                    <foreach collection="searchCondition.page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">  
                        #{keyList.quotAcqAplSeqNo} 
                    </foreach>
                </where>
            UNION ALL
            SELECT
                T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ
                , T_QUOT_ACQ_APL.PRE_SEQ
                , T_QUOT_ACQ_APL.LAST_UPD_DATE
                , T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO
                , T_QUOT_ACQ_APL.URGENT_IND
                , T_QUOT_ACQ_APL.REQ_DATE
                , T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS
                , T_QUOT_ACQ_APL.TITLE_NAME
                , T_QUOT_ACQ_APL.SUP_CD
                , T_QUOT_ACQ_APL.SUP_ABBR_NAME
                , T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME
                , T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME
                , T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME
                , T_QUOT_ACQ_APL.DELIV_PLACE_CD
                , T_QUOT_ACQ_APL.DELIV_PLACE_NAME
                , T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE
                , T_QUOT_ACQ_APL.REQ_SECTION_CD
                , T_QUOT_ACQ_APL.REQ_SECTION_NAME
                , T_QUOT_ACQ_APL.REQ_USER_ID
                , T_QUOT_ACQ_APL.REQ_USER_NAME
                , T_QUOT_ACQ_APL.QUOT_ACQ_APL_VERSION
                , T_QUOT_REQUEST.QUOT_REQ_STATUS
                , T_QUOT_REQUEST.QUOT_REQ_SEQ
                , T_QUOT_REQUEST.LAST_UPD_DATE
                , T_QUOT_REQUEST.QUOT_REQ_NO
                , T_PUR_APL.PUR_APL_SEQ
                , T_SLIP_MNG.SLIP_NO
                , T_SLIP_MNG.LAST_UPD_DATE
                , T_SLIP_MNG.SLIP_STATUS
                , T_QUOT_ACQ_APL.EXT_TXT_1
                , T_QUOT_ACQ_APL.EXT_TXT_2
                , T_QUOT_ACQ_APL.EXT_TXT_3
                , T_QUOT_ACQ_APL.EXT_TXT_4
                , T_QUOT_ACQ_APL.EXT_TXT_5
                , T_QUOT_ACQ_APL.EXT_TXT_6
                , T_QUOT_ACQ_APL.EXT_TXT_7
                , T_QUOT_ACQ_APL.EXT_TXT_8
                , T_QUOT_ACQ_APL.EXT_TXT_9
                , T_QUOT_ACQ_APL.EXT_TXT_10
                , T_QUOT_ACQ_APL.EXT_AREA_1
                , T_QUOT_ACQ_APL.EXT_AREA_2
                , T_QUOT_ACQ_APL.EXT_AREA_3
                , T_QUOT_ACQ_APL.EXT_AREA_4
                , T_QUOT_ACQ_APL.EXT_AREA_5
                , T_QUOT_ACQ_APL.EXT_DATE_1
                , T_QUOT_ACQ_APL.EXT_DATE_2
                , T_QUOT_ACQ_APL.EXT_DATE_3
                , T_QUOT_ACQ_APL.EXT_DATE_4
                , T_QUOT_ACQ_APL.EXT_DATE_5
                , T_QUOT_ACQ_APL.EXT_INT_1
                , T_QUOT_ACQ_APL.EXT_INT_2
                , T_QUOT_ACQ_APL.EXT_INT_3
                , T_QUOT_ACQ_APL.EXT_INT_4
                , T_QUOT_ACQ_APL.EXT_INT_5
                , T_QUOT_ACQ_APL.EXT_INT_6
                , T_QUOT_ACQ_APL.EXT_INT_7
                , T_QUOT_ACQ_APL.EXT_INT_8
                , T_QUOT_ACQ_APL.EXT_INT_9
                , T_QUOT_ACQ_APL.EXT_INT_10
                , T_QUOT_ACQ_APL.EXT_DEC_1
                , T_QUOT_ACQ_APL.EXT_DEC_2
                , T_QUOT_ACQ_APL.EXT_DEC_3
                , T_QUOT_ACQ_APL.EXT_DEC_4
                , T_QUOT_ACQ_APL.EXT_DEC_5
                , T_QUOT_ACQ_APL.EXT_SEL_1
                , T_QUOT_ACQ_APL.EXT_SEL_2
                , T_QUOT_ACQ_APL.EXT_SEL_3
                , T_QUOT_ACQ_APL.EXT_SEL_4
                , T_QUOT_ACQ_APL.EXT_SEL_5
                , T_QUOT_ACQ_APL.EXT_SEL_6
                , T_QUOT_ACQ_APL.EXT_SEL_7
                , T_QUOT_ACQ_APL.EXT_SEL_8
                , T_QUOT_ACQ_APL.EXT_SEL_9
                , T_QUOT_ACQ_APL.EXT_SEL_10
                , T_QUOT_ACQ_APL.EXT_CHK_1
                , T_QUOT_ACQ_APL.EXT_CHK_2
                , T_QUOT_ACQ_APL.EXT_CHK_3
                , T_QUOT_ACQ_APL.EXT_CHK_4
                , T_QUOT_ACQ_APL.EXT_CHK_5
                , T_QUOT_ACQ_APL.EXT_FILE_1
                , T_QUOT_ACQ_APL.EXT_FILE_2
                , T_QUOT_ACQ_APL.EXT_FILE_3
                , T_QUOT_ACQ_APL.EXT_MST_1
                , T_QUOT_ACQ_APL.EXT_MST_2
                , T_QUOT_ACQ_APL.EXT_MST_3
                , T_QUOT_ACQ_APL.EXT_MST_4
                , T_QUOT_ACQ_APL.EXT_MST_5
                , T_QUOT_ACQ_APL.EXT_MST_6
                , T_QUOT_ACQ_APL.EXT_MST_7
                , T_QUOT_ACQ_APL.EXT_MST_8
                , T_QUOT_ACQ_APL.EXT_MST_NAME_1
                , T_QUOT_ACQ_APL.EXT_MST_NAME_2
                , T_QUOT_ACQ_APL.EXT_MST_NAME_3
                , T_QUOT_ACQ_APL.EXT_MST_NAME_4
                , T_QUOT_ACQ_APL.EXT_MST_NAME_5
                , T_QUOT_ACQ_APL.EXT_MST_NAME_6
                , T_QUOT_ACQ_APL.EXT_MST_NAME_7
                , T_QUOT_ACQ_APL.EXT_MST_NAME_8
            <include refid="listFromAll" />
            <where> 
                <include refid="listKeyIdentityAllWhereCondition"/>
                AND T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ IN 
                <foreach collection="searchCondition.page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">  
                    #{keyList.quotAcqAplSeqNo} 
                </foreach>
            </where>
        ) T_QUOT_ACQ_APL
        ORDER BY ${searchCondition.columnOrder.columnOrder()}
    </select>

    <resultMap type="fw.domain.slip.quot.quotstatus.quotreqstatuslist.quotstatuslist.QuotAcqReqItem"
        id="QuotAcqReqItem_Map">
        <id column="QUOT_ACQ_APL_SEQ" property="quotAcqReqIdentify.quotAcqAplSeqNo" />
    </resultMap>
    <select id="listPageDtlItem" parameterType="fw.domain.mst.searchcondition.SearchCondition" 
        resultMap="QuotAcqReqItem_Map">
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ ,
            T_QUOT_ACQ_REQUEST.ITEM_CD as "itemCd",
            T_QUOT_ACQ_REQUEST.ITEM_NAME as "itemName",
            T_QUOT_ACQ_REQUEST.REQ_VOL as "reqVol.vol",
            T_QUOT_ACQ_REQUEST.UNIT_CD as "unitCd",
            T_QUOT_ACQ_REQUEST.UNIT_NAME as "unitName",
            T_QUOT_ACQ_REQUEST.CURRENCY_CD as "currencyCd",
            T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE as "reqDelivDate.dateOfymd",
            T_QUOT_ACQ_REQUEST.UNIT_PRICE as "unitPrice.amount",
            T_QUOT_ACQ_REQUEST.REQ_AMOUNT as "reqAmount.amount"
        FROM T_QUOT_ACQ_APL
        LEFT JOIN T_QUOT_ACQ_REQUEST
            ON T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        WHERE T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ IN
            <foreach collection="page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">  
                #{keyList.quotAcqAplSeqNo} 
            </foreach>
        UNION ALL
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ ,
            T_QUOT_ACQ_REQUEST.ITEM_CD as "itemCd",
            T_QUOT_ACQ_REQUEST.ITEM_NAME as "itemName",
            T_QUOT_ACQ_REQUEST.REQ_VOL as "reqVol.vol",
            T_QUOT_ACQ_REQUEST.UNIT_CD as "unitCd",
            T_QUOT_ACQ_REQUEST.UNIT_NAME as "unitName",
            T_QUOT_ACQ_REQUEST.CURRENCY_CD as "currencyCd",
            T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE as "reqDelivDate.dateOfymd",
            T_QUOT_ACQ_REQUEST.UNIT_PRICE as "unitPrice.amount",
            T_QUOT_ACQ_REQUEST.REQ_AMOUNT as "reqAmount.amount"
        FROM H_QUOT_ACQ_APL T_QUOT_ACQ_APL
        LEFT JOIN H_QUOT_ACQ_REQUEST T_QUOT_ACQ_REQUEST
            ON T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        WHERE T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ IN
            <foreach collection="page.keyDomainEntityList" item="keyList"  open="(" separator="," close=")">  
                #{keyList.quotAcqAplSeqNo} 
            </foreach>
        ORDER BY QUOT_ACQ_APL_SEQ
    </select>

    <!-- ダウンロードのFROM句 -->
    <sql id="downloadFrom">
        FROM 
            T_QUOT_ACQ_APL 
        INNER JOIN (
            SELECT
                QUOT_ACQ_APL_SEQ,
                MIN(QUOT_ACQ_APL_DTL_NO) as QUOT_ACQ_APL_DTL_NO
            FROM
                T_QUOT_ACQ_REQUEST
            GROUP BY 
                QUOT_ACQ_APL_SEQ
        ) T_QUOT_ACQ_REQUEST_SLIP 
        ON
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST_SLIP.QUOT_ACQ_APL_SEQ
        INNER JOIN 
            T_SLIP_MNG 
        ON
            T_QUOT_ACQ_REQUEST_SLIP.QUOT_ACQ_APL_DTL_NO = T_SLIP_MNG.SLIP_NO
        LEFT JOIN 
            T_QUOT_ACQ_REQUEST 
        ON
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
        LEFT JOIN 
            T_QUOT_REQUEST
        ON 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = T_QUOT_REQUEST.QUOT_ACQ_APL_NO
        AND T_QUOT_REQUEST.DELETE_FLG = '0'
        AND T_QUOT_REQUEST.NEW_FLG = '1'
        LEFT JOIN 
            T_PUR_APL
        ON 
            T_QUOT_REQUEST.QUOT_REQ_NO = T_PUR_APL.QUOT_REQ_NO
        AND T_PUR_APL.DELETE_FLG = '0'
        AND T_PUR_APL.NEW_FLG = '1'
    </sql>

    <sql id="downloadFromAll">
        FROM 
            H_QUOT_ACQ_APL T_QUOT_ACQ_APL
        INNER JOIN (
            SELECT
                QUOT_ACQ_APL_SEQ,
                MIN(QUOT_ACQ_APL_DTL_NO) as QUOT_ACQ_APL_DTL_NO
            FROM
                H_QUOT_ACQ_REQUEST T_QUOT_ACQ_REQUEST
            GROUP BY 
                QUOT_ACQ_APL_SEQ
        ) T_QUOT_ACQ_REQUEST_SLIP 
        ON
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST_SLIP.QUOT_ACQ_APL_SEQ
        INNER JOIN 
            H_SLIP_MNG T_SLIP_MNG
        ON
            T_QUOT_ACQ_REQUEST_SLIP.QUOT_ACQ_APL_DTL_NO = T_SLIP_MNG.SLIP_NO
        LEFT JOIN 
            H_QUOT_ACQ_REQUEST T_QUOT_ACQ_REQUEST
        ON
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
        LEFT JOIN 
            H_QUOT_REQUEST T_QUOT_REQUEST
        ON 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = T_QUOT_REQUEST.QUOT_ACQ_APL_NO
        AND T_QUOT_REQUEST.DELETE_FLG = '0'
        AND T_QUOT_REQUEST.NEW_FLG = '1'
        LEFT JOIN 
            H_PUR_APL T_PUR_APL
        ON 
            T_QUOT_REQUEST.QUOT_REQ_NO = T_PUR_APL.QUOT_REQ_NO
        AND T_PUR_APL.DELETE_FLG = '0'
        AND T_PUR_APL.NEW_FLG = '1'
    </sql>

    <!-- ダウンロード件数を取得 -->
    <select id="downloadCount" parameterType="fw.domain.slip.quot.quotstatus.quotreqstatuslist.quotstatuslist.QuotReqStatusAllSearchCondition" resultType="java.lang.Long">
        SELECT
            COUNT(1)
        FROM (
            SELECT T_QUOT_ACQ_APL.*
            <include refid="downloadFrom"/>
            <where> 
                <include refid="listKeyIdentityWhereCondition"/>
            </where>
            UNION ALL
            SELECT T_QUOT_ACQ_APL.*
            <include refid="downloadFromAll"/>
            <where> 
                <include refid="listKeyIdentityAllWhereCondition"/>
            </where>
        )
    </select>

    <!-- 見積依頼一覧（依頼元）のダウンロード -->
    <resultMap type="fw.domain.slip.quot.quotstatus.quotreqstatuslist.quotstatuslist.QuotReqStatusAllDownloadItem" id="QuotReqStatusDownloadItem_Map">
        <id column="QUOT_ACQ_APL_SEQ" property="quotReqStatusItem.quotAcqReqIdentify.quotAcqAplSeqNo" />
        <id column="PRE_SEQ" property="quotReqStatusItem.quotAcqReqIdentify.preSeq" />
        <id column="ACQ_REQ_LAST_UPD_DATE" property="quotReqStatusItem.quotAcqReqIdentify.lastUpdDate" />
        <id column="QUOT_ACQ_APL_NO" property="quotReqStatusItem.quotAcqReqIdentify.quotAcqAplNo.quotAcqAplNo" />
        <id column="URGENT_IND" property="quotReqStatusItem.urgentInd" />
        <id column="REQ_DATE" property="quotReqStatusItem.reqDate.dateOfymd" />
        <id column="QUOT_ACQ_APL_STATUS" property="quotReqStatusItem.quotAcqAplStatus" />
        <id column="TITLE_NAME" property="quotReqStatusItem.titleName" />
        <id column="SUP_CD" property="quotReqStatusItem.supCd" />
        <id column="SUP_ABBR_NAME" property="quotReqStatusItem.supName" />
        <id column="ITEM_CLASS_L_NAME" property="quotReqStatusItem.itemClassNameL" />
        <id column="ITEM_CLASS_M_NAME" property="quotReqStatusItem.itemClassNameM" />
        <id column="ITEM_CLASS_S_NAME" property="quotReqStatusItem.itemClassNameS" />
        <id column="DELIV_PLACE_CD" property="quotReqStatusItem.delivPlaceCd" />
        <id column="DELIV_PLACE_NAME" property="quotReqStatusItem.delivPlaceName" />
        <id column="QUOT_REQ_RESP_LIMIT_DATE" property="quotReqStatusItem.quotReqRespLimitDate.dateOfymd" />
        <id column="REQ_SECTION_CD" property="quotReqStatusItem.reqSectionCd" />
        <id column="REQ_SECTION_NAME" property="quotReqStatusItem.reqSectionName" />
        <id column="REQ_USER_ID" property="quotReqStatusItem.reqUserId" />
        <id column="REQ_USER_NAME" property="quotReqStatusItem.reqUserName" />
        <id column="QUOT_ACQ_APL_VERSION" property="quotReqStatusItem.quotAcqReqIdentify.historyNo.historyNo" />
        <id column="QUOT_REQ_STATUS" property="quotReqStatusItem.quotReqStatus" />
        <id column="QUOT_REQ_LAST_UPD_DATE" property="quotReqStatusItem.quotReqIdentify.lastUpdDate" />
        <id column="ITEM_CD" property="quotReqStatusItem.itemCd" />
        <id column="ITEM_NAME" property="quotReqStatusItem.itemName" />
        <id column="REQ_VOL" property="quotReqStatusItem.reqVol.vol" />
        <id column="UNIT_NAME" property="quotReqStatusItem.unitName" />
        <id column="CURRENCY_CD" property="quotReqStatusItem.currencyCd" />
        <id column="REQ_DELIV_DATE" property="quotReqStatusItem.reqDelivDate.dateOfymd" />
        <id column="UNIT_PRICE" property="quotReqStatusItem.unitPrice.amount" />
        <id column="REQ_AMOUNT" property="quotReqStatusItem.reqAmount.amount" />
        <id column="QUOT_REQ_SEQ" property="quotReqStatusItem.quotReqIdentify.quotReqSeqNo.seqNumber" />
        <id column="PUR_APL_SEQ" property="quotReqStatusItem.purAplSeq" />
        <id column="SLIP_STATUS" property="quotReqStatusItem.slipStatus" />
        <id column="QUOT_REQ_NO" property="quotReqStatusItem.quotReqIdentify.quotReqNo.quotReqNo"/>
    </resultMap>
    <select id="download"  parameterType="fw.domain.slip.quot.quotstatus.quotreqstatuslist.quotstatuslist.QuotReqStatusAllSearchCondition"  resultMap="QuotReqStatusDownloadItem_Map">
        <include refid="downloadHeader"/>
        SELECT * FROM (
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ ,
            T_QUOT_ACQ_APL.PRE_SEQ,
            T_QUOT_ACQ_APL.LAST_UPD_DATE AS "ACQ_REQ_LAST_UPD_DATE",
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO,
            T_QUOT_ACQ_APL.URGENT_IND,
            T_QUOT_ACQ_APL.REQ_DATE,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS,
            T_QUOT_ACQ_APL.TITLE_NAME,
            T_QUOT_ACQ_APL.SUP_CD,
            T_QUOT_ACQ_APL.SUP_ABBR_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME,
            T_QUOT_ACQ_APL.DELIV_PLACE_CD,
            T_QUOT_ACQ_APL.DELIV_PLACE_NAME,
            T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE,
            T_QUOT_ACQ_APL.REQ_SECTION_CD,
            T_QUOT_ACQ_APL.REQ_SECTION_NAME,
            T_QUOT_ACQ_APL.REQ_USER_ID,
            T_QUOT_ACQ_APL.REQ_USER_NAME,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_VERSION ,
            T_QUOT_REQUEST.QUOT_REQ_STATUS,
            T_QUOT_REQUEST.QUOT_REQ_SEQ,
            T_QUOT_REQUEST.LAST_UPD_DATE AS "QUOT_REQ_LAST_UPD_DATE",
            T_QUOT_ACQ_REQUEST.ITEM_CD,
            T_QUOT_ACQ_REQUEST.ITEM_NAME,
            T_QUOT_ACQ_REQUEST.REQ_VOL,
            T_QUOT_ACQ_REQUEST.UNIT_CD,
            T_QUOT_ACQ_REQUEST.UNIT_NAME,
            T_QUOT_ACQ_REQUEST.CURRENCY_CD,
            T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE,
            T_QUOT_ACQ_REQUEST.UNIT_PRICE,
            T_QUOT_ACQ_REQUEST.REQ_AMOUNT,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQLDomainAliasNonBinary("T_QUOT_ACQ_APL","item.quotAcqAplExtItem")},
            T_QUOT_REQUEST.QUOT_REQ_NO,
            T_PUR_APL.PUR_APL_SEQ,
            T_SLIP_MNG.SLIP_STATUS
        <include refid="downloadFrom"/>
        <where> 
            <include refid="listKeyIdentityWhereCondition"/>
        </where>
        UNION ALL
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ ,
            T_QUOT_ACQ_APL.PRE_SEQ,
            T_QUOT_ACQ_APL.LAST_UPD_DATE AS "ACQ_REQ_LAST_UPD_DATE",
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO,
            T_QUOT_ACQ_APL.URGENT_IND,
            T_QUOT_ACQ_APL.REQ_DATE,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS,
            T_QUOT_ACQ_APL.TITLE_NAME,
            T_QUOT_ACQ_APL.SUP_CD,
            T_QUOT_ACQ_APL.SUP_ABBR_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME,
            T_QUOT_ACQ_APL.DELIV_PLACE_CD,
            T_QUOT_ACQ_APL.DELIV_PLACE_NAME,
            T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE,
            T_QUOT_ACQ_APL.REQ_SECTION_CD,
            T_QUOT_ACQ_APL.REQ_SECTION_NAME,
            T_QUOT_ACQ_APL.REQ_USER_ID,
            T_QUOT_ACQ_APL.REQ_USER_NAME,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_VERSION ,
            T_QUOT_REQUEST.QUOT_REQ_STATUS,
            T_QUOT_REQUEST.QUOT_REQ_SEQ,
            T_QUOT_REQUEST.LAST_UPD_DATE AS "QUOT_REQ_LAST_UPD_DATE",
            T_QUOT_ACQ_REQUEST.ITEM_CD,
            T_QUOT_ACQ_REQUEST.ITEM_NAME,
            T_QUOT_ACQ_REQUEST.REQ_VOL,
            T_QUOT_ACQ_REQUEST.UNIT_CD,
            T_QUOT_ACQ_REQUEST.UNIT_NAME,
            T_QUOT_ACQ_REQUEST.CURRENCY_CD,
            T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE,
            T_QUOT_ACQ_REQUEST.UNIT_PRICE,
            T_QUOT_ACQ_REQUEST.REQ_AMOUNT,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQLDomainAliasNonBinary("T_QUOT_ACQ_APL","item.quotAcqAplExtItem")},
            T_QUOT_REQUEST.QUOT_REQ_NO,
            T_PUR_APL.PUR_APL_SEQ,
            T_SLIP_MNG.SLIP_STATUS
        <include refid="downloadFromAll"/>
        <where> 
            <include refid="listKeyIdentityAllWhereCondition"/>
        </where>
        ) T_QUOT_ACQ_APL
        ORDER BY ${searchCondition.columnOrder.columnOrder()}
        <include refid="downloadFooter"/>
    </select>

    <resultMap type="fw.domain.slip.quot.quotacqreq.QuotAcqReq" id="QuotAcqReqAplItem_Map">
        <id column="QUOT_ACQ_APL_NO" property="quotAcqReqIdentify.quotAcqAplNo.quotAcqAplNo" />
        <id column="URGENT_IND" property="urgentInd.urgentInd" />
        <id column="QUOT_ACQ_APL_STATUS" property="quotAcqAplStatus.quotAcqAplStatus" />
        <id column="BUYER_BACK_USER_COMMENTS" property="purReturn.backReason.backReason.comment" />
        <id column="REQ_DATE" property="quotAcqReqDate.reqDate.reqDate.dateOfymd" />
        <id column="TITLE_NAME" property="titleName.titleName" />

        <id column="INPUT_SECTION_CD" property="inputUser.inputUser.section.sectionCd" />
        <id column="INPUT_SECTION_NAME" property="inputUser.inputUser.section.sectionName" />
        <id column="INPUT_USER_ID" property="inputUser.inputUser.userID" />
        <id column="INPUT_USER_NAME" property="inputUser.inputUser.userName" />
        <id column="INPUT_COMPANY_CD" property="inputUser.inputUser.section.company.companyCd" />

        <id column="REQ_SECTION_CD" property="reqUser.reqUser.section.sectionCd" />
        <id column="REQ_SECTION_NAME" property="reqUser.reqUser.section.sectionName" />
        <id column="REQ_USER_EXTENSION_NO" property="reqUser.reqUser.extNo.extensionNo" />
        <id column="REQ_USER_TEL_NO" property="reqUser.reqUser.externalNo.externalNo" />
        <id column="REQ_USER_ID" property="reqUser.reqUser.userID" />
        <id column="REQ_USER_NAME" property="reqUser.reqUser.userName" />
        <id column="REQ_COMPANY_CD" property="reqUser.reqUser.section.company.companyCd" />

        <id column="DELIV_PLACE_CD" property="delivPlace.delivPlaceCd" />
        <id column="DELIV_PLACE_NAME" property="delivPlace.delivPlaceName" />
        <id column="SUP_CD" property="hopeSupplier.hopeSupplier.supCd" />
        <id column="SUP_ABBR_NAME" property="hopeSupplier.hopeSupplier.supplierName.supplierAbbrName" />
        <id column="SUP_COMPANY_CD" property="hopeSupplier.hopeSupplier.supCompanyCd" />

        <id column="ITEM_CLASS_L_NAME" property="itemKind.itemClassLName" />
        <id column="ITEM_CLASS_M_NAME" property="itemKind.itemClassMName" />
        <id column="ITEM_CLASS_S_NAME" property="itemKind.itemClassSName" />

        <id column="QUOT_REQ_RESP_LIMIT_DATE" property="quotMarkLimit.dateOfymd" />
        <id column="A_ATTACH_FILE_SEQ" property="rangeByAttachFile1.attachFile.seqNo" />
        <id column="A_ATTACH_FILE_NAME" property="rangeByAttachFile1.attachFile.fileName" />
        <id column="A_ATTACH_SCOPE" property="rangeByAttachFile1.attachRange.attachRange" />
        <id column="B_ATTACH_FILE_SEQ" property="rangeByAttachFile2.attachFile.seqNo" />
        <id column="B_ATTACH_FILE_NAME" property="rangeByAttachFile2.attachFile.fileName" />
        <id column="B_ATTACH_SCOPE" property="rangeByAttachFile2.attachRange.attachRange" />

        <id column="PRICE_REQ_FLG" property="priceRegisterFlg.priceRegisterFlg" />
        <id column="FOR_BOSS_COMMENT" property="forAppComment.forAppComment.comment" />
        <id column="FOR_BUYER_COMMENT" property="forBuyerComment.forBuyerComment.comment" />
        <id column="FOR_SUPPRIER_COMMENT" property="forSupplierComment.forSupplierComment.comment" />

        <id column="BUYER_SECTION_CD" property="itemKind.buyUser.buyUser.section.sectionCd" />
        <id column="BUYER_SECTION_NAME" property="itemKind.buyUser.buyUser.section.sectionName" />
        <id column="BUYER_USER_ID" property="itemKind.buyUser.buyUser.userID" />
        <id column="BUYER_USER_NAME" property="itemKind.buyUser.buyUser.userName" />
        <id column="BUYER_COMPANY_CD" property="itemKind.buyUser.buyUser.section.company.companyCd" />

        <id column="APP_ROUTE_NO" property="approute.appRouteNo" />
        <id column="APP_ROUTE_NAME" property="approute.appRouteName" />
        
        <id column="EXT_TXT_1" property="detailExtItem.extendTxt.extendTxt1"/>
        <id column="EXT_TXT_2" property="detailExtItem.extendTxt.extendTxt2"/>
        <id column="EXT_TXT_3" property="detailExtItem.extendTxt.extendTxt3"/>
        <id column="EXT_TXT_4" property="detailExtItem.extendTxt.extendTxt4"/>
        <id column="EXT_TXT_5" property="detailExtItem.extendTxt.extendTxt5"/>
        <id column="EXT_TXT_6" property="detailExtItem.extendTxt.extendTxt6"/>
        <id column="EXT_TXT_7" property="detailExtItem.extendTxt.extendTxt7"/>
        <id column="EXT_TXT_8" property="detailExtItem.extendTxt.extendTxt8"/>
        <id column="EXT_TXT_9" property="detailExtItem.extendTxt.extendTxt9"/>
        <id column="EXT_TXT_10" property="detailExtItem.extendTxt.extendTxt10"/>
        <id column="EXT_AREA_1" property="detailExtItem.extendArea.extendArea1"/>
        <id column="EXT_AREA_2" property="detailExtItem.extendArea.extendArea2"/>
        <id column="EXT_AREA_3" property="detailExtItem.extendArea.extendArea3"/>
        <id column="EXT_AREA_4" property="detailExtItem.extendArea.extendArea4"/>
        <id column="EXT_AREA_5" property="detailExtItem.extendArea.extendArea5"/>
        <id column="EXT_DATE_1" property="detailExtItem.extendDate.extendDate1.dateOfymd"/>
        <id column="EXT_DATE_2" property="detailExtItem.extendDate.extendDate2.dateOfymd"/>
        <id column="EXT_DATE_3" property="detailExtItem.extendDate.extendDate3.dateOfymd"/>
        <id column="EXT_DATE_4" property="detailExtItem.extendDate.extendDate4.dateOfymd"/>
        <id column="EXT_DATE_5" property="detailExtItem.extendDate.extendDate5.dateOfymd"/>
        <id column="EXT_INT_1" property="detailExtItem.extendInt.extendInt1.value"/>
        <id column="EXT_INT_2" property="detailExtItem.extendInt.extendInt2.value"/>
        <id column="EXT_INT_3" property="detailExtItem.extendInt.extendInt3.value"/>
        <id column="EXT_INT_4" property="detailExtItem.extendInt.extendInt4.value"/>
        <id column="EXT_INT_5" property="detailExtItem.extendInt.extendInt5.value"/>
        <id column="EXT_INT_6" property="detailExtItem.extendInt.extendInt6.value"/>
        <id column="EXT_INT_7" property="detailExtItem.extendInt.extendInt7.value"/>
        <id column="EXT_INT_8" property="detailExtItem.extendInt.extendInt8.value"/>
        <id column="EXT_INT_9" property="detailExtItem.extendInt.extendInt9.value"/>
        <id column="EXT_INT_10" property="detailExtItem.extendInt.extendInt10.value"/>
        <id column="EXT_DEC_1" property="detailExtItem.extendDec.extendDec1.value"/>
        <id column="EXT_DEC_2" property="detailExtItem.extendDec.extendDec2.value"/>
        <id column="EXT_DEC_3" property="detailExtItem.extendDec.extendDec3.value"/>
        <id column="EXT_DEC_4" property="detailExtItem.extendDec.extendDec4.value"/>
        <id column="EXT_DEC_5" property="detailExtItem.extendDec.extendDec5.value"/>
        <id column="EXT_SEL_1" property="detailExtItem.extendSel.extendSel1"/>
        <id column="EXT_SEL_2" property="detailExtItem.extendSel.extendSel2"/>
        <id column="EXT_SEL_3" property="detailExtItem.extendSel.extendSel3"/>
        <id column="EXT_SEL_4" property="detailExtItem.extendSel.extendSel4"/>
        <id column="EXT_SEL_5" property="detailExtItem.extendSel.extendSel5"/>
        <id column="EXT_SEL_6" property="detailExtItem.extendSel.extendSel6"/>
        <id column="EXT_SEL_7" property="detailExtItem.extendSel.extendSel7"/>
        <id column="EXT_SEL_8" property="detailExtItem.extendSel.extendSel8"/>
        <id column="EXT_SEL_9" property="detailExtItem.extendSel.extendSel9"/>
        <id column="EXT_SEL_10" property="detailExtItem.extendSel.extendSel10"/>
        <id column="EXT_CHK_1" property="detailExtItem.extendChk.extendChk1"/>
        <id column="EXT_CHK_2" property="detailExtItem.extendChk.extendChk2"/>
        <id column="EXT_CHK_3" property="detailExtItem.extendChk.extendChk3"/>
        <id column="EXT_CHK_4" property="detailExtItem.extendChk.extendChk4"/>
        <id column="EXT_CHK_5" property="detailExtItem.extendChk.extendChk5"/>
        <id column="EXT_FILE_1" property="detailExtItem.extendFile.extendFile1.fileName"/>
        <id column="EXT_FILE_2" property="detailExtItem.extendFile.extendFile2.fileName"/>
        <id column="EXT_FILE_3" property="detailExtItem.extendFile.extendFile3.fileName"/>
        <id column="EXT_FILE_BINARY_1" property="detailExtItem.extendFile.extendFile1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="detailExtItem.extendFile.extendFile2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="detailExtItem.extendFile.extendFile3.binary"/>
        <id column="EXT_MST_1" property="detailExtItem.extendMst.extendMst1.mstKey"/>
        <id column="EXT_MST_2" property="detailExtItem.extendMst.extendMst2.mstKey"/>
        <id column="EXT_MST_3" property="detailExtItem.extendMst.extendMst3.mstKey"/>
        <id column="EXT_MST_4" property="detailExtItem.extendMst.extendMst4.mstKey"/>
        <id column="EXT_MST_5" property="detailExtItem.extendMst.extendMst5.mstKey"/>
        <id column="EXT_MST_6" property="detailExtItem.extendMst.extendMst6.mstKey"/>
        <id column="EXT_MST_7" property="detailExtItem.extendMst.extendMst7.mstKey"/>
        <id column="EXT_MST_8" property="detailExtItem.extendMst.extendMst8.mstKey"/>
        <id column="EXT_MST_NAME_1" property="detailExtItem.extendMst.extendMst1.mstName"/>
        <id column="EXT_MST_NAME_2" property="detailExtItem.extendMst.extendMst2.mstName"/>
        <id column="EXT_MST_NAME_3" property="detailExtItem.extendMst.extendMst3.mstName"/>
        <id column="EXT_MST_NAME_4" property="detailExtItem.extendMst.extendMst4.mstName"/>
        <id column="EXT_MST_NAME_5" property="detailExtItem.extendMst.extendMst5.mstName"/>
        <id column="EXT_MST_NAME_6" property="detailExtItem.extendMst.extendMst6.mstName"/>
        <id column="EXT_MST_NAME_7" property="detailExtItem.extendMst.extendMst7.mstName"/>
        <id column="EXT_MST_NAME_8" property="detailExtItem.extendMst.extendMst8.mstName"/>
    </resultMap>

    <select id="listDetail" parameterType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify" 
        resultMap="QuotAcqReqAplItem_Map">
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO ,
            T_QUOT_ACQ_APL.URGENT_IND, 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS,
            T_QUOT_ACQ_APL.REQ_DATE, 
            T_QUOT_ACQ_APL.TITLE_NAME, 
            T_QUOT_ACQ_APL.INPUT_SECTION_CD, 
            T_QUOT_ACQ_APL.INPUT_SECTION_NAME, 
            T_QUOT_ACQ_APL.INPUT_USER_ID,  
            T_QUOT_ACQ_APL.INPUT_USER_NAME,
            T_QUOT_ACQ_APL.INPUT_COMPANY_CD ,
            T_QUOT_ACQ_APL.REQ_SECTION_CD, 
            T_QUOT_ACQ_APL.REQ_SECTION_NAME, 
            T_QUOT_ACQ_APL.REQ_USER_EXTENSION_NO, 
            T_QUOT_ACQ_APL.REQ_USER_TEL_NO,
            T_QUOT_ACQ_APL.REQ_USER_ID,
            T_QUOT_ACQ_APL.REQ_USER_NAME, 
            T_QUOT_ACQ_APL.REQ_COMPANY_CD ,
            T_QUOT_ACQ_APL.DELIV_PLACE_CD, 
            T_QUOT_ACQ_APL.DELIV_PLACE_NAME, 
            T_QUOT_ACQ_APL.SUP_CD, 
            T_QUOT_ACQ_APL.SUP_ABBR_NAME, 
            T_QUOT_ACQ_APL.SUP_COMPANY_CD ,
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME, 
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME, 
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME, 
            T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE, 
            T_ATTACH_MNG_A.ATTACH_FILE_SEQ as "A_ATTACH_FILE_SEQ", 
            T_ATTACH_MNG_A.ATTACH_FILE_NAME as "A_ATTACH_FILE_NAME",
            T_ATTACH_MNG_A.ATTACH_SCOPE as "A_ATTACH_SCOPE", 
            T_ATTACH_MNG_B.ATTACH_FILE_SEQ as "B_ATTACH_FILE_SEQ", 
            T_ATTACH_MNG_B.ATTACH_FILE_NAME as "B_ATTACH_FILE_NAME", 
            T_ATTACH_MNG_B.ATTACH_SCOPE as "B_ATTACH_SCOPE", 
            T_QUOT_ACQ_APL.PRICE_REQ_FLG,  
            T_QUOT_ACQ_APL.FOR_BOSS_COMMENT, 
            T_QUOT_ACQ_APL.FOR_BUYER_COMMENT, 
            T_QUOT_ACQ_APL.FOR_SUPPRIER_COMMENT, 
            T_QUOT_ACQ_APL.BUYER_SECTION_CD, 
            T_QUOT_ACQ_APL.BUYER_SECTION_NAME, 
            T_QUOT_ACQ_APL.BUYER_USER_ID, 
            T_QUOT_ACQ_APL.BUYER_USER_NAME,
            T_QUOT_ACQ_APL.BUYER_COMPANY_CD ,
            T_QUOT_ACQ_APL.APP_ROUTE_NO, 
            T_QUOT_ACQ_APL.APP_ROUTE_NAME,
            T_QUOT_ACQ_APL.BUYER_BACK_USER_COMMENTS,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_APL")}
        FROM T_QUOT_ACQ_APL 
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_A
            ON T_QUOT_ACQ_APL.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ 
            AND T_ATTACH_MNG_A.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_B
            ON T_QUOT_ACQ_APL.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ 
            AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        <where>
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeqNo}
            AND T_QUOT_ACQ_APL.NEW_FLG='1'
            AND T_QUOT_ACQ_APL.DELETE_FLG='0'
        </where>
        UNION ALL
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO ,
            T_QUOT_ACQ_APL.URGENT_IND, 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS,
            T_QUOT_ACQ_APL.REQ_DATE, 
            T_QUOT_ACQ_APL.TITLE_NAME, 
            T_QUOT_ACQ_APL.INPUT_SECTION_CD, 
            T_QUOT_ACQ_APL.INPUT_SECTION_NAME, 
            T_QUOT_ACQ_APL.INPUT_USER_ID,  
            T_QUOT_ACQ_APL.INPUT_USER_NAME,
            T_QUOT_ACQ_APL.INPUT_COMPANY_CD ,
            T_QUOT_ACQ_APL.REQ_SECTION_CD, 
            T_QUOT_ACQ_APL.REQ_SECTION_NAME, 
            T_QUOT_ACQ_APL.REQ_USER_EXTENSION_NO, 
            T_QUOT_ACQ_APL.REQ_USER_TEL_NO,
            T_QUOT_ACQ_APL.REQ_USER_ID,
            T_QUOT_ACQ_APL.REQ_USER_NAME, 
            T_QUOT_ACQ_APL.REQ_COMPANY_CD ,
            T_QUOT_ACQ_APL.DELIV_PLACE_CD, 
            T_QUOT_ACQ_APL.DELIV_PLACE_NAME, 
            T_QUOT_ACQ_APL.SUP_CD, 
            T_QUOT_ACQ_APL.SUP_ABBR_NAME, 
            T_QUOT_ACQ_APL.SUP_COMPANY_CD ,
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME, 
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME, 
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME, 
            T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE, 
            T_ATTACH_MNG_A.ATTACH_FILE_SEQ as "A_ATTACH_FILE_SEQ", 
            T_ATTACH_MNG_A.ATTACH_FILE_NAME as "A_ATTACH_FILE_NAME",
            T_ATTACH_MNG_A.ATTACH_SCOPE as "A_ATTACH_SCOPE", 
            T_ATTACH_MNG_B.ATTACH_FILE_SEQ as "B_ATTACH_FILE_SEQ", 
            T_ATTACH_MNG_B.ATTACH_FILE_NAME as "B_ATTACH_FILE_NAME", 
            T_ATTACH_MNG_B.ATTACH_SCOPE as "B_ATTACH_SCOPE", 
            T_QUOT_ACQ_APL.PRICE_REQ_FLG,  
            T_QUOT_ACQ_APL.FOR_BOSS_COMMENT, 
            T_QUOT_ACQ_APL.FOR_BUYER_COMMENT, 
            T_QUOT_ACQ_APL.FOR_SUPPRIER_COMMENT, 
            T_QUOT_ACQ_APL.BUYER_SECTION_CD, 
            T_QUOT_ACQ_APL.BUYER_SECTION_NAME, 
            T_QUOT_ACQ_APL.BUYER_USER_ID, 
            T_QUOT_ACQ_APL.BUYER_USER_NAME,
            T_QUOT_ACQ_APL.BUYER_COMPANY_CD ,
            T_QUOT_ACQ_APL.APP_ROUTE_NO, 
            T_QUOT_ACQ_APL.APP_ROUTE_NAME,
            T_QUOT_ACQ_APL.BUYER_BACK_USER_COMMENTS,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_APL")}
        FROM H_QUOT_ACQ_APL T_QUOT_ACQ_APL 
        LEFT JOIN H_ATTACH_MNG T_ATTACH_MNG_A
            ON T_QUOT_ACQ_APL.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ 
            AND T_ATTACH_MNG_A.DELETE_FLG = '0'
        LEFT JOIN H_ATTACH_MNG T_ATTACH_MNG_B
            ON T_QUOT_ACQ_APL.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ 
            AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        <where>
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeqNo}
            AND T_QUOT_ACQ_APL.NEW_FLG='1'
            AND T_QUOT_ACQ_APL.DELETE_FLG='0'
        </where>
    </select>

    <resultMap type="fw.domain.slip.quot.quotacqreq.QuotAcqReqItem" id="QuotAcqReqDetail_Map">
        <id column="QUOT_ACQ_APL_DTL_NO" property="quotAcqAplItemNo.quotAcqAplItemNo" />
        <id column="ITEM_CD" property="productRegistration.item.itemCd" />
        <id column="ITEM_NAME" property="productRegistration.item.itemName" />
        <id column="KATASHIKI" property="productRegistration.item.katashiki" />
        <id column="MANUFACT_CD" property="productRegistration.item.manufact.manufactCd" />
        <id column="MANUFACT_NAME" property="productRegistration.item.manufact.manufactName" />
        <id column="REQ_VOL" property="hopeVol.hopeVol.vol" />
        <id column="UNIT_NAME" property="productRegistration.item.unit.unitName" />
        <id column="CURRENCY_CD" property="currency.currencyCd" />
        <id column="CURRENCY_NAME" property="currency.currencyName" />
        <id column="UNIT_PRICE" property="hopePrice.hopePrice.amount" />
        <id column="REQ_AMOUNT" property="hopeAmount.hopeAmount.amount" />
        <id column="CURRENCY_MARK" property="currency.currencyMark" />
        <id column="REQ_DELIV_DATE" property="hopeDlvEst.hopeDlvEst.dateOfymd" />
        <id column="ATTACH_FILE_SEQ" property="rangeByAttachFile.attachFile.seqNo" />
        <id column="ATTACH_FILE_NAME" property="rangeByAttachFile.attachFile.fileName" />
        <id column="ATTACH_SCOPE" property="rangeByAttachFile.attachRange.attachRange" />
        <id column="EXT_TXT_1" property="detailExtItem.extendTxt.extendTxt1" />
        <id column="EXT_TXT_2" property="detailExtItem.extendTxt.extendTxt2" />
        <id column="EXT_TXT_3" property="detailExtItem.extendTxt.extendTxt3" />
        <id column="EXT_TXT_4" property="detailExtItem.extendTxt.extendTxt4" />
        <id column="EXT_TXT_5" property="detailExtItem.extendTxt.extendTxt5" />
        <id column="EXT_TXT_6" property="detailExtItem.extendTxt.extendTxt6" />
        <id column="EXT_TXT_7" property="detailExtItem.extendTxt.extendTxt7" />
        <id column="EXT_TXT_8" property="detailExtItem.extendTxt.extendTxt8" />
        <id column="EXT_TXT_9" property="detailExtItem.extendTxt.extendTxt9" />
        <id column="EXT_TXT_10" property="detailExtItem.extendTxt.extendTxt10" />
        <id column="EXT_AREA_1" property="detailExtItem.extendArea.extendArea1" />
        <id column="EXT_AREA_2" property="detailExtItem.extendArea.extendArea2" />
        <id column="EXT_AREA_3" property="detailExtItem.extendArea.extendArea3" />
        <id column="EXT_AREA_4" property="detailExtItem.extendArea.extendArea4" />
        <id column="EXT_AREA_5" property="detailExtItem.extendArea.extendArea5" />
        <id column="EXT_DATE_1" property="detailExtItem.extendDate.extendDate1.dateOfymd" />
        <id column="EXT_DATE_2" property="detailExtItem.extendDate.extendDate2.dateOfymd" />
        <id column="EXT_DATE_3" property="detailExtItem.extendDate.extendDate3.dateOfymd" />
        <id column="EXT_DATE_4" property="detailExtItem.extendDate.extendDate4.dateOfymd" />
        <id column="EXT_DATE_5" property="detailExtItem.extendDate.extendDate5.dateOfymd" />
        <id column="EXT_INT_1" property="detailExtItem.extendInt.extendInt1.value" />
        <id column="EXT_INT_2" property="detailExtItem.extendInt.extendInt2.value" />
        <id column="EXT_INT_3" property="detailExtItem.extendInt.extendInt3.value" />
        <id column="EXT_INT_4" property="detailExtItem.extendInt.extendInt4.value" />
        <id column="EXT_INT_5" property="detailExtItem.extendInt.extendInt5.value" />
        <id column="EXT_INT_6" property="detailExtItem.extendInt.extendInt6.value" />
        <id column="EXT_INT_7" property="detailExtItem.extendInt.extendInt7.value" />
        <id column="EXT_INT_8" property="detailExtItem.extendInt.extendInt8.value" />
        <id column="EXT_INT_9" property="detailExtItem.extendInt.extendInt9.value" />
        <id column="EXT_INT_10" property="detailExtItem.extendInt.extendInt10.value" />
        <id column="EXT_DEC_1" property="detailExtItem.extendDec.extendDec1.value" />
        <id column="EXT_DEC_2" property="detailExtItem.extendDec.extendDec2.value" />
        <id column="EXT_DEC_3" property="detailExtItem.extendDec.extendDec3.value" />
        <id column="EXT_DEC_4" property="detailExtItem.extendDec.extendDec4.value" />
        <id column="EXT_DEC_5" property="detailExtItem.extendDec.extendDec5.value" />
        <id column="EXT_SEL_1" property="detailExtItem.extendSel.extendSel1" />
        <id column="EXT_SEL_2" property="detailExtItem.extendSel.extendSel2" />
        <id column="EXT_SEL_3" property="detailExtItem.extendSel.extendSel3" />
        <id column="EXT_SEL_4" property="detailExtItem.extendSel.extendSel4" />
        <id column="EXT_SEL_5" property="detailExtItem.extendSel.extendSel5" />
        <id column="EXT_SEL_6" property="detailExtItem.extendSel.extendSel6" />
        <id column="EXT_SEL_7" property="detailExtItem.extendSel.extendSel7" />
        <id column="EXT_SEL_8" property="detailExtItem.extendSel.extendSel8" />
        <id column="EXT_SEL_9" property="detailExtItem.extendSel.extendSel9" />
        <id column="EXT_SEL_10" property="detailExtItem.extendSel.extendSel10" />
        <id column="EXT_CHK_1" property="detailExtItem.extendChk.extendChk1" />
        <id column="EXT_CHK_2" property="detailExtItem.extendChk.extendChk2" />
        <id column="EXT_CHK_3" property="detailExtItem.extendChk.extendChk3" />
        <id column="EXT_CHK_4" property="detailExtItem.extendChk.extendChk4" />
        <id column="EXT_CHK_5" property="detailExtItem.extendChk.extendChk5" />
        <id column="EXT_FILE_1" property="detailExtItem.extendFile.extendFile1.fileName" />
        <id column="EXT_FILE_2" property="detailExtItem.extendFile.extendFile2.fileName" />
        <id column="EXT_FILE_3" property="detailExtItem.extendFile.extendFile3.fileName" />
        <id column="EXT_FILE_BINARY_1" property="detailExtItem.extendFile.extendFile1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="detailExtItem.extendFile.extendFile2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="detailExtItem.extendFile.extendFile3.binary"/>
        <id column="EXT_MST_1" property="detailExtItem.extendMst.extendMst1.mstKey" />
        <id column="EXT_MST_2" property="detailExtItem.extendMst.extendMst2.mstKey" />
        <id column="EXT_MST_3" property="detailExtItem.extendMst.extendMst3.mstKey" />
        <id column="EXT_MST_4" property="detailExtItem.extendMst.extendMst4.mstKey" />
        <id column="EXT_MST_5" property="detailExtItem.extendMst.extendMst5.mstKey" />
        <id column="EXT_MST_6" property="detailExtItem.extendMst.extendMst6.mstKey" />
        <id column="EXT_MST_7" property="detailExtItem.extendMst.extendMst7.mstKey" />
        <id column="EXT_MST_8" property="detailExtItem.extendMst.extendMst8.mstKey" />    
        <id column="EXT_MST_NAME_1" property="detailExtItem.extendMst.extendMst1.mstName"/>
        <id column="EXT_MST_NAME_2" property="detailExtItem.extendMst.extendMst2.mstName"/>
        <id column="EXT_MST_NAME_3" property="detailExtItem.extendMst.extendMst3.mstName"/>
        <id column="EXT_MST_NAME_4" property="detailExtItem.extendMst.extendMst4.mstName"/>
        <id column="EXT_MST_NAME_5" property="detailExtItem.extendMst.extendMst5.mstName"/>
        <id column="EXT_MST_NAME_6" property="detailExtItem.extendMst.extendMst6.mstName"/>
        <id column="EXT_MST_NAME_7" property="detailExtItem.extendMst.extendMst7.mstName"/>
        <id column="EXT_MST_NAME_8" property="detailExtItem.extendMst.extendMst8.mstName"/>
    </resultMap>
    <select id="listDetailList" parameterType="fw.domain.slip.quot.quotacqreq.QuotAcqReqIdentify" 
        resultMap="QuotAcqReqDetail_Map">
        SELECT
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO,
            T_QUOT_ACQ_REQUEST.ITEM_CD,
            T_QUOT_ACQ_REQUEST.ITEM_NAME,
            T_QUOT_ACQ_REQUEST.KATASHIKI,
            T_QUOT_ACQ_REQUEST.MANUFACT_CD,
            T_QUOT_ACQ_REQUEST.MANUFACT_NAME,
            T_QUOT_ACQ_REQUEST.REQ_VOL,
            T_QUOT_ACQ_REQUEST.UNIT_NAME,
            T_QUOT_ACQ_REQUEST.CURRENCY_CD,
            T_QUOT_ACQ_REQUEST.UNIT_PRICE,
            T_QUOT_ACQ_REQUEST.REQ_AMOUNT, 
            T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE,
            T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ,
            T_ATTACH_MNG.ATTACH_FILE_NAME,
            T_ATTACH_MNG.ATTACH_SCOPE,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_REQUEST")}
        FROM T_QUOT_ACQ_REQUEST 
        LEFT JOIN T_ATTACH_MNG
            ON T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ = T_ATTACH_MNG.ATTACH_FILE_SEQ 
            AND T_ATTACH_MNG.DELETE_FLG = '0'
        <where>
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeqNo}
            AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
        </where> 
        UNION ALL
        SELECT
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO,
            T_QUOT_ACQ_REQUEST.ITEM_CD,
            T_QUOT_ACQ_REQUEST.ITEM_NAME,
            T_QUOT_ACQ_REQUEST.KATASHIKI,
            T_QUOT_ACQ_REQUEST.MANUFACT_CD,
            T_QUOT_ACQ_REQUEST.MANUFACT_NAME,
            T_QUOT_ACQ_REQUEST.REQ_VOL,
            T_QUOT_ACQ_REQUEST.UNIT_NAME,
            T_QUOT_ACQ_REQUEST.CURRENCY_CD,
            T_QUOT_ACQ_REQUEST.UNIT_PRICE,
            T_QUOT_ACQ_REQUEST.REQ_AMOUNT, 
            T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE,
            T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ,
            T_ATTACH_MNG.ATTACH_FILE_NAME,
            T_ATTACH_MNG.ATTACH_SCOPE,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_REQUEST")}
        FROM H_QUOT_ACQ_REQUEST T_QUOT_ACQ_REQUEST 
        LEFT JOIN H_ATTACH_MNG T_ATTACH_MNG
            ON T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ = T_ATTACH_MNG.ATTACH_FILE_SEQ 
            AND T_ATTACH_MNG.DELETE_FLG = '0'
        <where>
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeqNo}
            AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
        </where> 
        ORDER BY QUOT_ACQ_APL_DTL_NO 
    </select>

    <!-- 見積取得申請情報取得SQL -->
    <resultMap type="fw.domain.slip.quot.quotstatus.quotreqstatuslist.QuoStatus" id="QuotAcqApl_Map">
        <id column="QUOT_ACQ_APL_NO" property="quotAcqReqSummary.quotAcqAplNo"/>
        <id column="URGENT_IND" property="quotAcqReqSummary.urgentInd"/>
        <id column="QUOT_ACQ_APL_STATUS" property="quotAcqReqSummary.quotAcqReqStatus"/> 
        <id column="REQ_COMPANY_CD" property="quotAcqReqSummary.reqUser.reqUser.section.company.companyCd"/>
        <id column="REQ_SECTION_CD" property="quotAcqReqSummary.reqUser.reqUser.section.sectionCd"/>
        <id column="REQ_SECTION_NAME" property="quotAcqReqSummary.reqUser.reqUser.section.sectionName"/>
        <id column="REQ_USER_EXTENSION_NO" property="quotAcqReqSummary.reqUser.reqUser.extNo.extensionNo"/>
        <id column="REQ_USER_TEL_NO" property="quotAcqReqSummary.reqUser.reqUser.externalNo.externalNo"/>
        <id column="MAIL_ADDR" property="quotAcqReqSummary.reqUser.reqUser.mailAddr.mail"/>
        <id column="REQ_USER_ID" property="quotAcqReqSummary.reqUser.reqUser.userID"/>
        <id column="REQ_USER_NAME" property="quotAcqReqSummary.reqUser.reqUser.userName"/>
        <id column="REQ_DATE" property="quotAcqReqSummary.reqDate.dateOfymd"/>
        <id column="QUOT_REQ_RESP_LIMIT_DATE" property="quotAcqReqSummary.respLimitDate.dateOfymd"/>
        <id column="DELIV_PLACE_CD" property="quotAcqReqSummary.delivPlace.delivPlaceCd"/>
        <id column="DELIV_PLACE_NAME" property="quotAcqReqSummary.delivPlace.delivPlaceName"/>
        <id column="ITEM_CLASS_L_NAME" property="quotAcqReqInfo.itemKind.itemClassLName"/>
        <id column="ITEM_CLASS_M_NAME" property="quotAcqReqInfo.itemKind.itemClassMName"/>
        <id column="ITEM_CLASS_S_NAME" property="quotAcqReqInfo.itemKind.itemClassSName"/>
        <id column="TITLE_NAME" property="quotAcqReqInfo.titleName"/>
        <id column="SUP_COMPANY_CD" property="quotAcqReqInfo.hopeSupplier.hopeSupplier.supCompanyCd"/>
        <id column="SUP_CD" property="quotAcqReqInfo.hopeSupplier.hopeSupplier.supCd"/>
        <id column="SUP_NAME" property="quotAcqReqInfo.hopeSupplier.hopeSupplier.supplierName.supplierName"/>
        <id column="SUP_ABBR_NAME" property="quotAcqReqInfo.hopeSupplier.hopeSupplier.supplierName.supplierAbbrName"/>
        <id column="SUBCON_IND" property="quotAcqReqInfo.hopeSupplier.hopeSupplier.subcon.subconInd"/>
        <id column="FOR_BUYER_COMMENT" property="quotAcqReqInfo.forBuyerComment"/> 
        <id column="FOR_SUPPRIER_COMMENT" property="quotAcqReqInfo.forSupplderComment"/>
        <id column="ATTACH_FILE_SEQ1" property="quotAcqReqInfo.rangeByAttachFile1.attachFile.seqNo"/>
        <id column="ATTACH_FILE_SEQ2" property="quotAcqReqInfo.rangeByAttachFile2.attachFile.seqNo"/> 
        <id column="ATTACH_FILE_NAME1" property="quotAcqReqInfo.rangeByAttachFile1.attachFile.fileName"/>
        <id column="ATTACH_FILE_NAME2" property="quotAcqReqInfo.rangeByAttachFile2.attachFile.fileName"/>
        <id column="ATTACH_SCOPE1" property="quotAcqReqInfo.rangeByAttachFile1.attachRange.attachRange"/>
        <id column="ATTACH_SCOPE2" property="quotAcqReqInfo.rangeByAttachFile2.attachRange.attachRange"/>
        <id column="REQ_AMOUNT_TOTAL" property="quotAcqReqInfo.hopeAmount.amount"/>
        <id column="CURRENCY_CD" property="quotAcqReqInfo.currency.currencyCd"/>
        <id column="CURRENCY_MARK" property="quotAcqReqInfo.currency.currencyMark"/>
        <id column="QUOT_REQ_SEQ" property="quotAcqReqSummary.quotReqSeqNo.seqNumber"/>
        <id column="QUOT_REQ_NO" property="quotAcqReqSummary.quotReqNo"/>
        <id column="QUOT_REQ_STATUS" property="quotAcqReqSummary.quotReqStatus"/>
        <id column="QUOT_ADO_STATUS" property="quotAcqReqSummary.quotAdoStatus"/>
        <id column="LAST_UPD_DATE" property="quotAcqReqSummary.lastUpdDate"/>
        <id column="REQ_LAST_UPD_DATE" property="lastUpdDate"/>
        <id column="PRICE_REQ_FLG" property="quotAcqReqInfo.priceRegisterFlg.priceRegisterFlg"/>

        <id column="EXT_TXT_1" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt1"/>
        <id column="EXT_TXT_2" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt2"/>
        <id column="EXT_TXT_3" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt3"/>
        <id column="EXT_TXT_4" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt4"/>
        <id column="EXT_TXT_5" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt5"/>
        <id column="EXT_TXT_6" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt6"/>
        <id column="EXT_TXT_7" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt7"/>
        <id column="EXT_TXT_8" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt8"/>
        <id column="EXT_TXT_9" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt9"/>
        <id column="EXT_TXT_10" property="quotAcqReqInfo.detailExtItem.extendTxt.extendTxt10"/>
        <id column="EXT_AREA_1" property="quotAcqReqInfo.detailExtItem.extendArea.extendArea1"/>
        <id column="EXT_AREA_2" property="quotAcqReqInfo.detailExtItem.extendArea.extendArea2"/>
        <id column="EXT_AREA_3" property="quotAcqReqInfo.detailExtItem.extendArea.extendArea3"/>
        <id column="EXT_AREA_4" property="quotAcqReqInfo.detailExtItem.extendArea.extendArea4"/>
        <id column="EXT_AREA_5" property="quotAcqReqInfo.detailExtItem.extendArea.extendArea5"/>
        <id column="EXT_DATE_1" property="quotAcqReqInfo.detailExtItem.extendDate.extendDate1.dateOfymd"/>
        <id column="EXT_DATE_2" property="quotAcqReqInfo.detailExtItem.extendDate.extendDate2.dateOfymd"/>
        <id column="EXT_DATE_3" property="quotAcqReqInfo.detailExtItem.extendDate.extendDate3.dateOfymd"/>
        <id column="EXT_DATE_4" property="quotAcqReqInfo.detailExtItem.extendDate.extendDate4.dateOfymd"/>
        <id column="EXT_DATE_5" property="quotAcqReqInfo.detailExtItem.extendDate.extendDate5.dateOfymd"/>
        <id column="EXT_INT_1" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt1.value"/>
        <id column="EXT_INT_2" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt2.value"/>
        <id column="EXT_INT_3" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt3.value"/>
        <id column="EXT_INT_4" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt4.value"/>
        <id column="EXT_INT_5" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt5.value"/>
        <id column="EXT_INT_6" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt6.value"/>
        <id column="EXT_INT_7" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt7.value"/>
        <id column="EXT_INT_8" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt8.value"/>
        <id column="EXT_INT_9" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt9.value"/>
        <id column="EXT_INT_10" property="quotAcqReqInfo.detailExtItem.extendInt.extendInt10.value"/>
        <id column="EXT_DEC_1" property="quotAcqReqInfo.detailExtItem.extendDec.extendDec1.value"/>
        <id column="EXT_DEC_2" property="quotAcqReqInfo.detailExtItem.extendDec.extendDec2.value"/>
        <id column="EXT_DEC_3" property="quotAcqReqInfo.detailExtItem.extendDec.extendDec3.value"/>
        <id column="EXT_DEC_4" property="quotAcqReqInfo.detailExtItem.extendDec.extendDec4.value"/>
        <id column="EXT_DEC_5" property="quotAcqReqInfo.detailExtItem.extendDec.extendDec5.value"/>
        <id column="EXT_SEL_1" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel1"/>
        <id column="EXT_SEL_2" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel2"/>
        <id column="EXT_SEL_3" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel3"/>
        <id column="EXT_SEL_4" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel4"/>
        <id column="EXT_SEL_5" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel5"/>
        <id column="EXT_SEL_6" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel6"/>
        <id column="EXT_SEL_7" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel7"/>
        <id column="EXT_SEL_8" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel8"/>
        <id column="EXT_SEL_9" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel9"/>
        <id column="EXT_SEL_10" property="quotAcqReqInfo.detailExtItem.extendSel.extendSel10"/>
        <id column="EXT_CHK_1" property="quotAcqReqInfo.detailExtItem.extendChk.extendChk1"/>
        <id column="EXT_CHK_2" property="quotAcqReqInfo.detailExtItem.extendChk.extendChk2"/>
        <id column="EXT_CHK_3" property="quotAcqReqInfo.detailExtItem.extendChk.extendChk3"/>
        <id column="EXT_CHK_4" property="quotAcqReqInfo.detailExtItem.extendChk.extendChk4"/>
        <id column="EXT_CHK_5" property="quotAcqReqInfo.detailExtItem.extendChk.extendChk5"/>
        <id column="EXT_FILE_1" property="quotAcqReqInfo.detailExtItem.extendFile.extendFile1.fileName"/>
        <id column="EXT_FILE_2" property="quotAcqReqInfo.detailExtItem.extendFile.extendFile2.fileName"/>
        <id column="EXT_FILE_3" property="quotAcqReqInfo.detailExtItem.extendFile.extendFile3.fileName"/>
        <id column="EXT_FILE_BINARY_1" property="quotAcqReqInfo.detailExtItem.extendFile.extendFile1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="quotAcqReqInfo.detailExtItem.extendFile.extendFile2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="quotAcqReqInfo.detailExtItem.extendFile.extendFile3.binary"/>
        <id column="EXT_MST_1" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst1.mstKey"/>
        <id column="EXT_MST_2" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst2.mstKey"/>
        <id column="EXT_MST_3" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst3.mstKey"/>
        <id column="EXT_MST_4" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst4.mstKey"/>
        <id column="EXT_MST_5" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst5.mstKey"/>
        <id column="EXT_MST_6" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst6.mstKey"/>
        <id column="EXT_MST_7" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst7.mstKey"/>
        <id column="EXT_MST_8" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst8.mstKey"/>
        <id column="EXT_MST_NAME_1" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst1.mstName"/>
        <id column="EXT_MST_NAME_2" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst2.mstName"/>
        <id column="EXT_MST_NAME_3" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst3.mstName"/>
        <id column="EXT_MST_NAME_4" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst4.mstName"/>
        <id column="EXT_MST_NAME_5" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst5.mstName"/>
        <id column="EXT_MST_NAME_6" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst6.mstName"/>
        <id column="EXT_MST_NAME_7" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst7.mstName"/>
        <id column="EXT_MST_NAME_8" property="quotAcqReqInfo.detailExtItem.extendMst.extendMst8.mstName"/>
    </resultMap>
    <select id="searchQuotAcqApl" resultMap="QuotAcqApl_Map">
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO,
            T_QUOT_ACQ_APL.URGENT_IND,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS,
            T_QUOT_ACQ_APL.REQ_COMPANY_CD,
            T_QUOT_ACQ_APL.REQ_SECTION_CD,
            T_QUOT_ACQ_APL.REQ_SECTION_NAME,
            T_QUOT_ACQ_APL.REQ_USER_EXTENSION_NO,
            T_QUOT_ACQ_APL.REQ_USER_TEL_NO,
            T_QUOT_ACQ_APL.REQ_USER_ID,
            T_QUOT_ACQ_APL.REQ_USER_NAME,
            T_QUOT_ACQ_APL.REQ_DATE,
            T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE,
            T_QUOT_ACQ_APL.DELIV_PLACE_CD,
            T_QUOT_ACQ_APL.DELIV_PLACE_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME,
            T_QUOT_ACQ_APL.TITLE_NAME,
            T_QUOT_ACQ_APL.SUP_COMPANY_CD,
            T_QUOT_ACQ_APL.SUP_CD,
            T_QUOT_ACQ_APL.SUP_NAME,
            T_QUOT_ACQ_APL.SUP_ABBR_NAME,
            T_QUOT_ACQ_APL.FOR_BUYER_COMMENT,
            T_QUOT_ACQ_APL.FOR_SUPPRIER_COMMENT,
            T_QUOT_ACQ_APL.ATTACH_FILE_SEQ1,
            T_QUOT_ACQ_APL.ATTACH_FILE_SEQ2,
            T_QUOT_ACQ_APL.LAST_UPD_DATE,
            T_ATTACH_MNG_A.ATTACH_FILE_NAME AS ATTACH_FILE_NAME1,
            T_ATTACH_MNG_B.ATTACH_FILE_NAME AS ATTACH_FILE_NAME2,
            T_ATTACH_MNG_A.ATTACH_SCOPE AS ATTACH_SCOPE1,
            T_ATTACH_MNG_B.ATTACH_SCOPE AS ATTACH_SCOPE2,
            T_QUOT_REQUEST.QUOT_REQ_NO,
            T_QUOT_REQUEST.QUOT_REQ_SEQ,
            T_QUOT_REQUEST.QUOT_REQ_STATUS,
            T_QUOT_REQUEST.QUOT_ADO_STATUS,
            T_QUOT_REQUEST.LAST_UPD_DATE AS REQ_LAST_UPD_DATE,
            T_QUOT_ACQ_REQUEST_TOTAL.REQ_AMOUNT_TOTAL,
            T_QUOT_ACQ_APL.PRICE_REQ_FLG,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_APL")}
        FROM T_QUOT_ACQ_APL
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_A
            ON T_QUOT_ACQ_APL.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_A.DELETE_FLG = '0'
        LEFT JOIN T_ATTACH_MNG T_ATTACH_MNG_B
            ON T_QUOT_ACQ_APL.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        LEFT JOIN T_QUOT_REQUEST
            ON T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = T_QUOT_REQUEST.QUOT_ACQ_APL_NO
            AND T_QUOT_REQUEST.NEW_FLG = '1'
            AND T_QUOT_REQUEST.DELETE_FLG = '0'
        LEFT JOIN (
            SELECT SUM(T_QUOT_ACQ_REQUEST.REQ_AMOUNT) AS REQ_AMOUNT_TOTAL,
                T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ  
            FROM T_QUOT_ACQ_REQUEST 
            WHERE T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq} 
            GROUP BY T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        ) T_QUOT_ACQ_REQUEST_TOTAL 
            ON T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST_TOTAL.QUOT_ACQ_APL_SEQ
        WHERE T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
        UNION ALL
        SELECT 
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO,
            T_QUOT_ACQ_APL.URGENT_IND,
            T_QUOT_ACQ_APL.QUOT_ACQ_APL_STATUS,
            T_QUOT_ACQ_APL.REQ_COMPANY_CD,
            T_QUOT_ACQ_APL.REQ_SECTION_CD,
            T_QUOT_ACQ_APL.REQ_SECTION_NAME,
            T_QUOT_ACQ_APL.REQ_USER_EXTENSION_NO,
            T_QUOT_ACQ_APL.REQ_USER_TEL_NO,
            T_QUOT_ACQ_APL.REQ_USER_ID,
            T_QUOT_ACQ_APL.REQ_USER_NAME,
            T_QUOT_ACQ_APL.REQ_DATE,
            T_QUOT_ACQ_APL.QUOT_REQ_RESP_LIMIT_DATE,
            T_QUOT_ACQ_APL.DELIV_PLACE_CD,
            T_QUOT_ACQ_APL.DELIV_PLACE_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_L_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_M_NAME,
            T_QUOT_ACQ_APL.ITEM_CLASS_S_NAME,
            T_QUOT_ACQ_APL.TITLE_NAME,
            T_QUOT_ACQ_APL.SUP_COMPANY_CD,
            T_QUOT_ACQ_APL.SUP_CD,
            T_QUOT_ACQ_APL.SUP_NAME,
            T_QUOT_ACQ_APL.SUP_ABBR_NAME,
            T_QUOT_ACQ_APL.FOR_BUYER_COMMENT,
            T_QUOT_ACQ_APL.FOR_SUPPRIER_COMMENT,
            T_QUOT_ACQ_APL.ATTACH_FILE_SEQ1,
            T_QUOT_ACQ_APL.ATTACH_FILE_SEQ2,
            T_QUOT_ACQ_APL.LAST_UPD_DATE,
            T_ATTACH_MNG_A.ATTACH_FILE_NAME AS ATTACH_FILE_NAME1,
            T_ATTACH_MNG_B.ATTACH_FILE_NAME AS ATTACH_FILE_NAME2,
            T_ATTACH_MNG_A.ATTACH_SCOPE AS ATTACH_SCOPE1,
            T_ATTACH_MNG_B.ATTACH_SCOPE AS ATTACH_SCOPE2,
            T_QUOT_REQUEST.QUOT_REQ_NO,
            T_QUOT_REQUEST.QUOT_REQ_SEQ,
            T_QUOT_REQUEST.QUOT_REQ_STATUS,
            T_QUOT_REQUEST.QUOT_ADO_STATUS,
            T_QUOT_REQUEST.LAST_UPD_DATE AS REQ_LAST_UPD_DATE,
            T_QUOT_ACQ_REQUEST_TOTAL.REQ_AMOUNT_TOTAL,
            T_QUOT_ACQ_APL.PRICE_REQ_FLG,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_APL")}
        FROM H_QUOT_ACQ_APL T_QUOT_ACQ_APL
        LEFT JOIN H_ATTACH_MNG T_ATTACH_MNG_A
            ON T_QUOT_ACQ_APL.ATTACH_FILE_SEQ1 = T_ATTACH_MNG_A.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_A.DELETE_FLG = '0'
        LEFT JOIN H_ATTACH_MNG T_ATTACH_MNG_B
            ON T_QUOT_ACQ_APL.ATTACH_FILE_SEQ2 = T_ATTACH_MNG_B.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG_B.DELETE_FLG = '0'
        LEFT JOIN H_QUOT_REQUEST T_QUOT_REQUEST
            ON T_QUOT_ACQ_APL.QUOT_ACQ_APL_NO = T_QUOT_REQUEST.QUOT_ACQ_APL_NO
            AND T_QUOT_REQUEST.NEW_FLG = '1'
            AND T_QUOT_REQUEST.DELETE_FLG = '0'
        LEFT JOIN (
            SELECT SUM(T_QUOT_ACQ_REQUEST.REQ_AMOUNT) AS REQ_AMOUNT_TOTAL,
                T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ  
            FROM H_QUOT_ACQ_REQUEST T_QUOT_ACQ_REQUEST
            WHERE T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq} 
            GROUP BY T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        ) T_QUOT_ACQ_REQUEST_TOTAL 
            ON T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST_TOTAL.QUOT_ACQ_APL_SEQ
        WHERE T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
    </select>

    <!-- 見積取得依頼情報取得SQL -->
    <resultMap type="fw.domain.slip.quot.quotstatus.quotreqstatuslist.QuotAcqReqInfoItem" id="QuotAcqRequest_Map">
        <id column="ITEM_CD" property="itemCd"/>
        <id column="ITEM_NAME" property="itemName"/>
        <id column="KATASHIKI" property="katashiki"/>
        <id column="MANUFACT_CD" property="manufact.manufactCd"/>
        <id column="MANUFACT_NAME" property="manufact.manufactName"/>
        <id column="CURRENCY_CD" property="currency.currencyCd"/>
        <id column="REQ_VOL" property="hopeVol.hopeVol.vol"/>
        <id column="UNIT_NAME" property="unitName"/> 
        <id column="UNIT_PRICE" property="hopePrice.hopePrice.amount"/>
        <id column="REQ_AMOUNT" property="hopeAmount.hopeAmount.amount"/>
        <id column="REQ_DELIV_DATE" property="hopeDlvEst.hopeDlvEst.dateOfymd"/>
        <id column="ATTACH_FILE_SEQ" property="rangeByAttachFile.attachFile.seqNo"/>
        <id column="ATTACH_FILE_NAME" property="rangeByAttachFile.attachFile.fileName"/>
        <id column="ATTACH_SCOPE" property="rangeByAttachFile.attachRange.attachRange"/>

        <id column="EXT_TXT_1" property="detailExtItem.extendTxt.extendTxt1" />
        <id column="EXT_TXT_2" property="detailExtItem.extendTxt.extendTxt2" />
        <id column="EXT_TXT_3" property="detailExtItem.extendTxt.extendTxt3" />
        <id column="EXT_TXT_4" property="detailExtItem.extendTxt.extendTxt4" />
        <id column="EXT_TXT_5" property="detailExtItem.extendTxt.extendTxt5" />
        <id column="EXT_TXT_6" property="detailExtItem.extendTxt.extendTxt6" />
        <id column="EXT_TXT_7" property="detailExtItem.extendTxt.extendTxt7" />
        <id column="EXT_TXT_8" property="detailExtItem.extendTxt.extendTxt8" />
        <id column="EXT_TXT_9" property="detailExtItem.extendTxt.extendTxt9" />
        <id column="EXT_TXT_10" property="detailExtItem.extendTxt.extendTxt10" />
        <id column="EXT_AREA_1" property="detailExtItem.extendArea.extendArea1" />
        <id column="EXT_AREA_2" property="detailExtItem.extendArea.extendArea2" />
        <id column="EXT_AREA_3" property="detailExtItem.extendArea.extendArea3" />
        <id column="EXT_AREA_4" property="detailExtItem.extendArea.extendArea4" />
        <id column="EXT_AREA_5" property="detailExtItem.extendArea.extendArea5" />
        <id column="EXT_DATE_1" property="detailExtItem.extendDate.extendDate1.dateOfymd" />
        <id column="EXT_DATE_2" property="detailExtItem.extendDate.extendDate2.dateOfymd" />
        <id column="EXT_DATE_3" property="detailExtItem.extendDate.extendDate3.dateOfymd" />
        <id column="EXT_DATE_4" property="detailExtItem.extendDate.extendDate4.dateOfymd" />
        <id column="EXT_DATE_5" property="detailExtItem.extendDate.extendDate5.dateOfymd" />
        <id column="EXT_INT_1" property="detailExtItem.extendInt.extendInt1.value" />
        <id column="EXT_INT_2" property="detailExtItem.extendInt.extendInt2.value" />
        <id column="EXT_INT_3" property="detailExtItem.extendInt.extendInt3.value" />
        <id column="EXT_INT_4" property="detailExtItem.extendInt.extendInt4.value" />
        <id column="EXT_INT_5" property="detailExtItem.extendInt.extendInt5.value" />
        <id column="EXT_INT_6" property="detailExtItem.extendInt.extendInt6.value" />
        <id column="EXT_INT_7" property="detailExtItem.extendInt.extendInt7.value" />
        <id column="EXT_INT_8" property="detailExtItem.extendInt.extendInt8.value" />
        <id column="EXT_INT_9" property="detailExtItem.extendInt.extendInt9.value" />
        <id column="EXT_INT_10" property="detailExtItem.extendInt.extendInt10.value" />
        <id column="EXT_DEC_1" property="detailExtItem.extendDec.extendDec1.value" />
        <id column="EXT_DEC_2" property="detailExtItem.extendDec.extendDec2.value" />
        <id column="EXT_DEC_3" property="detailExtItem.extendDec.extendDec3.value" />
        <id column="EXT_DEC_4" property="detailExtItem.extendDec.extendDec4.value" />
        <id column="EXT_DEC_5" property="detailExtItem.extendDec.extendDec5.value" />
        <id column="EXT_SEL_1" property="detailExtItem.extendSel.extendSel1" />
        <id column="EXT_SEL_2" property="detailExtItem.extendSel.extendSel2" />
        <id column="EXT_SEL_3" property="detailExtItem.extendSel.extendSel3" />
        <id column="EXT_SEL_4" property="detailExtItem.extendSel.extendSel4" />
        <id column="EXT_SEL_5" property="detailExtItem.extendSel.extendSel5" />
        <id column="EXT_SEL_6" property="detailExtItem.extendSel.extendSel6" />
        <id column="EXT_SEL_7" property="detailExtItem.extendSel.extendSel7" />
        <id column="EXT_SEL_8" property="detailExtItem.extendSel.extendSel8" />
        <id column="EXT_SEL_9" property="detailExtItem.extendSel.extendSel9" />
        <id column="EXT_SEL_10" property="detailExtItem.extendSel.extendSel10" />
        <id column="EXT_CHK_1" property="detailExtItem.extendChk.extendChk1" />
        <id column="EXT_CHK_2" property="detailExtItem.extendChk.extendChk2" />
        <id column="EXT_CHK_3" property="detailExtItem.extendChk.extendChk3" />
        <id column="EXT_CHK_4" property="detailExtItem.extendChk.extendChk4" />
        <id column="EXT_CHK_5" property="detailExtItem.extendChk.extendChk5" />
        <id column="EXT_FILE_1" property="detailExtItem.extendFile.extendFile1.fileName" />
        <id column="EXT_FILE_2" property="detailExtItem.extendFile.extendFile2.fileName" />
        <id column="EXT_FILE_3" property="detailExtItem.extendFile.extendFile3.fileName" />
        <id column="EXT_FILE_BINARY_1" property="detailExtItem.extendFile.extendFile1.binary"/>
        <id column="EXT_FILE_BINARY_2" property="detailExtItem.extendFile.extendFile2.binary"/>
        <id column="EXT_FILE_BINARY_3" property="detailExtItem.extendFile.extendFile3.binary"/>
        <id column="EXT_MST_1" property="detailExtItem.extendMst.extendMst1.mstKey" />
        <id column="EXT_MST_2" property="detailExtItem.extendMst.extendMst2.mstKey" />
        <id column="EXT_MST_3" property="detailExtItem.extendMst.extendMst3.mstKey" />
        <id column="EXT_MST_4" property="detailExtItem.extendMst.extendMst4.mstKey" />
        <id column="EXT_MST_5" property="detailExtItem.extendMst.extendMst5.mstKey" />
        <id column="EXT_MST_6" property="detailExtItem.extendMst.extendMst6.mstKey" />
        <id column="EXT_MST_7" property="detailExtItem.extendMst.extendMst7.mstKey" />
        <id column="EXT_MST_8" property="detailExtItem.extendMst.extendMst8.mstKey" />    
        <id column="EXT_MST_NAME_1" property="detailExtItem.extendMst.extendMst1.mstName"/>
        <id column="EXT_MST_NAME_2" property="detailExtItem.extendMst.extendMst2.mstName"/>
        <id column="EXT_MST_NAME_3" property="detailExtItem.extendMst.extendMst3.mstName"/>
        <id column="EXT_MST_NAME_4" property="detailExtItem.extendMst.extendMst4.mstName"/>
        <id column="EXT_MST_NAME_5" property="detailExtItem.extendMst.extendMst5.mstName"/>
        <id column="EXT_MST_NAME_6" property="detailExtItem.extendMst.extendMst6.mstName"/>
        <id column="EXT_MST_NAME_7" property="detailExtItem.extendMst.extendMst7.mstName"/>
        <id column="EXT_MST_NAME_8" property="detailExtItem.extendMst.extendMst8.mstName"/>

        <result column="SLIP_NO" property="exclusiveSlipId.slipNo"/>
        <result column="LAST_UPD_DATE" property="exclusiveSlipId.lastUpdDate"/>
    </resultMap>
    <select id="searchQuotAcqRequest" resultMap="QuotAcqRequest_Map">
        SELECT 
            T_QUOT_ACQ_REQUEST.ITEM_CD,
            T_QUOT_ACQ_REQUEST.ITEM_NAME,
            T_QUOT_ACQ_REQUEST.KATASHIKI,
            T_QUOT_ACQ_REQUEST.MANUFACT_CD,
            T_QUOT_ACQ_REQUEST.MANUFACT_NAME,
            T_QUOT_ACQ_REQUEST.CURRENCY_CD,
            T_QUOT_ACQ_REQUEST.REQ_VOL,
            T_QUOT_ACQ_REQUEST.UNIT_NAME,
            T_QUOT_ACQ_REQUEST.UNIT_PRICE,
            T_QUOT_ACQ_REQUEST.REQ_AMOUNT,
            T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE,
            T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ,
            T_ATTACH_MNG.ATTACH_FILE_NAME,
            T_ATTACH_MNG.ATTACH_SCOPE,
            T_SLIP_MNG.SLIP_NO,
            T_SLIP_MNG.LAST_UPD_DATE,
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_REQUEST")}
        FROM T_QUOT_ACQ_APL
        LEFT JOIN T_QUOT_ACQ_REQUEST
            ON T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        INNER JOIN T_SLIP_MNG ON
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO = T_SLIP_MNG.SLIP_NO
        LEFT JOIN T_ATTACH_MNG
            ON T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ = T_ATTACH_MNG.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG.DELETE_FLG = '0'
        WHERE T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
            AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
        UNION ALL
        SELECT 
            T_QUOT_ACQ_REQUEST.ITEM_CD,
            T_QUOT_ACQ_REQUEST.ITEM_NAME,
            T_QUOT_ACQ_REQUEST.KATASHIKI,
            T_QUOT_ACQ_REQUEST.MANUFACT_CD,
            T_QUOT_ACQ_REQUEST.MANUFACT_NAME,
            T_QUOT_ACQ_REQUEST.CURRENCY_CD,
            T_QUOT_ACQ_REQUEST.REQ_VOL,
            T_QUOT_ACQ_REQUEST.UNIT_NAME,
            T_QUOT_ACQ_REQUEST.UNIT_PRICE,
            T_QUOT_ACQ_REQUEST.REQ_AMOUNT,
            T_QUOT_ACQ_REQUEST.REQ_DELIV_DATE,
            T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ,
            T_ATTACH_MNG.ATTACH_FILE_NAME,
            T_ATTACH_MNG.ATTACH_SCOPE,
            T_SLIP_MNG.SLIP_NO,
            T_SLIP_MNG.LAST_UPD_DATE,
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO,
            ${@ps.common.util.ItemSettingUtil@getItemSettingSelectSQL("T_QUOT_ACQ_REQUEST")}
        FROM H_QUOT_ACQ_APL T_QUOT_ACQ_APL
        LEFT JOIN H_QUOT_ACQ_REQUEST T_QUOT_ACQ_REQUEST
            ON T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_SEQ
        INNER JOIN H_SLIP_MNG T_SLIP_MNG ON
            T_QUOT_ACQ_REQUEST.QUOT_ACQ_APL_DTL_NO = T_SLIP_MNG.SLIP_NO
        LEFT JOIN H_ATTACH_MNG T_ATTACH_MNG
            ON T_QUOT_ACQ_REQUEST.ATTACH_FILE_SEQ = T_ATTACH_MNG.ATTACH_FILE_SEQ
            AND T_ATTACH_MNG.DELETE_FLG = '0'
        WHERE T_QUOT_ACQ_APL.QUOT_ACQ_APL_SEQ = #{quotAcqAplSeq}
            AND T_QUOT_ACQ_REQUEST.DELETE_FLG = '0'
        ORDER BY QUOT_ACQ_APL_DTL_NO
    </select>

    <!-- 見積回答情報取得SQL -->
    <resultMap type="fw.domain.slip.quot.quotresp.quotrespdetail.QuotSupplierResp" id="QuotReqSup_Map">
        <id column="QUOT_RESP_SEQ" property="quotRespSeqNo"/>
        <id column="QUOT_WITHDRAW_ID" property="status"/>
        <id column="RESP_CONF_FLG" property="respConfFlg"/>
        <id column="QUOT_ADO_IND" property="ado"/>
        <id column="RESP_OPEN_FLG" property="respOpen"/>
        <id column="QUOT_RESP_END_DATE" property="quotEndDate.dateOfymd"/>
        <id column="QUOT_RESP_DATE" property="respDate.dateOfymd"/>
        <id column="QUOT_RESP_COMMENT" property="respComments"/>
        <id column="QUOT_SUP_LINE_NO" property="quotSupplierLineNo"/>
        <id column="QUOT_SUP_STATUS" property="quotReqSupplierStatus"/>
        <id column="CORRECT_CD" property="correctCd"/>
        <id column="EDI_IND" property="ediInd"/>
        <id column="QUOT_REQ_SEND_IND" property="dataInd.quotReqSendInd.sendInd"/>
        <id column="SUP_CD" property="supplier.supCd"/>
        <id column="SUP_ABBR_NAME" property="supplier.supplierName.supplierAbbrName"/>
        <id column="SUP_NAME" property="supplier.supplierName.supplierName"/>
        <id column="SUBCON_IND" property="supplier.subcon.subconInd"/>
        <id column="QUOT_REQ_DATE" property="quotReqDate.dateOfymd"/>
        <id column="QUOT_RESP_AMOUNT_TOTAL" property="respAmount.amount"/> 
        <id column="CURRENCY_CD" property="currency.currencyCd"/>
        <id column="CURRENCY_MARK" property="currency.currencyMark"/>
        <id column="RESP_LAST_UPD_DATE" property="lastUpdDate"/>
        <id column="SUP_LAST_UPD_DATE" property="supLastUpdDate"/>
    </resultMap>
    <select id="searchQuotReqSupList" resultMap="QuotReqSup_Map">
        SELECT 
            T_QUOT_RESPONSE.QUOT_RESP_SEQ,
            T_QUOT_RESPONSE.QUOT_WITHDRAW_ID,
            T_QUOT_RESPONSE.RESP_CONF_FLG,
            T_QUOT_RESPONSE.QUOT_ADO_IND,
            T_QUOT_RESPONSE.RESP_OPEN_FLG,
            T_QUOT_RESPONSE.QUOT_RESP_END_DATE,
            T_QUOT_RESPONSE.QUOT_RESP_DATE,
            T_QUOT_RESPONSE.QUOT_RESP_COMMENT,
            T_QUOT_RESPONSE.LAST_UPD_DATE AS RESP_LAST_UPD_DATE,
            T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO,
            T_QUOT_REQ_SUP.QUOT_SUP_STATUS,
            T_QUOT_REQ_SUP.CORRECT_CD,
            T_QUOT_REQ_SUP.EDI_IND,
            T_QUOT_REQ_SUP.QUOT_REQ_SEND_IND,
            T_QUOT_REQ_SUP.SUP_CD,
            T_QUOT_REQ_SUP.SUP_NAME,
            T_QUOT_REQ_SUP.SUP_ABBR_NAME,
            T_QUOT_REQ_SUP.SUBCON_IND,
            T_QUOT_REQ_SUP.QUOT_REQ_DATE,
            T_QUOT_REQ_SUP.LAST_UPD_DATE AS SUP_LAST_UPD_DATE,
            T_QUOT_RESP_DTL_TOTAL.QUOT_RESP_AMOUNT_TOTAL
        FROM T_QUOT_REQ_SUP
        LEFT JOIN T_QUOT_RESPONSE 
            ON T_QUOT_REQ_SUP.QUOT_REQ_NO = T_QUOT_RESPONSE.QUOT_REQ_NO
            AND T_QUOT_REQ_SUP.QUOT_REQ_VERSION = T_QUOT_RESPONSE.QUOT_REQ_VERSION
            AND T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO = T_QUOT_RESPONSE.QUOT_SUP_LINE_NO
            AND T_QUOT_RESPONSE.DELETE_FLG = '0'
        LEFT JOIN (
            SELECT 
                SUM(T_QUOT_RESP_DTL.QUOT_RESP_AMOUNT) AS QUOT_RESP_AMOUNT_TOTAL,
                T_QUOT_RESP_DTL.QUOT_RESP_SEQ  
            FROM T_QUOT_RESP_DTL 
            GROUP BY T_QUOT_RESP_DTL.QUOT_RESP_SEQ
        ) T_QUOT_RESP_DTL_TOTAL 
            ON T_QUOT_RESPONSE.QUOT_RESP_SEQ = T_QUOT_RESP_DTL_TOTAL.QUOT_RESP_SEQ
        WHERE T_QUOT_REQ_SUP.QUOT_REQ_SEQ = #{quotReqSeq}
        AND T_QUOT_REQ_SUP.DELETE_FLG = '0'
        AND T_QUOT_RESPONSE.RESP_OPEN_FLG = '1'
        UNION ALL
        SELECT 
            T_QUOT_RESPONSE.QUOT_RESP_SEQ,
            T_QUOT_RESPONSE.QUOT_WITHDRAW_ID,
            T_QUOT_RESPONSE.RESP_CONF_FLG,
            T_QUOT_RESPONSE.QUOT_ADO_IND,
            T_QUOT_RESPONSE.RESP_OPEN_FLG,
            T_QUOT_RESPONSE.QUOT_RESP_END_DATE,
            T_QUOT_RESPONSE.QUOT_RESP_DATE,
            T_QUOT_RESPONSE.QUOT_RESP_COMMENT,
            T_QUOT_RESPONSE.LAST_UPD_DATE AS RESP_LAST_UPD_DATE,
            T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO,
            T_QUOT_REQ_SUP.QUOT_SUP_STATUS,
            T_QUOT_REQ_SUP.CORRECT_CD,
            T_QUOT_REQ_SUP.EDI_IND,
            T_QUOT_REQ_SUP.QUOT_REQ_SEND_IND,
            T_QUOT_REQ_SUP.SUP_CD,
            T_QUOT_REQ_SUP.SUP_NAME,
            T_QUOT_REQ_SUP.SUP_ABBR_NAME,
            T_QUOT_REQ_SUP.SUBCON_IND,
            T_QUOT_REQ_SUP.QUOT_REQ_DATE,
            T_QUOT_REQ_SUP.LAST_UPD_DATE AS SUP_LAST_UPD_DATE,
            T_QUOT_RESP_DTL_TOTAL.QUOT_RESP_AMOUNT_TOTAL
        FROM H_QUOT_REQ_SUP T_QUOT_REQ_SUP
        LEFT JOIN H_QUOT_RESPONSE T_QUOT_RESPONSE 
            ON T_QUOT_REQ_SUP.QUOT_REQ_NO = T_QUOT_RESPONSE.QUOT_REQ_NO
            AND T_QUOT_REQ_SUP.QUOT_REQ_VERSION = T_QUOT_RESPONSE.QUOT_REQ_VERSION
            AND T_QUOT_REQ_SUP.QUOT_SUP_LINE_NO = T_QUOT_RESPONSE.QUOT_SUP_LINE_NO 
            AND T_QUOT_RESPONSE.DELETE_FLG = '0'
        LEFT JOIN (
            SELECT 
                SUM(T_QUOT_RESP_DTL.QUOT_RESP_AMOUNT) AS QUOT_RESP_AMOUNT_TOTAL,
                T_QUOT_RESP_DTL.QUOT_RESP_SEQ  
            FROM H_QUOT_RESP_DTL T_QUOT_RESP_DTL
            GROUP BY T_QUOT_RESP_DTL.QUOT_RESP_SEQ
        ) T_QUOT_RESP_DTL_TOTAL 
            ON T_QUOT_RESPONSE.QUOT_RESP_SEQ = T_QUOT_RESP_DTL_TOTAL.QUOT_RESP_SEQ
        WHERE T_QUOT_REQ_SUP.QUOT_REQ_SEQ = #{quotReqSeq}
            AND T_QUOT_REQ_SUP.DELETE_FLG = '0'
            AND T_QUOT_RESPONSE.RESP_OPEN_FLG = '1'
        ORDER BY QUOT_SUP_LINE_NO
    </select>

    <select id="searchPurAplCount" resultType="int">
    SELECT COUNT(PUR_APL_SEQ) 
    FROM (
        SELECT T_PUR_APL.PUR_APL_SEQ
        FROM T_PUR_APL 
        LEFT JOIN T_QUOT_REQUEST
            ON T_PUR_APL.PUR_APL_NO = T_QUOT_REQUEST.QUOT_REQ_NO
        WHERE T_QUOT_REQUEST.QUOT_REQ_SEQ = #{quotReqSeq} 
            AND T_PUR_APL.DELETE_FLG = '0' 
        UNION ALL
        SELECT T_PUR_APL.PUR_APL_SEQ
        FROM H_PUR_APL T_PUR_APL
        LEFT JOIN H_QUOT_REQUEST T_QUOT_REQUEST
            ON T_PUR_APL.PUR_APL_NO = T_QUOT_REQUEST.QUOT_REQ_NO
        WHERE T_QUOT_REQUEST.QUOT_REQ_SEQ = #{quotReqSeq} 
            AND T_PUR_APL.DELETE_FLG = '0' 
    )
    </select>

    <!-- ダウンロードSQLヘッダ -->
    <sql id="downloadHeader">
       SELECT * FROM (
    </sql>
    <!-- ダウンロードSQLフッタ -->
    <sql id="downloadFooter">
        ) WHERE  ROWNUM &lt;=${@fw.common.util.PropertiesUtil@getLong("DOWNLOAD_MAXCNT")}
    </sql>

</mapper>